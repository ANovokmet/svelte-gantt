<p>This is a top-level element.</p>
<Grid
	bind:rows=rows
	dependencies={dependencies}
/>

<script>
	import Grid from './Grid.html';
    import moment from "../node_modules/moment/src/moment.js";
    import { Store } from 'svelte/store.js';

	let startOfToday = moment().startOf('day')

    const store = new Store({
				from: startOfToday,
				to: moment().endOf('day'),
				width: 800,
				height: 400,
				magnetOffset: 15,
				magnetUnit: 'minute',
				headerHeight: 100,
				headers: [{unit: 'day', format: 'DD.MM.YYYY'}, {unit: 'hour', format: 'HH'}],
				rowHeight: 24
	});



	let data = {
		rows: [],
		dependencies: []
	}

	for(let i = 0; i < 50; i++){
		data.rows.push({
			label: 'Row #'+i,
			tasks: [
				{
					id: i,
					label: 'Task #'+i,
					from: startOfToday.clone().set({'hour': 9, 'minute': 0}),
					to: startOfToday.clone().set({'hour': 12, 'minute': 0})
				}
			]
		});
	}

	data.dependencies.push({fromTask: data.rows[0].tasks[0], toTask: data.rows[1].tasks[0] });

	store.set({rows: data.rows});

	export default {
		components: {
			Grid
		},
		oncreate(){
		},
		data() {
			return data
		},
		store: () => store
	};
</script>
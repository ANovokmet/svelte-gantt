<div class="dependency" style="left:{0}px;top:{0}px;">
    <Arrow 
        {startX}
        {startY}
        {endX}
        {endY}/>
</div>

<style>
    .dependency {
		position: absolute;     
        width:100%;
        height: 100%;
	}
</style>
<script>
    import Arrow from './Arrow.html';

    export default {
        components: { Arrow },
        oncreate() { 
            const { dependency } = this.get();
            if(!dependency) {
                //todo make less confusing
                //debugger;
                return;
            }
            this.set({ 
                startX: dependency.startX,
                startY: dependency.startY,
                endX: dependency.endX,
                endY: dependency.endY
            });

            const { fromTask, toTask } = dependency//this.get();
            fromTask.subscribe(this);
            toTask.subscribe(this);


        },
        ondestroy() {
            const { dependency } = this.get();
            const { fromTask, toTask } =  dependency//this.get();
            fromTask.unsubscribe(this);
            toTask.unsubscribe(this);
        },
        data() {
            return {
                startX: 0,
                startY: 0,
                endX: 100,
                endY: 100
            }
        },
        methods: {
            update() {
                const { dependency } = this.get();
                const result = dependency.update();
                this.set(result);
            }
        }
    };
</script>
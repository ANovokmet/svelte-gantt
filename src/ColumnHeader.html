<div class="column-header-row" style="width:{width}px">
    {#each headers as header}
        <div class="column-header" style="width:{header.width}px">
            {header.label || 'N/A'}
        </div>
    {/each}
</div>
<style>
    .column-header-row {
        box-sizing: border-box;
        white-space: nowrap;
        overflow: hidden;

        height: 32px;
    }

    .column-header {
        position: relative;
        display: inline-block;
        height: 100%;
        box-sizing: border-box;
        text-overflow: clip;
        /* vertical-align: top; */
        text-align: center;

        display: inline-flex;
        justify-content: center;
        align-items: center;
        font-size: 1em;    
        font-size: 14px;
        font-weight: 300;
        transition: background 0.2s;
    }

    .column-header:hover {
        background: #f9f9f9;
    }
    
</style>
<script>
    export default {
        oncreate() {
            this.initHeaders();
        },
        onupdate({ changed, current, previous }){
            if(previous != null){
                this.initHeaders();
            }
        },
        methods: {
            initHeaders() {
                this.root.initGantt();
                const { header } = this.get();
                const { from, width, gantt } = this.store.get();
                const columnWidth = gantt.utils.getPositionByDate(from.clone().add(1, header.unit));
                const columnCount = Math.ceil(width / columnWidth) 

                const headers = [];
                let headerTime = from.clone();

                for(let i=0; i< columnCount; i++){
                    headers.push({width: columnWidth, label: headerTime.format(header.format)});
                    headerTime.add(1, header.unit);
                }

                this.set({headers});
            }
        },
        data(){
            return {
                headers: [],
                width: null
            }
        }
    };
</script>
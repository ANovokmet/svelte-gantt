<div class="row" ref:row style="height:{$rowHeight}px">
    {#each row.tasks as task (task.id)}
        <Task   row={row}
                task={task}  
                on:updateVisibleRows 
                on:taskMoved="moved()"
                on:taskMovedRow="moved()"
                on:taskResized="moved()"/>
    {/each}
</div>
<style>
    .row {
        position: relative;
        width: 100%;
        border-bottom: #efefef 1px solid;
        box-sizing: border-box;
    }
</style>
<script>
        import Task from './Task.html';
    
        export default {
            components: { Task },
            oncreate() {
                const { row } = this.get();
                row.rowElement = this.refs.row;


                this.on('update', ({ changed, current, previous }) => {
                    
                    const { row } = this.get();
                    row.rowElement = this.refs.row;
                    row.component = this;
                    console.log('update row', row.id);
                });
            },
            methods: {
                moved() {
                    console.log('WAT WAT')
                    const { row } = this.get();
                    this.set({ row });
                }
            },
            
        };
</script>
var si=Object.defineProperty;var ii=(s,e,t)=>e in s?si(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Y=(s,e,t)=>(ii(s,typeof e!="symbol"?e+"":e,t),t);import{s as Ye,f as W,a as ne,g as P,h as I,c as se,d as m,j as D,k as R,H as V,i as H,r as O,I as nt,J as li,v as pe,w as rn,G as ce,D as U,K as rt,L as at,u as Je,l as ct,m as ut,n as ft,E as ae,e as j,M as oi,N as st,x as zt,O as on,P as Mn,Q as Hn,R as zn,S as Wn,T as Et,o as an,U as ri,V as it,W as ai,q as Xt,t as nn,p as pt,y as ci,A as ui,B as fi,C as hi,X as Gt,Y as Pn,F as di}from"../chunks/scheduler.bd64f757.js";import{S as Oe,i as Le,a as F,g as Ue,c as Ve,t as G,b as ke,d as ze,m as ve,e as be}from"../chunks/index.86590fdc.js";import{e as ee,u as Lt,o as At,G as gi}from"../chunks/GanttOptions.42da2f86.js";import{d as cn,w as He}from"../chunks/index.938223df.js";import{t as Me,h as mi,o as In}from"../chunks/utils.1c822e9e.js";function lt(s,e){const t={},n={},i={$$scope:1};let l=s.length;for(;l--;){const o=s[l],r=e[l];if(r){for(const a in o)a in r||(n[a]=1);for(const a in r)i[a]||(t[a]=r[a],i[a]=1);s[l]=r}else for(const a in o)i[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}function ot(s){return typeof s=="object"&&s!==null?s:{}}function sn(){const{subscribe:s,set:e,update:t}=He({ids:[],entities:{}});return{set:e,_update:t,subscribe:s,add:n=>t(({ids:i,entities:l})=>({ids:[...i,n.model.id],entities:{...l,[n.model.id]:n}})),delete:n=>t(i=>{const{[n]:l,...o}=i.entities;return{ids:i.ids.filter(r=>r!==n),entities:o}}),deleteAll:n=>t(i=>{const l={...i.entities},o=new Set(n);for(let r=0;r<i.ids.length;r++)o.has(i.ids[r])&&delete l[i.ids[r]];return{ids:i.ids.filter(r=>!o.has(r)),entities:l}}),update:n=>t(({ids:i,entities:l})=>({ids:i,entities:{...l,[n.model.id]:n}})),upsert:n=>t(({ids:i,entities:l})=>({ids:i.indexOf(n.model.id)!==-1?i:[...i,n.model.id],entities:{...l,[n.model.id]:n}})),upsertAll:n=>t(i=>{const l={...i.entities},o=[...i.ids];for(let r=0;r<n.length;r++)o.indexOf(n[r].model.id)===-1&&o.push(n[r].model.id),l[n[r].model.id]=n[r];return{ids:o,entities:l}}),addAll:n=>{const i=[],l={};for(let o=0;o<n.length;o++)i.push(n[o].model.id),l[n[o].model.id]=n[o];e({ids:i,entities:l})},refresh:()=>t(n=>({...n}))}}function ln(s){return cn(s,({ids:e,entities:t})=>{const n=[];for(let i=0;i<e.length;i++)n.push(t[e[i]]);return n})}function _i(){const s=sn(),e=sn(),t=sn(),n=ln(s),i=ln(e),l=ln(t),o=cn(n,a=>{const c={};for(let f=0;f<a.length;f++){const k=a[f];c[k.model.resourceId]||(c[k.model.resourceId]=[]),c[k.model.resourceId].push(k.model.id)}return c}),r=He({});return{taskStore:s,rowStore:e,timeRangeStore:t,allTasks:n,allRows:i,allTimeRanges:l,rowTaskCache:o,draggingTaskCache:r}}class wi{constructor(e){Y(this,"columnService");Y(this,"rowPadding");Y(this,"rowEntities");this.columnService=e}createTask(e){e.amountDone=e.amountDone||0,e.classes=e.classes||"",e.from=e.from||null,e.to=e.to||null,e.label=e.label||void 0,e.html=e.html||void 0,e.showButton=e.showButton||!1,e.buttonClasses=e.buttonClasses||"",e.buttonHtml=e.buttonHtml||"",e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const t=this.columnService.getPositionByDate(e.from)|0,n=this.columnService.getPositionByDate(e.to)|0;return{model:e,left:t,width:n-t,height:this.getHeight(e),top:this.getPosY(e),reflections:[]}}createTasks(e){return e.map(t=>this.createTask(t))}row(e){return this.rowEntities[e]}getHeight(e){return this.row(e.resourceId).height-2*this.rowPadding}getPosY(e){return this.row(e.resourceId).y+this.rowPadding}}function Nt(s,e,t){const n=`reflected-task-${s.model.id}-${e.model.id}`,i={...s.model,resourceId:e.model.id,id:n,enableDragging:!1};return{...s,model:i,top:e.y+t.rowPadding,reflected:!0,reflectedOnParent:!1,reflectedOnChild:!0,originalId:s.model.id}}function bs(s){return s.which===1}function Mt(s,e){const t=s.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;return{x:n,y:i}}function ps(s,e,t,n,i){s.addEventListener(e,function l(){s.removeEventListener(e,l,i),t.apply(this,arguments,n)})}function Ht(s,e=document.body){e.style.cursor=s}function un(s){return s?typeof s=="string"?s:Array.isArray(s)?s.join(" "):"":""}function ki(s,e){let t=!1;return function(){t||(s.apply(null,arguments),t=!0,setTimeout(function(){t=!1},e))}}function Bn(s){let e;return{c(){e=W("div"),this.h()},l(t){e=P(t,"DIV",{class:!0}),I(e).forEach(m),this.h()},h(){D(e,"class","sg-milestone__diamond svelte-1f5vvpk")},m(t,n){H(t,e,n)},d(t){t&&m(e)}}}function Yn(s){let e;return{c(){e=W("div"),this.h()},l(t){e=P(t,"DIV",{class:!0,style:!0}),I(e).forEach(m),this.h()},h(){D(e,"class","sg-task-background svelte-1f5vvpk"),R(e,"width",s[0].amountDone+"%")},m(t,n){H(t,e,n)},p(t,n){n[0]&1&&R(e,"width",t[0].amountDone+"%")},d(t){t&&m(e)}}}function vi(s){let e=s[0].label+"",t;return{c(){t=ct(e)},l(n){t=ut(n,e)},m(n,i){H(n,t,i)},p(n,i){i[0]&1&&e!==(e=n[0].label+"")&&ft(t,e)},d(n){n&&m(t)}}}function bi(s){let e,t=s[12](s[0])+"",n;return{c(){e=new rt(!1),n=j(),this.h()},l(i){e=at(i,!1),n=j(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),H(i,n,l)},p(i,l){l[0]&1&&t!==(t=i[12](i[0])+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function pi(s){let e,t=s[0].html+"",n;return{c(){e=new rt(!1),n=j(),this.h()},l(i){e=at(i,!1),n=j(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),H(i,n,l)},p(i,l){l[0]&1&&t!==(t=i[0].html+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function On(s){let e,t,n=s[0].buttonHtml+"",i,l,o;return{c(){e=W("span"),t=new rt(!1),this.h()},l(r){e=P(r,"SPAN",{class:!0,role:!0,tabindex:!0});var a=I(e);t=at(a,!1),a.forEach(m),this.h()},h(){t.a=null,D(e,"class",i="sg-task-button "+s[0].buttonClasses+" svelte-1f5vvpk"),D(e,"role","button"),D(e,"tabindex","0")},m(r,a){H(r,e,a),t.m(n,e),l||(o=Je(e,"click",s[17]),l=!0)},p(r,a){a[0]&1&&n!==(n=r[0].buttonHtml+"")&&t.p(n),a[0]&1&&i!==(i="sg-task-button "+r[0].buttonClasses+" svelte-1f5vvpk")&&D(e,"class",i)},d(r){r&&m(e),l=!1,o()}}}function Ln(s){let e,t=s[0].labelBottom+"",n;return{c(){e=W("label"),n=ct(t),this.h()},l(i){e=P(i,"LABEL",{class:!0});var l=I(e);n=ut(l,t),l.forEach(m),this.h()},h(){D(e,"class","sg-label-bottom svelte-1f5vvpk")},m(i,l){H(i,e,l),O(e,n)},p(i,l){l[0]&1&&t!==(t=i[0].labelBottom+"")&&ft(n,t)},d(i){i&&m(e)}}}function yi(s){let e,t,n,i,l,o,r,a,c,f,k,T=s[0].type==="milestone"&&Bn(),_=s[0].amountDone&&Yn(s);function E(p,C){return p[0].html?pi:p[12]?bi:vi}let y=E(s),w=y(s),g=s[0].showButton&&On(s),z=s[0].labelBottom&&Ln(s);return{c(){e=W("div"),T&&T.c(),t=ne(),_&&_.c(),n=ne(),i=W("div"),w.c(),l=ne(),g&&g.c(),o=ne(),z&&z.c(),this.h()},l(p){e=P(p,"DIV",{"data-task-id":!0,class:!0,style:!0});var C=I(e);T&&T.l(C),t=se(C),_&&_.l(C),n=se(C),i=P(C,"DIV",{class:!0});var q=I(i);w.l(q),l=se(q),g&&g.l(q),q.forEach(m),o=se(C),z&&z.l(C),C.forEach(m),this.h()},h(){D(i,"class","sg-task-content svelte-1f5vvpk"),D(e,"data-task-id",r=s[0].id),D(e,"class",a="sg-task "+s[6]+" svelte-1f5vvpk"),R(e,"width",s[5].width+"px"),R(e,"height",s[1]+"px"),R(e,"left",s[5].x+"px"),R(e,"top",s[5].y+"px"),V(e,"sg-milestone",s[0].type==="milestone"),V(e,"moving",s[3]||s[4]),V(e,"animating",An),V(e,"sg-task-reflected",s[2]),V(e,"sg-task-selected",s[8][s[0].id]),V(e,"resize-enabled",s[7]),V(e,"sg-task--sticky",s[0].stickyLabel)},m(p,C){H(p,e,C),T&&T.m(e,null),O(e,t),_&&_.m(e,null),O(e,n),O(e,i),w.m(i,null),O(i,l),g&&g.m(i,null),O(e,o),z&&z.m(e,null),f||(k=[nt(s[15].call(null,e)),nt(c=s[16].call(null,e,s[0]))],f=!0)},p(p,C){p[0].type==="milestone"?T||(T=Bn(),T.c(),T.m(e,t)):T&&(T.d(1),T=null),p[0].amountDone?_?_.p(p,C):(_=Yn(p),_.c(),_.m(e,n)):_&&(_.d(1),_=null),y===(y=E(p))&&w?w.p(p,C):(w.d(1),w=y(p),w&&(w.c(),w.m(i,l))),p[0].showButton?g?g.p(p,C):(g=On(p),g.c(),g.m(i,null)):g&&(g.d(1),g=null),p[0].labelBottom?z?z.p(p,C):(z=Ln(p),z.c(),z.m(e,null)):z&&(z.d(1),z=null),C[0]&1&&r!==(r=p[0].id)&&D(e,"data-task-id",r),C[0]&64&&a!==(a="sg-task "+p[6]+" svelte-1f5vvpk")&&D(e,"class",a),C[0]&32&&R(e,"width",p[5].width+"px"),C[0]&2&&R(e,"height",p[1]+"px"),C[0]&32&&R(e,"left",p[5].x+"px"),C[0]&32&&R(e,"top",p[5].y+"px"),c&&li(c.update)&&C[0]&1&&c.update.call(null,p[0]),C[0]&65&&V(e,"sg-milestone",p[0].type==="milestone"),C[0]&88&&V(e,"moving",p[3]||p[4]),C[0]&64&&V(e,"animating",An),C[0]&68&&V(e,"sg-task-reflected",p[2]),C[0]&321&&V(e,"sg-task-selected",p[8][p[0].id]),C[0]&192&&V(e,"resize-enabled",p[7]),C[0]&65&&V(e,"sg-task--sticky",p[0].stickyLabel)},i:pe,o:pe,d(p){p&&m(e),T&&T.d(),_&&_.d(),w.d(),g&&g.d(),z&&z.d(),f=!1,rn(k)}}}let An=!0;const Ut=40,Vt=40;function Ti(s,e){return{left:s.clientX-e.left<0+Ut,top:s.clientY-e.top<0+Ut,right:s.clientX-e.left>e.width-Ut,bottom:s.clientY-e.top>e.height-Ut}}function Di(s,e,t){let n,i,l,o,r,{model:a}=e,{height:c}=e,{left:f}=e,{top:k}=e,{topDelta:T=0}=e,{width:_}=e,{reflected:E=!1}=e,y=!1,w=!1,g={x:f,y:k+T,width:_};function z(L,te,B){!y&&!w&&(t(5,g.x=L,g),t(5,g.y=te,g),t(5,g.width=B,g))}const{taskStore:p,rowStore:C,draggingTaskCache:q}=ce("dataStore");U(s,p,L=>t(26,o=L)),U(s,C,L=>t(22,n=L)),U(s,q,L=>t(24,i=L));const{rowContainer:ie,mainContainer:N}=ce("gantt"),{taskContent:de,resizeHandleWidth:ye,rowPadding:Q,onTaskButtonClick:ue,reflectOnParentRows:Fe,reflectOnChildRows:De,taskElementHook:Ce}=ce("options");U(s,Q,L=>t(25,l=L));const{dndManager:le,api:ge,utils:Re,columnService:K,selectionManager:b}=ce("services");let Z=b.selectedTasks;U(s,Z,L=>t(8,r=L));let re;const We=ki(L=>{const te=Ti(L,re);(te.left||te.right)&&N.scrollTo({left:N.scrollLeft+(te.left?-Vt:Vt),behavior:"smooth"}),(te.top||te.bottom)&&N.scrollTo({top:N.scrollTop+(te.top?-Vt:Vt),behavior:"smooth"})},250);function Pe(L){function te(B){let qe=!0;const d=n.entities[a.resourceId];if(B.dragging){const S=le.getTarget("row",B.mouseEvent);S?(t(0,a.resourceId=S.model.id,a),ge.tasks.raise.switchRow(this,S,d)):qe=!1}t(3,y=t(4,w=!1));const h=o.entities[a.id];if(delete i[a.id],qe){const S=a.from,Ee=a.to,A=t(0,a.from=Re.roundTo(K.getDateByPosition(B.x)),a),oe=t(0,a.to=Re.roundTo(K.getDateByPosition(B.x+B.width)),a),Xe=K.getPositionByDate(A)|0,me=K.getPositionByDate(oe)|0,_e=n.entities[a.resourceId],Ge=Xe,Ie=me-Xe,J=l+_e.y;z(Ge,J+T,Ie);const fe={...h,left:Ge,width:Ie,top:J,model:a},ht=S!=A||Ee!=oe||d&&d.model.id!==_e.model.id;ht&&ge.tasks.raise.change({task:fe,sourceRow:d,targetRow:_e}),b.newTasksAndReflections.push(fe),ht&&ge.tasks.raise.changed({task:fe,sourceRow:d,targetRow:_e}),fe.reflections&&b.oldReflections.push(...fe.reflections);const Ke=[];if(De&&_e.allChildren){fe.reflections||(fe.reflections=[]);const gt={rowPadding:l};_e.allChildren.forEach(mt=>{const Ze=Nt(fe,mt,gt);fe.reflections.push(Ze.model.id),Ke.push(Ze)})}if(Fe&&_e.allParents.length>0){fe.reflections||(fe.reflections=[]);const gt={rowPadding:l};_e.allParents.forEach(mt=>{const Ze=Nt(fe,mt,gt);fe.reflections.push(Ze.model.id),Ke.push(Ze)})}Ke.length>0&&b.newTasksAndReflections.push(...Ke),!(_e.allParents.length>0)&&!_e.allChildren&&(fe.reflections=null)}else t(5,g.x=h.left,g),t(5,g.width=h.width,g),t(5,g.y=h.top,g)}if(!E)return b.taskSettings.set(a.id.toString(),{onDown:B=>{re=N.getBoundingClientRect(),B.dragging&&Ht("move"),B.resizing&&Ht("e-resize"),ae(q,i[a.id]=!0,i)},onMouseUp:()=>{Ht("default"),ge.tasks.raise.moveEnd(a)},onResize:B=>{t(5,g.x=B.x,g),t(5,g.width=B.width,g),t(4,w=!0),We(B.event)},onDrag:B=>{t(5,g.x=B.x,g),t(5,g.y=B.y,g),t(3,y=!0),ge.tasks.raise.move(a),We(B.event)},dragAllowed:()=>n.entities[a.resourceId].model.enableDragging&&a.enableDragging,resizeAllowed:()=>a.type!=="milestone"&&n.entities[a.resourceId].model.enableDragging&&a.enableDragging,onDrop:te,container:ie,resizeHandleWidth:ye,getX:()=>g.x,getY:()=>g.y,getWidth:()=>g.width,modelId:a.id}),{destroy:()=>b.taskSettings.delete(a.id.toString())}}function Ne(L,te){if(Ce)return Ce(L,te)}function Ae(L){ue&&ue(a,L)}let je,Se;return s.$$set=L=>{"model"in L&&t(0,a=L.model),"height"in L&&t(1,c=L.height),"left"in L&&t(18,f=L.left),"top"in L&&t(19,k=L.top),"topDelta"in L&&t(20,T=L.topDelta),"width"in L&&t(21,_=L.width),"reflected"in L&&t(2,E=L.reflected)},s.$$.update=()=>{s.$$.dirty[0]&3932160&&z(f,k+T,_),s.$$.dirty[0]&1&&t(6,je=un(a.classes)),s.$$.dirty[0]&4194305&&t(7,Se=a.type!=="milestone"&&n.entities[a.resourceId].model.enableDragging&&a.enableDragging)},[a,c,E,y,w,g,je,Se,r,p,C,q,de,Q,Z,Pe,Ne,Ae,f,k,T,_,n]}class Ci extends Oe{constructor(e){super(),Le(this,e,Di,yi,Ye,{model:0,height:1,left:18,top:19,topDelta:20,width:21,reflected:2},null,[-1,-1])}}function Un(s){let e,t=s[0].model.contentHtml+"",n;return{c(){e=new rt(!1),n=j(),this.h()},l(i){e=at(i,!1),n=j(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),H(i,n,l)},p(i,l){l&1&&t!==(t=i[0].model.contentHtml+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function Ri(s){let e,t,n,i=s[0].model.contentHtml&&Un(s);return{c(){e=W("div"),i&&i.c(),this.h()},l(l){e=P(l,"DIV",{class:!0,"data-row-id":!0,style:!0});var o=I(e);i&&i.l(o),o.forEach(m),this.h()},h(){D(e,"class",t="sg-row "+s[0].model.classes+" svelte-7u5y5s"),D(e,"data-row-id",n=s[0].model.id),R(e,"height",s[3]+"px"),V(e,"sg-hover",s[1]==s[0].model.id),V(e,"sg-selected",s[2]==s[0].model.id)},m(l,o){H(l,e,o),i&&i.m(e,null)},p(l,[o]){l[0].model.contentHtml?i?i.p(l,o):(i=Un(l),i.c(),i.m(e,null)):i&&(i.d(1),i=null),o&1&&t!==(t="sg-row "+l[0].model.classes+" svelte-7u5y5s")&&D(e,"class",t),o&1&&n!==(n=l[0].model.id)&&D(e,"data-row-id",n),o&8&&R(e,"height",l[3]+"px"),o&3&&V(e,"sg-hover",l[1]==l[0].model.id),o&5&&V(e,"sg-selected",l[2]==l[0].model.id)},i:pe,o:pe,d(l){l&&m(e),i&&i.d()}}}function Si(s,e,t){let n,i,l,{row:o}=e;const{rowHeight:r}=ce("options");U(s,r,f=>t(3,l=f));const{hoveredRow:a,selectedRow:c}=ce("gantt");return U(s,a,f=>t(1,n=f)),U(s,c,f=>t(2,i=f)),s.$$set=f=>{"row"in f&&t(0,o=f.row)},[o,n,i,l,r,a,c]}class Ei extends Oe{constructor(e){super(),Le(this,e,Si,Ri,Ye,{row:0})}}function Vn(s){let e,t=s[0].label+"",n;return{c(){e=W("div"),n=ct(t),this.h()},l(i){e=P(i,"DIV",{class:!0});var l=I(e);n=ut(l,t),l.forEach(m),this.h()},h(){D(e,"class","sg-time-range-label svelte-w7p5la")},m(i,l){H(i,e,l),O(e,n)},p(i,l){l&1&&t!==(t=i[0].label+"")&&ft(n,t)},d(i){i&&m(e)}}}function Mi(s){let e,t,n=s[0].label&&Vn(s);return{c(){e=W("div"),n&&n.c(),this.h()},l(i){e=P(i,"DIV",{class:!0,style:!0});var l=I(e);n&&n.l(l),l.forEach(m),this.h()},h(){D(e,"class",t="sg-time-range "+s[3]+" svelte-w7p5la"),R(e,"width",s[2].width+"px"),R(e,"left",s[2].x+"px"),V(e,"moving",s[1])},m(i,l){H(i,e,l),n&&n.m(e,null)},p(i,[l]){i[0].label?n?n.p(i,l):(n=Vn(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null),l&8&&t!==(t="sg-time-range "+i[3]+" svelte-w7p5la")&&D(e,"class",t),l&4&&R(e,"width",i[2].width+"px"),l&4&&R(e,"left",i[2].x+"px"),l&10&&V(e,"moving",i[1])},i:pe,o:pe,d(i){i&&m(e),n&&n.d()}}}function Hi(s,e,t){let{model:n}=e,{left:i}=e,{width:l}=e,{resizing:o=!1}=e;const r={width:l,x:i};let a;return s.$$set=c=>{"model"in c&&t(0,n=c.model),"left"in c&&t(4,i=c.left),"width"in c&&t(5,l=c.width),"resizing"in c&&t(1,o=c.resizing)},s.$$.update=()=>{s.$$.dirty&48&&(t(2,r.x=i,r),t(2,r.width=l,r)),s.$$.dirty&1&&t(3,a=un(n.classes))},[n,o,r,a,i,l]}class zi extends Oe{constructor(e){super(),Le(this,e,Hi,Mi,Ye,{model:0,left:4,width:5,resizing:1})}}const Wi=2,Pi=2;class fn{constructor(e,t,n){Y(this,"mouseStartPosX");Y(this,"mouseStartPosY");Y(this,"mouseStartRight");Y(this,"direction");Y(this,"dragging",!1);Y(this,"resizing",!1);Y(this,"initialX");Y(this,"initialY");Y(this,"initialW");Y(this,"resizeTriggered",!1);Y(this,"settings");Y(this,"node");Y(this,"offsetPos",{x:null,y:null});Y(this,"offsetWidth",null);Y(this,"overRezisedOffset");Y(this,"onmousedown",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!bs(e)&&!this.settings.modelId)return;this.settings.modelId||(e.stopPropagation(),e.preventDefault());const n=this.dragAllowed,i=this.resizeAllowed;if(n||i){const l=this.settings.getX(),o=this.settings.getY(),r=this.settings.getWidth();this.initialX=t.clientX,this.initialY=t.clientY,this.mouseStartRight=l+r,this.mouseStartPosX=Mt(this.settings.container,t).x-l,this.mouseStartPosY=Mt(this.settings.container,t).y-o,i&&this.mouseStartPosX<=this.settings.resizeHandleWidth&&(this.direction="left",this.resizing=!0),i&&this.mouseStartPosX>=r-this.offsetWidth-this.settings.resizeHandleWidth&&(this.direction="right",this.resizing=!0),n&&!this.resizing&&(this.dragging=!0),(this.dragging||this.resizing)&&this.settings.onDown&&this.settings.onDown({mouseEvent:t,x:l,width:r,y:o,resizing:this.resizing,dragging:this.dragging}),this.settings.modelId||(window.addEventListener("mousemove",this.onmousemove,!1),ps(window,"mouseup",this.onmouseup))}});Y(this,"onmousemove",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!this.resizeTriggered)if(Math.abs(t.clientX-this.initialX)>Wi||Math.abs(t.clientY-this.initialY)>Pi)this.resizeTriggered=!0;else return;if(e.preventDefault(),this.resizing){const n=Mt(this.settings.container,t),i=this.settings.getX(),l=this.settings.getWidth();let o,r;this.direction==="left"?(this.overRezisedOffset==="left"&&(n.x+=this.offsetWidth),this.mouseStartRight-n.x<=0?(this.direction="right",this.overRezisedOffset!=="left"?this.overRezisedOffset="right":this.overRezisedOffset=void 0,o=this.mouseStartRight,r=this.mouseStartRight-n.x,this.mouseStartRight=this.mouseStartRight+l):(o=n.x,r=this.mouseStartRight-n.x)):this.direction==="right"&&(this.overRezisedOffset==="right"&&(n.x-=this.offsetWidth),n.x-i+this.offsetWidth<=0?(this.direction="left",this.overRezisedOffset!=="right"?this.overRezisedOffset="left":this.overRezisedOffset=void 0,o=n.x+this.offsetWidth,r=n.x-i+this.offsetWidth,this.mouseStartRight=i):(o=i,r=n.x-i+this.offsetWidth)),this.settings.onResize&&this.settings.onResize({x:o,width:r,event:e})}if(this.dragging&&this.settings.onDrag){const n=Mt(this.settings.container,t);this.settings.onDrag({x:n.x-this.mouseStartPosX,y:n.y-this.mouseStartPosY,event:e})}});Y(this,"onmouseup",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY},n=this.settings.getX(),i=this.settings.getY(),l=this.settings.getWidth();this.settings.onMouseUp&&this.settings.onMouseUp(),this.resizeTriggered&&this.settings.onDrop&&this.settings.onDrop({mouseEvent:t,x:n,y:i,width:l,dragging:this.dragging,resizing:this.resizing}),this.mouseStartPosX=null,this.mouseStartPosY=null,this.mouseStartRight=null,this.dragging=!1,this.resizing=!1,this.initialX=null,this.initialY=null,this.initialW=null,this.resizeTriggered=!1,this.offsetPos={x:null,y:null},this.offsetWidth=null,this.overRezisedOffset=void 0,this.settings.modelId||window.removeEventListener("mousemove",this.onmousemove,!1)});this.settings=t,this.node=e,this.settings.modelId?(this.offsetPos=n.offsetPos,this.offsetWidth=n.offsetWidth):e.addEventListener("mousedown",this.onmousedown,{passive:!0})}get dragAllowed(){return typeof this.settings.dragAllowed=="function"?this.settings.dragAllowed():this.settings.dragAllowed}get resizeAllowed(){return typeof this.settings.resizeAllowed=="function"?this.settings.resizeAllowed():this.settings.resizeAllowed}destroy(){this.node.removeEventListener("mousedown",this.onmousedown,!1),this.node.removeEventListener("mousemove",this.onmousemove,!1),this.node.removeEventListener("mouseup",this.onmouseup,!1)}}class Ii{constructor(e){Y(this,"handlerMap",{});this.register("row",t=>{let i=document.elementsFromPoint(t.clientX,t.clientY).find(l=>!!l.getAttribute("data-row-id"));if(i!==void 0){const l=i.getAttribute("data-row-id"),{entities:o}=oi(e),r=o[l];if(r.model.enableDragging)return r}return null})}register(e,t){this.handlerMap[e]=t}getTarget(e,t){var n=this.handlerMap[e];if(n)return n(t)}}function Bi(s){let e,t,n,i,l,o,r;return{c(){e=W("div"),t=W("div"),n=ne(),i=W("div"),this.h()},l(a){e=P(a,"DIV",{class:!0,style:!0});var c=I(e);t=P(c,"DIV",{class:!0}),I(t).forEach(m),n=se(c),i=P(c,"DIV",{class:!0}),I(i).forEach(m),c.forEach(m),this.h()},h(){D(t,"class","sg-time-range-handle-left svelte-w4nglp"),D(i,"class","sg-time-range-handle-right svelte-w4nglp"),D(e,"class",l="sg-time-range-control "+s[1]+" svelte-w4nglp"),R(e,"width",s[0].width+"px"),R(e,"left",s[0].x+"px"),V(e,"sg-time-range-disabled",!s[3]())},m(a,c){H(a,e,c),O(e,t),O(e,n),O(e,i),o||(r=[nt(s[2].call(null,t)),nt(s[2].call(null,i))],o=!0)},p(a,[c]){c&2&&l!==(l="sg-time-range-control "+a[1]+" svelte-w4nglp")&&D(e,"class",l),c&1&&R(e,"width",a[0].width+"px"),c&1&&R(e,"left",a[0].x+"px"),c&10&&V(e,"sg-time-range-disabled",!a[3]())},i:pe,o:pe,d(a){a&&m(e),o=!1,rn(r)}}}function Yi(s,e,t){const{rowContainer:n}=ce("gantt"),{api:i,utils:l,columnService:o}=ce("services"),{resizeHandleWidth:r}=ce("options"),{timeRangeStore:a}=ce("dataStore");let{model:c}=e,{width:f}=e,{left:k}=e;const T={width:f,x:k};function _(w){const g=C=>{const q=l.roundTo(o.getDateByPosition(C.x)),ie=l.roundTo(o.getDateByPosition(C.x+C.width)),N=o.getPositionByDate(q),de=o.getPositionByDate(ie);Object.assign(c,{from:q,to:ie}),z({left:N,width:de-N,model:c,resizing:!1}),window.removeEventListener("mousemove",onmousemove,!1)};function z(C){a.update(C),t(0,T.x=C.left,T),t(0,T.width=C.width,T)}const p=new fn(w,{onDown:C=>{i.timeranges.raise.clicked({model:c}),z({left:C.x,width:C.width,model:c,resizing:!0})},onResize:C=>{i.timeranges.raise.resized({model:c,left:C.x,width:C.width}),z({left:C.x,width:C.width,model:c,resizing:!0})},dragAllowed:!1,resizeAllowed:()=>E(),onDrop:g,container:n,resizeHandleWidth:r,getX:()=>T.x,getY:()=>0,getWidth:()=>T.width});return{destroy:()=>p.destroy()}}function E(){return c.resizable!==void 0?c.resizable:!0}let y;return s.$$set=w=>{"model"in w&&t(4,c=w.model),"width"in w&&t(5,f=w.width),"left"in w&&t(6,k=w.left)},s.$$.update=()=>{s.$$.dirty&96&&(t(0,T.x=k,T),t(0,T.width=f,T)),s.$$.dirty&16&&t(1,y=un(c.classes))},[T,y,_,E,c,f,k]}class Oi extends Oe{constructor(e){super(),Le(this,e,Yi,Bi,Ye,{model:4,width:5,left:6})}}function Li(s,e=1){switch(s){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${s}`)}}function Ai(s,e=1){return s.setSeconds(s.getSeconds()+e),s}function Ui(s,e=1){return s.setMinutes(s.getMinutes()+e),s}function Vi(s,e=1){return s.setHours(s.getHours()+e),s}function Fi(s,e=1){return s.setDate(s.getDate()+e),s.setHours(0,0,0),s}function Xi(s,e=1){const t=s,n=t.getDay(),i=t.getDate()-n+(n==0?-6:1);return t.setDate(i),t.setHours(0,0,0),t.setDate(t.getDate()+7*e),t}function Gi(s,e=1){return s.setMonth(s.getMonth()+e),s.setDate(1),s.setHours(0,0,0),s}function Ni(s,e=1){return s.setFullYear(s.getFullYear()+e),s.setMonth(0),s.setDate(1),s.setHours(0,0,0),s}function Fn(s,e,t){switch(e){case"y":case"year":return Ni(s,t);case"month":return Gi(s,t);case"week":return Xi(s,t);case"d":case"day":return Fi(s,t);case"h":case"hour":return Vi(s,t);case"m":case"minute":return Ui(s,t);case"s":case"second":return Ai(s,t)}}const ji=["y","year","month","week","d","day","h","hour","m","minute","s","second"];function ys(s,e,t,n=1,i){if(ji.indexOf(t)!==-1){let l=0,o=0;const r=new Date(s),a=new Date(s);let c=Fn(a,t,n),f=c.getTime();const k=c.getTime()-s,T=[{from:s,to:c.getTime(),duration:k,isHighlighted:i&&Xn(r,i)}];if(f<e){for(;f<e;)l=f,c=Fn(new Date(f),t,n),o=c.getTime()-f,T.push({from:f,to:c.getTime(),duration:o,isHighlighted:i&&Xn(new Date(f),i)}),f=c.getTime();const _=e-l;T[T.length-1].to=e,T[T.length-1].duration=_}return T}throw new Error(`Unknown unit: ${t}`)}function Xn(s,e){let t;switch(e.unit){case"m":case"minute":return t=s.getMinutes(),e.fractions.includes(t);case"h":case"hour":return t=s.getHours(),e.fractions.includes(t);case"d":case"day":return t=s.getDay(),e.fractions.includes(t);case"week":return e.fractions.includes(t);case"dayinMonth":return t=s.getDate(),e.fractions.includes(t);case"month":return t=s.getMonth(),e.fractions.includes(t);case"y":case"year":return t=s.getFullYear(),e.fractions.includes(t);default:throw new Error(`Invalid unit: ${e.unit}`)}}class qi{constructor(){Y(this,"from");Y(this,"to");Y(this,"width");Y(this,"magnetOffset");Y(this,"magnetUnit");Y(this,"magnetDuration");Y(this,"dateAdapter")}getPositionByDate(e){return hn(e,this.from,this.to,this.width)}getDateByPosition(e){return Qi(e,this.from,this.to,this.width)}roundTo(e){return this.dateAdapter?this.dateAdapter.roundTo(e,this.magnetUnit,this.magnetOffset):null}}function hn(s,e,t,n){if(!s)return;const i=s-e,l=t-e;return i/l*n}function Qi(s,e,t,n){const i=s/n*(t-e);return e+i}function Ki(s,e,t,n){let i=-1,l=s.length;for(;l-i>1;){const o=Math.floor((i+l)/2);(n?t(s[o])<e:t(s[o])<=e)?i=o:l=o}return!n&&s[i]!==void 0&&t(s[i])===e&&(l=i),[i,l]}function Ts(s,e,t,n){const i=Ki(s,e,t,n);return[s[i[0]],s[i[1]]]}function Gn(s,e,t){const n=s.slice();return n[13]=e[t],n}function Nn(s){let e,t,n=(s[13].label||"N/A")+"",i,l,o,r;function a(){return s[10](s[13])}return{c(){e=W("div"),t=W("div"),i=ct(n),l=ne(),this.h()},l(c){e=P(c,"DIV",{class:!0,role:!0,tabindex:!0,style:!0});var f=I(e);t=P(f,"DIV",{class:!0});var k=I(t);i=ut(k,n),k.forEach(m),l=se(f),f.forEach(m),this.h()},h(){D(t,"class","column-header-cell-label svelte-vfarxf"),D(e,"class","column-header-cell svelte-vfarxf"),D(e,"role","button"),D(e,"tabindex","0"),R(e,"left",s[13].left+"px"),R(e,"width",s[13].width+"px"),V(e,"sticky",s[0].sticky)},m(c,f){H(c,e,f),O(e,t),O(t,i),O(e,l),o||(r=Je(e,"click",a),o=!0)},p(c,f){s=c,f&1&&n!==(n=(s[13].label||"N/A")+"")&&ft(i,n),f&1&&R(e,"left",s[13].left+"px"),f&1&&R(e,"width",s[13].width+"px"),f&1&&V(e,"sticky",s[0].sticky)},d(c){c&&m(e),o=!1,r()}}}function Ji(s){let e,t=ee(s[0].columns),n=[];for(let i=0;i<t.length;i+=1)n[i]=Nn(Gn(s,t,i));return{c(){e=W("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=P(i,"DIV",{class:!0});var l=I(e);for(let o=0;o<n.length;o+=1)n[o].l(l);l.forEach(m),this.h()},h(){D(e,"class","column-header-row svelte-vfarxf")},m(i,l){H(i,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,[l]){if(l&17){t=ee(i[0].columns);let o;for(o=0;o<t.length;o+=1){const r=Gn(i,t,o);n[o]?n[o].p(r,l):(n[o]=Nn(r),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},i:pe,o:pe,d(i){i&&m(e),st(n,i)}}}function Zi(s,e,t){let n,i,l;const o=zt(),{from:r,to:a,width:c}=ce("dimensions");U(s,r,w=>t(9,l=w)),U(s,a,w=>t(8,i=w)),U(s,c,w=>t(7,n=w));const{dateAdapter:f}=ce("options");let{header:k}=e,{ganttBodyColumns:T}=e,{ganttBodyUnit:_}=e;function E(w){o("dateSelected",{from:w.from,to:w.to,unit:k.unit})}const y=w=>E(w);return s.$$set=w=>{"header"in w&&t(0,k=w.header),"ganttBodyColumns"in w&&t(5,T=w.ganttBodyColumns),"ganttBodyUnit"in w&&t(6,_=w.ganttBodyUnit)},s.$$.update=()=>{if(s.$$.dirty&993)if(k.unit===_)t(0,k.columns=T.map(w=>({...w,label:f.format(w.from,k.format)})),k);else{const w=ys(l.valueOf(),i.valueOf(),k.unit);let g=0,z=0;t(0,k.columns=w.map(p=>(z=g,g=hn(p.to,l.valueOf(),i.valueOf(),n),{width:Math.min(g-z,n),label:f.format(p.from,k.format),from:p.from,to:p.to,left:z})),k)}},[k,r,a,c,E,T,_,n,i,l,y]}class xi extends Oe{constructor(e){super(),Le(this,e,Zi,Ji,Ye,{header:0,ganttBodyColumns:5,ganttBodyUnit:6})}}function jn(s,e,t){const n=s.slice();return n[4]=e[t],n}function qn(s){let e,t;return e=new xi({props:{header:s[4],ganttBodyColumns:s[1],ganttBodyUnit:s[2]}}),e.$on("dateSelected",s[3]),{c(){ke(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){ve(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.header=n[4]),i&2&&(l.ganttBodyColumns=n[1]),i&4&&(l.ganttBodyUnit=n[2]),e.$set(l)},i(n){t||(F(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function $i(s){let e,t,n=ee(s[0]),i=[];for(let o=0;o<n.length;o+=1)i[o]=qn(jn(s,n,o));const l=o=>G(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=j()},l(o){for(let r=0;r<i.length;r+=1)i[r].l(o);e=j()},m(o,r){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,r);H(o,e,r),t=!0},p(o,[r]){if(r&7){n=ee(o[0]);let a;for(a=0;a<n.length;a+=1){const c=jn(o,n,a);i[a]?(i[a].p(c,r),F(i[a],1)):(i[a]=qn(c),i[a].c(),F(i[a],1),i[a].m(e.parentNode,e))}for(Ue(),a=n.length;a<i.length;a+=1)l(a);Ve()}},i(o){if(!t){for(let r=0;r<n.length;r+=1)F(i[r]);t=!0}},o(o){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)G(i[r]);t=!1},d(o){o&&m(e),st(i,o)}}}function el(s,e,t){let{headers:n}=e,{ganttBodyColumns:i}=e,{ganttBodyUnit:l}=e;function o(r){on.call(this,s,r)}return s.$$set=r=>{"headers"in r&&t(0,n=r.headers),"ganttBodyColumns"in r&&t(1,i=r.ganttBodyColumns),"ganttBodyUnit"in r&&t(2,l=r.ganttBodyUnit)},[n,i,l,o]}class tl extends Oe{constructor(e){super(),Le(this,e,el,$i,Ye,{headers:0,ganttBodyColumns:1,ganttBodyUnit:2})}}function nl(s,e){const t=document.createElement("canvas");t.width=(s.length-1)*s[0].width,t.height=20;const n=t.getContext("2d");return n.shadowColor="rgba(128,128,128,0.5)",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=.5,n.lineWidth=e.columnStrokeWidth,n.lineCap="square",n.strokeStyle=e.columnStrokeColor,n.translate(.5,.5),s.forEach(l=>{sl(n,l.left)}),`url("${t.toDataURL()}")`}function sl(s,e){s.beginPath(),s.moveTo(e,0),s.lineTo(e,20),s.stroke()}function Qn(s,e,t){const n=s.slice();return n[6]=e[t],n}function il(s){let e,t=ee(s[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=Kn(Qn(s,t,i));return{c(){e=W("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=P(i,"DIV",{class:!0});var l=I(e);for(let o=0;o<n.length;o+=1)n[o].l(l);l.forEach(m),this.h()},h(){D(e,"class","sg-columns svelte-1uqfnup")},m(i,l){H(i,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,l){if(l&29){t=ee(i[0]);let o;for(o=0;o<t.length;o+=1){const r=Qn(i,t,o);n[o]?n[o].p(r,l):(n[o]=Kn(r),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){i&&m(e),st(n,i)}}}function ll(s){let e;return{c(){e=W("div"),this.h()},l(t){e=P(t,"DIV",{class:!0}),I(e).forEach(m),this.h()},h(){D(e,"class","sg-columns sg-columns--background svelte-1uqfnup"),R(e,"background-image",s[5])},m(t,n){H(t,e,n)},p(t,n){n&32&&R(e,"background-image",t[5])},d(t){t&&m(e)}}}function Kn(s){let e;return{c(){e=W("div"),this.h()},l(t){e=P(t,"DIV",{class:!0,style:!0}),I(e).forEach(m),this.h()},h(){D(e,"class","sg-column svelte-1uqfnup"),R(e,"border-right",(s[6].bgHighlightColor?0:s[2])+"px solid "+(s[6].bgHighlightColor||s[3])),R(e,"left",s[6].left+"px"),R(e,"width",s[6].width+"px"),R(e,"background-color",s[6].bgHighlightColor||s[4])},m(t,n){H(t,e,n)},p(t,n){n&13&&R(e,"border-right",(t[6].bgHighlightColor?0:t[2])+"px solid "+(t[6].bgHighlightColor||t[3])),n&1&&R(e,"left",t[6].left+"px"),n&1&&R(e,"width",t[6].width+"px"),n&17&&R(e,"background-color",t[6].bgHighlightColor||t[4])},d(t){t&&m(e)}}}function ol(s){let e;function t(l,o){return l[1]?ll:il}let n=t(s),i=n(s);return{c(){i.c(),e=j()},l(l){i.l(l),e=j()},m(l,o){i.m(l,o),H(l,e,o)},p(l,[o]){n===(n=t(l))&&i?i.p(l,o):(i.d(1),i=n(l),i&&(i.c(),i.m(e.parentNode,e)))},i:pe,o:pe,d(l){l&&m(e),i.d(l)}}}function rl(s,e,t){let{columns:n}=e,{useCanvasColumns:i=!0}=e,{columnStrokeWidth:l}=e,{columnStrokeColor:o}=e,{columnDefaultColor:r="#ffffff"}=e,a;return s.$$set=c=>{"columns"in c&&t(0,n=c.columns),"useCanvasColumns"in c&&t(1,i=c.useCanvasColumns),"columnStrokeWidth"in c&&t(2,l=c.columnStrokeWidth),"columnStrokeColor"in c&&t(3,o=c.columnStrokeColor),"columnDefaultColor"in c&&t(4,r=c.columnDefaultColor)},s.$$.update=()=>{s.$$.dirty&13&&t(5,a=nl(n,{columnStrokeColor:o,columnStrokeWidth:l}))},[n,i,l,o,r,a]}class al extends Oe{constructor(e){super(),Le(this,e,rl,ol,Ye,{columns:0,useCanvasColumns:1,columnStrokeWidth:2,columnStrokeColor:3,columnDefaultColor:4})}}function cl(s){let e,t,n;return{c(){e=W("div"),this.h()},l(i){e=P(i,"DIV",{class:!0,style:!0}),I(e).forEach(m),this.h()},h(){D(e,"class","sg-resize svelte-1vzamdy"),R(e,"left",s[0]+"px")},m(i,l){H(i,e,l),t||(n=nt(s[1].call(null,e)),t=!0)},p(i,[l]){l&1&&R(e,"left",i[0]+"px")},i:pe,o:pe,d(i){i&&m(e),t=!1,n()}}}function ul(s,e,t){const n=zt();let{x:i}=e,{container:l}=e;const o={onDrag:a=>{t(0,i=a.x),n("resize",{left:i}),Ht("col-resize")},onDrop:a=>{t(0,i=a.x),n("resize",{left:i}),Ht("default")},dragAllowed:!0,resizeAllowed:!1,container:l,getX:()=>i,getY:()=>0,getWidth:()=>0};function r(a){const c=new fn(a,o,"resizer");return{destroy:()=>c.destroy()}}return s.$$set=a=>{"x"in a&&t(0,i=a.x),"container"in a&&t(2,l=a.container)},s.$$.update=()=>{s.$$.dirty&4&&(o.container=l)},[i,r,l]}class fl extends Oe{constructor(e){super(),Le(this,e,ul,cl,Ye,{x:0,container:2})}}class hl{constructor(){Y(this,"listeners");Y(this,"listenersMap");Y(this,"tasks");Y(this,"timeranges");this.listeners=[],this.listenersMap={}}registerEvent(e,t){this[e]||(this[e]={});const n=this[e];n.on||(n.on={},n.raise={});let i="on:"+e+":"+t;n.raise[t]=(...l)=>{this.listeners.forEach(o=>{o.eventId===i&&o.handler(l)})},n.on[t]=l=>{let o={handler:l,eventId:i};return this.listenersMap[i]=o,this.listeners.push(o),()=>{const a=this.listeners.indexOf(o);this.listeners.splice(a,1)}}}}class dl{constructor(){Y(this,"rowHeight")}createRow(e,t){e.classes=e.classes||"",e.contentHtml=e.contentHtml||void 0,e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const n=e.height||this.rowHeight;return{model:e,y:t,height:n,expanded:!0}}createRows(e){const t={y:0,result:[]};return this.createChildRows(e,t),t.result}createChildRows(e,t,n=null,i=0,l=[]){const o=[],r=[];return n&&(l=[...l,n]),e.forEach(a=>{const c=this.createRow(a,t.y);if(t.result.push(c),o.push(c),r.push(c),c.childLevel=i,c.parent=n,c.allParents=l,t.y+=c.height,a.children){const f=this.createChildRows(a.children,t,c,i+1,l);c.children=f.rows,c.allChildren=f.allRows,r.push(...f.allRows)}}),{rows:o,allRows:r}}}class gl{constructor(e){Y(this,"columnService");this.columnService=e}create(e){e.enableResizing=e.enableResizing===void 0?!0:e.enableResizing;const t=this.columnService.getPositionByDate(e.from),n=this.columnService.getPositionByDate(e.to);return{model:e,left:t,width:n-t,resizing:!1}}}class ml{constructor(e){Y(this,"taskStore");Y(this,"oldReflections",[]);Y(this,"newTasksAndReflections",[]);Y(this,"taskSettings",new Map);Y(this,"currentSelection",new Map);Y(this,"selectedTasks",He({}));Y(this,"dragOrResizeTriggered",e=>{for(const[t,n]of this.currentSelection.entries()){const i=new fn(n.HTMLElement,this.taskSettings.get(t),n.offsetData);i.onmousedown(e),this.currentSelection.set(t,{...n,draggable:i})}window.addEventListener("mousemove",this.selectionDragOrResizing,!1),ps(window,"mouseup",this.selectionDropped)});Y(this,"selectionDragOrResizing",e=>{for(const[,t]of this.currentSelection.entries()){const{draggable:n}=t;n.onmousemove(e)}});Y(this,"selectionDropped",e=>{window.removeEventListener("mousemove",this.selectionDragOrResizing,!1);for(const[,t]of this.currentSelection.entries()){const{draggable:n}=t;n.onmouseup(e)}this.oldReflections.length&&this.taskStore.deleteAll(this.oldReflections),this.newTasksAndReflections.length&&this.taskStore.upsertAll(this.newTasksAndReflections),this.newTasksAndReflections.splice(0),this.oldReflections.splice(0)});this.taskStore=e}selectSingle(e,t){this.currentSelection.has(e)||(this.unSelectTasks(),this.toggleSelection(e,t)),this.selectedTasks.set({[e]:!0})}toggleSelection(e,t){this.currentSelection.set(e,{HTMLElement:t,offsetData:void 0,draggable:void 0}),this.selectedTasks.update(n=>({...n,[e]:!n[e]}))}unSelectTasks(){this.selectedTasks.set({}),this.currentSelection.clear()}dispatchSelectionEvent(e,t){const n=this.taskSettings.get(e),i=n.getX(),l=n.getY(),o=n.getWidth();for(const[r,a]of this.currentSelection.entries())if(r!==e){const c=this.taskSettings.get(r);a.offsetData={offsetPos:{x:c.getX()-i,y:c.getY()-l},offsetWidth:c.getWidth()-o}}else a.offsetData={offsetPos:{x:null,y:null},offsetWidth:null};this.dragOrResizeTriggered(t)}}function _l(s,e){return Ts(s,e,n=>n.left)}function wl(s,e){return Ts(s,e,n=>n.from)}function kl(){const s={};return{onDelegatedEvent(e,t,n){s[e]||(s[e]={}),s[e][t]=n},offDelegatedEvent(e,t){delete s[e][t]},onEvent(e){const{type:t,target:n}=e,i=s[t];if(!i)return;let l,o=n;for(;o&&o!=e.currentTarget&&!(l=vl(i,o));)o=o.parentElement;l&&i[l.attr]?i[l.attr](e,l.data,o):i.empty&&i.empty(e,null,o)}}}function vl(s,e){let t;for(const n in s)if(t=e.getAttribute(n))return{attr:n,data:t}}class bl{format(e,t){const n=new Date(e);switch(t){case"H":return n.getHours()+"";case"HH":return bt(n.getHours());case"H:mm":return`${n.getHours()}:${bt(n.getMinutes())}`;case"hh:mm":return`${bt(n.getHours())}:${bt(n.getMinutes())}`;case"hh:mm:ss":return`${n.getHours()}:${bt(n.getMinutes())}:${bt(n.getSeconds())}`;case"dd/MM/yyyy":return`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()}`;case"dd/MM/yyyy hh:mm":return`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()} ${n.getHours()}:${n.getMinutes()}`;case"dd/MM/yyyy hh:mm:ss":return`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()} ${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}`;case"YYYY":return`${n.getFullYear()}`;case"Q":return`${Math.floor(n.getMonth()/3+1)}`;case"[Q]Q":return`Q${Math.floor(n.getMonth()/3+1)}`;case"YYYY[Q]Q":return`${n.getFullYear()}Q${Math.floor(n.getMonth()/3+1)}`;case"MM":{let i=String(n.getMonth()+1);return i.length==1&&(i=`0${i}`),`${i}`}case"MMMM":{const i=n.toLocaleString("default",{month:"long"});return`${i.charAt(0).toUpperCase()}${i.substring(1)}`}case"MMMM - YYYY":{const i=n.toLocaleString("default",{month:"long"});return`${i.charAt(0).toUpperCase()}${i.substring(1)}-${n.getFullYear()}`}case"MMMM YYYY":{const i=n.toLocaleString("default",{month:"long"});return`${i.charAt(0).toUpperCase()}${i.substring(1)} ${n.getFullYear()}`}case"MMM":{const i=n.toLocaleString("default",{month:"short"});return`${i.charAt(0).toUpperCase()}${i.substring(1)}`}case"MMM - YYYY":{const i=n.toLocaleString("default",{month:"short"});return`${i.charAt(0).toUpperCase()}${i.substring(1)} - ${n.getFullYear()}`}case"MMM YYYY":{const i=n.toLocaleString("default",{month:"short"});return`${i.charAt(0).toUpperCase()}${i.substring(1)} ${n.getFullYear()}`}case"W":return`${Jn(n)}`;case"WW":{const i=Jn(n);return`${i.toString().length==1?"0":""}${i}`}default:return console.warn(`Date Format '${t}' is not supported, use another date adapter.`),`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()}`}}roundTo(e,t,n){const i=pl(t,n);return Math.round(e/i)*i}}function bt(s){let e=s.toString();for(let t=e.length;t<2;t++)e="0"+e;return e}function Jn(s){s=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate())),s.setUTCDate(s.getUTCDate()+4-(s.getUTCDay()||7));const e=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s.valueOf()-e.valueOf())/864e5+1)/7)}function pl(s,e){switch(s){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${s}`)}}function yl(s,e){if(s.length){if(s.length===1){const t=s[0];t.yPos=0,t.intersectsWith=[],t.height=e.rowContentHeight,t.topDelta=t.yPos*t.height}s.sort(Dl);for(const t of s){t.yPos=0,t.intersectsWith=[];for(const n of s)t!==n&&Tl(t,n)&&t.intersectsWith.push(n)}for(const t of s){t.numYSlots=Ds(t);for(let n=0;n<t.numYSlots;n++)if(!t.intersectsWith.some(i=>i.yPos===n)){t.yPos=n,t.height=e.rowContentHeight/t.numYSlots,t.topDelta=t.yPos*t.height;break}}}}function Tl(s,e){return s.left+s.width>e.left&&s.left<e.left+e.width}function Dl(s,e){return s.left-e.left||e.left+e.width-(s.left+s.width)}function Ds(s,e=new Map){e.set(s,!0);let t=s.intersectsWith.length+1;for(const n of s.intersectsWith.filter(i=>!e.has(i))){const i=Ds(n,e);i>t&&(t=i)}return t}function Zn(s,e,t){const n=s.slice();return n[138]=e[t],n}function xn(s,e,t){const n=s.slice();return n[141]=e[t],n}function $n(s,e,t){const n=s.slice();return n[144]=e[t],n}function es(s,e,t){const n=s.slice();return n[147]=e[t],n}function ts(s,e,t){const n=s.slice();return n[144]=e[t],n}function ns(s,e,t){const n=s.slice();return n[138]=e[t],n}function ss(s){let e,t,n,i;const l=[{rowContainerHeight:s[9]},{paddingTop:s[21]},{paddingBottom:s[22]},{tableWidth:s[2]},s[52],{visibleRows:s[10]}];var o=s[138];function r(a,c){let f={};if(c!==void 0&&c[0]&6292996|c[1]&2097152)f=lt(l,[c[0]&512&&{rowContainerHeight:a[9]},c[0]&2097152&&{paddingTop:a[21]},c[0]&4194304&&{paddingBottom:a[22]},c[0]&4&&{tableWidth:a[2]},c[1]&2097152&&ot(a[52]),c[0]&1024&&{visibleRows:a[10]}]);else for(let k=0;k<l.length;k+=1)f=it(f,l[k]);return{props:f}}return o&&(e=Xt(o,r(s)),e.$on("init",jt)),n=new fl({props:{x:s[2],container:s[13]}}),n.$on("resize",s[49]),{c(){e&&ke(e.$$.fragment),t=ne(),ke(n.$$.fragment)},l(a){e&&ze(e.$$.fragment,a),t=se(a),ze(n.$$.fragment,a)},m(a,c){e&&ve(e,a,c),H(a,t,c),ve(n,a,c),i=!0},p(a,c){if(c[0]&16&&o!==(o=a[138])){if(e){Ue();const k=e;G(k.$$.fragment,1,0,()=>{be(k,1)}),Ve()}o?(e=Xt(o,r(a,c)),e.$on("init",jt),ke(e.$$.fragment),F(e.$$.fragment,1),ve(e,t.parentNode,t)):e=null}else if(o){const k=c[0]&6292996|c[1]&2097152?lt(l,[c[0]&512&&{rowContainerHeight:a[9]},c[0]&2097152&&{paddingTop:a[21]},c[0]&4194304&&{paddingBottom:a[22]},c[0]&4&&{tableWidth:a[2]},c[1]&2097152&&ot(a[52]),c[0]&1024&&{visibleRows:a[10]}]):{};e.$set(k)}const f={};c[0]&4&&(f.x=a[2]),c[0]&8192&&(f.container=a[13]),n.$set(f)},i(a){i||(e&&F(e.$$.fragment,a),F(n.$$.fragment,a),i=!0)},o(a){e&&G(e.$$.fragment,a),G(n.$$.fragment,a),i=!1},d(a){a&&m(t),e&&be(e,a),be(n,a)}}}function is(s,e){let t,n,i;const l=[e[144]];let o={};for(let r=0;r<l.length;r+=1)o=it(o,l[r]);return n=new Oi({props:o}),{key:s,first:null,c(){t=j(),ke(n.$$.fragment),this.h()},l(r){t=j(),ze(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){H(r,t,a),ve(n,r,a),i=!0},p(r,a){e=r;const c=a[0]&33554432?lt(l,[ot(e[144])]):{};n.$set(c)},i(r){i||(F(n.$$.fragment,r),i=!0)},o(r){G(n.$$.fragment,r),i=!1},d(r){r&&m(t),be(n,r)}}}function ls(s,e){let t,n,i;return n=new Ei({props:{row:e[147]}}),{key:s,first:null,c(){t=j(),ke(n.$$.fragment),this.h()},l(l){t=j(),ze(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,o){H(l,t,o),ve(n,l,o),i=!0},p(l,o){e=l;const r={};o[0]&1024&&(r.row=e[147]),n.$set(r)},i(l){i||(F(n.$$.fragment,l),i=!0)},o(l){G(n.$$.fragment,l),i=!1},d(l){l&&m(t),be(n,l)}}}function os(s,e){let t,n,i;const l=[e[144]];let o={};for(let r=0;r<l.length;r+=1)o=it(o,l[r]);return n=new zi({props:o}),{key:s,first:null,c(){t=j(),ke(n.$$.fragment),this.h()},l(r){t=j(),ze(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){H(r,t,a),ve(n,r,a),i=!0},p(r,a){e=r;const c=a[0]&33554432?lt(l,[ot(e[144])]):{};n.$set(c)},i(r){i||(F(n.$$.fragment,r),i=!0)},o(r){G(n.$$.fragment,r),i=!1},d(r){r&&m(t),be(n,r)}}}function rs(s,e){let t,n,i;const l=[{model:e[141].model},{left:e[141].left},{width:e[141].width},{height:e[141].height},{top:e[141].top},e[141]];let o={};for(let r=0;r<l.length;r+=1)o=it(o,l[r]);return n=new Ci({props:o}),{key:s,first:null,c(){t=j(),ke(n.$$.fragment),this.h()},l(r){t=j(),ze(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){H(r,t,a),ve(n,r,a),i=!0},p(r,a){e=r;const c=a[0]&8388608?lt(l,[{model:e[141].model},{left:e[141].left},{width:e[141].width},{height:e[141].height},{top:e[141].top},ot(e[141])]):{};n.$set(c)},i(r){i||(F(n.$$.fragment,r),i=!0)},o(r){G(n.$$.fragment,r),i=!1},d(r){r&&m(t),be(n,r)}}}function as(s){let e,t,n;const i=[{paddingTop:s[21]},{paddingBottom:s[22]},{visibleRows:s[10]},s[52]];var l=s[138];function o(r,a){let c={};if(a!==void 0&&a[0]&6292480|a[1]&2097152)c=lt(i,[a[0]&2097152&&{paddingTop:r[21]},a[0]&4194304&&{paddingBottom:r[22]},a[0]&1024&&{visibleRows:r[10]},a[1]&2097152&&ot(r[52])]);else for(let f=0;f<i.length;f+=1)c=it(c,i[f]);return{props:c}}return l&&(e=Xt(l,o(s)),e.$on("init",jt)),{c(){e&&ke(e.$$.fragment),t=j()},l(r){e&&ze(e.$$.fragment,r),t=j()},m(r,a){e&&ve(e,r,a),H(r,t,a),n=!0},p(r,a){if(a[0]&32&&l!==(l=r[138])){if(e){Ue();const c=e;G(c.$$.fragment,1,0,()=>{be(c,1)}),Ve()}l?(e=Xt(l,o(r,a)),e.$on("init",jt),ke(e.$$.fragment),F(e.$$.fragment,1),ve(e,t.parentNode,t)):e=null}else if(l){const c=a[0]&6292480|a[1]&2097152?lt(i,[a[0]&2097152&&{paddingTop:r[21]},a[0]&4194304&&{paddingBottom:r[22]},a[0]&1024&&{visibleRows:r[10]},a[1]&2097152&&ot(r[52])]):{};e.$set(c)}},i(r){n||(e&&F(e.$$.fragment,r),n=!0)},o(r){e&&G(e.$$.fragment,r),n=!1},d(r){r&&m(t),e&&be(e,r)}}}function Cl(s){let e,t,n,i,l,o,r,a,c=[],f=new Map,k,T,_,E,y,w,g,z,p=[],C=new Map,q,ie,N=[],de=new Map,ye,Q=[],ue=new Map,Fe,De,Ce,le,ge,Re,K=ee(s[4]),b=[];for(let d=0;d<K.length;d+=1)b[d]=ss(ns(s,K,d));const Z=d=>G(b[d],1,1,()=>{b[d]=null});r=new tl({props:{headers:s[1],ganttBodyColumns:s[18],ganttBodyUnit:s[0]}}),r.$on("dateSelected",s[51]);let re=ee(s[25]);const We=d=>d[144].model.id;for(let d=0;d<re.length;d+=1){let h=ts(s,re,d),S=We(h);f.set(S,c[d]=is(S,h))}y=new al({props:{columns:s[18],columnStrokeColor:s[7],columnStrokeWidth:s[8],useCanvasColumns:s[6]}});let Pe=ee(s[10]);const Ne=d=>d[147].model.id;for(let d=0;d<Pe.length;d+=1){let h=es(s,Pe,d),S=Ne(h);C.set(S,p[d]=ls(S,h))}let Ae=ee(s[25]);const je=d=>d[144].model.id;for(let d=0;d<Ae.length;d+=1){let h=$n(s,Ae,d),S=je(h);de.set(S,N[d]=os(S,h))}let Se=ee(s[23]);const L=d=>d[141].model.id;for(let d=0;d<Se.length;d+=1){let h=xn(s,Se,d),S=L(h);ue.set(S,Q[d]=rs(S,h))}let te=ee(s[5]),B=[];for(let d=0;d<te.length;d+=1)B[d]=as(Zn(s,te,d));const qe=d=>G(B[d],1,1,()=>{B[d]=null});return{c(){e=W("div");for(let d=0;d<b.length;d+=1)b[d].c();t=ne(),n=W("div"),i=W("div"),l=W("div"),o=W("div"),ke(r.$$.fragment),a=ne();for(let d=0;d<c.length;d+=1)c[d].c();T=ne(),_=W("div"),E=W("div"),ke(y.$$.fragment),w=ne(),g=W("div"),z=W("div");for(let d=0;d<p.length;d+=1)p[d].c();q=ne(),ie=W("div");for(let d=0;d<N.length;d+=1)N[d].c();ye=ne();for(let d=0;d<Q.length;d+=1)Q[d].c();Fe=ne();for(let d=0;d<B.length;d+=1)B[d].c();this.h()},l(d){e=P(d,"DIV",{class:!0});var h=I(e);for(let J=0;J<b.length;J+=1)b[J].l(h);t=se(h),n=P(h,"DIV",{class:!0});var S=I(n);i=P(S,"DIV",{class:!0});var Ee=I(i);l=P(Ee,"DIV",{class:!0});var A=I(l);o=P(A,"DIV",{class:!0,style:!0});var oe=I(o);ze(r.$$.fragment,oe),a=se(oe);for(let J=0;J<c.length;J+=1)c[J].l(oe);oe.forEach(m),A.forEach(m),Ee.forEach(m),T=se(S),_=P(S,"DIV",{class:!0});var Xe=I(_);E=P(Xe,"DIV",{class:!0,style:!0});var me=I(E);ze(y.$$.fragment,me),w=se(me),g=P(me,"DIV",{class:!0,style:!0});var _e=I(g);z=P(_e,"DIV",{style:!0});var Ge=I(z);for(let J=0;J<p.length;J+=1)p[J].l(Ge);Ge.forEach(m),_e.forEach(m),q=se(me),ie=P(me,"DIV",{class:!0});var Ie=I(ie);for(let J=0;J<N.length;J+=1)N[J].l(Ie);ye=se(Ie);for(let J=0;J<Q.length;J+=1)Q[J].l(Ie);Ie.forEach(m),Fe=se(me);for(let J=0;J<B.length;J+=1)B[J].l(me);me.forEach(m),Xe.forEach(m),S.forEach(m),h.forEach(m),this.h()},h(){D(o,"class","header-container"),R(o,"width",s[12]+"px"),D(l,"class","sg-header-scroller svelte-rujbxv"),D(i,"class","sg-header"),Mn(()=>s[112].call(i)),V(i,"right-scrollbar-visible",s[20]),R(z,"transform","translateY("+s[21]+"px)"),D(g,"class","sg-rows svelte-rujbxv"),R(g,"height",s[9]+"px"),D(ie,"class","sg-foreground svelte-rujbxv"),D(E,"class","content svelte-rujbxv"),R(E,"width",s[12]+"px"),D(_,"class","sg-timeline-body svelte-rujbxv"),Mn(()=>s[115].call(_)),V(_,"zooming",s[19]),D(n,"class","sg-timeline sg-view svelte-rujbxv"),D(e,"class",Ce="sg-gantt "+s[3]+" svelte-rujbxv"),V(e,"sg-disable-transition",s[17])},m(d,h){H(d,e,h);for(let S=0;S<b.length;S+=1)b[S]&&b[S].m(e,null);O(e,t),O(e,n),O(n,i),O(i,l),O(l,o),ve(r,o,null),O(o,a);for(let S=0;S<c.length;S+=1)c[S]&&c[S].m(o,null);s[111](i),k=Hn(i,s[112].bind(i)),O(n,T),O(n,_),O(_,E),ve(y,E,null),O(E,w),O(E,g),O(g,z);for(let S=0;S<p.length;S+=1)p[S]&&p[S].m(z,null);s[113](g),O(E,q),O(E,ie);for(let S=0;S<N.length;S+=1)N[S]&&N[S].m(ie,null);O(ie,ye);for(let S=0;S<Q.length;S+=1)Q[S]&&Q[S].m(ie,null);O(E,Fe);for(let S=0;S<B.length;S+=1)B[S]&&B[S].m(E,null);s[114](_),De=Hn(_,s[115].bind(_)),s[116](e),le=!0,ge||(Re=[nt(s[48].call(null,l)),nt(s[47].call(null,_)),Je(_,"wheel",s[50]),Je(e,"mousedown",zn(s[46])),Je(e,"click",zn(s[46])),Je(e,"dblclick",s[46]),Je(e,"mouseover",s[46]),Je(e,"mouseleave",s[46])],ge=!0)},p(d,h){if(h[0]&6301204|h[1]&2359296){K=ee(d[4]);let A;for(A=0;A<K.length;A+=1){const oe=ns(d,K,A);b[A]?(b[A].p(oe,h),F(b[A],1)):(b[A]=ss(oe),b[A].c(),F(b[A],1),b[A].m(e,t))}for(Ue(),A=K.length;A<b.length;A+=1)Z(A);Ve()}const S={};h[0]&2&&(S.headers=d[1]),h[0]&262144&&(S.ganttBodyColumns=d[18]),h[0]&1&&(S.ganttBodyUnit=d[0]),r.$set(S),h[0]&33554432&&(re=ee(d[25]),Ue(),c=Lt(c,h,We,1,d,re,f,o,At,is,null,ts),Ve()),(!le||h[0]&4096)&&R(o,"width",d[12]+"px"),(!le||h[0]&1048576)&&V(i,"right-scrollbar-visible",d[20]);const Ee={};if(h[0]&262144&&(Ee.columns=d[18]),h[0]&128&&(Ee.columnStrokeColor=d[7]),h[0]&256&&(Ee.columnStrokeWidth=d[8]),h[0]&64&&(Ee.useCanvasColumns=d[6]),y.$set(Ee),h[0]&1024&&(Pe=ee(d[10]),Ue(),p=Lt(p,h,Ne,1,d,Pe,C,z,At,ls,null,es),Ve()),(!le||h[0]&2097152)&&R(z,"transform","translateY("+d[21]+"px)"),(!le||h[0]&512)&&R(g,"height",d[9]+"px"),h[0]&33554432&&(Ae=ee(d[25]),Ue(),N=Lt(N,h,je,1,d,Ae,de,ie,At,os,ye,$n),Ve()),h[0]&8388608&&(Se=ee(d[23]),Ue(),Q=Lt(Q,h,L,1,d,Se,ue,ie,At,rs,null,xn),Ve()),h[0]&6292512|h[1]&2097152){te=ee(d[5]);let A;for(A=0;A<te.length;A+=1){const oe=Zn(d,te,A);B[A]?(B[A].p(oe,h),F(B[A],1)):(B[A]=as(oe),B[A].c(),F(B[A],1),B[A].m(E,null))}for(Ue(),A=te.length;A<B.length;A+=1)qe(A);Ve()}(!le||h[0]&4096)&&R(E,"width",d[12]+"px"),(!le||h[0]&524288)&&V(_,"zooming",d[19]),(!le||h[0]&8&&Ce!==(Ce="sg-gantt "+d[3]+" svelte-rujbxv"))&&D(e,"class",Ce),(!le||h[0]&131080)&&V(e,"sg-disable-transition",d[17])},i(d){if(!le){for(let h=0;h<K.length;h+=1)F(b[h]);F(r.$$.fragment,d);for(let h=0;h<re.length;h+=1)F(c[h]);F(y.$$.fragment,d);for(let h=0;h<Pe.length;h+=1)F(p[h]);for(let h=0;h<Ae.length;h+=1)F(N[h]);for(let h=0;h<Se.length;h+=1)F(Q[h]);for(let h=0;h<te.length;h+=1)F(B[h]);le=!0}},o(d){b=b.filter(Boolean);for(let h=0;h<b.length;h+=1)G(b[h]);G(r.$$.fragment,d);for(let h=0;h<c.length;h+=1)G(c[h]);G(y.$$.fragment,d);for(let h=0;h<p.length;h+=1)G(p[h]);for(let h=0;h<N.length;h+=1)G(N[h]);for(let h=0;h<Q.length;h+=1)G(Q[h]);B=B.filter(Boolean);for(let h=0;h<B.length;h+=1)G(B[h]);le=!1},d(d){d&&m(e),st(b,d),be(r);for(let h=0;h<c.length;h+=1)c[h].d();s[111](null),k(),be(y);for(let h=0;h<p.length;h+=1)p[h].d();s[113](null);for(let h=0;h<N.length;h+=1)N[h].d();for(let h=0;h<Q.length;h+=1)Q[h].d();st(B,d),s[114](null),De(),s[116](null),ge=!1,rn(Re)}}}function cs(s){for(const e in s)if(s[e]==null)throw new Error(`"${e}" is not set`)}function Ft(s){return s instanceof Date?s.valueOf():s}function jt(s){}function Rl(s,e,t){const n=["rows","tasks","timeRanges","rowPadding","rowHeight","from","to","minWidth","fitWidth","classes","headers","zoomLevels","taskContent","tableWidth","resizeHandleWidth","onTaskButtonClick","dateAdapter","magnetUnit","magnetOffset","columnUnit","columnOffset","ganttTableModules","ganttBodyModules","reflectOnParentRows","reflectOnChildRows","useCanvasColumns","columnStrokeColor","columnStrokeWidth","highlightedDurations","highlightColor","taskElementHook","layout","columnService","api","taskFactory","rowFactory","dndManager","timeRangeFactory","utils","refreshTimeRanges","refreshTasks","getRowContainer","selectTask","unselectTasks","scrollToRow","scrollToTask","updateTask","updateTasks","updateRow","updateRows","getRow","getTask","getTasks"];let i=Wn(e,n),l,o,r,a,c,f,k,T,_,E,y,w,g,z,p,C,q,ie,N,de,ye,Q,ue,Fe=[],De=!1,{rows:Ce}=e,{tasks:le=[]}=e,{timeRanges:ge=[]}=e;cs({rows:Ce});let{rowPadding:Re=6}=e,{rowHeight:K=52}=e;const b=He(K);U(s,b,u=>t(124,C=u));const Z=He(Re);U(s,Z,u=>t(110,y=u));let{from:re}=e,{to:We}=e;cs({from:re,to:We});const Pe=He(Ft(re));U(s,Pe,u=>t(109,E=u));const Ne=He(Ft(We));U(s,Ne,u=>t(108,_=u));let{minWidth:Ae=800}=e,{fitWidth:je=!1}=e;const Se=He(Ae);U(s,Se,u=>t(121,g=u));const L=He(je);U(s,L,u=>t(120,w=u));let{classes:te=[]}=e,{headers:B=[{unit:"day",format:"MMMM Do"},{unit:"hour",format:"H:mm"}]}=e,{zoomLevels:qe=[{headers:[{unit:"day",format:"DD.MM.YYYY"},{unit:"hour",format:"HH"}],minWidth:800,fitWidth:!0},{headers:[{unit:"hour",format:"ddd D/M, H A"},{unit:"minute",format:"mm",offset:15}],minWidth:5e3,fitWidth:!1}]}=e,{taskContent:d=null}=e,{tableWidth:h=240}=e,{resizeHandleWidth:S=10}=e,{onTaskButtonClick:Ee=null}=e,{dateAdapter:A=new bl}=e,{magnetUnit:oe="minute"}=e,{magnetOffset:Xe=15}=e,me;_e(oe,Xe);function _e(u,v){u&&v&&t(98,me=Li(u,v))}let{columnUnit:Ge="minute"}=e,{columnOffset:Ie=15}=e,{ganttTableModules:J=[]}=e,{ganttBodyModules:fe=[]}=e,{reflectOnParentRows:ht=!0}=e,{reflectOnChildRows:Ke=!1}=e,{useCanvasColumns:gt=!0}=e,{columnStrokeColor:mt="#efefef"}=e,{columnStrokeWidth:Ze=1}=e,{highlightedDurations:qt}=e,{highlightColor:Qt="#6eb859"}=e,{taskElementHook:Kt=null}=e,{layout:Jt="overlap"}=e;const yt=He(null);U(s,yt,u=>t(26,N=u));const Wt=He(null);U(s,Wt,u=>t(11,c=u));const Pt=He(null);U(s,Pt,u=>t(24,q=u));const Zt=cn([yt,Se,L],([u,v,M])=>M&&u>v?u:v);U(s,Zt,u=>t(12,T=u));const dn=_i();Et("dataStore",dn);const{rowStore:_t,taskStore:dt,timeRangeStore:gn,allTasks:mn,allRows:_n,allTimeRanges:wn,rowTaskCache:kn,draggingTaskCache:vn}=dn;U(s,_t,u=>t(105,r=u)),U(s,dt,u=>t(103,l=u)),U(s,mn,u=>t(119,k=u)),U(s,_n,u=>t(107,f=u)),U(s,wn,u=>t(25,ie=u)),U(s,kn,u=>t(104,o=u)),U(s,vn,u=>t(106,a=u));const xe={getColumnByDate(u){const v=wl(It,u);return v[0]?v[0]:v[1]},getColumnByPosition(u){const v=_l(It,u);return v[0]?v[0]:v[1]},getPositionByDate(u){if(!u)return null;const v=this.getColumnByDate(u),X=(u-v.from)/v.duration*v.width;return v.left+X},getDateByPosition(u){const v=this.getColumnByPosition(u);u=u-v.left;let M=v.duration/v.width*u;return v.from+M},roundTo(u){return Math.round(u/me)*me}};let xt=!1;async function Ss(){t(17,xt=!0),await nn(),de.offsetHeight,t(17,xt=!1)}let It;function Es(u,v,M,X,x){u instanceof Date&&(u=u.valueOf()),v instanceof Date&&(v=v.valueOf());let $=[];const Be=ys(u.valueOf(),v.valueOf(),M,X,qt);let Te=0,vt=0;return Be.forEach(function(Qe){Te=vt,vt=hn(Qe.to,E,_,T),$.push({width:vt-Te,from:Qe.from,to:Qe.to,left:Te,duration:Qe.duration,...Qe.isHighlighted&&{bgHighlightColor:Qt}})}),$}Et("dimensions",{from:Pe,to:Ne,width:Zt,visibleWidth:yt,visibleHeight:Wt,headerHeight:Pt}),Et("options",{dateAdapter:A,taskElementHook:Kt,taskContent:d,rowPadding:Z,rowHeight:b,resizeHandleWidth:S,reflectOnParentRows:ht,reflectOnChildRows:Ke,onTaskButtonClick:Ee});const Tt=He(null);U(s,Tt,u=>t(122,z=u));const Dt=He(null);U(s,Dt,u=>t(123,p=u));const bn={scrollables:Fe,hoveredRow:Tt,selectedRow:Dt};Et("gantt",bn),an(()=>{Object.assign(bn,{rowContainer:ue,mainContainer:Q,mainHeaderContainer:ye}),he.registerEvent("tasks","move"),he.registerEvent("tasks","select"),he.registerEvent("tasks","switchRow"),he.registerEvent("tasks","moveEnd"),he.registerEvent("tasks","change"),he.registerEvent("tasks","changed"),he.registerEvent("gantt","viewChanged"),he.registerEvent("gantt","dateSelected"),he.registerEvent("tasks","dblclicked"),he.registerEvent("timeranges","clicked"),he.registerEvent("timeranges","resized"),t(97,De=!0)});const{onDelegatedEvent:Ct,offDelegatedEvent:Bt,onEvent:Ms}=kl();Ct("mousedown","data-task-id",(u,v,M)=>{const X=v;bs(u)&&!M.classList.contains("sg-task-reflected")&&(u.ctrlKey?et.toggleSelection(X,M):et.selectSingle(X,M),et.dispatchSelectionEvent(X,u)),he.tasks.raise.select(l.entities[X])}),Ct("mouseover","data-row-id",(u,v,M)=>{ae(Tt,z=v,z)}),Ct("click","data-row-id",(u,v,M)=>{if(et.unSelectTasks(),p==v){ae(Dt,p=null,p);return}ae(Dt,p=v,p)}),Ct("dblclick","data-task-id",(u,v,M)=>{const X=v;he.tasks.raise.dblclicked(l.entities[X],u)}),Ct("mouseleave","empty",(u,v,M)=>{ae(Tt,z=null,z)}),ri(()=>{Bt("click","data-task-id"),Bt("click","data-row-id"),Bt("mousedown","data-task-id"),Bt("dblclick","data-task-id"),et.unSelectTasks()});let $t=0;function Hs(u){const v=M=>{const{scrollTop:X,scrollLeft:x}=u;Fe.forEach($=>{$.orientation==="horizontal"?$.node.scrollLeft=x:$.node.scrollTop=X}),t(99,$t=X)};return u.addEventListener("scroll",v),{destroy(){u.removeEventListener("scroll",v,!1)}}}function zs(u){Fe.push({node:u,orientation:"horizontal"})}function Ws(u){t(2,h=u.detail.left)}let $e=0,en=!1;async function Ps(u){if(u.ctrlKey){u.preventDefault();const v=$e;if(u.deltaY>0?$e=Math.max($e-1,0):$e=Math.min($e+1,qe.length-1),v!=$e&&qe[$e]){const M={columnUnit:Ge,columnOffset:Ie,minWidth:g,...qe[$e]},X=M.minWidth/T,x=Q,$=Mt(x,u),vt=(x.scrollLeft+$.x)*X-$.x+x.clientWidth/2;t(0,Ge=M.columnUnit),t(53,Ie=M.columnOffset),ae(Se,g=M.minWidth,g),M.headers&&t(1,B=M.headers),M.fitWidth&&ae(L,w=M.fitWidth,w),he.gantt.raise.viewChanged(),t(19,en=!0),await nn(),x.scrollLeft=vt,t(19,en=!1)}}}function Is(u){ae(Pe,E=u.detail.from,E),ae(Ne,_=u.detail.to,_),he.gantt.raise.dateSelected({from:E,to:_})}function Bs(u){const v=wt.createRows(u);_t.addAll(v)}async function Ys(u){await nn();const v=[],M={rowPadding:y};u.forEach(X=>{const x=tt.createTask(X),$=r.entities[x.model.resourceId];x.reflections=[],Ke&&$.allChildren&&$.allChildren.forEach(Be=>{const Te=Nt(x,Be,M);x.reflections.push(Te.model.id),v.push(Te)}),ht&&$.allParents.length>0&&$.allParents.forEach(Be=>{const Te=Nt(x,Be,M);x.reflections.push(Te.model.id),v.push(Te)}),v.push(x)}),dt.addAll(v)}function Os(u){const v=u.map(M=>yn.create(M));gn.addAll(v)}const he=new hl,et=new ml(dt),tt=new wi(xe),wt=new dl,pn=new Ii(_t),yn=new gl(xe),we=new qi;Et("services",{utils:we,api:he,dndManager:pn,selectionManager:et,columnService:xe});function Tn(){gn._update(({ids:u,entities:v})=>(u.forEach(M=>{const X=v[M],x=xe.getPositionByDate(X.model.from)|0,$=xe.getPositionByDate(X.model.to)|0;X.left=x,X.width=$-x}),{ids:u,entities:v}))}function Dn(){k.forEach(u=>{const v=xe.getPositionByDate(u.model.from)|0,M=xe.getPositionByDate(u.model.to)|0;u.left=v,u.width=M-v}),dt.refresh()}function Ls(){return ue}function As(u){l.entities[u]&&et.selectSingle(u,de.querySelector(`data-task-id='${u}'`))}function Us(){et.unSelectTasks()}function Vs(u,v="auto"){const{scrollTop:M,clientHeight:X}=Q,x=f.findIndex(Be=>Be.model.id==u);if(x===-1)return;const $=x*K;$<M&&Q.scrollTo({top:$,behavior:v}),$>M+X&&Q.scrollTo({top:$+K-X,behavior:v})}function Fs(u,v="auto"){const{scrollLeft:M,scrollTop:X,clientWidth:x,clientHeight:$}=Q,Be=l.entities[u];if(!Be)return;const Te=Be.left,Qe=f.findIndex(ni=>ni.model.id==Be.model.resourceId)*K,St={top:void 0,left:void 0,behavior:v};Te<M&&(St.left=Te),Te>M+x&&(St.left=Te+Be.width-x),Qe<X&&(St.top=Qe),Qe>X+$&&(St.top=Qe+K-$),Q.scrollTo(St)}function Xs(u){const v=tt.createTask(u);dt.upsert(v)}function Gs(u){const v=u.map(M=>tt.createTask(M));dt.upsertAll(v)}function Ns(u){const v=wt.createRow(u,null);_t.upsert(v)}function js(u){const v=u.map(M=>wt.createRow(M,null));_t.upsertAll(v)}function qs(u){return r.entities[u]}function Qs(u){return l.entities[u]}function Ks(u){return o[u]?o[u].map(v=>l.entities[v]):null}let kt=[],Cn,tn,Rt,Yt,Rn=0,Sn=0,Ot=[],En;function Js(u){pt[u?"unshift":"push"](()=>{ye=u,t(14,ye)})}function Zs(){q=this.clientHeight,Pt.set(q)}function xs(u){pt[u?"unshift":"push"](()=>{ue=u,t(16,ue)})}function $s(u){pt[u?"unshift":"push"](()=>{Q=u,t(15,Q)})}function ei(){c=this.clientHeight,Wt.set(c),N=this.clientWidth,yt.set(N)}function ti(u){pt[u?"unshift":"push"](()=>{de=u,t(13,de)})}return s.$$set=u=>{e=it(it({},e),ai(u)),t(52,i=Wn(e,n)),"rows"in u&&t(57,Ce=u.rows),"tasks"in u&&t(58,le=u.tasks),"timeRanges"in u&&t(59,ge=u.timeRanges),"rowPadding"in u&&t(60,Re=u.rowPadding),"rowHeight"in u&&t(61,K=u.rowHeight),"from"in u&&t(62,re=u.from),"to"in u&&t(63,We=u.to),"minWidth"in u&&t(64,Ae=u.minWidth),"fitWidth"in u&&t(65,je=u.fitWidth),"classes"in u&&t(3,te=u.classes),"headers"in u&&t(1,B=u.headers),"zoomLevels"in u&&t(66,qe=u.zoomLevels),"taskContent"in u&&t(67,d=u.taskContent),"tableWidth"in u&&t(2,h=u.tableWidth),"resizeHandleWidth"in u&&t(68,S=u.resizeHandleWidth),"onTaskButtonClick"in u&&t(69,Ee=u.onTaskButtonClick),"dateAdapter"in u&&t(70,A=u.dateAdapter),"magnetUnit"in u&&t(71,oe=u.magnetUnit),"magnetOffset"in u&&t(72,Xe=u.magnetOffset),"columnUnit"in u&&t(0,Ge=u.columnUnit),"columnOffset"in u&&t(53,Ie=u.columnOffset),"ganttTableModules"in u&&t(4,J=u.ganttTableModules),"ganttBodyModules"in u&&t(5,fe=u.ganttBodyModules),"reflectOnParentRows"in u&&t(73,ht=u.reflectOnParentRows),"reflectOnChildRows"in u&&t(74,Ke=u.reflectOnChildRows),"useCanvasColumns"in u&&t(6,gt=u.useCanvasColumns),"columnStrokeColor"in u&&t(7,mt=u.columnStrokeColor),"columnStrokeWidth"in u&&t(8,Ze=u.columnStrokeWidth),"highlightedDurations"in u&&t(75,qt=u.highlightedDurations),"highlightColor"in u&&t(76,Qt=u.highlightColor),"taskElementHook"in u&&t(77,Kt=u.taskElementHook),"layout"in u&&t(78,Jt=u.layout)},s.$$.update=()=>{if(s.$$.dirty[1]&67108864|s.$$.dirty[3]&16&&De&&Bs(Ce),s.$$.dirty[1]&134217728|s.$$.dirty[3]&16&&De&&Ys(le),s.$$.dirty[1]&268435456|s.$$.dirty[3]&16&&De&&Os(ge),s.$$.dirty[1]&1073741824&&ae(b,C=K,C),s.$$.dirty[1]&536870912&&ae(Z,y=Re,y),s.$$.dirty[2]&1&&ae(Pe,E=Ft(re),E),s.$$.dirty[2]&2&&ae(Ne,_=Ft(We),_),s.$$.dirty[2]&12&&(ae(Se,g=Ae,g),ae(L,w=je,w)),s.$$.dirty[2]&1536&&_e(oe,Xe),s.$$.dirty[0]&4097|s.$$.dirty[1]&4194304|s.$$.dirty[3]&98304&&(t(18,It=Es(E,_,Ge,Ie)),Ss(),Tn(),Dn()),s.$$.dirty[3]&135168&&(t(54,tt.rowPadding=y,tt),t(54,tt.rowEntities=r.entities,tt)),s.$$.dirty[1]&1073741824&&t(55,wt.rowHeight=K,wt),s.$$.dirty[0]&4096|s.$$.dirty[2]&1792|s.$$.dirty[3]&98336&&(t(56,we.from=E,we),t(56,we.to=_,we),t(56,we.width=T,we),t(56,we.magnetOffset=Xe,we),t(56,we.magnetUnit=oe,we),t(56,we.magnetDuration=me,we),t(56,we.dateAdapter=A,we)),s.$$.dirty[3]&16384&&t(100,kt=f.filter(u=>!u.hidden)),s.$$.dirty[1]&1073741824|s.$$.dirty[3]&128&&t(9,tn=kt.length*K),s.$$.dirty[0]&2560&&t(20,Cn=tn>c),s.$$.dirty[1]&1073741824|s.$$.dirty[3]&64&&t(101,Rt=Math.floor($t/K)),s.$$.dirty[0]&2048|s.$$.dirty[1]&1073741824|s.$$.dirty[3]&384&&t(102,Yt=Math.min(Rt+Math.ceil(c/K),kt.length-1)),s.$$.dirty[1]&1073741824|s.$$.dirty[3]&256&&t(21,Rn=Rt*K),s.$$.dirty[1]&1073741824|s.$$.dirty[3]&640&&t(22,Sn=(kt.length-Yt-1)*K),s.$$.dirty[3]&896&&t(10,Ot=kt.slice(Rt,Yt+1)),s.$$.dirty[0]&1024|s.$$.dirty[3]&11264){const u=[],v={};for(let M=0;M<Ot.length;M++){const X=Ot[M];if(o[X.model.id])for(let x=0;x<o[X.model.id].length;x++){const $=o[X.model.id][x];u.push(l.entities[$]),v[$]=!0}}for(const M in a)v[M]||(u.push(l.entities[M]),v[M]=!0);t(23,En=u)}if(s.$$.dirty[1]&1610612736|s.$$.dirty[2]&65536|s.$$.dirty[3]&7168&&Jt==="pack")for(const u of r.ids){const v=o[u];if(v){const M=v.map(X=>l.entities[X]);yl(M,{rowContentHeight:K-Re*2})}}},[Ge,B,h,te,J,fe,gt,mt,Ze,tn,Ot,c,T,de,ye,Q,ue,xt,It,en,Cn,Rn,Sn,En,q,ie,N,b,Z,Pe,Ne,Se,L,yt,Wt,Pt,Zt,_t,dt,mn,_n,wn,kn,vn,Tt,Dt,Ms,Hs,zs,Ws,Ps,Is,i,Ie,tt,wt,we,Ce,le,ge,Re,K,re,We,Ae,je,qe,d,S,Ee,A,oe,Xe,ht,Ke,qt,Qt,Kt,Jt,xe,he,pn,yn,Tn,Dn,Ls,As,Us,Vs,Fs,Xs,Gs,Ns,js,qs,Qs,Ks,De,me,$t,kt,Rt,Yt,l,o,r,a,f,_,E,y,Js,Zs,xs,$s,ei,ti]}class Sl extends Oe{constructor(e){super(),Le(this,e,Rl,Cl,Ye,{rows:57,tasks:58,timeRanges:59,rowPadding:60,rowHeight:61,from:62,to:63,minWidth:64,fitWidth:65,classes:3,headers:1,zoomLevels:66,taskContent:67,tableWidth:2,resizeHandleWidth:68,onTaskButtonClick:69,dateAdapter:70,magnetUnit:71,magnetOffset:72,columnUnit:0,columnOffset:53,ganttTableModules:4,ganttBodyModules:5,reflectOnParentRows:73,reflectOnChildRows:74,useCanvasColumns:6,columnStrokeColor:7,columnStrokeWidth:8,highlightedDurations:75,highlightColor:76,taskElementHook:77,layout:78,columnService:79,api:80,taskFactory:54,rowFactory:55,dndManager:81,timeRangeFactory:82,utils:56,refreshTimeRanges:83,refreshTasks:84,getRowContainer:85,selectTask:86,unselectTasks:87,scrollToRow:88,scrollToTask:89,updateTask:90,updateTasks:91,updateRow:92,updateRows:93,getRow:94,getTask:95,getTasks:96},null,[-1,-1,-1,-1,-1])}get columnService(){return this.$$.ctx[79]}get api(){return this.$$.ctx[80]}get taskFactory(){return this.$$.ctx[54]}get rowFactory(){return this.$$.ctx[55]}get dndManager(){return this.$$.ctx[81]}get timeRangeFactory(){return this.$$.ctx[82]}get utils(){return this.$$.ctx[56]}get refreshTimeRanges(){return this.$$.ctx[83]}get refreshTasks(){return this.$$.ctx[84]}get getRowContainer(){return this.$$.ctx[85]}get selectTask(){return this.$$.ctx[86]}get unselectTasks(){return this.$$.ctx[87]}get scrollToRow(){return this.$$.ctx[88]}get scrollToTask(){return this.$$.ctx[89]}get updateTask(){return this.$$.ctx[90]}get updateTasks(){return this.$$.ctx[91]}get updateRow(){return this.$$.ctx[92]}get updateRows(){return this.$$.ctx[93]}get getRow(){return this.$$.ctx[94]}get getTask(){return this.$$.ctx[95]}get getTasks(){return this.$$.ctx[96]}}function us(s){let e,t,n;function i(r,a){return r[0].expanded?Ml:El}let l=i(s),o=l(s);return{c(){e=W("div"),o.c(),this.h()},l(r){e=P(r,"DIV",{class:!0});var a=I(e);o.l(a),a.forEach(m),this.h()},h(){D(e,"class","sg-tree-expander svelte-1tk4vqn")},m(r,a){H(r,e,a),o.m(e,null),t||(n=Je(e,"click",s[1]),t=!0)},p(r,a){l!==(l=i(r))&&(o.d(1),o=l(r),o&&(o.c(),o.m(e,null)))},d(r){r&&m(e),o.d(),t=!1,n()}}}function El(s){let e;return{c(){e=W("i"),this.h()},l(t){e=P(t,"I",{class:!0}),I(e).forEach(m),this.h()},h(){D(e,"class","fas fa-angle-right")},m(t,n){H(t,e,n)},d(t){t&&m(e)}}}function Ml(s){let e;return{c(){e=W("i"),this.h()},l(t){e=P(t,"I",{class:!0}),I(e).forEach(m),this.h()},h(){D(e,"class","fas fa-angle-down")},m(t,n){H(t,e,n)},d(t){t&&m(e)}}}function Hl(s){let e,t,n,i=s[0].children&&us(s);const l=s[3].default,o=ci(l,s,s[2],null);return{c(){e=W("div"),i&&i.c(),t=ne(),o&&o.c(),this.h()},l(r){e=P(r,"DIV",{class:!0,style:!0});var a=I(e);i&&i.l(a),t=se(a),o&&o.l(a),a.forEach(m),this.h()},h(){D(e,"class","sg-cell-inner svelte-1tk4vqn"),R(e,"padding-left",s[0].childLevel*3+"em")},m(r,a){H(r,e,a),i&&i.m(e,null),O(e,t),o&&o.m(e,null),n=!0},p(r,[a]){r[0].children?i?i.p(r,a):(i=us(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),o&&o.p&&(!n||a&4)&&ui(o,l,r,r[2],n?hi(l,r[2],a,null):fi(r[2]),null),(!n||a&1)&&R(e,"padding-left",r[0].childLevel*3+"em")},i(r){n||(F(o,r),n=!0)},o(r){G(o,r),n=!1},d(r){r&&m(e),i&&i.d(),o&&o.d(r)}}}function zl(s,e,t){let{$$slots:n={},$$scope:i}=e,{row:l}=e;const o=zt();function r(){l.expanded?o("rowCollapsed",{row:l}):o("rowExpanded",{row:l})}return s.$$set=a=>{"row"in a&&t(0,l=a.row),"$$scope"in a&&t(2,i=a.$$scope)},[l,r,i,n]}class Wl extends Oe{constructor(e){super(),Le(this,e,zl,Hl,Ye,{row:0})}}function fs(s,e,t){const n=s.slice();return n[12]=e[t],n}function Pl(s){let e,t,n=s[1].model.iconClass&&hs(s);function i(r,a){return r[1].model.headerHtml?Ll:r[12].renderer?Ol:r[12].type==="resourceInfo"?Yl:Bl}let l=i(s),o=l(s);return{c(){n&&n.c(),e=ne(),o.c(),t=j()},l(r){n&&n.l(r),e=se(r),o.l(r),t=j()},m(r,a){n&&n.m(r,a),H(r,e,a),o.m(r,a),H(r,t,a)},p(r,a){r[1].model.iconClass?n?n.p(r,a):(n=hs(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l===(l=i(r))&&o?o.p(r,a):(o.d(1),o=l(r),o&&(o.c(),o.m(t.parentNode,t)))},i:pe,o:pe,d(r){r&&(m(e),m(t)),n&&n.d(r),o.d(r)}}}function Il(s){let e,t;return e=new Wl({props:{row:s[1],$$slots:{default:[Fl]},$$scope:{ctx:s}}}),e.$on("rowCollapsed",s[8]),e.$on("rowExpanded",s[9]),{c(){ke(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){ve(e,n,i),t=!0},p(n,i){const l={};i&2&&(l.row=n[1]),i&32771&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(F(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function hs(s){let e,t,n;return{c(){e=W("div"),t=W("i"),this.h()},l(i){e=P(i,"DIV",{class:!0});var l=I(e);t=P(l,"I",{class:!0}),I(t).forEach(m),l.forEach(m),this.h()},h(){D(t,"class",n=Gt(s[1].model.iconClass)+" svelte-oze9vk"),D(e,"class","sg-table-icon svelte-oze9vk")},m(i,l){H(i,e,l),O(e,t)},p(i,l){l&2&&n!==(n=Gt(i[1].model.iconClass)+" svelte-oze9vk")&&D(t,"class",n)},d(i){i&&m(e)}}}function Bl(s){let e=s[1].model[s[12].property]+"",t;return{c(){t=ct(e)},l(n){t=ut(n,e)},m(n,i){H(n,t,i)},p(n,i){i&3&&e!==(e=n[1].model[n[12].property]+"")&&ft(t,e)},d(n){n&&m(t)}}}function Yl(s){let e,t,n,i,l=s[1].model[s[12].property]+"",o;return{c(){e=W("img"),n=ne(),i=W("div"),o=ct(l),this.h()},l(r){e=P(r,"IMG",{class:!0,src:!0,alt:!0}),n=se(r),i=P(r,"DIV",{class:!0});var a=I(i);o=ut(a,l),a.forEach(m),this.h()},h(){D(e,"class","sg-resource-image svelte-oze9vk"),Pn(e.src,t=s[1].model.imageSrc)||D(e,"src",t),D(e,"alt",""),D(i,"class","sg-resource-title")},m(r,a){H(r,e,a),H(r,n,a),H(r,i,a),O(i,o)},p(r,a){a&2&&!Pn(e.src,t=r[1].model.imageSrc)&&D(e,"src",t),a&3&&l!==(l=r[1].model[r[12].property]+"")&&ft(o,l)},d(r){r&&(m(e),m(n),m(i))}}}function Ol(s){let e,t=s[12].renderer(s[1])+"",n;return{c(){e=new rt(!1),n=j(),this.h()},l(i){e=at(i,!1),n=j(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),H(i,n,l)},p(i,l){l&3&&t!==(t=i[12].renderer(i[1])+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function Ll(s){let e,t=s[1].model.headerHtml+"",n;return{c(){e=new rt(!1),n=j(),this.h()},l(i){e=at(i,!1),n=j(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),H(i,n,l)},p(i,l){l&2&&t!==(t=i[1].model.headerHtml+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function ds(s){let e,t,n;return{c(){e=W("div"),t=W("i"),this.h()},l(i){e=P(i,"DIV",{class:!0});var l=I(e);t=P(l,"I",{class:!0}),I(t).forEach(m),l.forEach(m),this.h()},h(){D(t,"class",n=Gt(s[1].model.iconClass)+" svelte-oze9vk"),D(e,"class","sg-table-icon svelte-oze9vk")},m(i,l){H(i,e,l),O(e,t)},p(i,l){l&2&&n!==(n=Gt(i[1].model.iconClass)+" svelte-oze9vk")&&D(t,"class",n)},d(i){i&&m(e)}}}function Al(s){let e=s[1].model[s[12].property]+"",t;return{c(){t=ct(e)},l(n){t=ut(n,e)},m(n,i){H(n,t,i)},p(n,i){i&3&&e!==(e=n[1].model[n[12].property]+"")&&ft(t,e)},d(n){n&&m(t)}}}function Ul(s){let e,t=s[12].renderer(s[1])+"",n;return{c(){e=new rt(!1),n=j(),this.h()},l(i){e=at(i,!1),n=j(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),H(i,n,l)},p(i,l){l&3&&t!==(t=i[12].renderer(i[1])+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function Vl(s){let e,t=s[1].model.headerHtml+"",n;return{c(){e=new rt(!1),n=j(),this.h()},l(i){e=at(i,!1),n=j(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),H(i,n,l)},p(i,l){l&2&&t!==(t=i[1].model.headerHtml+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function Fl(s){let e,t,n=s[1].model.iconClass&&ds(s);function i(r,a){return r[1].model.headerHtml?Vl:r[12].renderer?Ul:Al}let l=i(s),o=l(s);return{c(){n&&n.c(),e=ne(),o.c(),t=j()},l(r){n&&n.l(r),e=se(r),o.l(r),t=j()},m(r,a){n&&n.m(r,a),H(r,e,a),o.m(r,a),H(r,t,a)},p(r,a){r[1].model.iconClass?n?n.p(r,a):(n=ds(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l===(l=i(r))&&o?o.p(r,a):(o.d(1),o=l(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&(m(e),m(t)),n&&n.d(r),o.d(r)}}}function gs(s){let e,t,n,i,l;const o=[Il,Pl],r=[];function a(c,f){return c[12].type=="tree"?0:1}return t=a(s),n=r[t]=o[t](s),{c(){e=W("div"),n.c(),i=ne(),this.h()},l(c){e=P(c,"DIV",{class:!0,style:!0});var f=I(e);n.l(f),i=se(f),f.forEach(m),this.h()},h(){D(e,"class","sg-table-body-cell sg-table-cell svelte-oze9vk"),R(e,"width",s[12].width+"px")},m(c,f){H(c,e,f),r[t].m(e,null),O(e,i),l=!0},p(c,f){let k=t;t=a(c),t===k?r[t].p(c,f):(Ue(),G(r[k],1,1,()=>{r[k]=null}),Ve(),n=r[t],n?n.p(c,f):(n=r[t]=o[t](c),n.c()),F(n,1),n.m(e,i)),(!l||f&1)&&R(e,"width",c[12].width+"px")},i(c){l||(F(n),l=!0)},o(c){G(n),l=!1},d(c){c&&m(e),r[t].d()}}}function Xl(s){let e,t,n,i,l=ee(s[0]),o=[];for(let a=0;a<l.length;a+=1)o[a]=gs(fs(s,l,a));const r=a=>G(o[a],1,1,()=>{o[a]=null});return{c(){e=W("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=P(a,"DIV",{"data-row-id":!0,style:!0,class:!0});var c=I(e);for(let f=0;f<o.length;f+=1)o[f].l(c);c.forEach(m),this.h()},h(){D(e,"data-row-id",t=s[1].model.id),R(e,"height",s[2]+"px"),D(e,"class",n="sg-table-row "+(s[1].model.classes||"")+" svelte-oze9vk"),V(e,"sg-row-expanded",s[1].expanded),V(e,"sg-hover",s[3]==s[1].model.id),V(e,"sg-selected",s[4]==s[1].model.id)},m(a,c){H(a,e,c);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);i=!0},p(a,[c]){if(c&3){l=ee(a[0]);let f;for(f=0;f<l.length;f+=1){const k=fs(a,l,f);o[f]?(o[f].p(k,c),F(o[f],1)):(o[f]=gs(k),o[f].c(),F(o[f],1),o[f].m(e,null))}for(Ue(),f=l.length;f<o.length;f+=1)r(f);Ve()}(!i||c&2&&t!==(t=a[1].model.id))&&D(e,"data-row-id",t),(!i||c&4)&&R(e,"height",a[2]+"px"),(!i||c&2&&n!==(n="sg-table-row "+(a[1].model.classes||"")+" svelte-oze9vk"))&&D(e,"class",n),(!i||c&2)&&V(e,"sg-row-expanded",a[1].expanded),(!i||c&10)&&V(e,"sg-hover",a[3]==a[1].model.id),(!i||c&18)&&V(e,"sg-selected",a[4]==a[1].model.id)},i(a){if(!i){for(let c=0;c<l.length;c+=1)F(o[c]);i=!0}},o(a){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)G(o[c]);i=!1},d(a){a&&m(e),st(o,a)}}}function Gl(s,e,t){let n,i,l,{headers:o=null}=e,{row:r=null}=e;const{rowHeight:a}=ce("options");U(s,a,E=>t(2,n=E));const{hoveredRow:c,selectedRow:f}=ce("gantt");U(s,c,E=>t(3,i=E)),U(s,f,E=>t(4,l=E));const k=zt();an(()=>{r.model.expanded==!1&&k("rowCollapsed",{row:r})});function T(E){on.call(this,s,E)}function _(E){on.call(this,s,E)}return s.$$set=E=>{"headers"in E&&t(0,o=E.headers),"row"in E&&t(1,r=E.row)},s.$$.update=()=>{s.$$.dirty&2&&r.parent&&r.childLevel*3},[o,r,n,i,l,a,c,f,T,_]}class Nl extends Oe{constructor(e){super(),Le(this,e,Gl,Xl,Ye,{headers:0,row:1})}}function ms(s,e,t){const n=s.slice();return n[32]=e[t],n}function _s(s,e,t){const n=s.slice();return n[35]=e[t],n}function ws(s){let e,t=s[35].title+"",n,i;return{c(){e=W("div"),n=ct(t),i=ne(),this.h()},l(l){e=P(l,"DIV",{class:!0,style:!0});var o=I(e);n=ut(o,t),i=se(o),o.forEach(m),this.h()},h(){D(e,"class","sg-table-header-cell sg-table-cell svelte-afbyi7"),R(e,"width",s[35].width+"px")},m(l,o){H(l,e,o),O(e,n),O(e,i)},p(l,o){o[0]&32&&t!==(t=l[35].title+"")&&ft(n,t),o[0]&32&&R(e,"width",l[35].width+"px")},d(l){l&&m(e)}}}function ks(s){let e,t;return e=new Nl({props:{row:s[32],headers:s[5]}}),e.$on("rowExpanded",s[17]),e.$on("rowCollapsed",s[18]),{c(){ke(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){ve(e,n,i),t=!0},p(n,i){const l={};i[0]&16&&(l.row=n[32]),i[0]&32&&(l.headers=n[5]),e.$set(l)},i(n){t||(F(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function jl(s){let e,t,n,i,l,o,r,a,c,f=ee(s[5]),k=[];for(let y=0;y<f.length;y+=1)k[y]=ws(_s(s,f,y));let T=ee(s[4]),_=[];for(let y=0;y<T.length;y+=1)_[y]=ks(ms(s,T,y));const E=y=>G(_[y],1,1,()=>{_[y]=null});return{c(){e=W("div"),t=W("div");for(let y=0;y<k.length;y+=1)k[y].c();n=ne(),i=W("div"),l=W("div"),o=W("div");for(let y=0;y<_.length;y+=1)_[y].c();this.h()},l(y){e=P(y,"DIV",{class:!0,style:!0});var w=I(e);t=P(w,"DIV",{class:!0,style:!0});var g=I(t);for(let q=0;q<k.length;q+=1)k[q].l(g);g.forEach(m),n=se(w),i=P(w,"DIV",{class:!0});var z=I(i);l=P(z,"DIV",{class:!0});var p=I(l);o=P(p,"DIV",{class:!0,style:!0});var C=I(o);for(let q=0;q<_.length;q+=1)_[q].l(C);C.forEach(m),p.forEach(m),z.forEach(m),w.forEach(m),this.h()},h(){D(t,"class","sg-table-header svelte-afbyi7"),R(t,"height",s[8]+"px"),D(o,"class","sg-table-rows svelte-afbyi7"),R(o,"padding-top",s[1]+"px"),R(o,"padding-bottom",s[2]+"px"),R(o,"height",s[3]+"px"),D(l,"class","sg-table-scroller svelte-afbyi7"),D(i,"class","sg-table-body svelte-afbyi7"),V(i,"bottom-scrollbar-visible",s[7]),D(e,"class","sg-table sg-view svelte-afbyi7"),R(e,"width",s[0]+"px")},m(y,w){H(y,e,w),O(e,t);for(let g=0;g<k.length;g+=1)k[g]&&k[g].m(t,null);s[22](t),O(e,n),O(e,i),O(i,l),O(l,o);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(o,null);r=!0,a||(c=nt(s[16].call(null,l)),a=!0)},p(y,w){if(w[0]&32){f=ee(y[5]);let g;for(g=0;g<f.length;g+=1){const z=_s(y,f,g);k[g]?k[g].p(z,w):(k[g]=ws(z),k[g].c(),k[g].m(t,null))}for(;g<k.length;g+=1)k[g].d(1);k.length=f.length}if((!r||w[0]&256)&&R(t,"height",y[8]+"px"),w[0]&393264){T=ee(y[4]);let g;for(g=0;g<T.length;g+=1){const z=ms(y,T,g);_[g]?(_[g].p(z,w),F(_[g],1)):(_[g]=ks(z),_[g].c(),F(_[g],1),_[g].m(o,null))}for(Ue(),g=T.length;g<_.length;g+=1)E(g);Ve()}(!r||w[0]&2)&&R(o,"padding-top",y[1]+"px"),(!r||w[0]&4)&&R(o,"padding-bottom",y[2]+"px"),(!r||w[0]&8)&&R(o,"height",y[3]+"px"),(!r||w[0]&128)&&V(i,"bottom-scrollbar-visible",y[7]),(!r||w[0]&1)&&R(e,"width",y[0]+"px")},i(y){if(!r){for(let w=0;w<T.length;w+=1)F(_[w]);r=!0}},o(y){_=_.filter(Boolean);for(let w=0;w<_.length;w+=1)G(_[w]);r=!1},d(y){y&&m(e),st(k,y),s[22](null),st(_,y),a=!1,c()}}}function Cs(s){s.forEach(e=>{e.children&&Cs(e.children),e.hidden=!0})}function Rs(s,e=!1){s.forEach(t=>{t.children&&Rs(t.children,!t.expanded),t.hidden=e})}function ql(s,e,t){let n,i,l,o,r,a,c;const f=zt();let{tableWidth:k}=e,{paddingTop:T}=e,{paddingBottom:_}=e,{rowContainerHeight:E}=e,{visibleRows:y}=e,{tableHeaders:w=[{title:"Name",property:"label",width:100}]}=e;const{from:g,to:z,width:p,visibleWidth:C,headerHeight:q}=ce("dimensions");U(s,p,b=>t(21,i=b)),U(s,C,b=>t(20,n=b)),U(s,q,b=>t(8,c=b));const{rowPadding:ie,rowHeight:N}=ce("options");U(s,ie,b=>t(23,l=b)),U(s,N,b=>t(26,a=b));const{rowStore:de,taskStore:ye}=ce("dataStore");U(s,de,b=>t(25,r=b)),U(s,ye,b=>t(24,o=b));const{scrollables:Q}=ce("gantt");an(()=>{f("init",{module:this})});let ue;function Fe(b){Q.push({node:b,orientation:"vertical"});function Z(re){t(6,ue.scrollLeft=b.scrollLeft,ue)}return b.addEventListener("scroll",Z),{destroy(){b.removeEventListener("scroll",Z)}}}let De;function Ce(b){const Z=b.detail.row;Z.expanded=!0,Z.children&&Rs(Z.children),ge()}function le(b){const Z=b.detail.row;Z.expanded=!1,Z.children&&Cs(Z.children),ge()}function ge(){let b=0;r.ids.forEach(Z=>{r.entities[Z].hidden||(ae(de,r.entities[Z].y=b,r),b+=a)}),o.ids.forEach(Z=>{const re=o.entities[Z],We=r.entities[re.model.resourceId];ae(ye,o.entities[Z].top=We.y+l,o)})}let Re;function K(b){pt[b?"unshift":"push"](()=>{ue=b,t(6,ue)})}return s.$$set=b=>{"tableWidth"in b&&t(0,k=b.tableWidth),"paddingTop"in b&&t(1,T=b.paddingTop),"paddingBottom"in b&&t(2,_=b.paddingBottom),"rowContainerHeight"in b&&t(3,E=b.rowContainerHeight),"visibleRows"in b&&t(4,y=b.visibleRows),"tableHeaders"in b&&t(5,w=b.tableHeaders)},s.$$.update=()=>{if(s.$$.dirty[0]&32){let b=0;w.forEach(Z=>{b+=Z.width}),t(19,De=b)}s.$$.dirty[0]&3670017&&t(7,Re=i>n&&De<=k)},[k,T,_,E,y,w,ue,Re,c,p,C,q,ie,N,de,ye,Fe,Ce,le,De,n,i,K]}class Ql extends Oe{constructor(e){super(),Le(this,e,ql,jl,Ye,{tableWidth:0,paddingTop:1,paddingBottom:2,rowContainerHeight:3,visibleRows:4,tableHeaders:5},null,[-1,-1])}}var Kl=Ql;class Jl{constructor(e){Y(this,"moment");this.moment=e}format(e,t){return this.moment(e).format(t)}roundTo(e,t,n){const i=this.moment(e);return Zl(i,n,t),i.valueOf()}}const vs={hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function Zl(s,e,t,n="round"){e===1&&t==="day"&&(e=24,t="hours"),vs[t]&&(t=vs[t]);const i={hours:24,minutes:60,seconds:60,milliseconds:1e3};i[t]||console.warn(`Rounding dates by ${t} is not supported`);let l=0,o=!1,r=1,a;for(const c in i)c===t?(l=s.get(t),a=i[c],o=!0):o&&(r*=i[c],l+=s.get(c)/r,s.set(c,0));return l=Math[n](l/e)*e,l=Math.min(l,a),s.set(t,l),s}const xl=Sl;function $l(s){let e,t,n,i,l,o,r;const a=[s[0]];let c={};for(let f=0;f<a.length;f+=1)c=it(c,a[f]);return i=new xl({props:c}),s[3](i),o=new gi({props:{options:s[0]}}),o.$on("change",s[2]),{c(){e=ne(),t=W("div"),n=W("div"),ke(i.$$.fragment),l=ne(),ke(o.$$.fragment),this.h()},l(f){di("svelte-1v6igbo",document.head).forEach(m),e=se(f),t=P(f,"DIV",{class:!0});var T=I(t);n=P(T,"DIV",{id:!0,class:!0});var _=I(n);ze(i.$$.fragment,_),_.forEach(m),l=se(T),ze(o.$$.fragment,T),T.forEach(m),this.h()},h(){document.title="Usage as svelte - svelte-gantt",D(n,"id","example-gantt"),D(n,"class","svelte-1toa21o"),D(t,"class","container svelte-1toa21o")},m(f,k){H(f,e,k),H(f,t,k),O(t,n),ve(i,n,null),O(t,l),ve(o,t,null),r=!0},p(f,[k]){const T=k&1?lt(a,[ot(f[0])]):{};i.$set(T);const _={};k&1&&(_.options=f[0]),o.$set(_)},i(f){r||(F(i.$$.fragment,f),F(o.$$.fragment,f),r=!0)},o(f){G(i.$$.fragment,f),G(o.$$.fragment,f),r=!1},d(f){f&&(m(e),m(t)),s[3](null),be(i),be(o)}}}function eo(s,e,t){let n;U(s,In,c=>t(0,n=c));const i=[{id:0,from:Me("10:00"),to:Me("12:00"),classes:null,label:"Lunch"},{id:1,from:Me("15:00"),to:Me("17:00"),classes:null,label:"Dinner"}],l={rows:[{id:1,label:"Preparation and Planning"},{id:2,label:"Development"},{id:3,label:"Implementation"},{id:4,label:"Training"}],tasks:[{id:1,resourceId:1,label:"Svelte-gantt",from:Me("7:00"),to:Me("9:00"),classes:"orange"},{id:2,resourceId:2,label:"As a",from:Me("9:00"),to:Me("11:00"),classes:"blue"},{id:3,resourceId:3,label:"Pure svelte",from:Me("11:00"),to:Me("13:00"),classes:"green"},{id:4,resourceId:4,label:"component",from:Me("13:00"),to:Me("15:00"),classes:"orange"}]};ae(In,n={dateAdapter:new Jl(mi),rows:l.rows,tasks:l.tasks,timeRanges:i,columnOffset:15,magnetOffset:15,rowHeight:52,rowPadding:6,headers:[{unit:"day",format:"MMMM Do"},{unit:"hour",format:"H:mm"}],fitWidth:!0,minWidth:800,from:Me("06:00"),to:Me("18:00"),tableHeaders:[{title:"Label",property:"label",width:140,type:"tree"}],tableWidth:240,ganttTableModules:[Kl]},n);let o;function r(c){const f=c.detail;Object.assign(n,f)}function a(c){pt[c?"unshift":"push"](()=>{o=c,t(1,o)})}return s.$$.update=()=>{s.$$.dirty&1&&console.log("options changed",n)},[n,o,r,a]}class ro extends Oe{constructor(e){super(),Le(this,e,eo,$l,Ye,{})}}export{ro as component};

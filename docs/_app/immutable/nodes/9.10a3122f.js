var ei=Object.defineProperty;var ti=(s,e,t)=>e in s?ei(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var B=(s,e,t)=>(ti(s,typeof e!="symbol"?e+"":e,t),t);import{s as Be,f as P,a as le,g as W,h as I,c as oe,d as m,j as C,k as S,H as F,i as M,r as Y,I as nt,J as ni,v as ve,w as sn,G as fe,D as U,K as rt,L as at,u as Qe,l as ct,m as ut,n as ft,E as ue,e as N,M as si,N as st,x as zt,O as nn,P as Sn,Q as En,R as Mn,S as Hn,T as Et,o as ln,U as ii,V as it,W as li,q as Xt,t as $t,p as bt,y as oi,A as ri,B as ai,C as ci,X as Gt,Y as zn,F as ui}from"../chunks/scheduler.bd64f757.js";import{S as Oe,i as Ye,a as V,g as Le,c as Ue,t as G,b as we,d as Se,m as ke,e as be}from"../chunks/index.86590fdc.js";import{e as se,u as At,o as Lt,G as fi}from"../chunks/GanttOptions.42da2f86.js";import{d as on,w as De}from"../chunks/index.938223df.js";import{t as Re,h as hi,o as Pn}from"../chunks/utils.1c822e9e.js";function lt(s,e){const t={},n={},i={$$scope:1};let l=s.length;for(;l--;){const o=s[l],r=e[l];if(r){for(const a in o)a in r||(n[a]=1);for(const a in r)i[a]||(t[a]=r[a],i[a]=1);s[l]=r}else for(const a in o)i[a]=1}for(const o in n)o in t||(t[o]=void 0);return t}function ot(s){return typeof s=="object"&&s!==null?s:{}}function en(){const{subscribe:s,set:e,update:t}=De({ids:[],entities:{}});return{set:e,_update:t,subscribe:s,add:n=>t(({ids:i,entities:l})=>({ids:[...i,n.model.id],entities:{...l,[n.model.id]:n}})),delete:n=>t(i=>{const{[n]:l,...o}=i.entities;return{ids:i.ids.filter(r=>r!==n),entities:o}}),deleteAll:n=>t(i=>{const l={...i.entities},o=new Set(n);for(let r=0;r<i.ids.length;r++)o.has(i.ids[r])&&delete l[i.ids[r]];return{ids:i.ids.filter(r=>!o.has(r)),entities:l}}),update:n=>t(({ids:i,entities:l})=>({ids:i,entities:{...l,[n.model.id]:n}})),upsert:n=>t(({ids:i,entities:l})=>({ids:i.indexOf(n.model.id)!==-1?i:[...i,n.model.id],entities:{...l,[n.model.id]:n}})),upsertAll:n=>t(i=>{const l={...i.entities},o=[...i.ids];for(let r=0;r<n.length;r++)o.indexOf(n[r].model.id)===-1&&o.push(n[r].model.id),l[n[r].model.id]=n[r];return{ids:o,entities:l}}),addAll:n=>{const i=[],l={};for(let o=0;o<n.length;o++)i.push(n[o].model.id),l[n[o].model.id]=n[o];e({ids:i,entities:l})},refresh:()=>t(n=>({...n}))}}function tn(s){return on(s,({ids:e,entities:t})=>{const n=[];for(let i=0;i<e.length;i++)n.push(t[e[i]]);return n})}function di(){const s=en(),e=en(),t=en(),n=tn(s),i=tn(e),l=tn(t),o=on(n,a=>{const c={};for(let f=0;f<a.length;f++){const w=a[f];c[w.model.resourceId]||(c[w.model.resourceId]=[]),c[w.model.resourceId].push(w.model.id)}return c}),r=De({});return{taskStore:s,rowStore:e,timeRangeStore:t,allTasks:n,allRows:i,allTimeRanges:l,rowTaskCache:o,draggingTaskCache:r}}class gi{constructor(e){B(this,"columnService");B(this,"rowPadding");B(this,"rowEntities");this.columnService=e}createTask(e){e.amountDone=e.amountDone||0,e.classes=e.classes||"",e.from=e.from||null,e.to=e.to||null,e.label=e.label||void 0,e.html=e.html||void 0,e.showButton=e.showButton||!1,e.buttonClasses=e.buttonClasses||"",e.buttonHtml=e.buttonHtml||"",e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const t=this.columnService.getPositionByDate(e.from)|0,n=this.columnService.getPositionByDate(e.to)|0;return{model:e,left:t,width:n-t,height:this.getHeight(e),top:this.getPosY(e),reflections:[]}}createTasks(e){return e.map(t=>this.createTask(t))}row(e){return this.rowEntities[e]}getHeight(e){return this.row(e.resourceId).height-2*this.rowPadding}getPosY(e){return this.row(e.resourceId).y+this.rowPadding}}function Nt(s,e,t){const n=`reflected-task-${s.model.id}-${e.model.id}`,i={...s.model,resourceId:e.model.id,id:n,enableDragging:!1};return{...s,model:i,top:e.y+t.rowPadding,reflected:!0,reflectedOnParent:!1,reflectedOnChild:!0,originalId:s.model.id}}function ks(s){return s.which===1}function Mt(s,e){const t=s.getBoundingClientRect(),n=e.clientX-t.left,i=e.clientY-t.top;return{x:n,y:i}}function bs(s,e,t,n,i){s.addEventListener(e,function l(){s.removeEventListener(e,l,i),t.apply(this,arguments,n)})}function Ht(s,e=document.body){e.style.cursor=s}function rn(s){return s?typeof s=="string"?s:Array.isArray(s)?s.join(" "):"":""}function mi(s,e){let t=!1;return function(){t||(s.apply(null,arguments),t=!0,setTimeout(function(){t=!1},e))}}function Wn(s){let e;return{c(){e=P("div"),this.h()},l(t){e=W(t,"DIV",{class:!0}),I(e).forEach(m),this.h()},h(){C(e,"class","sg-milestone__diamond svelte-1sabjdh")},m(t,n){M(t,e,n)},d(t){t&&m(e)}}}function In(s){let e;return{c(){e=P("div"),this.h()},l(t){e=W(t,"DIV",{class:!0,style:!0}),I(e).forEach(m),this.h()},h(){C(e,"class","sg-task-background svelte-1sabjdh"),S(e,"width",s[0].amountDone+"%")},m(t,n){M(t,e,n)},p(t,n){n[0]&1&&S(e,"width",t[0].amountDone+"%")},d(t){t&&m(e)}}}function _i(s){let e=s[0].label+"",t;return{c(){t=ct(e)},l(n){t=ut(n,e)},m(n,i){M(n,t,i)},p(n,i){i[0]&1&&e!==(e=n[0].label+"")&&ft(t,e)},d(n){n&&m(t)}}}function wi(s){let e,t=s[12](s[0])+"",n;return{c(){e=new rt(!1),n=N(),this.h()},l(i){e=at(i,!1),n=N(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),M(i,n,l)},p(i,l){l[0]&1&&t!==(t=i[12](i[0])+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function ki(s){let e,t=s[0].html+"",n;return{c(){e=new rt(!1),n=N(),this.h()},l(i){e=at(i,!1),n=N(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),M(i,n,l)},p(i,l){l[0]&1&&t!==(t=i[0].html+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function Bn(s){let e,t,n=s[0].buttonHtml+"",i,l,o;return{c(){e=P("span"),t=new rt(!1),this.h()},l(r){e=W(r,"SPAN",{class:!0});var a=I(e);t=at(a,!1),a.forEach(m),this.h()},h(){t.a=null,C(e,"class",i="sg-task-button "+s[0].buttonClasses+" svelte-1sabjdh")},m(r,a){M(r,e,a),t.m(n,e),l||(o=Qe(e,"click",s[17]),l=!0)},p(r,a){a[0]&1&&n!==(n=r[0].buttonHtml+"")&&t.p(n),a[0]&1&&i!==(i="sg-task-button "+r[0].buttonClasses+" svelte-1sabjdh")&&C(e,"class",i)},d(r){r&&m(e),l=!1,o()}}}function On(s){let e,t=s[0].labelBottom+"",n;return{c(){e=P("label"),n=ct(t),this.h()},l(i){e=W(i,"LABEL",{class:!0});var l=I(e);n=ut(l,t),l.forEach(m),this.h()},h(){C(e,"class","sg-label-bottom svelte-1sabjdh")},m(i,l){M(i,e,l),Y(e,n)},p(i,l){l[0]&1&&t!==(t=i[0].labelBottom+"")&&ft(n,t)},d(i){i&&m(e)}}}function bi(s){let e,t,n,i,l,o,r,a,c,f,w,T=s[0].type==="milestone"&&Wn(),_=s[0].amountDone&&In(s);function D(y,R){return y[0].html?ki:y[12]?wi:_i}let p=D(s),g=p(s),k=s[0].showButton&&Bn(s),H=s[0].labelBottom&&On(s);return{c(){e=P("div"),T&&T.c(),t=le(),_&&_.c(),n=le(),i=P("div"),g.c(),l=le(),k&&k.c(),o=le(),H&&H.c(),this.h()},l(y){e=W(y,"DIV",{"data-task-id":!0,class:!0,style:!0});var R=I(e);T&&T.l(R),t=oe(R),_&&_.l(R),n=oe(R),i=W(R,"DIV",{class:!0});var K=I(i);g.l(K),l=oe(K),k&&k.l(K),K.forEach(m),o=oe(R),H&&H.l(R),R.forEach(m),this.h()},h(){C(i,"class","sg-task-content svelte-1sabjdh"),C(e,"data-task-id",r=s[0].id),C(e,"class",a="sg-task "+s[6]+" svelte-1sabjdh"),S(e,"width",s[5].width+"px"),S(e,"height",s[1]+"px"),S(e,"transform","translate("+s[5].x+"px, "+s[5].y+"px)"),F(e,"sg-milestone",s[0].type==="milestone"),F(e,"moving",s[3]||s[4]),F(e,"animating",Yn),F(e,"sg-task-reflected",s[2]),F(e,"sg-task-selected",s[8][s[0].id]),F(e,"resize-enabled",s[7])},m(y,R){M(y,e,R),T&&T.m(e,null),Y(e,t),_&&_.m(e,null),Y(e,n),Y(e,i),g.m(i,null),Y(i,l),k&&k.m(i,null),Y(e,o),H&&H.m(e,null),f||(w=[nt(s[15].call(null,e)),nt(c=s[16].call(null,e,s[0]))],f=!0)},p(y,R){y[0].type==="milestone"?T||(T=Wn(),T.c(),T.m(e,t)):T&&(T.d(1),T=null),y[0].amountDone?_?_.p(y,R):(_=In(y),_.c(),_.m(e,n)):_&&(_.d(1),_=null),p===(p=D(y))&&g?g.p(y,R):(g.d(1),g=p(y),g&&(g.c(),g.m(i,l))),y[0].showButton?k?k.p(y,R):(k=Bn(y),k.c(),k.m(i,null)):k&&(k.d(1),k=null),y[0].labelBottom?H?H.p(y,R):(H=On(y),H.c(),H.m(e,null)):H&&(H.d(1),H=null),R[0]&1&&r!==(r=y[0].id)&&C(e,"data-task-id",r),R[0]&64&&a!==(a="sg-task "+y[6]+" svelte-1sabjdh")&&C(e,"class",a),R[0]&32&&S(e,"width",y[5].width+"px"),R[0]&2&&S(e,"height",y[1]+"px"),R[0]&32&&S(e,"transform","translate("+y[5].x+"px, "+y[5].y+"px)"),c&&ni(c.update)&&R[0]&1&&c.update.call(null,y[0]),R[0]&65&&F(e,"sg-milestone",y[0].type==="milestone"),R[0]&88&&F(e,"moving",y[3]||y[4]),R[0]&64&&F(e,"animating",Yn),R[0]&68&&F(e,"sg-task-reflected",y[2]),R[0]&321&&F(e,"sg-task-selected",y[8][y[0].id]),R[0]&192&&F(e,"resize-enabled",y[7])},i:ve,o:ve,d(y){y&&m(e),T&&T.d(),_&&_.d(),g.d(),k&&k.d(),H&&H.d(),f=!1,sn(w)}}}let Yn=!0;const Ut=40,Vt=40;function vi(s,e){return{left:s.clientX-e.left<0+Ut,top:s.clientY-e.top<0+Ut,right:s.clientX-e.left>e.width-Ut,bottom:s.clientY-e.top>e.height-Ut}}function pi(s,e,t){let n,i,l,o,r,{model:a}=e,{height:c}=e,{left:f}=e,{top:w}=e,{width:T}=e,{reflected:_=!1}=e,D=!1,p=!1,g={x:f,y:w,width:T};function k(O,re,J){!D&&!p&&(t(5,g.x=O,g),t(5,g.y=re,g),t(5,g.width=J,g))}const{taskStore:H,rowStore:y,draggingTaskCache:R}=fe("dataStore");U(s,H,O=>t(25,o=O)),U(s,y,O=>t(21,n=O)),U(s,R,O=>t(23,i=O));const{rowContainer:K,mainContainer:te}=fe("gantt"),{taskContent:Z,resizeHandleWidth:de,rowPadding:ge,onTaskButtonClick:j,reflectOnParentRows:me,reflectOnChildRows:Ve,taskElementHook:pe}=fe("options");U(s,ge,O=>t(24,l=O));const{dndManager:Ee,api:ie,utils:Me,columnService:ye,selectionManager:q}=fe("services");let v=q.selectedTasks;U(s,v,O=>t(8,r=O));let x;const ce=mi(O=>{const re=vi(O,x);(re.left||re.right)&&te.scrollTo({left:te.scrollLeft+(re.left?-Vt:Vt),behavior:"smooth"}),(re.top||re.bottom)&&te.scrollTo({top:te.scrollTop+(re.top?-Vt:Vt),behavior:"smooth"})},250);function Ae(O){function re(J){let Q=!0;const Pe=n.entities[a.resourceId];if(J.dragging){const h=Ee.getTarget("row",J.mouseEvent);h?(t(0,a.resourceId=h.model.id,a),ie.tasks.raise.switchRow(this,h,Pe)):Q=!1}t(3,D=t(4,p=!1));const d=o.entities[a.id];if(delete i[a.id],Q){const h=a.from,E=a.to,Te=t(0,a.from=Me.roundTo(ye.getDateByPosition(J.x)),a),A=t(0,a.to=Me.roundTo(ye.getDateByPosition(J.x+J.width)),a),ae=ye.getPositionByDate(Te)|0,Ne=ye.getPositionByDate(A)|0,ne=n.entities[a.resourceId],Ke=ae,Fe=Ne-ae,We=l+ne.y;k(Ke,We,Fe);const L={...d,left:Ke,width:Fe,top:We,model:a},vt=h!=Te||E!=A||Pe&&Pe.model.id!==ne.model.id;vt&&ie.tasks.raise.change({task:L,sourceRow:Pe,targetRow:ne}),q.newTasksAndReflections.push(L),vt&&ie.tasks.raise.changed({task:L,sourceRow:Pe,targetRow:ne}),L.reflections&&q.oldReflections.push(...L.reflections);const qe=[];if(Ve&&ne.allChildren){L.reflections||(L.reflections=[]);const Je={rowPadding:l};ne.allChildren.forEach(dt=>{const Ze=Nt(L,dt,Je);L.reflections.push(Ze.model.id),qe.push(Ze)})}if(me&&ne.allParents.length>0){L.reflections||(L.reflections=[]);const Je={rowPadding:l};ne.allParents.forEach(dt=>{const Ze=Nt(L,dt,Je);L.reflections.push(Ze.model.id),qe.push(Ze)})}qe.length>0&&q.newTasksAndReflections.push(...qe),!(ne.allParents.length>0)&&!ne.allChildren&&(L.reflections=null)}else t(5,g.x=d.left,g),t(5,g.width=d.width,g),t(5,g.y=d.top,g)}if(!_)return q.taskSettings.set(a.id,{onDown:J=>{x=te.getBoundingClientRect(),J.dragging&&Ht("move"),J.resizing&&Ht("e-resize"),ue(R,i[a.id]=!0,i)},onMouseUp:()=>{Ht("default"),ie.tasks.raise.moveEnd(a)},onResize:J=>{t(5,g.x=J.x,g),t(5,g.width=J.width,g),t(4,p=!0),ce(J.event)},onDrag:J=>{t(5,g.x=J.x,g),t(5,g.y=J.y,g),t(3,D=!0),ie.tasks.raise.move(a),ce(J.event)},dragAllowed:()=>n.entities[a.resourceId].model.enableDragging&&a.enableDragging,resizeAllowed:()=>a.type!=="milestone"&&n.entities[a.resourceId].model.enableDragging&&a.enableDragging,onDrop:re,container:K,resizeHandleWidth:de,getX:()=>g.x,getY:()=>g.y,getWidth:()=>g.width,modelId:a.id}),{destroy:()=>q.taskSettings.delete(a.id)}}function He(O,re){if(pe)return pe(O,re)}function Xe(O){j&&j(a,O)}let ze,Ge;return s.$$set=O=>{"model"in O&&t(0,a=O.model),"height"in O&&t(1,c=O.height),"left"in O&&t(18,f=O.left),"top"in O&&t(19,w=O.top),"width"in O&&t(20,T=O.width),"reflected"in O&&t(2,_=O.reflected)},s.$$.update=()=>{s.$$.dirty[0]&1835008&&k(f,w,T),s.$$.dirty[0]&1&&t(6,ze=rn(a.classes)),s.$$.dirty[0]&2097153&&t(7,Ge=a.type!=="milestone"&&n.entities[a.resourceId].model.enableDragging&&a.enableDragging)},[a,c,_,D,p,g,ze,Ge,r,H,y,R,Z,ge,v,Ae,He,Xe,f,w,T,n]}class yi extends Oe{constructor(e){super(),Ye(this,e,pi,bi,Be,{model:0,height:1,left:18,top:19,width:20,reflected:2},null,[-1,-1])}}function An(s){let e,t=s[0].model.contentHtml+"",n;return{c(){e=new rt(!1),n=N(),this.h()},l(i){e=at(i,!1),n=N(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),M(i,n,l)},p(i,l){l&1&&t!==(t=i[0].model.contentHtml+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function Ti(s){let e,t,n,i=s[0].model.contentHtml&&An(s);return{c(){e=P("div"),i&&i.c(),this.h()},l(l){e=W(l,"DIV",{class:!0,"data-row-id":!0,style:!0});var o=I(e);i&&i.l(o),o.forEach(m),this.h()},h(){C(e,"class",t="sg-row "+s[0].model.classes+" svelte-7u5y5s"),C(e,"data-row-id",n=s[0].model.id),S(e,"height",s[3]+"px"),F(e,"sg-hover",s[1]==s[0].model.id),F(e,"sg-selected",s[2]==s[0].model.id)},m(l,o){M(l,e,o),i&&i.m(e,null)},p(l,[o]){l[0].model.contentHtml?i?i.p(l,o):(i=An(l),i.c(),i.m(e,null)):i&&(i.d(1),i=null),o&1&&t!==(t="sg-row "+l[0].model.classes+" svelte-7u5y5s")&&C(e,"class",t),o&1&&n!==(n=l[0].model.id)&&C(e,"data-row-id",n),o&8&&S(e,"height",l[3]+"px"),o&3&&F(e,"sg-hover",l[1]==l[0].model.id),o&5&&F(e,"sg-selected",l[2]==l[0].model.id)},i:ve,o:ve,d(l){l&&m(e),i&&i.d()}}}function Ci(s,e,t){let n,i,l,{row:o}=e;const{rowHeight:r}=fe("options");U(s,r,f=>t(3,l=f));const{hoveredRow:a,selectedRow:c}=fe("gantt");return U(s,a,f=>t(1,n=f)),U(s,c,f=>t(2,i=f)),s.$$set=f=>{"row"in f&&t(0,o=f.row)},[o,n,i,l,r,a,c]}class Ri extends Oe{constructor(e){super(),Ye(this,e,Ci,Ti,Be,{row:0})}}function Ln(s){let e,t=s[0].label+"",n;return{c(){e=P("div"),n=ct(t),this.h()},l(i){e=W(i,"DIV",{class:!0});var l=I(e);n=ut(l,t),l.forEach(m),this.h()},h(){C(e,"class","sg-time-range-label svelte-w7p5la")},m(i,l){M(i,e,l),Y(e,n)},p(i,l){l&1&&t!==(t=i[0].label+"")&&ft(n,t)},d(i){i&&m(e)}}}function Di(s){let e,t,n=s[0].label&&Ln(s);return{c(){e=P("div"),n&&n.c(),this.h()},l(i){e=W(i,"DIV",{class:!0,style:!0});var l=I(e);n&&n.l(l),l.forEach(m),this.h()},h(){C(e,"class",t="sg-time-range "+s[3]+" svelte-w7p5la"),S(e,"width",s[2].width+"px"),S(e,"left",s[2].x+"px"),F(e,"moving",s[1])},m(i,l){M(i,e,l),n&&n.m(e,null)},p(i,[l]){i[0].label?n?n.p(i,l):(n=Ln(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null),l&8&&t!==(t="sg-time-range "+i[3]+" svelte-w7p5la")&&C(e,"class",t),l&4&&S(e,"width",i[2].width+"px"),l&4&&S(e,"left",i[2].x+"px"),l&10&&F(e,"moving",i[1])},i:ve,o:ve,d(i){i&&m(e),n&&n.d()}}}function Si(s,e,t){let{model:n}=e,{left:i}=e,{width:l}=e,{resizing:o=!1}=e;const r={width:l,x:i};let a;return s.$$set=c=>{"model"in c&&t(0,n=c.model),"left"in c&&t(4,i=c.left),"width"in c&&t(5,l=c.width),"resizing"in c&&t(1,o=c.resizing)},s.$$.update=()=>{s.$$.dirty&48&&(t(2,r.x=i,r),t(2,r.width=l,r)),s.$$.dirty&1&&t(3,a=rn(n.classes))},[n,o,r,a,i,l]}class Ei extends Oe{constructor(e){super(),Ye(this,e,Si,Di,Be,{model:0,left:4,width:5,resizing:1})}}const Mi=2,Hi=2;class an{constructor(e,t,n){B(this,"mouseStartPosX");B(this,"mouseStartPosY");B(this,"mouseStartRight");B(this,"direction");B(this,"dragging",!1);B(this,"resizing",!1);B(this,"initialX");B(this,"initialY");B(this,"initialW");B(this,"resizeTriggered",!1);B(this,"settings");B(this,"node");B(this,"offsetPos",{x:null,y:null});B(this,"offsetWidth",null);B(this,"overRezisedOffset");B(this,"onmousedown",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!ks(e)&&!this.settings.modelId)return;this.settings.modelId||(e.stopPropagation(),e.preventDefault());const n=this.dragAllowed,i=this.resizeAllowed;if(n||i){const l=this.settings.getX(),o=this.settings.getY(),r=this.settings.getWidth();this.initialX=t.clientX,this.initialY=t.clientY,this.mouseStartRight=l+r,this.mouseStartPosX=Mt(this.settings.container,t).x-l,this.mouseStartPosY=Mt(this.settings.container,t).y-o,i&&this.mouseStartPosX<=this.settings.resizeHandleWidth&&(this.direction="left",this.resizing=!0),i&&this.mouseStartPosX>=r-this.offsetWidth-this.settings.resizeHandleWidth&&(this.direction="right",this.resizing=!0),n&&!this.resizing&&(this.dragging=!0),(this.dragging||this.resizing)&&this.settings.onDown&&this.settings.onDown({mouseEvent:t,x:l,width:r,y:o,resizing:this.resizing,dragging:this.dragging}),this.settings.modelId||(window.addEventListener("mousemove",this.onmousemove,!1),bs(window,"mouseup",this.onmouseup))}});B(this,"onmousemove",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!this.resizeTriggered)if(Math.abs(t.clientX-this.initialX)>Mi||Math.abs(t.clientY-this.initialY)>Hi)this.resizeTriggered=!0;else return;if(e.preventDefault(),this.resizing){const n=Mt(this.settings.container,t),i=this.settings.getX(),l=this.settings.getWidth();let o,r;this.direction==="left"?(this.overRezisedOffset==="left"&&(n.x+=this.offsetWidth),this.mouseStartRight-n.x<=0?(this.direction="right",this.overRezisedOffset!=="left"?this.overRezisedOffset="right":this.overRezisedOffset=void 0,o=this.mouseStartRight,r=this.mouseStartRight-n.x,this.mouseStartRight=this.mouseStartRight+l):(o=n.x,r=this.mouseStartRight-n.x)):this.direction==="right"&&(this.overRezisedOffset==="right"&&(n.x-=this.offsetWidth),n.x-i+this.offsetWidth<=0?(this.direction="left",this.overRezisedOffset!=="right"?this.overRezisedOffset="left":this.overRezisedOffset=void 0,o=n.x+this.offsetWidth,r=n.x-i+this.offsetWidth,this.mouseStartRight=i):(o=i,r=n.x-i+this.offsetWidth)),this.settings.onResize&&this.settings.onResize({x:o,width:r,event:e})}if(this.dragging&&this.settings.onDrag){const n=Mt(this.settings.container,t);this.settings.onDrag({x:n.x-this.mouseStartPosX,y:n.y-this.mouseStartPosY,event:e})}});B(this,"onmouseup",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY},n=this.settings.getX(),i=this.settings.getY(),l=this.settings.getWidth();this.settings.onMouseUp&&this.settings.onMouseUp(),this.resizeTriggered&&this.settings.onDrop&&this.settings.onDrop({mouseEvent:t,x:n,y:i,width:l,dragging:this.dragging,resizing:this.resizing}),this.mouseStartPosX=null,this.mouseStartPosY=null,this.mouseStartRight=null,this.dragging=!1,this.resizing=!1,this.initialX=null,this.initialY=null,this.initialW=null,this.resizeTriggered=!1,this.offsetPos={x:null,y:null},this.offsetWidth=null,this.overRezisedOffset=void 0,this.settings.modelId||window.removeEventListener("mousemove",this.onmousemove,!1)});this.settings=t,this.node=e,this.settings.modelId?(this.offsetPos=n.offsetPos,this.offsetWidth=n.offsetWidth):e.addEventListener("mousedown",this.onmousedown,{passive:!0})}get dragAllowed(){return typeof this.settings.dragAllowed=="function"?this.settings.dragAllowed():this.settings.dragAllowed}get resizeAllowed(){return typeof this.settings.resizeAllowed=="function"?this.settings.resizeAllowed():this.settings.resizeAllowed}destroy(){this.node.removeEventListener("mousedown",this.onmousedown,!1),this.node.removeEventListener("mousemove",this.onmousemove,!1),this.node.removeEventListener("mouseup",this.onmouseup,!1)}}class zi{constructor(e){B(this,"handlerMap",{});this.register("row",t=>{let i=document.elementsFromPoint(t.clientX,t.clientY).find(l=>!!l.getAttribute("data-row-id"));if(i!==void 0){const l=i.getAttribute("data-row-id"),{entities:o}=si(e),r=o[l];if(r.model.enableDragging)return r}return null})}register(e,t){this.handlerMap[e]=t}getTarget(e,t){var n=this.handlerMap[e];if(n)return n(t)}}function Pi(s){let e,t,n,i,l,o,r;return{c(){e=P("div"),t=P("div"),n=le(),i=P("div"),this.h()},l(a){e=W(a,"DIV",{class:!0,style:!0});var c=I(e);t=W(c,"DIV",{class:!0}),I(t).forEach(m),n=oe(c),i=W(c,"DIV",{class:!0}),I(i).forEach(m),c.forEach(m),this.h()},h(){C(t,"class","sg-time-range-handle-left svelte-w4nglp"),C(i,"class","sg-time-range-handle-right svelte-w4nglp"),C(e,"class",l="sg-time-range-control "+s[1]+" svelte-w4nglp"),S(e,"width",s[0].width+"px"),S(e,"left",s[0].x+"px"),F(e,"sg-time-range-disabled",!s[3]())},m(a,c){M(a,e,c),Y(e,t),Y(e,n),Y(e,i),o||(r=[nt(s[2].call(null,t)),nt(s[2].call(null,i))],o=!0)},p(a,[c]){c&2&&l!==(l="sg-time-range-control "+a[1]+" svelte-w4nglp")&&C(e,"class",l),c&1&&S(e,"width",a[0].width+"px"),c&1&&S(e,"left",a[0].x+"px"),c&10&&F(e,"sg-time-range-disabled",!a[3]())},i:ve,o:ve,d(a){a&&m(e),o=!1,sn(r)}}}function Wi(s,e,t){const{rowContainer:n}=fe("gantt"),{api:i,utils:l,columnService:o}=fe("services"),{resizeHandleWidth:r}=fe("options"),{timeRangeStore:a}=fe("dataStore");let{model:c}=e,{width:f}=e,{left:w}=e;const T={width:f,x:w};function _(g){const k=R=>{const K=l.roundTo(o.getDateByPosition(R.x)),te=l.roundTo(o.getDateByPosition(R.x+R.width)),Z=o.getPositionByDate(K),de=o.getPositionByDate(te);Object.assign(c,{from:K,to:te}),H({left:Z,width:de-Z,model:c,resizing:!1}),window.removeEventListener("mousemove",onmousemove,!1)};function H(R){a.update(R),t(0,T.x=R.left,T),t(0,T.width=R.width,T)}const y=new an(g,{onDown:R=>{i.timeranges.raise.clicked({model:c}),H({left:R.x,width:R.width,model:c,resizing:!0})},onResize:R=>{i.timeranges.raise.resized({model:c,left:R.x,width:R.width}),H({left:R.x,width:R.width,model:c,resizing:!0})},dragAllowed:!1,resizeAllowed:()=>D(),onDrop:k,container:n,resizeHandleWidth:r,getX:()=>T.x,getY:()=>0,getWidth:()=>T.width});return{destroy:()=>y.destroy()}}function D(){return c.resizable!==void 0?c.resizable:!0}let p;return s.$$set=g=>{"model"in g&&t(4,c=g.model),"width"in g&&t(5,f=g.width),"left"in g&&t(6,w=g.left)},s.$$.update=()=>{s.$$.dirty&96&&(t(0,T.x=w,T),t(0,T.width=f,T)),s.$$.dirty&16&&t(1,p=rn(c.classes))},[T,p,_,D,c,f,w]}class Ii extends Oe{constructor(e){super(),Ye(this,e,Wi,Pi,Be,{model:4,width:5,left:6})}}function Bi(s,e=1){switch(s){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${s}`)}}function Oi(s,e=1){return s.setSeconds(s.getSeconds()+e),s}function Yi(s,e=1){return s.setMinutes(s.getMinutes()+e),s}function Ai(s,e=1){return s.setHours(s.getHours()+e),s}function Li(s,e=1){return s.setDate(s.getDate()+e),s.setHours(0,0,0),s}function Ui(s,e=1){const t=s,n=t.getDay(),i=t.getDate()-n+(n==0?-6:1);return t.setDate(i),t.setHours(0,0,0),t.setDate(t.getDate()+7*e),t}function Vi(s,e=1){return s.setMonth(s.getMonth()+e),s.setDate(1),s.setHours(0,0,0),s}function Fi(s,e=1){return s.setFullYear(s.getFullYear()+e),s.setMonth(0),s.setDate(1),s.setHours(0,0,0),s}function Un(s,e,t){switch(e){case"y":case"year":return Fi(s,t);case"month":return Vi(s,t);case"week":return Ui(s,t);case"d":case"day":return Li(s,t);case"h":case"hour":return Ai(s,t);case"m":case"minute":return Yi(s,t);case"s":case"second":return Oi(s,t)}}const Xi=["y","year","month","week","d","day","h","hour","m","minute","s","second"];function vs(s,e,t,n=1,i){if(Xi.indexOf(t)!==-1){let l=0,o=0;const r=new Date(s),a=new Date(s);let c=Un(a,t,n),f=c.getTime();const w=c.getTime()-s,T=[{from:s,to:c.getTime(),duration:w,isHighlighted:i&&Vn(r,i)}];if(f<e){for(;f<e;)l=f,c=Un(new Date(f),t,n),o=c.getTime()-f,T.push({from:f,to:c.getTime(),duration:o,isHighlighted:i&&Vn(new Date(f),i)}),f=c.getTime();const _=e-l;T[T.length-1].to=e,T[T.length-1].duration=_}return T}throw new Error(`Unknown unit: ${t}`)}function Vn(s,e){let t;switch(e.unit){case"m":case"minute":return t=s.getMinutes(),e.fractions.includes(t);case"h":case"hour":return t=s.getHours(),e.fractions.includes(t);case"d":case"day":return t=s.getDay(),e.fractions.includes(t);case"week":return e.fractions.includes(t);case"dayinMonth":return t=s.getDate(),e.fractions.includes(t);case"month":return t=s.getMonth(),e.fractions.includes(t);case"y":case"year":return t=s.getFullYear(),e.fractions.includes(t);default:throw new Error(`Invalid unit: ${e.unit}`)}}class Gi{constructor(){B(this,"from");B(this,"to");B(this,"width");B(this,"magnetOffset");B(this,"magnetUnit");B(this,"magnetDuration");B(this,"dateAdapter")}getPositionByDate(e){return cn(e,this.from,this.to,this.width)}getDateByPosition(e){return Ni(e,this.from,this.to,this.width)}roundTo(e){return this.dateAdapter?this.dateAdapter.roundTo(e,this.magnetUnit,this.magnetOffset):null}}function cn(s,e,t,n){if(!s)return;const i=s-e,l=t-e;return i/l*n}function Ni(s,e,t,n){const i=s/n*(t-e);return e+i}function ji(s,e,t,n){let i=-1,l=s.length;for(;l-i>1;){const o=Math.floor((i+l)/2);(n?t(s[o])<e:t(s[o])<=e)?i=o:l=o}return!n&&s[i]!==void 0&&t(s[i])===e&&(l=i),[i,l]}function ps(s,e,t,n){const i=ji(s,e,t,n);return[s[i[0]],s[i[1]]]}function Fn(s,e,t){const n=s.slice();return n[13]=e[t],n}function Xn(s){let e,t,n=(s[13].label||"N/A")+"",i,l,o,r;function a(){return s[10](s[13])}return{c(){e=P("div"),t=P("div"),i=ct(n),l=le(),this.h()},l(c){e=W(c,"DIV",{class:!0,role:!0,tabindex:!0,style:!0});var f=I(e);t=W(f,"DIV",{class:!0});var w=I(t);i=ut(w,n),w.forEach(m),l=oe(f),f.forEach(m),this.h()},h(){C(t,"class","column-header-cell-label svelte-vfarxf"),C(e,"class","column-header-cell svelte-vfarxf"),C(e,"role","button"),C(e,"tabindex","0"),S(e,"left",s[13].left+"px"),S(e,"width",s[13].width+"px"),F(e,"sticky",s[0].sticky)},m(c,f){M(c,e,f),Y(e,t),Y(t,i),Y(e,l),o||(r=Qe(e,"click",a),o=!0)},p(c,f){s=c,f&1&&n!==(n=(s[13].label||"N/A")+"")&&ft(i,n),f&1&&S(e,"left",s[13].left+"px"),f&1&&S(e,"width",s[13].width+"px"),f&1&&F(e,"sticky",s[0].sticky)},d(c){c&&m(e),o=!1,r()}}}function qi(s){let e,t=se(s[0].columns),n=[];for(let i=0;i<t.length;i+=1)n[i]=Xn(Fn(s,t,i));return{c(){e=P("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=W(i,"DIV",{class:!0});var l=I(e);for(let o=0;o<n.length;o+=1)n[o].l(l);l.forEach(m),this.h()},h(){C(e,"class","column-header-row svelte-vfarxf")},m(i,l){M(i,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,[l]){if(l&17){t=se(i[0].columns);let o;for(o=0;o<t.length;o+=1){const r=Fn(i,t,o);n[o]?n[o].p(r,l):(n[o]=Xn(r),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},i:ve,o:ve,d(i){i&&m(e),st(n,i)}}}function Qi(s,e,t){let n,i,l;const o=zt(),{from:r,to:a,width:c}=fe("dimensions");U(s,r,g=>t(9,l=g)),U(s,a,g=>t(8,i=g)),U(s,c,g=>t(7,n=g));const{dateAdapter:f}=fe("options");let{header:w}=e,{ganttBodyColumns:T}=e,{ganttBodyUnit:_}=e;function D(g){o("dateSelected",{from:g.from,to:g.to,unit:w.unit})}const p=g=>D(g);return s.$$set=g=>{"header"in g&&t(0,w=g.header),"ganttBodyColumns"in g&&t(5,T=g.ganttBodyColumns),"ganttBodyUnit"in g&&t(6,_=g.ganttBodyUnit)},s.$$.update=()=>{if(s.$$.dirty&993)if(w.unit===_)t(0,w.columns=T.map(g=>({...g,label:f.format(g.from,w.format)})),w);else{const g=vs(l.valueOf(),i.valueOf(),w.unit);let k=0,H=0;t(0,w.columns=g.map(y=>(H=k,k=cn(y.to,l.valueOf(),i.valueOf(),n),{width:Math.min(k-H,n),label:f.format(y.from,w.format),from:y.from,to:y.to,left:H})),w)}},[w,r,a,c,D,T,_,n,i,l,p]}class Ki extends Oe{constructor(e){super(),Ye(this,e,Qi,qi,Be,{header:0,ganttBodyColumns:5,ganttBodyUnit:6})}}function Gn(s,e,t){const n=s.slice();return n[4]=e[t],n}function Nn(s){let e,t;return e=new Ki({props:{header:s[4],ganttBodyColumns:s[1],ganttBodyUnit:s[2]}}),e.$on("dateSelected",s[3]),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,i){ke(e,n,i),t=!0},p(n,i){const l={};i&1&&(l.header=n[4]),i&2&&(l.ganttBodyColumns=n[1]),i&4&&(l.ganttBodyUnit=n[2]),e.$set(l)},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function Ji(s){let e,t,n=se(s[0]),i=[];for(let o=0;o<n.length;o+=1)i[o]=Nn(Gn(s,n,o));const l=o=>G(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=N()},l(o){for(let r=0;r<i.length;r+=1)i[r].l(o);e=N()},m(o,r){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,r);M(o,e,r),t=!0},p(o,[r]){if(r&7){n=se(o[0]);let a;for(a=0;a<n.length;a+=1){const c=Gn(o,n,a);i[a]?(i[a].p(c,r),V(i[a],1)):(i[a]=Nn(c),i[a].c(),V(i[a],1),i[a].m(e.parentNode,e))}for(Le(),a=n.length;a<i.length;a+=1)l(a);Ue()}},i(o){if(!t){for(let r=0;r<n.length;r+=1)V(i[r]);t=!0}},o(o){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)G(i[r]);t=!1},d(o){o&&m(e),st(i,o)}}}function Zi(s,e,t){let{headers:n}=e,{ganttBodyColumns:i}=e,{ganttBodyUnit:l}=e;function o(r){nn.call(this,s,r)}return s.$$set=r=>{"headers"in r&&t(0,n=r.headers),"ganttBodyColumns"in r&&t(1,i=r.ganttBodyColumns),"ganttBodyUnit"in r&&t(2,l=r.ganttBodyUnit)},[n,i,l,o]}class xi extends Oe{constructor(e){super(),Ye(this,e,Zi,Ji,Be,{headers:0,ganttBodyColumns:1,ganttBodyUnit:2})}}function $i(s,e){const t=document.createElement("canvas");t.width=(s.length-1)*s[0].width,t.height=20;const n=t.getContext("2d");return n.shadowColor="rgba(128,128,128,0.5)",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=.5,n.lineWidth=e.columnStrokeWidth,n.lineCap="square",n.strokeStyle=e.columnStrokeColor,n.translate(.5,.5),s.forEach(l=>{el(n,l.left)}),`url("${t.toDataURL()}")`}function el(s,e){s.beginPath(),s.moveTo(e,0),s.lineTo(e,20),s.stroke()}function jn(s,e,t){const n=s.slice();return n[6]=e[t],n}function tl(s){let e,t=se(s[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=qn(jn(s,t,i));return{c(){e=P("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=W(i,"DIV",{class:!0});var l=I(e);for(let o=0;o<n.length;o+=1)n[o].l(l);l.forEach(m),this.h()},h(){C(e,"class","sg-columns svelte-1uqfnup")},m(i,l){M(i,e,l);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,l){if(l&29){t=se(i[0]);let o;for(o=0;o<t.length;o+=1){const r=jn(i,t,o);n[o]?n[o].p(r,l):(n[o]=qn(r),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){i&&m(e),st(n,i)}}}function nl(s){let e;return{c(){e=P("div"),this.h()},l(t){e=W(t,"DIV",{class:!0}),I(e).forEach(m),this.h()},h(){C(e,"class","sg-columns sg-columns--background svelte-1uqfnup"),S(e,"background-image",s[5])},m(t,n){M(t,e,n)},p(t,n){n&32&&S(e,"background-image",t[5])},d(t){t&&m(e)}}}function qn(s){let e;return{c(){e=P("div"),this.h()},l(t){e=W(t,"DIV",{class:!0,style:!0}),I(e).forEach(m),this.h()},h(){C(e,"class","sg-column svelte-1uqfnup"),S(e,"border-right",(s[6].bgHighlightColor?0:s[2])+"px solid "+(s[6].bgHighlightColor||s[3])),S(e,"left",s[6].left+"px"),S(e,"width",s[6].width+"px"),S(e,"background-color",s[6].bgHighlightColor||s[4])},m(t,n){M(t,e,n)},p(t,n){n&13&&S(e,"border-right",(t[6].bgHighlightColor?0:t[2])+"px solid "+(t[6].bgHighlightColor||t[3])),n&1&&S(e,"left",t[6].left+"px"),n&1&&S(e,"width",t[6].width+"px"),n&17&&S(e,"background-color",t[6].bgHighlightColor||t[4])},d(t){t&&m(e)}}}function sl(s){let e;function t(l,o){return l[1]?nl:tl}let n=t(s),i=n(s);return{c(){i.c(),e=N()},l(l){i.l(l),e=N()},m(l,o){i.m(l,o),M(l,e,o)},p(l,[o]){n===(n=t(l))&&i?i.p(l,o):(i.d(1),i=n(l),i&&(i.c(),i.m(e.parentNode,e)))},i:ve,o:ve,d(l){l&&m(e),i.d(l)}}}function il(s,e,t){let{columns:n}=e,{useCanvasColumns:i=!0}=e,{columnStrokeWidth:l}=e,{columnStrokeColor:o}=e,{columnDefaultColor:r="#ffffff"}=e,a;return s.$$set=c=>{"columns"in c&&t(0,n=c.columns),"useCanvasColumns"in c&&t(1,i=c.useCanvasColumns),"columnStrokeWidth"in c&&t(2,l=c.columnStrokeWidth),"columnStrokeColor"in c&&t(3,o=c.columnStrokeColor),"columnDefaultColor"in c&&t(4,r=c.columnDefaultColor)},s.$$.update=()=>{s.$$.dirty&13&&t(5,a=$i(n,{columnStrokeColor:o,columnStrokeWidth:l}))},[n,i,l,o,r,a]}class ll extends Oe{constructor(e){super(),Ye(this,e,il,sl,Be,{columns:0,useCanvasColumns:1,columnStrokeWidth:2,columnStrokeColor:3,columnDefaultColor:4})}}function ol(s){let e,t,n;return{c(){e=P("div"),this.h()},l(i){e=W(i,"DIV",{class:!0,style:!0}),I(e).forEach(m),this.h()},h(){C(e,"class","sg-resize svelte-1vzamdy"),S(e,"left",s[0]+"px")},m(i,l){M(i,e,l),t||(n=nt(s[1].call(null,e)),t=!0)},p(i,[l]){l&1&&S(e,"left",i[0]+"px")},i:ve,o:ve,d(i){i&&m(e),t=!1,n()}}}function rl(s,e,t){const n=zt();let{x:i}=e,{container:l}=e;const o={onDrag:a=>{t(0,i=a.x),n("resize",{left:i}),Ht("col-resize")},onDrop:a=>{t(0,i=a.x),n("resize",{left:i}),Ht("default")},dragAllowed:!0,resizeAllowed:!1,container:l,getX:()=>i,getY:()=>0,getWidth:()=>0};function r(a){const c=new an(a,o,"resizer");return{destroy:()=>c.destroy()}}return s.$$set=a=>{"x"in a&&t(0,i=a.x),"container"in a&&t(2,l=a.container)},s.$$.update=()=>{s.$$.dirty&4&&(o.container=l)},[i,r,l]}class al extends Oe{constructor(e){super(),Ye(this,e,rl,ol,Be,{x:0,container:2})}}class cl{constructor(){B(this,"listeners");B(this,"listenersMap");B(this,"tasks");B(this,"timeranges");this.listeners=[],this.listenersMap={}}registerEvent(e,t){this[e]||(this[e]={});const n=this[e];n.on||(n.on={},n.raise={});let i="on:"+e+":"+t;n.raise[t]=(...l)=>{this.listeners.forEach(o=>{o.eventId===i&&o.handler(l)})},n.on[t]=l=>{let o={handler:l,eventId:i};return this.listenersMap[i]=o,this.listeners.push(o),()=>{const a=this.listeners.indexOf(o);this.listeners.splice(a,1)}}}}class ul{constructor(){B(this,"rowHeight")}createRow(e,t){e.classes=e.classes||"",e.contentHtml=e.contentHtml||void 0,e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const n=e.height||this.rowHeight;return{model:e,y:t,height:n,expanded:!0}}createRows(e){const t={y:0,result:[]};return this.createChildRows(e,t),t.result}createChildRows(e,t,n=null,i=0,l=[]){const o=[],r=[];return n&&(l=[...l,n]),e.forEach(a=>{const c=this.createRow(a,t.y);if(t.result.push(c),o.push(c),r.push(c),c.childLevel=i,c.parent=n,c.allParents=l,t.y+=c.height,a.children){const f=this.createChildRows(a.children,t,c,i+1,l);c.children=f.rows,c.allChildren=f.allRows,r.push(...f.allRows)}}),{rows:o,allRows:r}}}class fl{constructor(e){B(this,"columnService");this.columnService=e}create(e){e.enableResizing=e.enableResizing===void 0?!0:e.enableResizing;const t=this.columnService.getPositionByDate(e.from),n=this.columnService.getPositionByDate(e.to);return{model:e,left:t,width:n-t,resizing:!1}}}class hl{constructor(e){B(this,"taskStore");B(this,"oldReflections",[]);B(this,"newTasksAndReflections",[]);B(this,"taskSettings",new Map);B(this,"currentSelection",new Map);B(this,"selectedTasks",De({}));B(this,"dragOrResizeTriggered",e=>{for(let[t,n]of this.currentSelection.entries()){const i=new an(n.HTMLElement,this.taskSettings.get(t),n.offsetData);i.onmousedown(e),this.currentSelection.set(t,{...n,draggable:i})}window.addEventListener("mousemove",this.selectionDragOrResizing,!1),bs(window,"mouseup",this.selectionDropped)});B(this,"selectionDragOrResizing",e=>{for(let[,t]of this.currentSelection.entries()){const{draggable:n}=t;n.onmousemove(e)}});B(this,"selectionDropped",e=>{window.removeEventListener("mousemove",this.selectionDragOrResizing,!1);for(const[,t]of this.currentSelection.entries()){const{draggable:n}=t;n.onmouseup(e)}this.oldReflections.length&&this.taskStore.deleteAll(this.oldReflections),this.newTasksAndReflections.length&&this.taskStore.upsertAll(this.newTasksAndReflections),this.newTasksAndReflections.splice(0),this.oldReflections.splice(0)});this.taskStore=e}selectSingle(e,t){this.currentSelection.has(e)||(this.unSelectTasks(),this.toggleSelection(e,t)),this.selectedTasks.set({[e]:!0})}toggleSelection(e,t){this.currentSelection.set(e,{HTMLElement:t,offsetData:void 0,draggable:void 0}),this.selectedTasks.update(n=>({...n,[e]:!n[e]}))}unSelectTasks(){this.selectedTasks.set({}),this.currentSelection.clear()}dispatchSelectionEvent(e,t){const n=this.taskSettings.get(e),i=n.getX(),l=n.getY(),o=n.getWidth();for(const[r,a]of this.currentSelection.entries())if(r!==e){const c=this.taskSettings.get(r);a.offsetData={offsetPos:{x:c.getX()-i,y:c.getY()-l},offsetWidth:c.getWidth()-o}}else a.offsetData={offsetPos:{x:null,y:null},offsetWidth:null};this.dragOrResizeTriggered(t)}}function dl(s,e){return ps(s,e,n=>n.left)}function gl(s,e){return ps(s,e,n=>n.from)}function ml(){const s={};return{onDelegatedEvent(e,t,n){s[e]||(s[e]={}),s[e][t]=n},offDelegatedEvent(e,t){delete s[e][t]},onEvent(e){const{type:t,target:n}=e,i=s[t];if(!i)return;let l,o=n;for(;o&&o!=e.currentTarget&&!(l=_l(i,o));)o=o.parentElement;l&&i[l.attr]?i[l.attr](e,l.data,o):i.empty&&i.empty(e,null,o)}}}function _l(s,e){let t;for(const n in s)if(t=e.getAttribute(n))return{attr:n,data:t}}class wl{format(e,t){const n=new Date(e);switch(t){case"H":return n.getHours()+"";case"HH":return kt(n.getHours());case"H:mm":return`${n.getHours()}:${kt(n.getMinutes())}`;case"hh:mm":return`${kt(n.getHours())}:${kt(n.getMinutes())}`;case"hh:mm:ss":return`${n.getHours()}:${kt(n.getMinutes())}:${kt(n.getSeconds())}`;case"dd/MM/yyyy":return`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()}`;case"dd/MM/yyyy hh:mm":return`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()} ${n.getHours()}:${n.getMinutes()}`;case"dd/MM/yyyy hh:mm:ss":return`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()} ${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}`;case"YYYY":return`${n.getFullYear()}`;case"Q":return`${Math.floor(n.getMonth()/3+1)}`;case"[Q]Q":return`Q${Math.floor(n.getMonth()/3+1)}`;case"YYYY[Q]Q":return`${n.getFullYear()}Q${Math.floor(n.getMonth()/3+1)}`;case"MM":{let i=String(n.getMonth()+1);return i.length==1&&(i=`0${i}`),`${i}`}case"MMMM":{const i=n.toLocaleString("default",{month:"long"});return`${i.charAt(0).toUpperCase()}${i.substring(1)}`}case"MMMM - YYYY":{const i=n.toLocaleString("default",{month:"long"});return`${i.charAt(0).toUpperCase()}${i.substring(1)}-${n.getFullYear()}`}case"MMMM YYYY":{const i=n.toLocaleString("default",{month:"long"});return`${i.charAt(0).toUpperCase()}${i.substring(1)} ${n.getFullYear()}`}case"MMM":{const i=n.toLocaleString("default",{month:"short"});return`${i.charAt(0).toUpperCase()}${i.substring(1)}`}case"MMM - YYYY":{const i=n.toLocaleString("default",{month:"short"});return`${i.charAt(0).toUpperCase()}${i.substring(1)} - ${n.getFullYear()}`}case"MMM YYYY":{const i=n.toLocaleString("default",{month:"short"});return`${i.charAt(0).toUpperCase()}${i.substring(1)} ${n.getFullYear()}`}case"W":return`${Qn(n)}`;case"WW":{const i=Qn(n);return`${i.toString().length==1?"0":""}${i}`}default:return console.warn(`Date Format '${t}' is not supported, use another date adapter.`),`${n.getDate()}/${n.getMonth()+1}/${n.getFullYear()}`}}roundTo(e,t,n){const i=kl(t,n);return Math.round(e/i)*i}}function kt(s){let e=s.toString();for(let t=e.length;t<2;t++)e="0"+e;return e}function Qn(s){s=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate())),s.setUTCDate(s.getUTCDate()+4-(s.getUTCDay()||7));const e=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s.valueOf()-e.valueOf())/864e5+1)/7)}function kl(s,e){switch(s){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${s}`)}}function Kn(s,e,t){const n=s.slice();return n[136]=e[t],n}function Jn(s,e,t){const n=s.slice();return n[139]=e[t],n}function Zn(s,e,t){const n=s.slice();return n[142]=e[t],n}function xn(s,e,t){const n=s.slice();return n[145]=e[t],n}function $n(s,e,t){const n=s.slice();return n[142]=e[t],n}function es(s,e,t){const n=s.slice();return n[136]=e[t],n}function ts(s){let e,t,n,i;const l=[{rowContainerHeight:s[19]},{paddingTop:s[20]},{paddingBottom:s[21]},{tableWidth:s[2]},s[51],{visibleRows:s[9]}];var o=s[136];function r(a,c){let f={};if(c!==void 0&&c[0]&3670532|c[1]&1048576)f=lt(l,[c[0]&524288&&{rowContainerHeight:a[19]},c[0]&1048576&&{paddingTop:a[20]},c[0]&2097152&&{paddingBottom:a[21]},c[0]&4&&{tableWidth:a[2]},c[1]&1048576&&ot(a[51]),c[0]&512&&{visibleRows:a[9]}]);else for(let w=0;w<l.length;w+=1)f=it(f,l[w]);return{props:f}}return o&&(e=Xt(o,r(s)),e.$on("init",jt)),n=new al({props:{x:s[2],container:s[12]}}),n.$on("resize",s[48]),{c(){e&&we(e.$$.fragment),t=le(),we(n.$$.fragment)},l(a){e&&Se(e.$$.fragment,a),t=oe(a),Se(n.$$.fragment,a)},m(a,c){e&&ke(e,a,c),M(a,t,c),ke(n,a,c),i=!0},p(a,c){if(c[0]&16&&o!==(o=a[136])){if(e){Le();const w=e;G(w.$$.fragment,1,0,()=>{be(w,1)}),Ue()}o?(e=Xt(o,r(a,c)),e.$on("init",jt),we(e.$$.fragment),V(e.$$.fragment,1),ke(e,t.parentNode,t)):e=null}else if(o){const w=c[0]&3670532|c[1]&1048576?lt(l,[c[0]&524288&&{rowContainerHeight:a[19]},c[0]&1048576&&{paddingTop:a[20]},c[0]&2097152&&{paddingBottom:a[21]},c[0]&4&&{tableWidth:a[2]},c[1]&1048576&&ot(a[51]),c[0]&512&&{visibleRows:a[9]}]):{};e.$set(w)}const f={};c[0]&4&&(f.x=a[2]),c[0]&4096&&(f.container=a[12]),n.$set(f)},i(a){i||(e&&V(e.$$.fragment,a),V(n.$$.fragment,a),i=!0)},o(a){e&&G(e.$$.fragment,a),G(n.$$.fragment,a),i=!1},d(a){a&&m(t),e&&be(e,a),be(n,a)}}}function ns(s,e){let t,n,i;const l=[e[142]];let o={};for(let r=0;r<l.length;r+=1)o=it(o,l[r]);return n=new Ii({props:o}),{key:s,first:null,c(){t=N(),we(n.$$.fragment),this.h()},l(r){t=N(),Se(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){M(r,t,a),ke(n,r,a),i=!0},p(r,a){e=r;const c=a[0]&16777216?lt(l,[ot(e[142])]):{};n.$set(c)},i(r){i||(V(n.$$.fragment,r),i=!0)},o(r){G(n.$$.fragment,r),i=!1},d(r){r&&m(t),be(n,r)}}}function ss(s,e){let t,n,i;return n=new Ri({props:{row:e[145]}}),{key:s,first:null,c(){t=N(),we(n.$$.fragment),this.h()},l(l){t=N(),Se(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,o){M(l,t,o),ke(n,l,o),i=!0},p(l,o){e=l;const r={};o[0]&512&&(r.row=e[145]),n.$set(r)},i(l){i||(V(n.$$.fragment,l),i=!0)},o(l){G(n.$$.fragment,l),i=!1},d(l){l&&m(t),be(n,l)}}}function is(s,e){let t,n,i;const l=[e[142]];let o={};for(let r=0;r<l.length;r+=1)o=it(o,l[r]);return n=new Ei({props:o}),{key:s,first:null,c(){t=N(),we(n.$$.fragment),this.h()},l(r){t=N(),Se(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){M(r,t,a),ke(n,r,a),i=!0},p(r,a){e=r;const c=a[0]&16777216?lt(l,[ot(e[142])]):{};n.$set(c)},i(r){i||(V(n.$$.fragment,r),i=!0)},o(r){G(n.$$.fragment,r),i=!1},d(r){r&&m(t),be(n,r)}}}function ls(s,e){let t,n,i;const l=[{model:e[139].model},{left:e[139].left},{width:e[139].width},{height:e[139].height},{top:e[139].top},e[139]];let o={};for(let r=0;r<l.length;r+=1)o=it(o,l[r]);return n=new yi({props:o}),{key:s,first:null,c(){t=N(),we(n.$$.fragment),this.h()},l(r){t=N(),Se(n.$$.fragment,r),this.h()},h(){this.first=t},m(r,a){M(r,t,a),ke(n,r,a),i=!0},p(r,a){e=r;const c=a[0]&4194304?lt(l,[{model:e[139].model},{left:e[139].left},{width:e[139].width},{height:e[139].height},{top:e[139].top},ot(e[139])]):{};n.$set(c)},i(r){i||(V(n.$$.fragment,r),i=!0)},o(r){G(n.$$.fragment,r),i=!1},d(r){r&&m(t),be(n,r)}}}function os(s){let e,t,n;const i=[{paddingTop:s[20]},{paddingBottom:s[21]},{visibleRows:s[9]},s[51]];var l=s[136];function o(r,a){let c={};if(a!==void 0&&a[0]&3146240|a[1]&1048576)c=lt(i,[a[0]&1048576&&{paddingTop:r[20]},a[0]&2097152&&{paddingBottom:r[21]},a[0]&512&&{visibleRows:r[9]},a[1]&1048576&&ot(r[51])]);else for(let f=0;f<i.length;f+=1)c=it(c,i[f]);return{props:c}}return l&&(e=Xt(l,o(s)),e.$on("init",jt)),{c(){e&&we(e.$$.fragment),t=N()},l(r){e&&Se(e.$$.fragment,r),t=N()},m(r,a){e&&ke(e,r,a),M(r,t,a),n=!0},p(r,a){if(a[0]&32&&l!==(l=r[136])){if(e){Le();const c=e;G(c.$$.fragment,1,0,()=>{be(c,1)}),Ue()}l?(e=Xt(l,o(r,a)),e.$on("init",jt),we(e.$$.fragment),V(e.$$.fragment,1),ke(e,t.parentNode,t)):e=null}else if(l){const c=a[0]&3146240|a[1]&1048576?lt(i,[a[0]&1048576&&{paddingTop:r[20]},a[0]&2097152&&{paddingBottom:r[21]},a[0]&512&&{visibleRows:r[9]},a[1]&1048576&&ot(r[51])]):{};e.$set(c)}},i(r){n||(e&&V(e.$$.fragment,r),n=!0)},o(r){e&&G(e.$$.fragment,r),n=!1},d(r){r&&m(t),e&&be(e,r)}}}function bl(s){let e,t,n,i,l,o,r,a,c=[],f=new Map,w,T,_,D,p,g,k,H,y=[],R=new Map,K,te,Z=[],de=new Map,ge,j=[],me=new Map,Ve,pe,Ee,ie,Me,ye,q=se(s[4]),v=[];for(let d=0;d<q.length;d+=1)v[d]=ts(es(s,q,d));const x=d=>G(v[d],1,1,()=>{v[d]=null});r=new xi({props:{headers:s[1],ganttBodyColumns:s[17],ganttBodyUnit:s[0]}}),r.$on("dateSelected",s[50]);let ce=se(s[24]);const Ae=d=>d[142].model.id;for(let d=0;d<ce.length;d+=1){let h=$n(s,ce,d),E=Ae(h);f.set(E,c[d]=ns(E,h))}p=new ll({props:{columns:s[17],columnStrokeColor:s[7],columnStrokeWidth:s[8],useCanvasColumns:s[6]}});let He=se(s[9]);const Xe=d=>d[145].model.id;for(let d=0;d<He.length;d+=1){let h=xn(s,He,d),E=Xe(h);R.set(E,y[d]=ss(E,h))}let ze=se(s[24]);const Ge=d=>d[142].model.id;for(let d=0;d<ze.length;d+=1){let h=Zn(s,ze,d),E=Ge(h);de.set(E,Z[d]=is(E,h))}let O=se(s[22]);const re=d=>d[139].model.id;for(let d=0;d<O.length;d+=1){let h=Jn(s,O,d),E=re(h);me.set(E,j[d]=ls(E,h))}let J=se(s[5]),Q=[];for(let d=0;d<J.length;d+=1)Q[d]=os(Kn(s,J,d));const Pe=d=>G(Q[d],1,1,()=>{Q[d]=null});return{c(){e=P("div");for(let d=0;d<v.length;d+=1)v[d].c();t=le(),n=P("div"),i=P("div"),l=P("div"),o=P("div"),we(r.$$.fragment),a=le();for(let d=0;d<c.length;d+=1)c[d].c();T=le(),_=P("div"),D=P("div"),we(p.$$.fragment),g=le(),k=P("div"),H=P("div");for(let d=0;d<y.length;d+=1)y[d].c();K=le(),te=P("div");for(let d=0;d<Z.length;d+=1)Z[d].c();ge=le();for(let d=0;d<j.length;d+=1)j[d].c();Ve=le();for(let d=0;d<Q.length;d+=1)Q[d].c();this.h()},l(d){e=W(d,"DIV",{class:!0});var h=I(e);for(let L=0;L<v.length;L+=1)v[L].l(h);t=oe(h),n=W(h,"DIV",{class:!0});var E=I(n);i=W(E,"DIV",{class:!0});var Te=I(i);l=W(Te,"DIV",{class:!0});var A=I(l);o=W(A,"DIV",{class:!0,style:!0});var ae=I(o);Se(r.$$.fragment,ae),a=oe(ae);for(let L=0;L<c.length;L+=1)c[L].l(ae);ae.forEach(m),A.forEach(m),Te.forEach(m),T=oe(E),_=W(E,"DIV",{class:!0});var Ne=I(_);D=W(Ne,"DIV",{class:!0,style:!0});var ne=I(D);Se(p.$$.fragment,ne),g=oe(ne),k=W(ne,"DIV",{class:!0,style:!0});var Ke=I(k);H=W(Ke,"DIV",{style:!0});var Fe=I(H);for(let L=0;L<y.length;L+=1)y[L].l(Fe);Fe.forEach(m),Ke.forEach(m),K=oe(ne),te=W(ne,"DIV",{class:!0});var We=I(te);for(let L=0;L<Z.length;L+=1)Z[L].l(We);ge=oe(We);for(let L=0;L<j.length;L+=1)j[L].l(We);We.forEach(m),Ve=oe(ne);for(let L=0;L<Q.length;L+=1)Q[L].l(ne);ne.forEach(m),Ne.forEach(m),E.forEach(m),h.forEach(m),this.h()},h(){C(o,"class","header-container"),S(o,"width",s[11]+"px"),C(l,"class","sg-header-scroller svelte-843l0i"),C(i,"class","sg-header"),Sn(()=>s[110].call(i)),S(H,"transform","translateY("+s[20]+"px)"),C(k,"class","sg-rows svelte-843l0i"),S(k,"height",s[19]+"px"),C(te,"class","sg-foreground svelte-843l0i"),C(D,"class","content svelte-843l0i"),S(D,"width",s[11]+"px"),C(_,"class","sg-timeline-body svelte-843l0i"),Sn(()=>s[113].call(_)),F(_,"zooming",s[18]),C(n,"class","sg-timeline sg-view svelte-843l0i"),C(e,"class",Ee="sg-gantt "+s[3]+" svelte-843l0i"),F(e,"sg-disable-transition",!s[16])},m(d,h){M(d,e,h);for(let E=0;E<v.length;E+=1)v[E]&&v[E].m(e,null);Y(e,t),Y(e,n),Y(n,i),Y(i,l),Y(l,o),ke(r,o,null),Y(o,a);for(let E=0;E<c.length;E+=1)c[E]&&c[E].m(o,null);s[109](i),w=En(i,s[110].bind(i)),Y(n,T),Y(n,_),Y(_,D),ke(p,D,null),Y(D,g),Y(D,k),Y(k,H);for(let E=0;E<y.length;E+=1)y[E]&&y[E].m(H,null);s[111](k),Y(D,K),Y(D,te);for(let E=0;E<Z.length;E+=1)Z[E]&&Z[E].m(te,null);Y(te,ge);for(let E=0;E<j.length;E+=1)j[E]&&j[E].m(te,null);Y(D,Ve);for(let E=0;E<Q.length;E+=1)Q[E]&&Q[E].m(D,null);s[112](_),pe=En(_,s[113].bind(_)),s[114](e),ie=!0,Me||(ye=[nt(s[47].call(null,l)),nt(s[46].call(null,_)),Qe(_,"wheel",s[49]),Qe(e,"mousedown",Mn(s[45])),Qe(e,"click",Mn(s[45])),Qe(e,"dblclick",s[45]),Qe(e,"mouseover",s[45]),Qe(e,"mouseleave",s[45])],Me=!0)},p(d,h){if(h[0]&3674644|h[1]&1179648){q=se(d[4]);let A;for(A=0;A<q.length;A+=1){const ae=es(d,q,A);v[A]?(v[A].p(ae,h),V(v[A],1)):(v[A]=ts(ae),v[A].c(),V(v[A],1),v[A].m(e,t))}for(Le(),A=q.length;A<v.length;A+=1)x(A);Ue()}const E={};h[0]&2&&(E.headers=d[1]),h[0]&131072&&(E.ganttBodyColumns=d[17]),h[0]&1&&(E.ganttBodyUnit=d[0]),r.$set(E),h[0]&16777216&&(ce=se(d[24]),Le(),c=At(c,h,Ae,1,d,ce,f,o,Lt,ns,null,$n),Ue()),(!ie||h[0]&2048)&&S(o,"width",d[11]+"px");const Te={};if(h[0]&131072&&(Te.columns=d[17]),h[0]&128&&(Te.columnStrokeColor=d[7]),h[0]&256&&(Te.columnStrokeWidth=d[8]),h[0]&64&&(Te.useCanvasColumns=d[6]),p.$set(Te),h[0]&512&&(He=se(d[9]),Le(),y=At(y,h,Xe,1,d,He,R,H,Lt,ss,null,xn),Ue()),(!ie||h[0]&1048576)&&S(H,"transform","translateY("+d[20]+"px)"),(!ie||h[0]&524288)&&S(k,"height",d[19]+"px"),h[0]&16777216&&(ze=se(d[24]),Le(),Z=At(Z,h,Ge,1,d,ze,de,te,Lt,is,ge,Zn),Ue()),h[0]&4194304&&(O=se(d[22]),Le(),j=At(j,h,re,1,d,O,me,te,Lt,ls,null,Jn),Ue()),h[0]&3146272|h[1]&1048576){J=se(d[5]);let A;for(A=0;A<J.length;A+=1){const ae=Kn(d,J,A);Q[A]?(Q[A].p(ae,h),V(Q[A],1)):(Q[A]=os(ae),Q[A].c(),V(Q[A],1),Q[A].m(D,null))}for(Le(),A=J.length;A<Q.length;A+=1)Pe(A);Ue()}(!ie||h[0]&2048)&&S(D,"width",d[11]+"px"),(!ie||h[0]&262144)&&F(_,"zooming",d[18]),(!ie||h[0]&8&&Ee!==(Ee="sg-gantt "+d[3]+" svelte-843l0i"))&&C(e,"class",Ee),(!ie||h[0]&65544)&&F(e,"sg-disable-transition",!d[16])},i(d){if(!ie){for(let h=0;h<q.length;h+=1)V(v[h]);V(r.$$.fragment,d);for(let h=0;h<ce.length;h+=1)V(c[h]);V(p.$$.fragment,d);for(let h=0;h<He.length;h+=1)V(y[h]);for(let h=0;h<ze.length;h+=1)V(Z[h]);for(let h=0;h<O.length;h+=1)V(j[h]);for(let h=0;h<J.length;h+=1)V(Q[h]);ie=!0}},o(d){v=v.filter(Boolean);for(let h=0;h<v.length;h+=1)G(v[h]);G(r.$$.fragment,d);for(let h=0;h<c.length;h+=1)G(c[h]);G(p.$$.fragment,d);for(let h=0;h<y.length;h+=1)G(y[h]);for(let h=0;h<Z.length;h+=1)G(Z[h]);for(let h=0;h<j.length;h+=1)G(j[h]);Q=Q.filter(Boolean);for(let h=0;h<Q.length;h+=1)G(Q[h]);ie=!1},d(d){d&&m(e),st(v,d),be(r);for(let h=0;h<c.length;h+=1)c[h].d();s[109](null),w(),be(p);for(let h=0;h<y.length;h+=1)y[h].d();s[111](null);for(let h=0;h<Z.length;h+=1)Z[h].d();for(let h=0;h<j.length;h+=1)j[h].d();st(Q,d),s[112](null),pe(),s[114](null),Me=!1,sn(ye)}}}function rs(s){for(const e in s)if(s[e]==null)throw new Error(`"${e}" is not set`)}function Ft(s){return s instanceof Date?s.valueOf():s}function jt(s){}function vl(s,e,t){const n=["rows","tasks","timeRanges","rowPadding","rowHeight","from","to","minWidth","fitWidth","classes","headers","zoomLevels","taskContent","tableWidth","resizeHandleWidth","onTaskButtonClick","dateAdapter","magnetUnit","magnetOffset","columnUnit","columnOffset","ganttTableModules","ganttBodyModules","reflectOnParentRows","reflectOnChildRows","useCanvasColumns","columnStrokeColor","columnStrokeWidth","highlightedDurations","highlightColor","taskElementHook","columnService","api","taskFactory","rowFactory","dndManager","timeRangeFactory","utils","refreshTimeRanges","refreshTasks","getRowContainer","selectTask","unselectTasks","scrollToRow","scrollToTask","updateTask","updateTasks","updateRow","updateRows","getRow","getTask","getTasks"];let i=Hn(e,n),l,o,r,a,c,f,w,T,_,D,p,g,k,H,y,R,K,te,Z,de,ge,j,me,Ve=[],pe=!1,{rows:Ee}=e,{tasks:ie=[]}=e,{timeRanges:Me=[]}=e;rs({rows:Ee});let{rowPadding:ye=6}=e,{rowHeight:q=52}=e;const v=De(q);U(s,v,u=>t(122,R=u));const x=De(ye);U(s,x,u=>t(108,p=u));let{from:ce}=e,{to:Ae}=e;rs({from:ce,to:Ae});const He=De(Ft(ce));U(s,He,u=>t(107,D=u));const Xe=De(Ft(Ae));U(s,Xe,u=>t(106,_=u));let{minWidth:ze=800}=e,{fitWidth:Ge=!1}=e;const O=De(ze);U(s,O,u=>t(119,k=u));const re=De(Ge);U(s,re,u=>t(118,g=u));let{classes:J=[]}=e,{headers:Q=[{unit:"day",format:"MMMM Do"},{unit:"hour",format:"H:mm"}]}=e,{zoomLevels:Pe=[{headers:[{unit:"day",format:"DD.MM.YYYY"},{unit:"hour",format:"HH"}],minWidth:800,fitWidth:!0},{headers:[{unit:"hour",format:"ddd D/M, H A"},{unit:"minute",format:"mm",offset:15}],minWidth:5e3,fitWidth:!1}]}=e,{taskContent:d=null}=e,{tableWidth:h=240}=e,{resizeHandleWidth:E=10}=e,{onTaskButtonClick:Te=null}=e,{dateAdapter:A=new wl}=e,{magnetUnit:ae="minute"}=e,{magnetOffset:Ne=15}=e,ne;Ke(ae,Ne);function Ke(u,b){u&&b&&t(96,ne=Bi(u,b))}let{columnUnit:Fe="minute"}=e,{columnOffset:We=15}=e,{ganttTableModules:L=[]}=e,{ganttBodyModules:vt=[]}=e,{reflectOnParentRows:qe=!0}=e,{reflectOnChildRows:Je=!1}=e,{useCanvasColumns:dt=!0}=e,{columnStrokeColor:Ze="#efefef"}=e,{columnStrokeWidth:un=1}=e,{highlightedDurations:qt}=e,{highlightColor:Qt="#6eb859"}=e,{taskElementHook:Kt=null}=e;const pt=De(null);U(s,pt,u=>t(25,Z=u));const Pt=De(null);U(s,Pt,u=>t(10,a=u));const Wt=De(null);U(s,Wt,u=>t(23,K=u));const Jt=on([pt,O,re],([u,b,z])=>z&&u>b?u:b);U(s,Jt,u=>t(11,T=u));const fn=di();Et("dataStore",fn);const{rowStore:gt,taskStore:ht,timeRangeStore:hn,allTasks:dn,allRows:gn,allTimeRanges:mn,rowTaskCache:_n,draggingTaskCache:wn}=fn;U(s,gt,u=>t(105,f=u)),U(s,ht,u=>t(101,l=u)),U(s,dn,u=>t(117,w=u)),U(s,gn,u=>t(104,c=u)),U(s,mn,u=>t(24,te=u)),U(s,_n,u=>t(103,r=u)),U(s,wn,u=>t(102,o=u));const xe={getColumnByDate(u){const b=gl(It,u);return b[0]?b[0]:b[1]},getColumnByPosition(u){const b=dl(It,u);return b[0]?b[0]:b[1]},getPositionByDate(u){if(!u)return null;const b=this.getColumnByDate(u),X=(u-b.from)/b.duration*b.width;return b.left+X},getDateByPosition(u){const b=this.getColumnByPosition(u);u=u-b.left;let z=b.duration/b.width*u;return b.from+z},roundTo(u){return Math.round(u/ne)*ne}};let yt=!0;async function Cs(){t(16,yt=!yt),await $t(),de.offsetHeight,t(16,yt=!!yt)}let It;function Rs(u,b,z,X,$){u instanceof Date&&(u=u.valueOf()),b instanceof Date&&(b=b.valueOf());let ee=[];const Ie=vs(u.valueOf(),b.valueOf(),z,X,qt);let Ce=0,wt=0;return Ie.forEach(function(je){Ce=wt,wt=cn(je.to,D,_,T),ee.push({width:wt-Ce,from:je.from,to:je.to,left:Ce,duration:je.duration,...je.isHighlighted&&{bgHighlightColor:Qt}})}),ee}Et("dimensions",{from:He,to:Xe,width:Jt,visibleWidth:pt,visibleHeight:Pt,headerHeight:Wt}),Et("options",{dateAdapter:A,taskElementHook:Kt,taskContent:d,rowPadding:x,rowHeight:v,resizeHandleWidth:E,reflectOnParentRows:qe,reflectOnChildRows:Je,onTaskButtonClick:Te});const Tt=De(null);U(s,Tt,u=>t(120,H=u));const Ct=De(null);U(s,Ct,u=>t(121,y=u));const kn={scrollables:Ve,hoveredRow:Tt,selectedRow:Ct};Et("gantt",kn),ln(()=>{Object.assign(kn,{rowContainer:me,mainContainer:j,mainHeaderContainer:ge}),he.registerEvent("tasks","move"),he.registerEvent("tasks","select"),he.registerEvent("tasks","switchRow"),he.registerEvent("tasks","moveEnd"),he.registerEvent("tasks","change"),he.registerEvent("tasks","changed"),he.registerEvent("gantt","viewChanged"),he.registerEvent("gantt","dateSelected"),he.registerEvent("tasks","dblclicked"),he.registerEvent("timeranges","clicked"),he.registerEvent("timeranges","resized"),t(95,pe=!0)});const{onDelegatedEvent:Rt,offDelegatedEvent:Bt,onEvent:Ds}=ml();Rt("mousedown","data-task-id",(u,b,z)=>{const X=+b;ks(u)&&!z.classList.contains("sg-task-reflected")&&(u.ctrlKey?et.toggleSelection(X,z):et.selectSingle(X,z),et.dispatchSelectionEvent(X,u)),he.tasks.raise.select(l.entities[X])}),Rt("mouseover","data-row-id",(u,b,z)=>{ue(Tt,H=+b,H)}),Rt("click","data-row-id",(u,b,z)=>{if(et.unSelectTasks(),y==+b){ue(Ct,y=null,y);return}ue(Ct,y=+b,y)}),Rt("dblclick","data-task-id",(u,b,z)=>{const X=+b;he.tasks.raise.dblclicked(l.entities[X],u)}),Rt("mouseleave","empty",(u,b,z)=>{ue(Tt,H=null,H)}),ii(()=>{Bt("click","data-task-id"),Bt("click","data-row-id"),Bt("mousedown","data-task-id"),Bt("dblclick","data-task-id"),et.unSelectTasks()});let Zt=0;function Ss(u){const b=z=>{const{scrollTop:X,scrollLeft:$}=u;Ve.forEach(ee=>{ee.orientation==="horizontal"?ee.node.scrollLeft=$:ee.node.scrollTop=X}),t(97,Zt=X)};return u.addEventListener("scroll",b),{destroy(){u.removeEventListener("scroll",b,!1)}}}function Es(u){Ve.push({node:u,orientation:"horizontal"})}function Ms(u){t(2,h=u.detail.left)}let $e=0,xt=!1;async function Hs(u){if(u.ctrlKey){u.preventDefault();const b=$e;if(u.deltaY>0?$e=Math.max($e-1,0):$e=Math.min($e+1,Pe.length-1),b!=$e&&Pe[$e]){const z={columnUnit:Fe,columnOffset:We,minWidth:k,...Pe[$e]},X=z.minWidth/T,$=j,ee=Mt($,u),wt=($.scrollLeft+ee.x)*X-ee.x+$.clientWidth/2;t(0,Fe=z.columnUnit),t(52,We=z.columnOffset),ue(O,k=z.minWidth,k),z.headers&&t(1,Q=z.headers),z.fitWidth&&ue(re,g=z.fitWidth,g),he.gantt.raise.viewChanged(),t(18,xt=!0),await $t(),$.scrollLeft=wt,t(18,xt=!1)}}}function zs(u){ue(He,D=u.detail.from,D),ue(Xe,_=u.detail.to,_),he.gantt.raise.dateSelected({from:D,to:_})}function Ps(u){const b=mt.createRows(u);gt.addAll(b)}async function Ws(u){await $t();const b=[],z={rowPadding:p};u.forEach(X=>{const $=tt.createTask(X),ee=f.entities[$.model.resourceId];$.reflections=[],Je&&ee.allChildren&&ee.allChildren.forEach(Ie=>{const Ce=Nt($,Ie,z);$.reflections.push(Ce.model.id),b.push(Ce)}),qe&&ee.allParents.length>0&&ee.allParents.forEach(Ie=>{const Ce=Nt($,Ie,z);$.reflections.push(Ce.model.id),b.push(Ce)}),b.push($)}),ht.addAll(b)}function Is(u){const b=u.map(z=>vn.create(z));hn.addAll(b)}const he=new cl,et=new hl(ht),tt=new gi(xe),mt=new ul,bn=new zi(gt),vn=new fl(xe),_e=new Gi;Et("services",{utils:_e,api:he,dndManager:bn,selectionManager:et,columnService:xe});function pn(){hn._update(({ids:u,entities:b})=>(u.forEach(z=>{const X=b[z],$=xe.getPositionByDate(X.model.from)|0,ee=xe.getPositionByDate(X.model.to)|0;X.left=$,X.width=ee-$}),{ids:u,entities:b}))}function yn(){w.forEach(u=>{const b=xe.getPositionByDate(u.model.from)|0,z=xe.getPositionByDate(u.model.to)|0;u.left=b,u.width=z-b}),ht.refresh()}function Bs(){return me}function Os(u){l.entities[u]&&et.selectSingle(u,de.querySelector(`data-task-id='${u}'`))}function Ys(){et.unSelectTasks()}function As(u,b="auto"){const{scrollTop:z,clientHeight:X}=j,$=c.findIndex(Ie=>Ie.model.id==u);if($===-1)return;const ee=$*q;ee<z&&j.scrollTo({top:ee,behavior:b}),ee>z+X&&j.scrollTo({top:ee+q-X,behavior:b})}function Ls(u,b="auto"){const{scrollLeft:z,scrollTop:X,clientWidth:$,clientHeight:ee}=j,Ie=l.entities[u];if(!Ie)return;const Ce=Ie.left,je=c.findIndex($s=>$s.model.id==Ie.model.resourceId)*q,St={top:void 0,left:void 0,behavior:b};Ce<z&&(St.left=Ce),Ce>z+$&&(St.left=Ce+Ie.width-$),je<X&&(St.top=je),je>X+ee&&(St.top=je+q-ee),j.scrollTo(St)}function Us(u){const b=tt.createTask(u);ht.upsert(b)}function Vs(u){const b=u.map(z=>tt.createTask(z));ht.upsertAll(b)}function Fs(u){const b=mt.createRow(u,null);gt.upsert(b)}function Xs(u){const b=u.map(z=>mt.createRow(z,null));gt.upsertAll(b)}function Gs(u){return f.entities[u]}function Ns(u){return l.entities[u]}function js(u){return r[u]?r[u].map(b=>l.entities[b]):null}let _t=[],Tn,Dt,Ot,Cn=0,Rn=0,Yt=[],Dn;function qs(u){bt[u?"unshift":"push"](()=>{ge=u,t(13,ge)})}function Qs(){K=this.clientHeight,Wt.set(K)}function Ks(u){bt[u?"unshift":"push"](()=>{me=u,t(15,me)})}function Js(u){bt[u?"unshift":"push"](()=>{j=u,t(14,j)})}function Zs(){a=this.clientHeight,Pt.set(a),Z=this.clientWidth,pt.set(Z)}function xs(u){bt[u?"unshift":"push"](()=>{de=u,t(12,de)})}return s.$$set=u=>{e=it(it({},e),li(u)),t(51,i=Hn(e,n)),"rows"in u&&t(56,Ee=u.rows),"tasks"in u&&t(57,ie=u.tasks),"timeRanges"in u&&t(58,Me=u.timeRanges),"rowPadding"in u&&t(59,ye=u.rowPadding),"rowHeight"in u&&t(60,q=u.rowHeight),"from"in u&&t(61,ce=u.from),"to"in u&&t(62,Ae=u.to),"minWidth"in u&&t(63,ze=u.minWidth),"fitWidth"in u&&t(64,Ge=u.fitWidth),"classes"in u&&t(3,J=u.classes),"headers"in u&&t(1,Q=u.headers),"zoomLevels"in u&&t(65,Pe=u.zoomLevels),"taskContent"in u&&t(66,d=u.taskContent),"tableWidth"in u&&t(2,h=u.tableWidth),"resizeHandleWidth"in u&&t(67,E=u.resizeHandleWidth),"onTaskButtonClick"in u&&t(68,Te=u.onTaskButtonClick),"dateAdapter"in u&&t(69,A=u.dateAdapter),"magnetUnit"in u&&t(70,ae=u.magnetUnit),"magnetOffset"in u&&t(71,Ne=u.magnetOffset),"columnUnit"in u&&t(0,Fe=u.columnUnit),"columnOffset"in u&&t(52,We=u.columnOffset),"ganttTableModules"in u&&t(4,L=u.ganttTableModules),"ganttBodyModules"in u&&t(5,vt=u.ganttBodyModules),"reflectOnParentRows"in u&&t(72,qe=u.reflectOnParentRows),"reflectOnChildRows"in u&&t(73,Je=u.reflectOnChildRows),"useCanvasColumns"in u&&t(6,dt=u.useCanvasColumns),"columnStrokeColor"in u&&t(7,Ze=u.columnStrokeColor),"columnStrokeWidth"in u&&t(8,un=u.columnStrokeWidth),"highlightedDurations"in u&&t(74,qt=u.highlightedDurations),"highlightColor"in u&&t(75,Qt=u.highlightColor),"taskElementHook"in u&&t(76,Kt=u.taskElementHook)},s.$$.update=()=>{if(s.$$.dirty[1]&33554432|s.$$.dirty[3]&4&&pe&&Ps(Ee),s.$$.dirty[1]&67108864|s.$$.dirty[3]&4&&pe&&Ws(ie),s.$$.dirty[1]&134217728|s.$$.dirty[3]&4&&pe&&Is(Me),s.$$.dirty[1]&536870912&&ue(v,R=q,R),s.$$.dirty[1]&268435456&&ue(x,p=ye,p),s.$$.dirty[1]&1073741824&&ue(He,D=Ft(ce),D),s.$$.dirty[2]&1&&ue(Xe,_=Ft(Ae),_),s.$$.dirty[2]&6&&(ue(O,k=ze,k),ue(re,g=Ge,g)),s.$$.dirty[2]&768&&Ke(ae,Ne),s.$$.dirty[0]&2049|s.$$.dirty[1]&2097152|s.$$.dirty[3]&24576&&(t(17,It=Rs(D,_,Fe,We)),Cs(),pn(),yn()),s.$$.dirty[3]&36864&&(t(53,tt.rowPadding=p,tt),t(53,tt.rowEntities=f.entities,tt)),s.$$.dirty[1]&536870912&&t(54,mt.rowHeight=q,mt),s.$$.dirty[0]&2048|s.$$.dirty[2]&896|s.$$.dirty[3]&24584&&(t(55,_e.from=D,_e),t(55,_e.to=_,_e),t(55,_e.width=T,_e),t(55,_e.magnetOffset=Ne,_e),t(55,_e.magnetUnit=ae,_e),t(55,_e.magnetDuration=ne,_e),t(55,_e.dateAdapter=A,_e)),s.$$.dirty[3]&2048&&t(98,_t=c.filter(u=>!u.hidden)),s.$$.dirty[1]&536870912|s.$$.dirty[3]&32&&t(19,Tn=_t.length*q),s.$$.dirty[1]&536870912|s.$$.dirty[3]&16&&t(99,Dt=Math.floor(Zt/q)),s.$$.dirty[0]&1024|s.$$.dirty[1]&536870912|s.$$.dirty[3]&96&&t(100,Ot=Math.min(Dt+Math.ceil(a/q),_t.length-1)),s.$$.dirty[1]&536870912|s.$$.dirty[3]&64&&t(20,Cn=Dt*q),s.$$.dirty[1]&536870912|s.$$.dirty[3]&160&&t(21,Rn=(_t.length-Ot-1)*q),s.$$.dirty[3]&224&&t(9,Yt=_t.slice(Dt,Ot+1)),s.$$.dirty[0]&512|s.$$.dirty[3]&1792){const u=[],b={};for(let z=0;z<Yt.length;z++){const X=Yt[z];if(r[X.model.id])for(let $=0;$<r[X.model.id].length;$++){const ee=r[X.model.id][$];u.push(l.entities[ee]),b[ee]=!0}}for(const z in o)b[z]||(u.push(l.entities[z]),b[z]=!0);t(22,Dn=u)}},[Fe,Q,h,J,L,vt,dt,Ze,un,Yt,a,T,de,ge,j,me,yt,It,xt,Tn,Cn,Rn,Dn,K,te,Z,v,x,He,Xe,O,re,pt,Pt,Wt,Jt,gt,ht,dn,gn,mn,_n,wn,Tt,Ct,Ds,Ss,Es,Ms,Hs,zs,i,We,tt,mt,_e,Ee,ie,Me,ye,q,ce,Ae,ze,Ge,Pe,d,E,Te,A,ae,Ne,qe,Je,qt,Qt,Kt,xe,he,bn,vn,pn,yn,Bs,Os,Ys,As,Ls,Us,Vs,Fs,Xs,Gs,Ns,js,pe,ne,Zt,_t,Dt,Ot,l,o,r,c,f,_,D,p,qs,Qs,Ks,Js,Zs,xs]}class pl extends Oe{constructor(e){super(),Ye(this,e,vl,bl,Be,{rows:56,tasks:57,timeRanges:58,rowPadding:59,rowHeight:60,from:61,to:62,minWidth:63,fitWidth:64,classes:3,headers:1,zoomLevels:65,taskContent:66,tableWidth:2,resizeHandleWidth:67,onTaskButtonClick:68,dateAdapter:69,magnetUnit:70,magnetOffset:71,columnUnit:0,columnOffset:52,ganttTableModules:4,ganttBodyModules:5,reflectOnParentRows:72,reflectOnChildRows:73,useCanvasColumns:6,columnStrokeColor:7,columnStrokeWidth:8,highlightedDurations:74,highlightColor:75,taskElementHook:76,columnService:77,api:78,taskFactory:53,rowFactory:54,dndManager:79,timeRangeFactory:80,utils:55,refreshTimeRanges:81,refreshTasks:82,getRowContainer:83,selectTask:84,unselectTasks:85,scrollToRow:86,scrollToTask:87,updateTask:88,updateTasks:89,updateRow:90,updateRows:91,getRow:92,getTask:93,getTasks:94},null,[-1,-1,-1,-1,-1])}get columnService(){return this.$$.ctx[77]}get api(){return this.$$.ctx[78]}get taskFactory(){return this.$$.ctx[53]}get rowFactory(){return this.$$.ctx[54]}get dndManager(){return this.$$.ctx[79]}get timeRangeFactory(){return this.$$.ctx[80]}get utils(){return this.$$.ctx[55]}get refreshTimeRanges(){return this.$$.ctx[81]}get refreshTasks(){return this.$$.ctx[82]}get getRowContainer(){return this.$$.ctx[83]}get selectTask(){return this.$$.ctx[84]}get unselectTasks(){return this.$$.ctx[85]}get scrollToRow(){return this.$$.ctx[86]}get scrollToTask(){return this.$$.ctx[87]}get updateTask(){return this.$$.ctx[88]}get updateTasks(){return this.$$.ctx[89]}get updateRow(){return this.$$.ctx[90]}get updateRows(){return this.$$.ctx[91]}get getRow(){return this.$$.ctx[92]}get getTask(){return this.$$.ctx[93]}get getTasks(){return this.$$.ctx[94]}}function as(s){let e,t,n;function i(r,a){return r[0].expanded?Tl:yl}let l=i(s),o=l(s);return{c(){e=P("div"),o.c(),this.h()},l(r){e=W(r,"DIV",{class:!0});var a=I(e);o.l(a),a.forEach(m),this.h()},h(){C(e,"class","sg-tree-expander svelte-1tk4vqn")},m(r,a){M(r,e,a),o.m(e,null),t||(n=Qe(e,"click",s[1]),t=!0)},p(r,a){l!==(l=i(r))&&(o.d(1),o=l(r),o&&(o.c(),o.m(e,null)))},d(r){r&&m(e),o.d(),t=!1,n()}}}function yl(s){let e;return{c(){e=P("i"),this.h()},l(t){e=W(t,"I",{class:!0}),I(e).forEach(m),this.h()},h(){C(e,"class","fas fa-angle-right")},m(t,n){M(t,e,n)},d(t){t&&m(e)}}}function Tl(s){let e;return{c(){e=P("i"),this.h()},l(t){e=W(t,"I",{class:!0}),I(e).forEach(m),this.h()},h(){C(e,"class","fas fa-angle-down")},m(t,n){M(t,e,n)},d(t){t&&m(e)}}}function Cl(s){let e,t,n,i=s[0].children&&as(s);const l=s[3].default,o=oi(l,s,s[2],null);return{c(){e=P("div"),i&&i.c(),t=le(),o&&o.c(),this.h()},l(r){e=W(r,"DIV",{class:!0,style:!0});var a=I(e);i&&i.l(a),t=oe(a),o&&o.l(a),a.forEach(m),this.h()},h(){C(e,"class","sg-cell-inner svelte-1tk4vqn"),S(e,"padding-left",s[0].childLevel*3+"em")},m(r,a){M(r,e,a),i&&i.m(e,null),Y(e,t),o&&o.m(e,null),n=!0},p(r,[a]){r[0].children?i?i.p(r,a):(i=as(r),i.c(),i.m(e,t)):i&&(i.d(1),i=null),o&&o.p&&(!n||a&4)&&ri(o,l,r,r[2],n?ci(l,r[2],a,null):ai(r[2]),null),(!n||a&1)&&S(e,"padding-left",r[0].childLevel*3+"em")},i(r){n||(V(o,r),n=!0)},o(r){G(o,r),n=!1},d(r){r&&m(e),i&&i.d(),o&&o.d(r)}}}function Rl(s,e,t){let{$$slots:n={},$$scope:i}=e,{row:l}=e;const o=zt();function r(){l.expanded?o("rowCollapsed",{row:l}):o("rowExpanded",{row:l})}return s.$$set=a=>{"row"in a&&t(0,l=a.row),"$$scope"in a&&t(2,i=a.$$scope)},[l,r,i,n]}class Dl extends Oe{constructor(e){super(),Ye(this,e,Rl,Cl,Be,{row:0})}}function cs(s,e,t){const n=s.slice();return n[12]=e[t],n}function Sl(s){let e,t,n=s[1].model.iconClass&&us(s);function i(r,a){return r[1].model.headerHtml?Pl:r[12].renderer?zl:r[12].type==="resourceInfo"?Hl:Ml}let l=i(s),o=l(s);return{c(){n&&n.c(),e=le(),o.c(),t=N()},l(r){n&&n.l(r),e=oe(r),o.l(r),t=N()},m(r,a){n&&n.m(r,a),M(r,e,a),o.m(r,a),M(r,t,a)},p(r,a){r[1].model.iconClass?n?n.p(r,a):(n=us(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l===(l=i(r))&&o?o.p(r,a):(o.d(1),o=l(r),o&&(o.c(),o.m(t.parentNode,t)))},i:ve,o:ve,d(r){r&&(m(e),m(t)),n&&n.d(r),o.d(r)}}}function El(s){let e,t;return e=new Dl({props:{row:s[1],$$slots:{default:[Ol]},$$scope:{ctx:s}}}),e.$on("rowCollapsed",s[8]),e.$on("rowExpanded",s[9]),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,i){ke(e,n,i),t=!0},p(n,i){const l={};i&2&&(l.row=n[1]),i&32771&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function us(s){let e,t,n;return{c(){e=P("div"),t=P("i"),this.h()},l(i){e=W(i,"DIV",{class:!0});var l=I(e);t=W(l,"I",{class:!0}),I(t).forEach(m),l.forEach(m),this.h()},h(){C(t,"class",n=Gt(s[1].model.iconClass)+" svelte-oze9vk"),C(e,"class","sg-table-icon svelte-oze9vk")},m(i,l){M(i,e,l),Y(e,t)},p(i,l){l&2&&n!==(n=Gt(i[1].model.iconClass)+" svelte-oze9vk")&&C(t,"class",n)},d(i){i&&m(e)}}}function Ml(s){let e=s[1].model[s[12].property]+"",t;return{c(){t=ct(e)},l(n){t=ut(n,e)},m(n,i){M(n,t,i)},p(n,i){i&3&&e!==(e=n[1].model[n[12].property]+"")&&ft(t,e)},d(n){n&&m(t)}}}function Hl(s){let e,t,n,i,l=s[1].model[s[12].property]+"",o;return{c(){e=P("img"),n=le(),i=P("div"),o=ct(l),this.h()},l(r){e=W(r,"IMG",{class:!0,src:!0,alt:!0}),n=oe(r),i=W(r,"DIV",{class:!0});var a=I(i);o=ut(a,l),a.forEach(m),this.h()},h(){C(e,"class","sg-resource-image svelte-oze9vk"),zn(e.src,t=s[1].model.imageSrc)||C(e,"src",t),C(e,"alt",""),C(i,"class","sg-resource-title")},m(r,a){M(r,e,a),M(r,n,a),M(r,i,a),Y(i,o)},p(r,a){a&2&&!zn(e.src,t=r[1].model.imageSrc)&&C(e,"src",t),a&3&&l!==(l=r[1].model[r[12].property]+"")&&ft(o,l)},d(r){r&&(m(e),m(n),m(i))}}}function zl(s){let e,t=s[12].renderer(s[1])+"",n;return{c(){e=new rt(!1),n=N(),this.h()},l(i){e=at(i,!1),n=N(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),M(i,n,l)},p(i,l){l&3&&t!==(t=i[12].renderer(i[1])+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function Pl(s){let e,t=s[1].model.headerHtml+"",n;return{c(){e=new rt(!1),n=N(),this.h()},l(i){e=at(i,!1),n=N(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),M(i,n,l)},p(i,l){l&2&&t!==(t=i[1].model.headerHtml+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function fs(s){let e,t,n;return{c(){e=P("div"),t=P("i"),this.h()},l(i){e=W(i,"DIV",{class:!0});var l=I(e);t=W(l,"I",{class:!0}),I(t).forEach(m),l.forEach(m),this.h()},h(){C(t,"class",n=Gt(s[1].model.iconClass)+" svelte-oze9vk"),C(e,"class","sg-table-icon svelte-oze9vk")},m(i,l){M(i,e,l),Y(e,t)},p(i,l){l&2&&n!==(n=Gt(i[1].model.iconClass)+" svelte-oze9vk")&&C(t,"class",n)},d(i){i&&m(e)}}}function Wl(s){let e=s[1].model[s[12].property]+"",t;return{c(){t=ct(e)},l(n){t=ut(n,e)},m(n,i){M(n,t,i)},p(n,i){i&3&&e!==(e=n[1].model[n[12].property]+"")&&ft(t,e)},d(n){n&&m(t)}}}function Il(s){let e,t=s[12].renderer(s[1])+"",n;return{c(){e=new rt(!1),n=N(),this.h()},l(i){e=at(i,!1),n=N(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),M(i,n,l)},p(i,l){l&3&&t!==(t=i[12].renderer(i[1])+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function Bl(s){let e,t=s[1].model.headerHtml+"",n;return{c(){e=new rt(!1),n=N(),this.h()},l(i){e=at(i,!1),n=N(),this.h()},h(){e.a=n},m(i,l){e.m(t,i,l),M(i,n,l)},p(i,l){l&2&&t!==(t=i[1].model.headerHtml+"")&&e.p(t)},d(i){i&&(m(n),e.d())}}}function Ol(s){let e,t,n=s[1].model.iconClass&&fs(s);function i(r,a){return r[1].model.headerHtml?Bl:r[12].renderer?Il:Wl}let l=i(s),o=l(s);return{c(){n&&n.c(),e=le(),o.c(),t=N()},l(r){n&&n.l(r),e=oe(r),o.l(r),t=N()},m(r,a){n&&n.m(r,a),M(r,e,a),o.m(r,a),M(r,t,a)},p(r,a){r[1].model.iconClass?n?n.p(r,a):(n=fs(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l===(l=i(r))&&o?o.p(r,a):(o.d(1),o=l(r),o&&(o.c(),o.m(t.parentNode,t)))},d(r){r&&(m(e),m(t)),n&&n.d(r),o.d(r)}}}function hs(s){let e,t,n,i,l;const o=[El,Sl],r=[];function a(c,f){return c[12].type=="tree"?0:1}return t=a(s),n=r[t]=o[t](s),{c(){e=P("div"),n.c(),i=le(),this.h()},l(c){e=W(c,"DIV",{class:!0,style:!0});var f=I(e);n.l(f),i=oe(f),f.forEach(m),this.h()},h(){C(e,"class","sg-table-body-cell sg-table-cell svelte-oze9vk"),S(e,"width",s[12].width+"px")},m(c,f){M(c,e,f),r[t].m(e,null),Y(e,i),l=!0},p(c,f){let w=t;t=a(c),t===w?r[t].p(c,f):(Le(),G(r[w],1,1,()=>{r[w]=null}),Ue(),n=r[t],n?n.p(c,f):(n=r[t]=o[t](c),n.c()),V(n,1),n.m(e,i)),(!l||f&1)&&S(e,"width",c[12].width+"px")},i(c){l||(V(n),l=!0)},o(c){G(n),l=!1},d(c){c&&m(e),r[t].d()}}}function Yl(s){let e,t,n,i,l=se(s[0]),o=[];for(let a=0;a<l.length;a+=1)o[a]=hs(cs(s,l,a));const r=a=>G(o[a],1,1,()=>{o[a]=null});return{c(){e=P("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=W(a,"DIV",{"data-row-id":!0,style:!0,class:!0});var c=I(e);for(let f=0;f<o.length;f+=1)o[f].l(c);c.forEach(m),this.h()},h(){C(e,"data-row-id",t=s[1].model.id),S(e,"height",s[2]+"px"),C(e,"class",n="sg-table-row "+(s[1].model.classes||"")+" svelte-oze9vk"),F(e,"sg-row-expanded",s[1].expanded),F(e,"sg-hover",s[3]==s[1].model.id),F(e,"sg-selected",s[4]==s[1].model.id)},m(a,c){M(a,e,c);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);i=!0},p(a,[c]){if(c&3){l=se(a[0]);let f;for(f=0;f<l.length;f+=1){const w=cs(a,l,f);o[f]?(o[f].p(w,c),V(o[f],1)):(o[f]=hs(w),o[f].c(),V(o[f],1),o[f].m(e,null))}for(Le(),f=l.length;f<o.length;f+=1)r(f);Ue()}(!i||c&2&&t!==(t=a[1].model.id))&&C(e,"data-row-id",t),(!i||c&4)&&S(e,"height",a[2]+"px"),(!i||c&2&&n!==(n="sg-table-row "+(a[1].model.classes||"")+" svelte-oze9vk"))&&C(e,"class",n),(!i||c&2)&&F(e,"sg-row-expanded",a[1].expanded),(!i||c&10)&&F(e,"sg-hover",a[3]==a[1].model.id),(!i||c&18)&&F(e,"sg-selected",a[4]==a[1].model.id)},i(a){if(!i){for(let c=0;c<l.length;c+=1)V(o[c]);i=!0}},o(a){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)G(o[c]);i=!1},d(a){a&&m(e),st(o,a)}}}function Al(s,e,t){let n,i,l,{headers:o=null}=e,{row:r=null}=e;const{rowHeight:a}=fe("options");U(s,a,D=>t(2,n=D));const{hoveredRow:c,selectedRow:f}=fe("gantt");U(s,c,D=>t(3,i=D)),U(s,f,D=>t(4,l=D));const w=zt();ln(()=>{r.model.expanded==!1&&w("rowCollapsed",{row:r})});function T(D){nn.call(this,s,D)}function _(D){nn.call(this,s,D)}return s.$$set=D=>{"headers"in D&&t(0,o=D.headers),"row"in D&&t(1,r=D.row)},s.$$.update=()=>{s.$$.dirty&2&&r.parent&&r.childLevel*3},[o,r,n,i,l,a,c,f,T,_]}class Ll extends Oe{constructor(e){super(),Ye(this,e,Al,Yl,Be,{headers:0,row:1})}}function ds(s,e,t){const n=s.slice();return n[32]=e[t],n}function gs(s,e,t){const n=s.slice();return n[35]=e[t],n}function ms(s){let e,t=s[35].title+"",n,i;return{c(){e=P("div"),n=ct(t),i=le(),this.h()},l(l){e=W(l,"DIV",{class:!0,style:!0});var o=I(e);n=ut(o,t),i=oe(o),o.forEach(m),this.h()},h(){C(e,"class","sg-table-header-cell sg-table-cell svelte-afbyi7"),S(e,"width",s[35].width+"px")},m(l,o){M(l,e,o),Y(e,n),Y(e,i)},p(l,o){o[0]&32&&t!==(t=l[35].title+"")&&ft(n,t),o[0]&32&&S(e,"width",l[35].width+"px")},d(l){l&&m(e)}}}function _s(s){let e,t;return e=new Ll({props:{row:s[32],headers:s[5]}}),e.$on("rowExpanded",s[17]),e.$on("rowCollapsed",s[18]),{c(){we(e.$$.fragment)},l(n){Se(e.$$.fragment,n)},m(n,i){ke(e,n,i),t=!0},p(n,i){const l={};i[0]&16&&(l.row=n[32]),i[0]&32&&(l.headers=n[5]),e.$set(l)},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){be(e,n)}}}function Ul(s){let e,t,n,i,l,o,r,a,c,f=se(s[5]),w=[];for(let p=0;p<f.length;p+=1)w[p]=ms(gs(s,f,p));let T=se(s[4]),_=[];for(let p=0;p<T.length;p+=1)_[p]=_s(ds(s,T,p));const D=p=>G(_[p],1,1,()=>{_[p]=null});return{c(){e=P("div"),t=P("div");for(let p=0;p<w.length;p+=1)w[p].c();n=le(),i=P("div"),l=P("div"),o=P("div");for(let p=0;p<_.length;p+=1)_[p].c();this.h()},l(p){e=W(p,"DIV",{class:!0,style:!0});var g=I(e);t=W(g,"DIV",{class:!0,style:!0});var k=I(t);for(let K=0;K<w.length;K+=1)w[K].l(k);k.forEach(m),n=oe(g),i=W(g,"DIV",{class:!0});var H=I(i);l=W(H,"DIV",{class:!0});var y=I(l);o=W(y,"DIV",{class:!0,style:!0});var R=I(o);for(let K=0;K<_.length;K+=1)_[K].l(R);R.forEach(m),y.forEach(m),H.forEach(m),g.forEach(m),this.h()},h(){C(t,"class","sg-table-header svelte-afbyi7"),S(t,"height",s[8]+"px"),C(o,"class","sg-table-rows svelte-afbyi7"),S(o,"padding-top",s[1]+"px"),S(o,"padding-bottom",s[2]+"px"),S(o,"height",s[3]+"px"),C(l,"class","sg-table-scroller svelte-afbyi7"),C(i,"class","sg-table-body svelte-afbyi7"),F(i,"bottom-scrollbar-visible",s[7]),C(e,"class","sg-table sg-view svelte-afbyi7"),S(e,"width",s[0]+"px")},m(p,g){M(p,e,g),Y(e,t);for(let k=0;k<w.length;k+=1)w[k]&&w[k].m(t,null);s[22](t),Y(e,n),Y(e,i),Y(i,l),Y(l,o);for(let k=0;k<_.length;k+=1)_[k]&&_[k].m(o,null);r=!0,a||(c=nt(s[16].call(null,l)),a=!0)},p(p,g){if(g[0]&32){f=se(p[5]);let k;for(k=0;k<f.length;k+=1){const H=gs(p,f,k);w[k]?w[k].p(H,g):(w[k]=ms(H),w[k].c(),w[k].m(t,null))}for(;k<w.length;k+=1)w[k].d(1);w.length=f.length}if((!r||g[0]&256)&&S(t,"height",p[8]+"px"),g[0]&393264){T=se(p[4]);let k;for(k=0;k<T.length;k+=1){const H=ds(p,T,k);_[k]?(_[k].p(H,g),V(_[k],1)):(_[k]=_s(H),_[k].c(),V(_[k],1),_[k].m(o,null))}for(Le(),k=T.length;k<_.length;k+=1)D(k);Ue()}(!r||g[0]&2)&&S(o,"padding-top",p[1]+"px"),(!r||g[0]&4)&&S(o,"padding-bottom",p[2]+"px"),(!r||g[0]&8)&&S(o,"height",p[3]+"px"),(!r||g[0]&128)&&F(i,"bottom-scrollbar-visible",p[7]),(!r||g[0]&1)&&S(e,"width",p[0]+"px")},i(p){if(!r){for(let g=0;g<T.length;g+=1)V(_[g]);r=!0}},o(p){_=_.filter(Boolean);for(let g=0;g<_.length;g+=1)G(_[g]);r=!1},d(p){p&&m(e),st(w,p),s[22](null),st(_,p),a=!1,c()}}}function ys(s){s.forEach(e=>{e.children&&ys(e.children),e.hidden=!0})}function Ts(s,e=!1){s.forEach(t=>{t.children&&Ts(t.children,!t.expanded),t.hidden=e})}function Vl(s,e,t){let n,i,l,o,r,a,c;const f=zt();let{tableWidth:w}=e,{paddingTop:T}=e,{paddingBottom:_}=e,{rowContainerHeight:D}=e,{visibleRows:p}=e,{tableHeaders:g=[{title:"Name",property:"label",width:100}]}=e;const{from:k,to:H,width:y,visibleWidth:R,headerHeight:K}=fe("dimensions");U(s,y,v=>t(21,i=v)),U(s,R,v=>t(20,n=v)),U(s,K,v=>t(8,c=v));const{rowPadding:te,rowHeight:Z}=fe("options");U(s,te,v=>t(23,l=v)),U(s,Z,v=>t(26,a=v));const{rowStore:de,taskStore:ge}=fe("dataStore");U(s,de,v=>t(25,r=v)),U(s,ge,v=>t(24,o=v));const{scrollables:j}=fe("gantt");ln(()=>{f("init",{module:this})});let me;function Ve(v){j.push({node:v,orientation:"vertical"});function x(ce){t(6,me.scrollLeft=v.scrollLeft,me)}return v.addEventListener("scroll",x),{destroy(){v.removeEventListener("scroll",x)}}}let pe;function Ee(v){const x=v.detail.row;x.expanded=!0,x.children&&Ts(x.children),Me()}function ie(v){const x=v.detail.row;x.expanded=!1,x.children&&ys(x.children),Me()}function Me(){let v=0;r.ids.forEach(x=>{r.entities[x].hidden||(ue(de,r.entities[x].y=v,r),v+=a)}),o.ids.forEach(x=>{const ce=o.entities[x],Ae=r.entities[ce.model.resourceId];ue(ge,o.entities[x].top=Ae.y+l,o)})}let ye;function q(v){bt[v?"unshift":"push"](()=>{me=v,t(6,me)})}return s.$$set=v=>{"tableWidth"in v&&t(0,w=v.tableWidth),"paddingTop"in v&&t(1,T=v.paddingTop),"paddingBottom"in v&&t(2,_=v.paddingBottom),"rowContainerHeight"in v&&t(3,D=v.rowContainerHeight),"visibleRows"in v&&t(4,p=v.visibleRows),"tableHeaders"in v&&t(5,g=v.tableHeaders)},s.$$.update=()=>{if(s.$$.dirty[0]&32){let v=0;g.forEach(x=>{v+=x.width}),t(19,pe=v)}s.$$.dirty[0]&3670017&&t(7,ye=i>n&&pe<=w)},[w,T,_,D,p,g,me,ye,c,y,R,K,te,Z,de,ge,Ve,Ee,ie,pe,n,i,q]}class Fl extends Oe{constructor(e){super(),Ye(this,e,Vl,Ul,Be,{tableWidth:0,paddingTop:1,paddingBottom:2,rowContainerHeight:3,visibleRows:4,tableHeaders:5},null,[-1,-1])}}var Xl=Fl;class Gl{constructor(e){B(this,"moment");this.moment=e}format(e,t){return this.moment(e).format(t)}roundTo(e,t,n){const i=this.moment(e);return Nl(i,n,t),i.valueOf()}}const ws={hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function Nl(s,e,t,n="round"){e===1&&t==="day"&&(e=24,t="hours"),ws[t]&&(t=ws[t]);const i={hours:24,minutes:60,seconds:60,milliseconds:1e3};i[t]||console.warn(`Rounding dates by ${t} is not supported`);let l=0,o=!1,r=1,a;for(const c in i)c===t?(l=s.get(t),a=i[c],o=!0):o&&(r*=i[c],l+=s.get(c)/r,s.set(c,0));return l=Math[n](l/e)*e,l=Math.min(l,a),s.set(t,l),s}const jl=pl;function ql(s){let e,t,n,i,l,o,r;const a=[s[0]];let c={};for(let f=0;f<a.length;f+=1)c=it(c,a[f]);return i=new jl({props:c}),s[3](i),o=new fi({props:{options:s[0]}}),o.$on("change",s[2]),{c(){e=le(),t=P("div"),n=P("div"),we(i.$$.fragment),l=le(),we(o.$$.fragment),this.h()},l(f){ui("svelte-1v6igbo",document.head).forEach(m),e=oe(f),t=W(f,"DIV",{class:!0});var T=I(t);n=W(T,"DIV",{id:!0,class:!0});var _=I(n);Se(i.$$.fragment,_),_.forEach(m),l=oe(T),Se(o.$$.fragment,T),T.forEach(m),this.h()},h(){document.title="Usage as svelte - svelte-gantt",C(n,"id","example-gantt"),C(n,"class","svelte-1toa21o"),C(t,"class","container svelte-1toa21o")},m(f,w){M(f,e,w),M(f,t,w),Y(t,n),ke(i,n,null),Y(t,l),ke(o,t,null),r=!0},p(f,[w]){const T=w&1?lt(a,[ot(f[0])]):{};i.$set(T);const _={};w&1&&(_.options=f[0]),o.$set(_)},i(f){r||(V(i.$$.fragment,f),V(o.$$.fragment,f),r=!0)},o(f){G(i.$$.fragment,f),G(o.$$.fragment,f),r=!1},d(f){f&&(m(e),m(t)),s[3](null),be(i),be(o)}}}function Ql(s,e,t){let n;U(s,Pn,c=>t(0,n=c));const i=[{id:0,from:Re("10:00"),to:Re("12:00"),classes:null,label:"Lunch"},{id:1,from:Re("15:00"),to:Re("17:00"),classes:null,label:"Dinner"}],l={rows:[{id:1,label:"Preparation and Planning"},{id:2,label:"Development"},{id:3,label:"Implementation"},{id:4,label:"Training"}],tasks:[{id:1,resourceId:1,label:"Svelte-gantt",from:Re("7:00"),to:Re("9:00"),classes:"orange"},{id:2,resourceId:2,label:"As a",from:Re("9:00"),to:Re("11:00"),classes:"blue"},{id:3,resourceId:3,label:"Pure svelte",from:Re("11:00"),to:Re("13:00"),classes:"green"},{id:4,resourceId:4,label:"component",from:Re("13:00"),to:Re("15:00"),classes:"orange"}]};ue(Pn,n={dateAdapter:new Gl(hi),rows:l.rows,tasks:l.tasks,timeRanges:i,columnOffset:15,magnetOffset:15,rowHeight:52,rowPadding:6,headers:[{unit:"day",format:"MMMM Do"},{unit:"hour",format:"H:mm"}],fitWidth:!0,minWidth:800,from:Re("06:00"),to:Re("18:00"),tableHeaders:[{title:"Label",property:"label",width:140,type:"tree"}],tableWidth:240,ganttTableModules:[Xl]},n);let o;function r(c){const f=c.detail;Object.assign(n,f)}function a(c){bt[c?"unshift":"push"](()=>{o=c,t(1,o)})}return s.$$.update=()=>{s.$$.dirty&1&&console.log("options changed",n)},[n,o,r,a]}class to extends Oe{constructor(e){super(),Ye(this,e,Ql,ql,Be,{})}}export{to as component};

var A=Object.defineProperty;var N=(o,n,t)=>n in o?A(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var $=(o,n,t)=>(N(o,typeof n!="symbol"?n+"":n,t),t);import{s as z,e as h,a as v,c as b,b as C,y as D,f as d,g as y,r as _,i as g,h as E,B as V,C as P,o as R,p as I,H as q,z as X,n as Y}from"../chunks/scheduler.lruobs1Y.js";import{S as B,i as G,b as T,d as H,m as M,a as S,t as j,e as L}from"../chunks/index.DyGm78TJ.js";import{g as U,a as W}from"../chunks/spread.CgU5AtxT.js";import{L as F}from"../chunks/layout.zjTtpqzV.js";import{u as J,g as K,i as Q,b as Z,t as O,a as nn,S as tn}from"../chunks/index.Up5bhyj0.js";const sn={enabled:!0,elementContent:()=>{const o=document.createElement("div");return o.innerHTML="New Task",Object.assign(o.style,{position:"absolute",background:"#eee",padding:"0.5em 1em",fontSize:"12px",pointerEvents:"none"}),o}};class an{constructor(n,t){$(this,"draggable");$(this,"element");$(this,"options");this.options=Object.assign({},sn,t),this.draggable=J(n,{onDrag:this.onDrag.bind(this),dragAllowed:()=>this.options.enabled,resizeAllowed:!1,onDrop:this.onDrop.bind(this),container:document.body,getX:a=>a.pageX,getY:a=>a.pageY,getWidth:()=>0})}onDrag({x:n,y:t}){this.element||(this.element=this.options.elementContent(),document.body.appendChild(this.element),this.options.dragging=!0),this.element.style.top=t+"px",this.element.style.left=n+"px"}onDrop(n){var s,p,c,i;const t=this.options.gantt,a=K(n.mouseEvent),l=t.getRow(a);if(l&&Q(l.model)){const r=Z(t.getRowContainer(),n.mouseEvent),u=t.utils.getDateByPosition(r.x);(p=(s=this.options).onsuccess)==null||p.call(s,l,u,t)}else(i=(c=this.options).onfail)==null||i.call(c);document.body.removeChild(this.element),this.options.dragging=!1,this.element=null}}function en(o){let n,t,a,l="Drag to gantt",s,p,c,i={from:O("8:00"),to:O("14:00"),tasks:o[2],rows:[{id:1,label:"Resource #1"},{id:2,label:"Resource #2"},{id:3,label:"Resource #3"},{id:4,label:"Resource #4"}],ganttTableModules:[nn]};return p=new tn({props:i}),o[4](p),{c(){n=h("div"),t=h("div"),a=h("div"),a.textContent=l,s=v(),T(p.$$.fragment),this.h()},l(r){n=b(r,"DIV",{class:!0});var u=C(n);t=b(u,"DIV",{class:!0});var k=C(t);a=b(k,"DIV",{class:!0,"data-svelte-h":!0}),D(a)!=="svelte-1r31gjq"&&(a.textContent=l),k.forEach(d),s=y(u),H(p.$$.fragment,u),u.forEach(d),this.h()},h(){_(a,"class","px-2 border bg-slate-100 select-none"),_(t,"class","flex p-2 border-b"),_(n,"class","border")},m(r,u){g(r,n,u),E(n,t),E(t,a),o[3](a),E(n,s),M(p,n,null),c=!0},p(r,[u]){const k={};u&4&&(k.tasks=r[2]),p.$set(k)},i(r){c||(S(p.$$.fragment,r),c=!0)},o(r){j(p.$$.fragment,r),c=!1},d(r){r&&d(n),o[3](null),o[4](null),L(p)}}}function on(o,n,t){let a,l,s=[];V(()=>{new an(a,{gantt:l,onsuccess:(i,r,u)=>{console.log("success"),t(2,s=[...s,{id:s.length,resourceId:i.model.id,label:"New task",from:r,to:r+60*60*1e3}])},onfail:()=>{}})});function p(i){P[i?"unshift":"push"](()=>{a=i,t(0,a)})}function c(i){P[i?"unshift":"push"](()=>{l=i,t(1,l)})}return[a,l,s,p,c]}class pn extends B{constructor(n){super(),G(this,n,on,en,z,{})}}function ln(o){let n,t='External draggable<a class="header-anchor" aria-hidden="true" href="#external-draggable">#</a>',a,l,s="Enables external DOM elements to be draggable to svelte-gantt. Useful for creating new tasks:",p,c,i,r=`<code class="language-js"><span class="token keyword">new</span> <span class="token class-name">SvelteGanttExternal</span><span class="token punctuation">(</span>
    <span class="token comment">// external DOM element</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'newTaskButton'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// options</span>
    <span class="token punctuation">&#123;</span>
        <span class="token comment">// reference to instance of svelte-gantt</span>
        gantt<span class="token punctuation">,</span>
        <span class="token comment">// if enabled</span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// success callback</span>
        <span class="token comment">// row: row element was dropped on</span>
        <span class="token comment">// date: date element was dropped on</span>
        <span class="token comment">// gantt: instance of svelte-gantt</span>
        <span class="token function-variable function">onsuccess</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span> date<span class="token punctuation">,</span> gantt</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// here you can add a task to row, see './public/main.js'</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// called when dragged outside main gantt area</span>
        <span class="token function-variable function">onfail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// factory function, creates HTMLElement that will follow the mouse</span>
        <span class="token function-variable function">elementContent</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'New Task'</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">'#eee'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">'0.5em 1em'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">'12px'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">pointerEvents</span><span class="token operator">:</span> <span class="token string">'none'</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> element<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,u,k,w,f,x;return f=new pn({}),{c(){n=h("h1"),n.innerHTML=t,a=v(),l=h("p"),l.textContent=s,p=v(),c=h("pre"),i=new q(!1),u=v(),k=h("hr"),w=v(),T(f.$$.fragment),this.h()},l(e){n=b(e,"H1",{id:!0,tabindex:!0,"data-svelte-h":!0}),D(n)!=="svelte-17nt48i"&&(n.innerHTML=t),a=y(e),l=b(e,"P",{"data-svelte-h":!0}),D(l)!=="svelte-9075e2"&&(l.textContent=s),p=y(e),c=b(e,"PRE",{class:!0});var m=C(c);i=X(m,!1),m.forEach(d),u=y(e),k=b(e,"HR",{}),w=y(e),H(f.$$.fragment,e),this.h()},h(){_(n,"id","external-draggable"),_(n,"tabindex","-1"),i.a=null,_(c,"class","language-js")},m(e,m){g(e,n,m),g(e,a,m),g(e,l,m),g(e,p,m),g(e,c,m),i.m(r,c),g(e,u,m),g(e,k,m),g(e,w,m),M(f,e,m),x=!0},p:Y,i(e){x||(S(f.$$.fragment,e),x=!0)},o(e){j(f.$$.fragment,e),x=!1},d(e){e&&(d(n),d(a),d(l),d(p),d(c),d(u),d(k),d(w)),L(f,e)}}}function cn(o){let n,t;const a=[o[0]];let l={$$slots:{default:[ln]},$$scope:{ctx:o}};for(let s=0;s<a.length;s+=1)l=R(l,a[s]);return n=new F({props:l}),{c(){T(n.$$.fragment)},l(s){H(n.$$.fragment,s)},m(s,p){M(n,s,p),t=!0},p(s,[p]){const c=p&1?U(a,[W(s[0])]):{};p&2&&(c.$$scope={dirty:p,ctx:s}),n.$set(c)},i(s){t||(S(n.$$.fragment,s),t=!0)},o(s){j(n.$$.fragment,s),t=!1},d(s){L(n,s)}}}function rn(o,n,t){return o.$$set=a=>{t(0,n=R(R({},n),I(a)))},n=I(n),[n]}class hn extends B{constructor(n){super(),G(this,n,rn,cn,z,{})}}export{hn as component};

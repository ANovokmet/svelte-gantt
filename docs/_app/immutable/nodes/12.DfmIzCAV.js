var N=Object.defineProperty;var V=(o,n,t)=>n in o?N(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var $=(o,n,t)=>(V(o,typeof n!="symbol"?n+"":n,t),t);import{s as z,e as h,a as v,c as b,b as C,y as D,f as d,g as y,r as _,i as g,h as E,B as q,C as P,o as T,p as I,H as A,z as X,n as Y}from"../chunks/scheduler.CnFf9BV0.js";import{S as B,i as G,b as H,d as M,m as R,a as S,t as j,e as L}from"../chunks/index._WJlIO9N.js";import{g as U,a as W}from"../chunks/spread.CgU5AtxT.js";import{L as F}from"../chunks/layout.DJ7hEGt9.js";import{u as J,g as K,t as O,a as Q,S as Z}from"../chunks/index.C2crPun4.js";const nn={enabled:!0,elementContent:()=>{const o=document.createElement("div");return o.innerHTML="New Task",Object.assign(o.style,{position:"absolute",background:"#eee",padding:"0.5em 1em",fontSize:"12px",pointerEvents:"none"}),o}};class tn{constructor(n,t){$(this,"draggable");$(this,"element");$(this,"options");this.options=Object.assign({},nn,t),this.draggable=J(n,{onDrag:this.onDrag.bind(this),dragAllowed:()=>this.options.enabled,resizeAllowed:!1,onDrop:this.onDrop.bind(this),container:document.body,getX:s=>s.pageX,getY:s=>s.pageY,getWidth:()=>0})}onDrag({x:n,y:t}){this.element||(this.element=this.options.elementContent(),document.body.appendChild(this.element),this.options.dragging=!0),this.element.style.top=t+"px",this.element.style.left=n+"px"}onDrop(n){var l,a,p,c;const t=this.options.gantt,s=t.dndManager.getTarget("row",n.mouseEvent);if(s){const i=K(t.getRowContainer(),n.mouseEvent),r=t.utils.getDateByPosition(i.x);(a=(l=this.options).onsuccess)==null||a.call(l,s,r,t)}else(c=(p=this.options).onfail)==null||c.call(p);document.body.removeChild(this.element),this.options.dragging=!1,this.element=null}}function sn(o){let n,t,s,l="Drag to gantt",a,p,c,i={from:O("8:00"),to:O("14:00"),tasks:o[2],rows:[{id:1,label:"Resource #1"},{id:2,label:"Resource #2"},{id:3,label:"Resource #3"},{id:4,label:"Resource #4"}],ganttTableModules:[Q]};return p=new Z({props:i}),o[4](p),{c(){n=h("div"),t=h("div"),s=h("div"),s.textContent=l,a=v(),H(p.$$.fragment),this.h()},l(r){n=b(r,"DIV",{class:!0});var u=C(n);t=b(u,"DIV",{class:!0});var k=C(t);s=b(k,"DIV",{class:!0,"data-svelte-h":!0}),D(s)!=="svelte-1r31gjq"&&(s.textContent=l),k.forEach(d),a=y(u),M(p.$$.fragment,u),u.forEach(d),this.h()},h(){_(s,"class","px-2 border bg-slate-100 select-none"),_(t,"class","flex p-2 border-b"),_(n,"class","border")},m(r,u){g(r,n,u),E(n,t),E(t,s),o[3](s),E(n,a),R(p,n,null),c=!0},p(r,[u]){const k={};u&4&&(k.tasks=r[2]),p.$set(k)},i(r){c||(S(p.$$.fragment,r),c=!0)},o(r){j(p.$$.fragment,r),c=!1},d(r){r&&d(n),o[3](null),o[4](null),L(p)}}}function an(o,n,t){let s,l,a=[];q(()=>{new tn(s,{gantt:l,onsuccess:(i,r,u)=>{console.log("success"),t(2,a=[...a,{id:a.length,resourceId:i.model.id,label:"New task",from:r,to:r+60*60*1e3}])},onfail:()=>{}})});function p(i){P[i?"unshift":"push"](()=>{s=i,t(0,s)})}function c(i){P[i?"unshift":"push"](()=>{l=i,t(1,l)})}return[s,l,a,p,c]}class en extends B{constructor(n){super(),G(this,n,an,sn,z,{})}}function on(o){let n,t='External draggable<a class="header-anchor" aria-hidden="true" href="#external-draggable">#</a>',s,l,a="Enables external DOM elements to be draggable to svelte-gantt. Useful for creating new tasks:",p,c,i,r=`<code class="language-js"><span class="token keyword">new</span> <span class="token class-name">SvelteGanttExternal</span><span class="token punctuation">(</span>
    <span class="token comment">// external DOM element</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'newTaskButton'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// options</span>
    <span class="token punctuation">&#123;</span>
        <span class="token comment">// reference to instance of svelte-gantt</span>
        gantt<span class="token punctuation">,</span>
        <span class="token comment">// if enabled</span>
        <span class="token literal-property property">enabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// success callback</span>
        <span class="token comment">// row: row element was dropped on</span>
        <span class="token comment">// date: date element was dropped on</span>
        <span class="token comment">// gantt: instance of svelte-gantt</span>
        <span class="token function-variable function">onsuccess</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span> date<span class="token punctuation">,</span> gantt</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// here you can add a task to row, see './public/main.js'</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// called when dragged outside main gantt area</span>
        <span class="token function-variable function">onfail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">// factory function, creates HTMLElement that will follow the mouse</span>
        <span class="token function-variable function">elementContent</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'New Task'</span><span class="token punctuation">;</span>
            Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>style<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
                <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">'#eee'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">'0.5em 1em'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">'12px'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">pointerEvents</span><span class="token operator">:</span> <span class="token string">'none'</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> element<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code>`,u,k,w,f,x;return f=new en({}),{c(){n=h("h1"),n.innerHTML=t,s=v(),l=h("p"),l.textContent=a,p=v(),c=h("pre"),i=new A(!1),u=v(),k=h("hr"),w=v(),H(f.$$.fragment),this.h()},l(e){n=b(e,"H1",{id:!0,tabindex:!0,"data-svelte-h":!0}),D(n)!=="svelte-17nt48i"&&(n.innerHTML=t),s=y(e),l=b(e,"P",{"data-svelte-h":!0}),D(l)!=="svelte-9075e2"&&(l.textContent=a),p=y(e),c=b(e,"PRE",{class:!0});var m=C(c);i=X(m,!1),m.forEach(d),u=y(e),k=b(e,"HR",{}),w=y(e),M(f.$$.fragment,e),this.h()},h(){_(n,"id","external-draggable"),_(n,"tabindex","-1"),i.a=null,_(c,"class","language-js")},m(e,m){g(e,n,m),g(e,s,m),g(e,l,m),g(e,p,m),g(e,c,m),i.m(r,c),g(e,u,m),g(e,k,m),g(e,w,m),R(f,e,m),x=!0},p:Y,i(e){x||(S(f.$$.fragment,e),x=!0)},o(e){j(f.$$.fragment,e),x=!1},d(e){e&&(d(n),d(s),d(l),d(p),d(c),d(u),d(k),d(w)),L(f,e)}}}function pn(o){let n,t;const s=[o[0]];let l={$$slots:{default:[on]},$$scope:{ctx:o}};for(let a=0;a<s.length;a+=1)l=T(l,s[a]);return n=new F({props:l}),{c(){H(n.$$.fragment)},l(a){M(n.$$.fragment,a)},m(a,p){R(n,a,p),t=!0},p(a,[p]){const c=p&1?U(s,[W(a[0])]):{};p&2&&(c.$$scope={dirty:p,ctx:a}),n.$set(c)},i(a){t||(S(n.$$.fragment,a),t=!0)},o(a){j(n.$$.fragment,a),t=!1},d(a){L(n,a)}}}function ln(o,n,t){return o.$$set=s=>{t(0,n=T(T({},n),I(s)))},n=I(n),[n]}class gn extends B{constructor(n){super(),G(this,n,ln,pn,z,{})}}export{gn as component};

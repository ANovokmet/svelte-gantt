var vi=Object.defineProperty;var yi=(n,e,t)=>e in n?vi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var M=(n,e,t)=>(yi(n,typeof e!="symbol"?e+"":e,t),t);const jl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function K(){}function Ge(n,e){for(const t in e)n[t]=e[t];return n}function Bs(n){return n()}function jn(){return Object.create(null)}function Ue(n){n.forEach(Bs)}function Yt(n){return typeof n=="function"}function ve(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let qt;function Un(n,e){return n===e?!0:(qt||(qt=document.createElement("a")),qt.href=e,n===qt.href)}function Ti(n){return Object.keys(n).length===0}function _n(n,...e){if(n==null){for(const s of e)s(void 0);return K}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ci(n){let e;return _n(n,t=>e=t)(),e}function A(n,e,t){n.$$.on_destroy.push(_n(e,t))}function Si(n,e,t,s){if(n){const i=Ls(n,e,t,s);return n[0](i)}}function Ls(n,e,t,s){return n[1]&&s?Ge(t.ctx.slice(),n[1](s(e))):t.ctx}function Ri(n,e,t,s){if(n[2]&&s){const i=n[2](s(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],r=Math.max(e.dirty.length,i.length);for(let l=0;l<r;l+=1)o[l]=e.dirty[l]|i[l];return o}return e.dirty|i}return e.dirty}function zi(n,e,t,s,i,o){if(i){const r=Ls(e,t,s,o);n.p(r,i)}}function Di(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let s=0;s<t;s++)e[s]=-1;return e}return-1}function Mi(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function Xn(n,e){const t={};e=new Set(e);for(const s in n)!e.has(s)&&s[0]!=="$"&&(t[s]=n[s]);return t}function en(n){return n??""}function fe(n,e,t){return n.set(t),e}function tt(n){return n&&Yt(n.destroy)?n.destroy:K}function L(n,e){n.appendChild(e)}function E(n,e,t){n.insertBefore(e,t||null)}function D(n){n.parentNode&&n.parentNode.removeChild(n)}function nt(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function W(n){return document.createElement(n)}function Jt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Xe(n){return document.createTextNode(n)}function ie(){return Xe(" ")}function re(){return Xe("")}function Ae(n,e,t,s){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}function Fn(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function v(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Ei(n){return Array.from(n.childNodes)}function ot(n,e){e=""+e,n.data!==e&&(n.data=e)}function z(n,e,t,s){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,s?"important":"")}let Qt;function Hi(){if(Qt===void 0){Qt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Qt=!0}}return Qt}function Nn(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const s=W("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const i=Hi();let o;return i?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Ae(window,"message",r=>{r.source===s.contentWindow&&e()})):(s.src="about:blank",s.onload=()=>{o=Ae(s.contentWindow,"resize",e),e()}),L(n,s),()=>{(i||o&&s.contentWindow)&&o(),D(s)}}function U(n,e,t){n.classList.toggle(e,!!t)}function Pi(n,e,{bubbles:t=!1,cancelable:s=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:s})}class ft{constructor(e=!1){M(this,"is_svg",!1);M(this,"e");M(this,"n");M(this,"t");M(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,s=null){this.e||(this.is_svg?this.e=Jt(t.nodeName):this.e=W(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(s)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)E(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(D)}}function tn(n,e){return new n(e)}let At;function Bt(n){At=n}function It(){if(!At)throw new Error("Function called outside component initialization");return At}function pn(n){It().$$.on_mount.push(n)}function Wi(n){It().$$.on_destroy.push(n)}function jt(){const n=It();return(e,t,{cancelable:s=!1}={})=>{const i=n.$$.callbacks[e];if(i){const o=Pi(e,t,{cancelable:s});return i.slice().forEach(r=>{r.call(n,o)}),!o.defaultPrevented}return!0}}function Ht(n,e){return It().$$.context.set(n,e),e}function oe(n){return It().$$.context.get(n)}function wn(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(s=>s.call(this,e))}const pt=[],at=[];let vt=[];const Gn=[],As=Promise.resolve();let bn=!1;function Os(){bn||(bn=!0,As.then(Ys))}function un(){return Os(),As}function Ot(n){vt.push(n)}const hn=new Set;let wt=0;function Ys(){if(wt!==0)return;const n=At;do{try{for(;wt<pt.length;){const e=pt[wt];wt++,Bt(e),Bi(e.$$)}}catch(e){throw pt.length=0,wt=0,e}for(Bt(null),pt.length=0,wt=0;at.length;)at.pop()();for(let e=0;e<vt.length;e+=1){const t=vt[e];hn.has(t)||(hn.add(t),t())}vt.length=0}while(pt.length);for(;Gn.length;)Gn.pop()();bn=!1,hn.clear(),Bt(n)}function Bi(n){if(n.fragment!==null){n.update(),Ue(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ot)}}function Li(n){const e=[],t=[];vt.forEach(s=>n.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),vt=e}const $t=new Set;let ct;function Pe(){ct={r:0,c:[],p:ct}}function We(){ct.r||Ue(ct.c),ct=ct.p}function Y(n,e){n&&n.i&&($t.delete(n),n.i(e))}function X(n,e,t,s){if(n&&n.o){if($t.has(n))return;$t.add(n),ct.c.push(()=>{$t.delete(n),s&&(t&&n.d(1),s())}),n.o(e)}else s&&s()}function te(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Pt(n,e){X(n,1,1,()=>{e.delete(n.key)})}function Wt(n,e,t,s,i,o,r,l,a,c,d,w){let p=n.length,m=o.length,b=p;const _={};for(;b--;)_[n[b].key]=b;const u=[],k=new Map,C=new Map,y=[];for(b=m;b--;){const B=w(i,o,b),J=t(B);let ee=r.get(J);ee?s&&y.push(()=>ee.p(B,e)):(ee=c(J,B),ee.c()),k.set(J,u[b]=ee),J in _&&C.set(J,Math.abs(b-_[J]))}const R=new Set,x=new Set;function N(B){Y(B,1),B.m(l,d),r.set(B.key,B),d=B.first,m--}for(;p&&m;){const B=u[m-1],J=n[p-1],ee=B.key,j=J.key;B===J?(d=B.first,p--,m--):k.has(j)?!r.has(ee)||R.has(ee)?N(B):x.has(j)?p--:C.get(ee)>C.get(j)?(x.add(ee),N(B)):(R.add(j),p--):(a(J,r),p--)}for(;p--;){const B=n[p];k.has(B.key)||a(B,r)}for(;m;)N(u[m-1]);return Ue(y),u}function st(n,e){const t={},s={},i={$$scope:1};let o=n.length;for(;o--;){const r=n[o],l=e[o];if(l){for(const a in r)a in l||(s[a]=1);for(const a in l)i[a]||(t[a]=l[a],i[a]=1);n[o]=l}else for(const a in r)i[a]=1}for(const r in s)r in t||(t[r]=void 0);return t}function it(n){return typeof n=="object"&&n!==null?n:{}}function ke(n){n&&n.c()}function ge(n,e,t){const{fragment:s,after_update:i}=n.$$;s&&s.m(e,t),Ot(()=>{const o=n.$$.on_mount.map(Bs).filter(Yt);n.$$.on_destroy?n.$$.on_destroy.push(...o):Ue(o),n.$$.on_mount=[]}),i.forEach(Ot)}function me(n,e){const t=n.$$;t.fragment!==null&&(Li(t.after_update),Ue(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ai(n,e){n.$$.dirty[0]===-1&&(pt.push(n),Os(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Ce(n,e,t,s,i,o,r=null,l=[-1]){const a=At;Bt(n);const c=n.$$={fragment:null,ctx:[],props:o,update:K,not_equal:i,bound:jn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:jn(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let d=!1;if(c.ctx=t?t(n,e.props||{},(w,p,...m)=>{const b=m.length?m[0]:p;return c.ctx&&i(c.ctx[w],c.ctx[w]=b)&&(!c.skip_bound&&c.bound[w]&&c.bound[w](b),d&&Ai(n,w)),p}):[],c.update(),d=!0,Ue(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const w=Ei(e.target);c.fragment&&c.fragment.l(w),w.forEach(D)}else c.fragment&&c.fragment.c();e.intro&&Y(n.$$.fragment),ge(n,e.target,e.anchor),Ys()}Bt(a)}class Se{constructor(){M(this,"$$");M(this,"$$set")}$destroy(){me(this,1),this.$destroy=K}$on(e,t){if(!Yt(t))return K;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const i=s.indexOf(t);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!Ti(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Oi="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Oi);const bt=[];function Yi(n,e){return{subscribe:pe(n,e).subscribe}}function pe(n,e=K){let t;const s=new Set;function i(l){if(ve(n,l)&&(n=l,t)){const a=!bt.length;for(const c of s)c[1](),bt.push(c,n);if(a){for(let c=0;c<bt.length;c+=2)bt[c][0](bt[c+1]);bt.length=0}}}function o(l){i(l(n))}function r(l,a=K){const c=[l,a];return s.add(c),s.size===1&&(t=e(i,o)||K),l(n),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:r}}function kn(n,e,t){const s=!Array.isArray(n),i=s?[n]:n;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Yi(t,(r,l)=>{let a=!1;const c=[];let d=0,w=K;const p=()=>{if(d)return;w();const b=e(s?c[0]:c,r,l);o?r(b):w=Yt(b)?b:K},m=i.map((b,_)=>_n(b,u=>{c[_]=u,d&=~(1<<_),a&&p()},()=>{d|=1<<_}));return a=!0,p(),function(){Ue(m),w(),a=!1}})}function gn(){const{subscribe:n,set:e,update:t}=pe({ids:[],entities:{}});return{set:e,_update:t,subscribe:n,add:s=>t(({ids:i,entities:o})=>({ids:[...i,s.model.id],entities:{...o,[s.model.id]:s}})),delete:s=>t(i=>{const{[s]:o,...r}=i.entities;return{ids:i.ids.filter(l=>l!==s),entities:r}}),deleteAll:s=>t(i=>{const o={...i.entities},r=new Set(s);for(let l=0;l<i.ids.length;l++)r.has(i.ids[l])&&delete o[i.ids[l]];return{ids:i.ids.filter(l=>!r.has(l)),entities:o}}),update:s=>t(({ids:i,entities:o})=>({ids:i,entities:{...o,[s.model.id]:s}})),upsert:s=>t(({ids:i,entities:o})=>({ids:i.indexOf(s.model.id)!==-1?i:[...i,s.model.id],entities:{...o,[s.model.id]:s}})),upsertAll:s=>t(i=>{const o={...i.entities},r=[...i.ids];for(let l=0;l<s.length;l++)r.indexOf(s[l].model.id)===-1&&r.push(s[l].model.id),o[s[l].model.id]=s[l];return{ids:r,entities:o}}),addAll:s=>{const i=[],o={};for(let r=0;r<s.length;r++)i.push(s[r].model.id),o[s[r].model.id]=s[r];e({ids:i,entities:o})},refresh:()=>t(s=>({...s}))}}function mn(n){return kn(n,({ids:e,entities:t})=>{const s=[];for(let i=0;i<e.length;i++)s.push(t[e[i]]);return s})}function Ii(){const n=gn(),e=gn(),t=gn(),s=mn(n),i=mn(e),o=mn(t),r=kn(s,a=>{const c={};for(let d=0;d<a.length;d++){const w=a[d];c[w.model.resourceId]||(c[w.model.resourceId]=[]),c[w.model.resourceId].push(w.model.id)}return c}),l=pe({});return{taskStore:n,rowStore:e,timeRangeStore:t,allTasks:s,allRows:i,allTimeRanges:o,rowTaskCache:r,draggingTaskCache:l}}class ji{constructor(e){M(this,"columnService");M(this,"rowPadding");M(this,"rowEntities");this.columnService=e}createTask(e){e.amountDone=e.amountDone||0,e.classes=e.classes||"",e.from=e.from||null,e.to=e.to||null,e.label=e.label||void 0,e.html=e.html||void 0,e.showButton=e.showButton||!1,e.buttonClasses=e.buttonClasses||"",e.buttonHtml=e.buttonHtml||"",e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const t=this.columnService.getPositionByDate(e.from)|0,s=this.columnService.getPositionByDate(e.to)|0;return{model:e,left:t,width:s-t,height:this.getHeight(e),top:this.getPosY(e),reflections:[]}}createTasks(e){return e.map(t=>this.createTask(t))}row(e){return this.rowEntities[e]}getHeight(e){return this.row(e.resourceId).height-2*this.rowPadding}getPosY(e){return this.row(e.resourceId).y+this.rowPadding}}function nn(n,e,t){const s=`reflected-task-${n.model.id}-${e.model.id}`,i={...n.model,resourceId:e.model.id,id:s,enableDragging:!1};return{...n,model:i,top:e.y+t.rowPadding,reflected:!0,reflectedOnParent:!1,reflectedOnChild:!0,originalId:n.model.id}}function Is(n){return n.which===1}function kt(n,e){const t=n.getBoundingClientRect(),s=e.clientX-t.left,i=e.clientY-t.top;return{x:s,y:i}}function js(n,e,t,s,i){n.addEventListener(e,function o(){n.removeEventListener(e,o,i),t.apply(this,arguments,s)})}function Lt(n,e=document.body){e.style.cursor=n}function vn(n){return n?typeof n=="string"?n:Array.isArray(n)?n.join(" "):"":""}function Ui(n,e){let t=!1;return function(){t||(n.apply(null,arguments),t=!0,setTimeout(function(){t=!1},e))}}function ye(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(!n||typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var Xi=`.sg-label-bottom.svelte-1sabjdh.svelte-1sabjdh{position:absolute;top:calc(100% + 10px);color:#888}.debug.svelte-1sabjdh.svelte-1sabjdh{position:absolute;top:-10px;right:0;font-size:8px;color:black}.sg-task.svelte-1sabjdh.svelte-1sabjdh{position:absolute;border-radius:2px;white-space:nowrap;transition:background-color 0.2s,
            opacity 0.2s;pointer-events:all}.sg-task-background.svelte-1sabjdh.svelte-1sabjdh{position:absolute;height:100%;top:0}.sg-task-content.svelte-1sabjdh.svelte-1sabjdh{position:absolute;height:100%;top:0;padding-left:14px;font-size:14px;display:flex;align-items:center;justify-content:flex-start;user-select:none}.sg-task.svelte-1sabjdh.svelte-1sabjdh:not(.moving){transition:transform 0.2s,
            background-color 0.2s,
            width 0.2s}.sg-task.moving.svelte-1sabjdh.svelte-1sabjdh{z-index:10000;opacity:0.5}.sg-task.resize-enabled.svelte-1sabjdh.svelte-1sabjdh:hover::before{content:'';width:4px;height:50%;top:25%;position:absolute;border-style:solid;border-color:rgba(255, 255, 255, 0.5);cursor:ew-resize;margin-left:3px;left:0;border-width:0 1px;z-index:1}.sg-task.resize-enabled.svelte-1sabjdh.svelte-1sabjdh:hover::after{content:'';width:4px;height:50%;top:25%;position:absolute;border-style:solid;border-color:rgba(255, 255, 255, 0.5);cursor:ew-resize;margin-right:3px;right:0;border-width:0 1px;z-index:1}.sg-task-reflected.svelte-1sabjdh.svelte-1sabjdh{opacity:0.5}.sg-task-background.svelte-1sabjdh.svelte-1sabjdh{background:rgba(0, 0, 0, 0.2)}.sg-task{color:white;background:rgb(116, 191, 255)}.sg-task:hover{background:rgb(98, 161, 216)}.sg-task.selected{background:rgb(69, 112, 150)}.sg-milestone.svelte-1sabjdh.svelte-1sabjdh{width:20px !important;min-width:40px;margin-left:-20px}.sg-task.sg-milestone.svelte-1sabjdh.svelte-1sabjdh{background:transparent}.sg-milestone.svelte-1sabjdh .sg-milestone__diamond.svelte-1sabjdh{position:relative}.sg-milestone.svelte-1sabjdh .sg-milestone__diamond.svelte-1sabjdh:before{position:absolute;top:0;left:50%;content:' ';height:28px;width:28px;transform-origin:0 0;transform:rotate(45deg)}.sg-milestone__diamond:before{background:rgb(116, 191, 255)}`;ye(Xi);function xn(n){let e;return{c(){e=W("div"),v(e,"class","sg-milestone__diamond svelte-1sabjdh")},m(t,s){E(t,e,s)},d(t){t&&D(e)}}}function qn(n){let e;return{c(){e=W("div"),v(e,"class","sg-task-background svelte-1sabjdh"),z(e,"width",n[0].amountDone+"%")},m(t,s){E(t,e,s)},p(t,s){s[0]&1&&z(e,"width",t[0].amountDone+"%")},d(t){t&&D(e)}}}function Fi(n){let e=n[0].label+"",t;return{c(){t=Xe(e)},m(s,i){E(s,t,i)},p(s,i){i[0]&1&&e!==(e=s[0].label+"")&&ot(t,e)},d(s){s&&D(t)}}}function Ni(n){let e,t=n[12](n[0])+"",s;return{c(){e=new ft(!1),s=re(),e.a=s},m(i,o){e.m(t,i,o),E(i,s,o)},p(i,o){o[0]&1&&t!==(t=i[12](i[0])+"")&&e.p(t)},d(i){i&&(D(s),e.d())}}}function Gi(n){let e,t=n[0].html+"",s;return{c(){e=new ft(!1),s=re(),e.a=s},m(i,o){e.m(t,i,o),E(i,s,o)},p(i,o){o[0]&1&&t!==(t=i[0].html+"")&&e.p(t)},d(i){i&&(D(s),e.d())}}}function Qn(n){let e,t=n[0].buttonHtml+"",s,i,o;return{c(){e=W("span"),v(e,"class",s="sg-task-button "+n[0].buttonClasses+" svelte-1sabjdh")},m(r,l){E(r,e,l),e.innerHTML=t,i||(o=Ae(e,"click",n[17]),i=!0)},p(r,l){l[0]&1&&t!==(t=r[0].buttonHtml+"")&&(e.innerHTML=t),l[0]&1&&s!==(s="sg-task-button "+r[0].buttonClasses+" svelte-1sabjdh")&&v(e,"class",s)},d(r){r&&D(e),i=!1,o()}}}function Vn(n){let e,t=n[0].labelBottom+"",s;return{c(){e=W("label"),s=Xe(t),v(e,"class","sg-label-bottom svelte-1sabjdh")},m(i,o){E(i,e,o),L(e,s)},p(i,o){o[0]&1&&t!==(t=i[0].labelBottom+"")&&ot(s,t)},d(i){i&&D(e)}}}function xi(n){let e,t,s,i,o,r,l,a,c,d,w,p=n[0].type==="milestone"&&xn(),m=n[0].amountDone&&qn(n);function b(y,R){return y[0].html?Gi:y[12]?Ni:Fi}let _=b(n),u=_(n),k=n[0].showButton&&Qn(n),C=n[0].labelBottom&&Vn(n);return{c(){e=W("div"),p&&p.c(),t=ie(),m&&m.c(),s=ie(),i=W("div"),u.c(),o=ie(),k&&k.c(),r=ie(),C&&C.c(),v(i,"class","sg-task-content svelte-1sabjdh"),v(e,"data-task-id",l=n[0].id),v(e,"class",a="sg-task "+n[6]+" svelte-1sabjdh"),z(e,"width",n[5].width+"px"),z(e,"height",n[1]+"px"),z(e,"transform","translate("+n[5].x+"px, "+n[5].y+"px)"),U(e,"sg-milestone",n[0].type==="milestone"),U(e,"moving",n[3]||n[4]),U(e,"animating",Zn),U(e,"sg-task-reflected",n[2]),U(e,"sg-task-selected",n[8][n[0].id]),U(e,"resize-enabled",n[7])},m(y,R){E(y,e,R),p&&p.m(e,null),L(e,t),m&&m.m(e,null),L(e,s),L(e,i),u.m(i,null),L(i,o),k&&k.m(i,null),L(e,r),C&&C.m(e,null),d||(w=[tt(n[15].call(null,e)),tt(c=n[16].call(null,e,n[0]))],d=!0)},p(y,R){y[0].type==="milestone"?p||(p=xn(),p.c(),p.m(e,t)):p&&(p.d(1),p=null),y[0].amountDone?m?m.p(y,R):(m=qn(y),m.c(),m.m(e,s)):m&&(m.d(1),m=null),_===(_=b(y))&&u?u.p(y,R):(u.d(1),u=_(y),u&&(u.c(),u.m(i,o))),y[0].showButton?k?k.p(y,R):(k=Qn(y),k.c(),k.m(i,null)):k&&(k.d(1),k=null),y[0].labelBottom?C?C.p(y,R):(C=Vn(y),C.c(),C.m(e,null)):C&&(C.d(1),C=null),R[0]&1&&l!==(l=y[0].id)&&v(e,"data-task-id",l),R[0]&64&&a!==(a="sg-task "+y[6]+" svelte-1sabjdh")&&v(e,"class",a),R[0]&32&&z(e,"width",y[5].width+"px"),R[0]&2&&z(e,"height",y[1]+"px"),R[0]&32&&z(e,"transform","translate("+y[5].x+"px, "+y[5].y+"px)"),c&&Yt(c.update)&&R[0]&1&&c.update.call(null,y[0]),R[0]&65&&U(e,"sg-milestone",y[0].type==="milestone"),R[0]&88&&U(e,"moving",y[3]||y[4]),R[0]&64&&U(e,"animating",Zn),R[0]&68&&U(e,"sg-task-reflected",y[2]),R[0]&321&&U(e,"sg-task-selected",y[8][y[0].id]),R[0]&192&&U(e,"resize-enabled",y[7])},i:K,o:K,d(y){y&&D(e),p&&p.d(),m&&m.d(),u.d(),k&&k.d(),C&&C.d(),d=!1,Ue(w)}}}let Zn=!0;const Vt=40,Zt=40;function qi(n,e){return{left:n.clientX-e.left<0+Vt,top:n.clientY-e.top<0+Vt,right:n.clientX-e.left>e.width-Vt,bottom:n.clientY-e.top>e.height-Vt}}function Qi(n,e,t){let s,i,o,r,l,{model:a}=e,{height:c}=e,{left:d}=e,{top:w}=e,{width:p}=e,{reflected:m=!1}=e,b=!1,_=!1,u={x:d,y:w,width:p};function k(O,se,q){!b&&!_&&(t(5,u.x=O,u),t(5,u.y=se,u),t(5,u.width=q,u))}const{taskStore:C,rowStore:y,draggingTaskCache:R}=oe("dataStore");A(n,C,O=>t(25,r=O)),A(n,y,O=>t(21,s=O)),A(n,R,O=>t(23,i=O));const{rowContainer:x,mainContainer:N}=oe("gantt"),{taskContent:B,resizeHandleWidth:J,rowPadding:ee,onTaskButtonClick:j,reflectOnParentRows:de,reflectOnChildRows:Oe,taskElementHook:we}=oe("options");A(n,ee,O=>t(24,o=O));const{dndManager:Re,api:ne,utils:ze,columnService:be,selectionManager:G}=oe("services");let S=G.selectedTasks;A(n,S,O=>t(8,l=O));let V;const le=Ui(O=>{const se=qi(O,V);(se.left||se.right)&&N.scrollTo({left:N.scrollLeft+(se.left?-Zt:Zt),behavior:"smooth"}),(se.top||se.bottom)&&N.scrollTo({top:N.scrollTop+(se.top?-Zt:Zt),behavior:"smooth"})},250);function Be(O){function se(q){let Q=!0;const Ee=s.entities[a.resourceId];if(q.dragging){const h=Re.getTarget("row",q.mouseEvent);h?(t(0,a.resourceId=h.model.id,a),ne.tasks.raise.switchRow(this,h,Ee)):Q=!1}t(3,b=t(4,_=!1));const g=r.entities[a.id];if(delete i[a.id],Q){const h=a.from,H=a.to,Le=t(0,a.from=ze.roundTo(be.getDateByPosition(q.x)),a),I=t(0,a.to=ze.roundTo(be.getDateByPosition(q.x+q.width)),a),Te=be.getPositionByDate(Le)|0,lt=be.getPositionByDate(I)|0,ue=s.entities[a.resourceId],yt=Te,xe=lt-Te,qe=o+ue.y;k(yt,qe,xe);const ae={...g,left:yt,width:xe,top:qe,model:a},Tt=h!=Le||H!=I||Ee&&Ee.model.id!==ue.model.id;Tt&&ne.tasks.raise.change({task:ae,sourceRow:Ee,targetRow:ue}),G.newTasksAndReflections.push(ae),Tt&&ne.tasks.raise.changed({task:ae,sourceRow:Ee,targetRow:ue}),ae.reflections&&G.oldReflections.push(...ae.reflections);const Fe=[];if(Oe&&ue.allChildren){ae.reflections||(ae.reflections=[]);const Qe={rowPadding:o};ue.allChildren.forEach(dt=>{const Ve=nn(ae,dt,Qe);ae.reflections.push(Ve.model.id),Fe.push(Ve)})}if(de&&ue.allParents.length>0){ae.reflections||(ae.reflections=[]);const Qe={rowPadding:o};ue.allParents.forEach(dt=>{const Ve=nn(ae,dt,Qe);ae.reflections.push(Ve.model.id),Fe.push(Ve)})}Fe.length>0&&G.newTasksAndReflections.push(...Fe),!(ue.allParents.length>0)&&!ue.allChildren&&(ae.reflections=null)}else t(5,u.x=g.left,u),t(5,u.width=g.width,u),t(5,u.y=g.top,u)}if(!m)return G.taskSettings.set(a.id,{onDown:q=>{V=N.getBoundingClientRect(),q.dragging&&Lt("move"),q.resizing&&Lt("e-resize"),fe(R,i[a.id]=!0,i)},onMouseUp:()=>{Lt("default"),ne.tasks.raise.moveEnd(a)},onResize:q=>{t(5,u.x=q.x,u),t(5,u.width=q.width,u),t(4,_=!0),le(q.event)},onDrag:q=>{t(5,u.x=q.x,u),t(5,u.y=q.y,u),t(3,b=!0),ne.tasks.raise.move(a),le(q.event)},dragAllowed:()=>s.entities[a.resourceId].model.enableDragging&&a.enableDragging,resizeAllowed:()=>a.type!=="milestone"&&s.entities[a.resourceId].model.enableDragging&&a.enableDragging,onDrop:se,container:x,resizeHandleWidth:J,getX:()=>u.x,getY:()=>u.y,getWidth:()=>u.width,modelId:a.id}),{destroy:()=>G.taskSettings.delete(a.id)}}function De(O,se){if(we)return we(O,se)}function Ye(O){j&&j(a,O)}let Me,Ie;return n.$$set=O=>{"model"in O&&t(0,a=O.model),"height"in O&&t(1,c=O.height),"left"in O&&t(18,d=O.left),"top"in O&&t(19,w=O.top),"width"in O&&t(20,p=O.width),"reflected"in O&&t(2,m=O.reflected)},n.$$.update=()=>{n.$$.dirty[0]&1835008&&k(d,w,p),n.$$.dirty[0]&1&&t(6,Me=vn(a.classes)),n.$$.dirty[0]&2097153&&t(7,Ie=a.type!=="milestone"&&s.entities[a.resourceId].model.enableDragging&&a.enableDragging)},[a,c,m,b,_,u,Me,Ie,l,C,y,R,B,ee,S,Be,De,Ye,d,w,p,s]}class Vi extends Se{constructor(e){super(),Ce(this,e,Qi,xi,ve,{model:0,height:1,left:18,top:19,width:20,reflected:2},null,[-1,-1])}}var Zi=".sg-row.svelte-7u5y5s{position:relative;width:100%;box-sizing:border-box}";ye(Zi);function Kn(n){let e,t=n[0].model.contentHtml+"",s;return{c(){e=new ft(!1),s=re(),e.a=s},m(i,o){e.m(t,i,o),E(i,s,o)},p(i,o){o&1&&t!==(t=i[0].model.contentHtml+"")&&e.p(t)},d(i){i&&(D(s),e.d())}}}function Ki(n){let e,t,s,i=n[0].model.contentHtml&&Kn(n);return{c(){e=W("div"),i&&i.c(),v(e,"class",t="sg-row "+n[0].model.classes+" svelte-7u5y5s"),v(e,"data-row-id",s=n[0].model.id),z(e,"height",n[3]+"px"),U(e,"sg-hover",n[1]==n[0].model.id),U(e,"sg-selected",n[2]==n[0].model.id)},m(o,r){E(o,e,r),i&&i.m(e,null)},p(o,[r]){o[0].model.contentHtml?i?i.p(o,r):(i=Kn(o),i.c(),i.m(e,null)):i&&(i.d(1),i=null),r&1&&t!==(t="sg-row "+o[0].model.classes+" svelte-7u5y5s")&&v(e,"class",t),r&1&&s!==(s=o[0].model.id)&&v(e,"data-row-id",s),r&8&&z(e,"height",o[3]+"px"),r&3&&U(e,"sg-hover",o[1]==o[0].model.id),r&5&&U(e,"sg-selected",o[2]==o[0].model.id)},i:K,o:K,d(o){o&&D(e),i&&i.d()}}}function Ji(n,e,t){let s,i,o,{row:r}=e;const{rowHeight:l}=oe("options");A(n,l,d=>t(3,o=d));const{hoveredRow:a,selectedRow:c}=oe("gantt");return A(n,a,d=>t(1,s=d)),A(n,c,d=>t(2,i=d)),n.$$set=d=>{"row"in d&&t(0,r=d.row)},[r,s,i,o,l,a,c]}class $i extends Se{constructor(e){super(),Ce(this,e,Ji,Ki,ve,{row:0})}}var eo=`.sg-time-range.svelte-w7p5la{height:100%;position:absolute;display:flex;flex-direction:column;align-items:center;background-image:linear-gradient(
            -45deg,
            rgba(0, 0, 0, 0) 46%,
            #e03218 49%,
            #e03218 51%,
            rgba(0, 0, 0, 0) 55%
        );background-size:6px 6px !important;color:red;font-weight:400}.sg-time-range-label.svelte-w7p5la{margin-top:10px;background:#fff;white-space:nowrap;padding:4px;font-weight:400;font-size:10px}`;ye(eo);function Jn(n){let e,t=n[0].label+"",s;return{c(){e=W("div"),s=Xe(t),v(e,"class","sg-time-range-label svelte-w7p5la")},m(i,o){E(i,e,o),L(e,s)},p(i,o){o&1&&t!==(t=i[0].label+"")&&ot(s,t)},d(i){i&&D(e)}}}function to(n){let e,t,s=n[0].label&&Jn(n);return{c(){e=W("div"),s&&s.c(),v(e,"class",t="sg-time-range "+n[3]+" svelte-w7p5la"),z(e,"width",n[2].width+"px"),z(e,"left",n[2].x+"px"),U(e,"moving",n[1])},m(i,o){E(i,e,o),s&&s.m(e,null)},p(i,[o]){i[0].label?s?s.p(i,o):(s=Jn(i),s.c(),s.m(e,null)):s&&(s.d(1),s=null),o&8&&t!==(t="sg-time-range "+i[3]+" svelte-w7p5la")&&v(e,"class",t),o&4&&z(e,"width",i[2].width+"px"),o&4&&z(e,"left",i[2].x+"px"),o&10&&U(e,"moving",i[1])},i:K,o:K,d(i){i&&D(e),s&&s.d()}}}function no(n,e,t){let{model:s}=e,{left:i}=e,{width:o}=e,{resizing:r=!1}=e;const l={width:o,x:i};let a;return n.$$set=c=>{"model"in c&&t(0,s=c.model),"left"in c&&t(4,i=c.left),"width"in c&&t(5,o=c.width),"resizing"in c&&t(1,r=c.resizing)},n.$$.update=()=>{n.$$.dirty&48&&(t(2,l.x=i,l),t(2,l.width=o,l)),n.$$.dirty&1&&t(3,a=vn(s.classes))},[s,r,l,a,i,o]}class so extends Se{constructor(e){super(),Ce(this,e,no,to,ve,{model:0,left:4,width:5,resizing:1})}}const io=2,oo=2;class on{constructor(e,t,s){M(this,"mouseStartPosX");M(this,"mouseStartPosY");M(this,"mouseStartRight");M(this,"direction");M(this,"dragging",!1);M(this,"resizing",!1);M(this,"initialX");M(this,"initialY");M(this,"initialW");M(this,"resizeTriggered",!1);M(this,"settings");M(this,"node");M(this,"offsetPos",{x:null,y:null});M(this,"offsetWidth",null);M(this,"overRezisedOffset");M(this,"onmousedown",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!Is(e)&&!this.settings.modelId)return;this.settings.modelId||(e.stopPropagation(),e.preventDefault());const s=this.dragAllowed,i=this.resizeAllowed;if(s||i){const o=this.settings.getX(),r=this.settings.getY(),l=this.settings.getWidth();this.initialX=t.clientX,this.initialY=t.clientY,this.mouseStartRight=o+l,this.mouseStartPosX=kt(this.settings.container,t).x-o,this.mouseStartPosY=kt(this.settings.container,t).y-r,i&&this.mouseStartPosX<=this.settings.resizeHandleWidth&&(this.direction="left",this.resizing=!0),i&&this.mouseStartPosX>=l-this.offsetWidth-this.settings.resizeHandleWidth&&(this.direction="right",this.resizing=!0),s&&!this.resizing&&(this.dragging=!0),(this.dragging||this.resizing)&&this.settings.onDown&&this.settings.onDown({mouseEvent:t,x:o,width:l,y:r,resizing:this.resizing,dragging:this.dragging}),this.settings.modelId||(window.addEventListener("mousemove",this.onmousemove,!1),js(window,"mouseup",this.onmouseup))}});M(this,"onmousemove",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!this.resizeTriggered)if(Math.abs(t.clientX-this.initialX)>io||Math.abs(t.clientY-this.initialY)>oo)this.resizeTriggered=!0;else return;if(e.preventDefault(),this.resizing){const s=kt(this.settings.container,t),i=this.settings.getX(),o=this.settings.getWidth();let r,l;this.direction==="left"?(this.overRezisedOffset==="left"&&(s.x+=this.offsetWidth),this.mouseStartRight-s.x<=0?(this.direction="right",this.overRezisedOffset!=="left"?this.overRezisedOffset="right":this.overRezisedOffset=void 0,r=this.mouseStartRight,l=this.mouseStartRight-s.x,this.mouseStartRight=this.mouseStartRight+o):(r=s.x,l=this.mouseStartRight-s.x)):this.direction==="right"&&(this.overRezisedOffset==="right"&&(s.x-=this.offsetWidth),s.x-i+this.offsetWidth<=0?(this.direction="left",this.overRezisedOffset!=="right"?this.overRezisedOffset="left":this.overRezisedOffset=void 0,r=s.x+this.offsetWidth,l=s.x-i+this.offsetWidth,this.mouseStartRight=i):(r=i,l=s.x-i+this.offsetWidth)),this.settings.onResize&&this.settings.onResize({x:r,width:l,event:e})}if(this.dragging&&this.settings.onDrag){const s=kt(this.settings.container,t);this.settings.onDrag({x:s.x-this.mouseStartPosX,y:s.y-this.mouseStartPosY,event:e})}});M(this,"onmouseup",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY},s=this.settings.getX(),i=this.settings.getY(),o=this.settings.getWidth();this.settings.onMouseUp&&this.settings.onMouseUp(),this.resizeTriggered&&this.settings.onDrop&&this.settings.onDrop({mouseEvent:t,x:s,y:i,width:o,dragging:this.dragging,resizing:this.resizing}),this.mouseStartPosX=null,this.mouseStartPosY=null,this.mouseStartRight=null,this.dragging=!1,this.resizing=!1,this.initialX=null,this.initialY=null,this.initialW=null,this.resizeTriggered=!1,this.offsetPos={x:null,y:null},this.offsetWidth=null,this.overRezisedOffset=void 0,this.settings.modelId||window.removeEventListener("mousemove",this.onmousemove,!1)});this.settings=t,this.node=e,this.settings.modelId?(this.offsetPos=s.offsetPos,this.offsetWidth=s.offsetWidth):e.addEventListener("mousedown",this.onmousedown,{passive:!0})}get dragAllowed(){return typeof this.settings.dragAllowed=="function"?this.settings.dragAllowed():this.settings.dragAllowed}get resizeAllowed(){return typeof this.settings.resizeAllowed=="function"?this.settings.resizeAllowed():this.settings.resizeAllowed}destroy(){this.node.removeEventListener("mousedown",this.onmousedown,!1),this.node.removeEventListener("mousemove",this.onmousemove,!1),this.node.removeEventListener("mouseup",this.onmouseup,!1)}}class lo{constructor(e){M(this,"handlerMap",{});this.register("row",t=>{let i=document.elementsFromPoint(t.clientX,t.clientY).find(o=>!!o.getAttribute("data-row-id"));if(i!==void 0){const o=i.getAttribute("data-row-id"),{entities:r}=Ci(e),l=r[o];if(l.model.enableDragging)return l}return null})}register(e,t){this.handlerMap[e]=t}getTarget(e,t){var s=this.handlerMap[e];if(s)return s(t)}}var ro=".sg-time-range-control.svelte-w4nglp{position:absolute}.sg-time-range-handle-left.svelte-w4nglp{position:absolute;left:0}.sg-time-range-handle-right.svelte-w4nglp{position:absolute;right:0}.sg-time-range-disabled.svelte-w4nglp{display:none}.sg-time-range-handle-left.svelte-w4nglp::before,.sg-time-range-handle-right.svelte-w4nglp::before{position:absolute;content:'';bottom:4px;border-radius:6px 6px 6px 0;border:2px solid #b0b0b7;width:9px;height:9px;transform:translateX(-50%) rotate(-45deg);background-color:#fff;border-color:#e03218;cursor:ew-resize}";ye(ro);function ao(n){let e,t,s,i,o,r,l;return{c(){e=W("div"),t=W("div"),s=ie(),i=W("div"),v(t,"class","sg-time-range-handle-left svelte-w4nglp"),v(i,"class","sg-time-range-handle-right svelte-w4nglp"),v(e,"class",o="sg-time-range-control "+n[1]+" svelte-w4nglp"),z(e,"width",n[0].width+"px"),z(e,"left",n[0].x+"px"),U(e,"sg-time-range-disabled",!n[3]())},m(a,c){E(a,e,c),L(e,t),L(e,s),L(e,i),r||(l=[tt(n[2].call(null,t)),tt(n[2].call(null,i))],r=!0)},p(a,[c]){c&2&&o!==(o="sg-time-range-control "+a[1]+" svelte-w4nglp")&&v(e,"class",o),c&1&&z(e,"width",a[0].width+"px"),c&1&&z(e,"left",a[0].x+"px"),c&10&&U(e,"sg-time-range-disabled",!a[3]())},i:K,o:K,d(a){a&&D(e),r=!1,Ue(l)}}}function co(n,e,t){const{rowContainer:s}=oe("gantt"),{api:i,utils:o,columnService:r}=oe("services"),{resizeHandleWidth:l}=oe("options"),{timeRangeStore:a}=oe("dataStore");let{model:c}=e,{width:d}=e,{left:w}=e;const p={width:d,x:w};function m(u){const k=R=>{const x=o.roundTo(r.getDateByPosition(R.x)),N=o.roundTo(r.getDateByPosition(R.x+R.width)),B=r.getPositionByDate(x),J=r.getPositionByDate(N);Object.assign(c,{from:x,to:N}),C({left:B,width:J-B,model:c,resizing:!1}),window.removeEventListener("mousemove",onmousemove,!1)};function C(R){a.update(R),t(0,p.x=R.left,p),t(0,p.width=R.width,p)}const y=new on(u,{onDown:R=>{i.timeranges.raise.clicked({model:c}),C({left:R.x,width:R.width,model:c,resizing:!0})},onResize:R=>{i.timeranges.raise.resized({model:c,left:R.x,width:R.width}),C({left:R.x,width:R.width,model:c,resizing:!0})},dragAllowed:!1,resizeAllowed:()=>b(),onDrop:k,container:s,resizeHandleWidth:l,getX:()=>p.x,getY:()=>0,getWidth:()=>p.width});return{destroy:()=>y.destroy()}}function b(){return c.resizable!==void 0?c.resizable:!0}let _;return n.$$set=u=>{"model"in u&&t(4,c=u.model),"width"in u&&t(5,d=u.width),"left"in u&&t(6,w=u.left)},n.$$.update=()=>{n.$$.dirty&96&&(t(0,p.x=w,p),t(0,p.width=d,p)),n.$$.dirty&16&&t(1,_=vn(c.classes))},[p,_,m,b,c,d,w]}class fo extends Se{constructor(e){super(),Ce(this,e,co,ao,ve,{model:4,width:5,left:6})}}var uo=".column.svelte-4fffin{position:absolute;height:100%;box-sizing:border-box}.column.svelte-4fffin{border-right:#efefef 1px solid}";ye(uo);function ho(n,e=1){switch(n){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${n}`)}}function go(n,e=1){return n.setSeconds(n.getSeconds()+e),n}function mo(n,e=1){return n.setMinutes(n.getMinutes()+e),n}function wo(n,e=1){return n.setHours(n.getHours()+e),n}function bo(n,e=1){return n.setDate(n.getDate()+e),n.setHours(0,0,0),n}function _o(n,e=1){const t=n,s=t.getDay(),i=t.getDate()-s+(s==0?-6:1);return t.setDate(i),t.setHours(0,0,0),t.setDate(t.getDate()+7*e),t}function po(n,e=1){return n.setMonth(n.getMonth()+e),n.setDate(1),n.setHours(0,0,0),n}function ko(n,e=1){return n.setFullYear(n.getFullYear()+e),n.setMonth(0),n.setDate(1),n.setHours(0,0,0),n}function $n(n,e,t){switch(e){case"y":case"year":return ko(n,t);case"month":return po(n,t);case"week":return _o(n,t);case"d":case"day":return bo(n,t);case"h":case"hour":return wo(n,t);case"m":case"minute":return mo(n,t);case"s":case"second":return go(n,t)}}const vo=["y","year","month","week","d","day","h","hour","m","minute","s","second"];function Us(n,e,t,s=1,i){if(vo.indexOf(t)!==-1){let o=0,r=0;const l=new Date(n),a=new Date(n);let c=$n(a,t,s),d=c.getTime();const w=c.getTime()-n,p=[{from:n,to:c.getTime(),duration:w,isHighlighted:i&&es(l,i)}];if(d<e){for(;d<e;)o=d,c=$n(new Date(d),t,s),r=c.getTime()-d,p.push({from:d,to:c.getTime(),duration:r,isHighlighted:i&&es(new Date(d),i)}),d=c.getTime();const m=e-o;p[p.length-1].to=e,p[p.length-1].duration=m}return p}throw new Error(`Unknown unit: ${t}`)}function es(n,e){let t;switch(e.unit){case"m":case"minute":return t=n.getMinutes(),e.fractions.includes(t);case"h":case"hour":return t=n.getHours(),e.fractions.includes(t);case"d":case"day":return t=n.getDay(),e.fractions.includes(t);case"week":return e.fractions.includes(t);case"dayinMonth":return t=n.getDate(),e.fractions.includes(t);case"month":return t=n.getMonth(),e.fractions.includes(t);case"y":case"year":return t=n.getFullYear(),e.fractions.includes(t);default:throw new Error(`Invalid unit: ${e.unit}`)}}class yo{constructor(){M(this,"from");M(this,"to");M(this,"width");M(this,"magnetOffset");M(this,"magnetUnit");M(this,"magnetDuration");M(this,"dateAdapter")}getPositionByDate(e){return yn(e,this.from,this.to,this.width)}getDateByPosition(e){return To(e,this.from,this.to,this.width)}roundTo(e){return this.dateAdapter?this.dateAdapter.roundTo(e,this.magnetUnit,this.magnetOffset):null}}function yn(n,e,t,s){if(!n)return;const i=n-e,o=t-e;return i/o*s}function To(n,e,t,s){const i=n/s*(t-e);return e+i}function Co(n,e,t,s){let i=-1,o=n.length;for(;o-i>1;){const r=Math.floor((i+o)/2);(s?t(n[r])<e:t(n[r])<=e)?i=r:o=r}return!s&&n[i]!==void 0&&t(n[i])===e&&(o=i),[i,o]}function Xs(n,e,t,s){const i=Co(n,e,t,s);return[n[i[0]],n[i[1]]]}var So=".column-header-row.svelte-vfarxf.svelte-vfarxf{position:relative;white-space:nowrap;height:32px}.column-header-cell.svelte-vfarxf.svelte-vfarxf{position:absolute;height:100%;box-sizing:border-box;text-overflow:clip;text-align:center;display:inline-flex;justify-content:center;align-items:center;font-size:1em;font-size:14px;font-weight:300;transition:background 0.2s;cursor:pointer;user-select:none;border-right:#efefef 1px solid;border-bottom:#efefef 1px solid}.column-header-cell.svelte-vfarxf.svelte-vfarxf:hover{background:#f9f9f9}.column-header-cell.sticky.svelte-vfarxf>.column-header-cell-label.svelte-vfarxf{position:sticky;left:1rem}";ye(So);function ts(n,e,t){const s=n.slice();return s[13]=e[t],s}function ns(n){let e,t,s=(n[13].label||"N/A")+"",i,o,r,l;function a(){return n[10](n[13])}return{c(){e=W("div"),t=W("div"),i=Xe(s),o=ie(),v(t,"class","column-header-cell-label svelte-vfarxf"),v(e,"class","column-header-cell svelte-vfarxf"),v(e,"role","button"),v(e,"tabindex","0"),z(e,"left",n[13].left+"px"),z(e,"width",n[13].width+"px"),U(e,"sticky",n[0].sticky)},m(c,d){E(c,e,d),L(e,t),L(t,i),L(e,o),r||(l=Ae(e,"click",a),r=!0)},p(c,d){n=c,d&1&&s!==(s=(n[13].label||"N/A")+"")&&ot(i,s),d&1&&z(e,"left",n[13].left+"px"),d&1&&z(e,"width",n[13].width+"px"),d&1&&U(e,"sticky",n[0].sticky)},d(c){c&&D(e),r=!1,l()}}}function Ro(n){let e,t=te(n[0].columns),s=[];for(let i=0;i<t.length;i+=1)s[i]=ns(ts(n,t,i));return{c(){e=W("div");for(let i=0;i<s.length;i+=1)s[i].c();v(e,"class","column-header-row svelte-vfarxf")},m(i,o){E(i,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(i,[o]){if(o&17){t=te(i[0].columns);let r;for(r=0;r<t.length;r+=1){const l=ts(i,t,r);s[r]?s[r].p(l,o):(s[r]=ns(l),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},i:K,o:K,d(i){i&&D(e),nt(s,i)}}}function zo(n,e,t){let s,i,o;const r=jt(),{from:l,to:a,width:c}=oe("dimensions");A(n,l,u=>t(9,o=u)),A(n,a,u=>t(8,i=u)),A(n,c,u=>t(7,s=u));const{dateAdapter:d}=oe("options");let{header:w}=e,{ganttBodyColumns:p}=e,{ganttBodyUnit:m}=e;function b(u){r("dateSelected",{from:u.from,to:u.to,unit:w.unit})}const _=u=>b(u);return n.$$set=u=>{"header"in u&&t(0,w=u.header),"ganttBodyColumns"in u&&t(5,p=u.ganttBodyColumns),"ganttBodyUnit"in u&&t(6,m=u.ganttBodyUnit)},n.$$.update=()=>{if(n.$$.dirty&993)if(w.unit===m)t(0,w.columns=p.map(u=>({...u,label:d.format(u.from,w.format)})),w);else{const u=Us(o.valueOf(),i.valueOf(),w.unit);let k=0,C=0;t(0,w.columns=u.map(y=>(C=k,k=yn(y.to,o.valueOf(),i.valueOf(),s),{width:Math.min(k-C,s),label:d.format(y.from,w.format),from:y.from,to:y.to,left:C})),w)}},[w,l,a,c,b,p,m,s,i,o,_]}class Do extends Se{constructor(e){super(),Ce(this,e,zo,Ro,ve,{header:0,ganttBodyColumns:5,ganttBodyUnit:6})}}function ss(n,e,t){const s=n.slice();return s[4]=e[t],s}function is(n){let e,t;return e=new Do({props:{header:n[4],ganttBodyColumns:n[1],ganttBodyUnit:n[2]}}),e.$on("dateSelected",n[3]),{c(){ke(e.$$.fragment)},m(s,i){ge(e,s,i),t=!0},p(s,i){const o={};i&1&&(o.header=s[4]),i&2&&(o.ganttBodyColumns=s[1]),i&4&&(o.ganttBodyUnit=s[2]),e.$set(o)},i(s){t||(Y(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){me(e,s)}}}function Mo(n){let e,t,s=te(n[0]),i=[];for(let r=0;r<s.length;r+=1)i[r]=is(ss(n,s,r));const o=r=>X(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=re()},m(r,l){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(r,l);E(r,e,l),t=!0},p(r,[l]){if(l&7){s=te(r[0]);let a;for(a=0;a<s.length;a+=1){const c=ss(r,s,a);i[a]?(i[a].p(c,l),Y(i[a],1)):(i[a]=is(c),i[a].c(),Y(i[a],1),i[a].m(e.parentNode,e))}for(Pe(),a=s.length;a<i.length;a+=1)o(a);We()}},i(r){if(!t){for(let l=0;l<s.length;l+=1)Y(i[l]);t=!0}},o(r){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)X(i[l]);t=!1},d(r){r&&D(e),nt(i,r)}}}function Eo(n,e,t){let{headers:s}=e,{ganttBodyColumns:i}=e,{ganttBodyUnit:o}=e;function r(l){wn.call(this,n,l)}return n.$$set=l=>{"headers"in l&&t(0,s=l.headers),"ganttBodyColumns"in l&&t(1,i=l.ganttBodyColumns),"ganttBodyUnit"in l&&t(2,o=l.ganttBodyUnit)},[s,i,o,r]}class Ho extends Se{constructor(e){super(),Ce(this,e,Eo,Mo,ve,{headers:0,ganttBodyColumns:1,ganttBodyUnit:2})}}function Po(n,e){const t=document.createElement("canvas");t.width=(n.length-1)*n[0].width,t.height=20;const s=t.getContext("2d");return s.shadowColor="rgba(128,128,128,0.5)",s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=.5,s.lineWidth=e.columnStrokeWidth,s.lineCap="square",s.strokeStyle=e.columnStrokeColor,s.translate(.5,.5),n.forEach(o=>{Wo(s,o.left)}),`url("${t.toDataURL()}")`}function Wo(n,e){n.beginPath(),n.moveTo(e,0),n.lineTo(e,20),n.stroke()}var Bo=".sg-columns.svelte-1uqfnup{position:absolute;height:100%;width:100%}.sg-columns--background.svelte-1uqfnup{overflow:hidden;background-repeat:repeat;background-position-x:-1px}.sg-column.svelte-1uqfnup{position:absolute;height:100%;width:100%;box-sizing:border-box}";ye(Bo);function os(n,e,t){const s=n.slice();return s[6]=e[t],s}function Lo(n){let e,t=te(n[0]),s=[];for(let i=0;i<t.length;i+=1)s[i]=ls(os(n,t,i));return{c(){e=W("div");for(let i=0;i<s.length;i+=1)s[i].c();v(e,"class","sg-columns svelte-1uqfnup")},m(i,o){E(i,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(i,o){if(o&29){t=te(i[0]);let r;for(r=0;r<t.length;r+=1){const l=os(i,t,r);s[r]?s[r].p(l,o):(s[r]=ls(l),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(i){i&&D(e),nt(s,i)}}}function Ao(n){let e;return{c(){e=W("div"),v(e,"class","sg-columns sg-columns--background svelte-1uqfnup"),z(e,"background-image",n[5])},m(t,s){E(t,e,s)},p(t,s){s&32&&z(e,"background-image",t[5])},d(t){t&&D(e)}}}function ls(n){let e;return{c(){e=W("div"),v(e,"class","sg-column svelte-1uqfnup"),z(e,"border-right",(n[6].bgHighlightColor?0:n[2])+"px solid "+(n[6].bgHighlightColor||n[3])),z(e,"left",n[6].left+"px"),z(e,"width",n[6].width+"px"),z(e,"background-color",n[6].bgHighlightColor||n[4])},m(t,s){E(t,e,s)},p(t,s){s&13&&z(e,"border-right",(t[6].bgHighlightColor?0:t[2])+"px solid "+(t[6].bgHighlightColor||t[3])),s&1&&z(e,"left",t[6].left+"px"),s&1&&z(e,"width",t[6].width+"px"),s&17&&z(e,"background-color",t[6].bgHighlightColor||t[4])},d(t){t&&D(e)}}}function Oo(n){let e;function t(o,r){return o[1]?Ao:Lo}let s=t(n),i=s(n);return{c(){i.c(),e=re()},m(o,r){i.m(o,r),E(o,e,r)},p(o,[r]){s===(s=t(o))&&i?i.p(o,r):(i.d(1),i=s(o),i&&(i.c(),i.m(e.parentNode,e)))},i:K,o:K,d(o){o&&D(e),i.d(o)}}}function Yo(n,e,t){let{columns:s}=e,{useCanvasColumns:i=!0}=e,{columnStrokeWidth:o}=e,{columnStrokeColor:r}=e,{columnDefaultColor:l="#ffffff"}=e,a;return n.$$set=c=>{"columns"in c&&t(0,s=c.columns),"useCanvasColumns"in c&&t(1,i=c.useCanvasColumns),"columnStrokeWidth"in c&&t(2,o=c.columnStrokeWidth),"columnStrokeColor"in c&&t(3,r=c.columnStrokeColor),"columnDefaultColor"in c&&t(4,l=c.columnDefaultColor)},n.$$.update=()=>{n.$$.dirty&13&&t(5,a=Po(s,{columnStrokeColor:r,columnStrokeWidth:o}))},[s,i,o,r,l,a]}class Io extends Se{constructor(e){super(),Ce(this,e,Yo,Oo,ve,{columns:0,useCanvasColumns:1,columnStrokeWidth:2,columnStrokeColor:3,columnDefaultColor:4})}}var jo=".sg-context-menu.svelte-1a9x2in{position:absolute;background:white;border:1px solid #ccc;padding:0.25em 0;font-size:10px;transition:opacity 0.4s ease 0s;opacity:1;box-shadow:rgba(0, 0, 0, 0.32) 1px 1px 3px 0px}.context-option.svelte-1a9x2in:hover{background:#eee}.context-option.svelte-1a9x2in{cursor:default;padding:0.2em 1em}";ye(jo);var Uo=`.sg-resize.svelte-1vzamdy{z-index:2;background:#e9eaeb;width:5px;cursor:col-resize;position:absolute;height:100%;transition:width 0.2s,
            transform 0.2s}.sg-resize.svelte-1vzamdy:hover{transform:translateX(-2px);width:10px}`;ye(Uo);function Xo(n){let e,t,s;return{c(){e=W("div"),v(e,"class","sg-resize svelte-1vzamdy"),z(e,"left",n[0]+"px")},m(i,o){E(i,e,o),t||(s=tt(n[1].call(null,e)),t=!0)},p(i,[o]){o&1&&z(e,"left",i[0]+"px")},i:K,o:K,d(i){i&&D(e),t=!1,s()}}}function Fo(n,e,t){const s=jt();let{x:i}=e,{container:o}=e;const r={onDrag:a=>{t(0,i=a.x),s("resize",{left:i}),Lt("col-resize")},onDrop:a=>{t(0,i=a.x),s("resize",{left:i}),Lt("default")},dragAllowed:!0,resizeAllowed:!1,container:o,getX:()=>i,getY:()=>0,getWidth:()=>0};function l(a){const c=new on(a,r,"resizer");return{destroy:()=>c.destroy()}}return n.$$set=a=>{"x"in a&&t(0,i=a.x),"container"in a&&t(2,o=a.container)},n.$$.update=()=>{n.$$.dirty&4&&(r.container=o)},[i,l,o]}class No extends Se{constructor(e){super(),Ce(this,e,Fo,Xo,ve,{x:0,container:2})}}class Go{constructor(){M(this,"listeners");M(this,"listenersMap");M(this,"tasks");M(this,"timeranges");this.listeners=[],this.listenersMap={}}registerEvent(e,t){this[e]||(this[e]={});const s=this[e];s.on||(s.on={},s.raise={});let i="on:"+e+":"+t;s.raise[t]=(...o)=>{this.listeners.forEach(r=>{r.eventId===i&&r.handler(o)})},s.on[t]=o=>{let r={handler:o,eventId:i};return this.listenersMap[i]=r,this.listeners.push(r),()=>{const a=this.listeners.indexOf(r);this.listeners.splice(a,1)}}}}class xo{constructor(){M(this,"rowHeight")}createRow(e,t){e.classes=e.classes||"",e.contentHtml=e.contentHtml||void 0,e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const s=e.height||this.rowHeight;return{model:e,y:t,height:s,expanded:!0}}createRows(e){const t={y:0,result:[]};return this.createChildRows(e,t),t.result}createChildRows(e,t,s=null,i=0,o=[]){const r=[],l=[];return s&&(o=[...o,s]),e.forEach(a=>{const c=this.createRow(a,t.y);if(t.result.push(c),r.push(c),l.push(c),c.childLevel=i,c.parent=s,c.allParents=o,t.y+=c.height,a.children){const d=this.createChildRows(a.children,t,c,i+1,o);c.children=d.rows,c.allChildren=d.allRows,l.push(...d.allRows)}}),{rows:r,allRows:l}}}class qo{constructor(e){M(this,"columnService");this.columnService=e}create(e){e.enableResizing=e.enableResizing===void 0?!0:e.enableResizing;const t=this.columnService.getPositionByDate(e.from),s=this.columnService.getPositionByDate(e.to);return{model:e,left:t,width:s-t,resizing:!1}}}class Qo{constructor(e){M(this,"taskStore");M(this,"oldReflections",[]);M(this,"newTasksAndReflections",[]);M(this,"taskSettings",new Map);M(this,"currentSelection",new Map);M(this,"selectedTasks",pe({}));M(this,"dragOrResizeTriggered",e=>{for(let[t,s]of this.currentSelection.entries()){const i=new on(s.HTMLElement,this.taskSettings.get(t),s.offsetData);i.onmousedown(e),this.currentSelection.set(t,{...s,draggable:i})}window.addEventListener("mousemove",this.selectionDragOrResizing,!1),js(window,"mouseup",this.selectionDropped)});M(this,"selectionDragOrResizing",e=>{for(let[,t]of this.currentSelection.entries()){const{draggable:s}=t;s.onmousemove(e)}});M(this,"selectionDropped",e=>{window.removeEventListener("mousemove",this.selectionDragOrResizing,!1);for(const[,t]of this.currentSelection.entries()){const{draggable:s}=t;s.onmouseup(e)}this.oldReflections.length&&this.taskStore.deleteAll(this.oldReflections),this.newTasksAndReflections.length&&this.taskStore.upsertAll(this.newTasksAndReflections),this.newTasksAndReflections.splice(0),this.oldReflections.splice(0)});this.taskStore=e}selectSingle(e,t){this.currentSelection.has(e)||(this.unSelectTasks(),this.toggleSelection(e,t)),this.selectedTasks.set({[e]:!0})}toggleSelection(e,t){this.currentSelection.set(e,{HTMLElement:t,offsetData:void 0,draggable:void 0}),this.selectedTasks.update(s=>({...s,[e]:!s[e]}))}unSelectTasks(){this.selectedTasks.set({}),this.currentSelection.clear()}dispatchSelectionEvent(e,t){const s=this.taskSettings.get(e),i=s.getX(),o=s.getY(),r=s.getWidth();for(const[l,a]of this.currentSelection.entries())if(l!==e){const c=this.taskSettings.get(l);a.offsetData={offsetPos:{x:c.getX()-i,y:c.getY()-o},offsetWidth:c.getWidth()-r}}else a.offsetData={offsetPos:{x:null,y:null},offsetWidth:null};this.dragOrResizeTriggered(t)}}function Vo(n,e){return Xs(n,e,s=>s.left)}function Zo(n,e){return Xs(n,e,s=>s.from)}function Ko(){const n={};return{onDelegatedEvent(e,t,s){n[e]||(n[e]={}),n[e][t]=s},offDelegatedEvent(e,t){delete n[e][t]},onEvent(e){const{type:t,target:s}=e,i=n[t];if(!i)return;let o,r=s;for(;r&&r!=e.currentTarget&&!(o=Jo(i,r));)r=r.parentElement;o&&i[o.attr]?i[o.attr](e,o.data,r):i.empty&&i.empty(e,null,r)}}}function Jo(n,e){let t;for(const s in n)if(t=e.getAttribute(s))return{attr:s,data:t}}class $o{format(e,t){const s=new Date(e);switch(t){case"H":return s.getHours()+"";case"HH":return _t(s.getHours());case"H:mm":return`${s.getHours()}:${_t(s.getMinutes())}`;case"hh:mm":return`${_t(s.getHours())}:${_t(s.getMinutes())}`;case"hh:mm:ss":return`${s.getHours()}:${_t(s.getMinutes())}:${_t(s.getSeconds())}`;case"dd/MM/yyyy":return`${s.getDate()}/${s.getMonth()+1}/${s.getFullYear()}`;case"dd/MM/yyyy hh:mm":return`${s.getDate()}/${s.getMonth()+1}/${s.getFullYear()} ${s.getHours()}:${s.getMinutes()}`;case"dd/MM/yyyy hh:mm:ss":return`${s.getDate()}/${s.getMonth()+1}/${s.getFullYear()} ${s.getHours()}:${s.getMinutes()}:${s.getSeconds()}`;case"YYYY":return`${s.getFullYear()}`;case"Q":return`${Math.floor(s.getMonth()/3+1)}`;case"[Q]Q":return`Q${Math.floor(s.getMonth()/3+1)}`;case"YYYY[Q]Q":return`${s.getFullYear()}Q${Math.floor(s.getMonth()/3+1)}`;case"MM":{let i=String(s.getMonth()+1);return i.length==1&&(i=`0${i}`),`${i}`}case"MMMM":{const i=s.toLocaleString("default",{month:"long"});return`${i.charAt(0).toUpperCase()}${i.substring(1)}`}case"MMMM - YYYY":{const i=s.toLocaleString("default",{month:"long"});return`${i.charAt(0).toUpperCase()}${i.substring(1)}-${s.getFullYear()}`}case"MMMM YYYY":{const i=s.toLocaleString("default",{month:"long"});return`${i.charAt(0).toUpperCase()}${i.substring(1)} ${s.getFullYear()}`}case"MMM":{const i=s.toLocaleString("default",{month:"short"});return`${i.charAt(0).toUpperCase()}${i.substring(1)}`}case"MMM - YYYY":{const i=s.toLocaleString("default",{month:"short"});return`${i.charAt(0).toUpperCase()}${i.substring(1)} - ${s.getFullYear()}`}case"MMM YYYY":{const i=s.toLocaleString("default",{month:"short"});return`${i.charAt(0).toUpperCase()}${i.substring(1)} ${s.getFullYear()}`}case"W":return`${rs(s)}`;case"WW":{const i=rs(s);return`${i.toString().length==1?"0":""}${i}`}default:return console.warn(`Date Format '${t}' is not supported, use another date adapter.`),`${s.getDate()}/${s.getMonth()+1}/${s.getFullYear()}`}}roundTo(e,t,s){const i=el(t,s);return Math.round(e/i)*i}}function _t(n){let e=n.toString();for(let t=e.length;t<2;t++)e="0"+e;return e}function rs(n){n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())),n.setUTCDate(n.getUTCDate()+4-(n.getUTCDay()||7));const e=new Date(Date.UTC(n.getUTCFullYear(),0,1));return Math.ceil(((n.valueOf()-e.valueOf())/864e5+1)/7)}function el(n,e){switch(n){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${n}`)}}var tl=`.sg-disable-transition.svelte-843l0i .sg-task,.sg-disable-transition.svelte-843l0i .sg-milestone{transition:transform 0s,
            background-color 0.2s,
            width 0s !important}.sg-view:not(:first-child){margin-left:5px}.sg-timeline.svelte-843l0i{flex:1 1 0%;display:flex;flex-direction:column;overflow-x:auto}.sg-gantt.svelte-843l0i{display:flex;width:100%;height:100%;position:relative}.sg-foreground.svelte-843l0i{box-sizing:border-box;overflow:hidden;top:0;left:0;position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}.sg-rows.svelte-843l0i{width:100%;box-sizing:border-box;overflow:hidden}.sg-timeline-body.svelte-843l0i{overflow:auto;flex:1 1 auto}.sg-header-scroller.svelte-843l0i{border-right:1px solid #efefef;overflow:hidden;position:relative}.content.svelte-843l0i{position:relative}*{box-sizing:border-box}`;ye(tl);function as(n,e,t){const s=n.slice();return s[136]=e[t],s}function cs(n,e,t){const s=n.slice();return s[139]=e[t],s}function fs(n,e,t){const s=n.slice();return s[142]=e[t],s}function ds(n,e,t){const s=n.slice();return s[145]=e[t],s}function us(n,e,t){const s=n.slice();return s[142]=e[t],s}function hs(n,e,t){const s=n.slice();return s[136]=e[t],s}function gs(n){let e,t,s,i;const o=[{rowContainerHeight:n[19]},{paddingTop:n[20]},{paddingBottom:n[21]},{tableWidth:n[2]},n[51],{visibleRows:n[9]}];var r=n[136];function l(a,c){let d={};if(c!==void 0&&c[0]&3670532|c[1]&1048576)d=st(o,[c[0]&524288&&{rowContainerHeight:a[19]},c[0]&1048576&&{paddingTop:a[20]},c[0]&2097152&&{paddingBottom:a[21]},c[0]&4&&{tableWidth:a[2]},c[1]&1048576&&it(a[51]),c[0]&512&&{visibleRows:a[9]}]);else for(let w=0;w<o.length;w+=1)d=Ge(d,o[w]);return{props:d}}return r&&(e=tn(r,l(n)),e.$on("init",sn)),s=new No({props:{x:n[2],container:n[12]}}),s.$on("resize",n[48]),{c(){e&&ke(e.$$.fragment),t=ie(),ke(s.$$.fragment)},m(a,c){e&&ge(e,a,c),E(a,t,c),ge(s,a,c),i=!0},p(a,c){if(c[0]&16&&r!==(r=a[136])){if(e){Pe();const w=e;X(w.$$.fragment,1,0,()=>{me(w,1)}),We()}r?(e=tn(r,l(a,c)),e.$on("init",sn),ke(e.$$.fragment),Y(e.$$.fragment,1),ge(e,t.parentNode,t)):e=null}else if(r){const w=c[0]&3670532|c[1]&1048576?st(o,[c[0]&524288&&{rowContainerHeight:a[19]},c[0]&1048576&&{paddingTop:a[20]},c[0]&2097152&&{paddingBottom:a[21]},c[0]&4&&{tableWidth:a[2]},c[1]&1048576&&it(a[51]),c[0]&512&&{visibleRows:a[9]}]):{};e.$set(w)}const d={};c[0]&4&&(d.x=a[2]),c[0]&4096&&(d.container=a[12]),s.$set(d)},i(a){i||(e&&Y(e.$$.fragment,a),Y(s.$$.fragment,a),i=!0)},o(a){e&&X(e.$$.fragment,a),X(s.$$.fragment,a),i=!1},d(a){a&&D(t),e&&me(e,a),me(s,a)}}}function ms(n,e){let t,s,i;const o=[e[142]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return s=new fo({props:r}),{key:n,first:null,c(){t=re(),ke(s.$$.fragment),this.first=t},m(l,a){E(l,t,a),ge(s,l,a),i=!0},p(l,a){e=l;const c=a[0]&16777216?st(o,[it(e[142])]):{};s.$set(c)},i(l){i||(Y(s.$$.fragment,l),i=!0)},o(l){X(s.$$.fragment,l),i=!1},d(l){l&&D(t),me(s,l)}}}function ws(n,e){let t,s,i;return s=new $i({props:{row:e[145]}}),{key:n,first:null,c(){t=re(),ke(s.$$.fragment),this.first=t},m(o,r){E(o,t,r),ge(s,o,r),i=!0},p(o,r){e=o;const l={};r[0]&512&&(l.row=e[145]),s.$set(l)},i(o){i||(Y(s.$$.fragment,o),i=!0)},o(o){X(s.$$.fragment,o),i=!1},d(o){o&&D(t),me(s,o)}}}function bs(n,e){let t,s,i;const o=[e[142]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return s=new so({props:r}),{key:n,first:null,c(){t=re(),ke(s.$$.fragment),this.first=t},m(l,a){E(l,t,a),ge(s,l,a),i=!0},p(l,a){e=l;const c=a[0]&16777216?st(o,[it(e[142])]):{};s.$set(c)},i(l){i||(Y(s.$$.fragment,l),i=!0)},o(l){X(s.$$.fragment,l),i=!1},d(l){l&&D(t),me(s,l)}}}function _s(n,e){let t,s,i;const o=[{model:e[139].model},{left:e[139].left},{width:e[139].width},{height:e[139].height},{top:e[139].top},e[139]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return s=new Vi({props:r}),{key:n,first:null,c(){t=re(),ke(s.$$.fragment),this.first=t},m(l,a){E(l,t,a),ge(s,l,a),i=!0},p(l,a){e=l;const c=a[0]&4194304?st(o,[{model:e[139].model},{left:e[139].left},{width:e[139].width},{height:e[139].height},{top:e[139].top},it(e[139])]):{};s.$set(c)},i(l){i||(Y(s.$$.fragment,l),i=!0)},o(l){X(s.$$.fragment,l),i=!1},d(l){l&&D(t),me(s,l)}}}function ps(n){let e,t,s;const i=[{paddingTop:n[20]},{paddingBottom:n[21]},{visibleRows:n[9]},n[51]];var o=n[136];function r(l,a){let c={};if(a!==void 0&&a[0]&3146240|a[1]&1048576)c=st(i,[a[0]&1048576&&{paddingTop:l[20]},a[0]&2097152&&{paddingBottom:l[21]},a[0]&512&&{visibleRows:l[9]},a[1]&1048576&&it(l[51])]);else for(let d=0;d<i.length;d+=1)c=Ge(c,i[d]);return{props:c}}return o&&(e=tn(o,r(n)),e.$on("init",sn)),{c(){e&&ke(e.$$.fragment),t=re()},m(l,a){e&&ge(e,l,a),E(l,t,a),s=!0},p(l,a){if(a[0]&32&&o!==(o=l[136])){if(e){Pe();const c=e;X(c.$$.fragment,1,0,()=>{me(c,1)}),We()}o?(e=tn(o,r(l,a)),e.$on("init",sn),ke(e.$$.fragment),Y(e.$$.fragment,1),ge(e,t.parentNode,t)):e=null}else if(o){const c=a[0]&3146240|a[1]&1048576?st(i,[a[0]&1048576&&{paddingTop:l[20]},a[0]&2097152&&{paddingBottom:l[21]},a[0]&512&&{visibleRows:l[9]},a[1]&1048576&&it(l[51])]):{};e.$set(c)}},i(l){s||(e&&Y(e.$$.fragment,l),s=!0)},o(l){e&&X(e.$$.fragment,l),s=!1},d(l){l&&D(t),e&&me(e,l)}}}function nl(n){let e,t,s,i,o,r,l,a,c=[],d=new Map,w,p,m,b,_,u,k,C,y=[],R=new Map,x,N,B=[],J=new Map,ee,j=[],de=new Map,Oe,we,Re,ne,ze,be,G=te(n[4]),S=[];for(let g=0;g<G.length;g+=1)S[g]=gs(hs(n,G,g));const V=g=>X(S[g],1,1,()=>{S[g]=null});l=new Ho({props:{headers:n[1],ganttBodyColumns:n[17],ganttBodyUnit:n[0]}}),l.$on("dateSelected",n[50]);let le=te(n[24]);const Be=g=>g[142].model.id;for(let g=0;g<le.length;g+=1){let h=us(n,le,g),H=Be(h);d.set(H,c[g]=ms(H,h))}_=new Io({props:{columns:n[17],columnStrokeColor:n[7],columnStrokeWidth:n[8],useCanvasColumns:n[6]}});let De=te(n[9]);const Ye=g=>g[145].model.id;for(let g=0;g<De.length;g+=1){let h=ds(n,De,g),H=Ye(h);R.set(H,y[g]=ws(H,h))}let Me=te(n[24]);const Ie=g=>g[142].model.id;for(let g=0;g<Me.length;g+=1){let h=fs(n,Me,g),H=Ie(h);J.set(H,B[g]=bs(H,h))}let O=te(n[22]);const se=g=>g[139].model.id;for(let g=0;g<O.length;g+=1){let h=cs(n,O,g),H=se(h);de.set(H,j[g]=_s(H,h))}let q=te(n[5]),Q=[];for(let g=0;g<q.length;g+=1)Q[g]=ps(as(n,q,g));const Ee=g=>X(Q[g],1,1,()=>{Q[g]=null});return{c(){e=W("div");for(let g=0;g<S.length;g+=1)S[g].c();t=ie(),s=W("div"),i=W("div"),o=W("div"),r=W("div"),ke(l.$$.fragment),a=ie();for(let g=0;g<c.length;g+=1)c[g].c();p=ie(),m=W("div"),b=W("div"),ke(_.$$.fragment),u=ie(),k=W("div"),C=W("div");for(let g=0;g<y.length;g+=1)y[g].c();x=ie(),N=W("div");for(let g=0;g<B.length;g+=1)B[g].c();ee=ie();for(let g=0;g<j.length;g+=1)j[g].c();Oe=ie();for(let g=0;g<Q.length;g+=1)Q[g].c();v(r,"class","header-container"),z(r,"width",n[11]+"px"),v(o,"class","sg-header-scroller svelte-843l0i"),v(i,"class","sg-header"),Ot(()=>n[110].call(i)),z(C,"transform","translateY("+n[20]+"px)"),v(k,"class","sg-rows svelte-843l0i"),z(k,"height",n[19]+"px"),v(N,"class","sg-foreground svelte-843l0i"),v(b,"class","content svelte-843l0i"),z(b,"width",n[11]+"px"),v(m,"class","sg-timeline-body svelte-843l0i"),Ot(()=>n[113].call(m)),U(m,"zooming",n[18]),v(s,"class","sg-timeline sg-view svelte-843l0i"),v(e,"class",Re="sg-gantt "+n[3]+" svelte-843l0i"),U(e,"sg-disable-transition",!n[16])},m(g,h){E(g,e,h);for(let H=0;H<S.length;H+=1)S[H]&&S[H].m(e,null);L(e,t),L(e,s),L(s,i),L(i,o),L(o,r),ge(l,r,null),L(r,a);for(let H=0;H<c.length;H+=1)c[H]&&c[H].m(r,null);n[109](i),w=Nn(i,n[110].bind(i)),L(s,p),L(s,m),L(m,b),ge(_,b,null),L(b,u),L(b,k),L(k,C);for(let H=0;H<y.length;H+=1)y[H]&&y[H].m(C,null);n[111](k),L(b,x),L(b,N);for(let H=0;H<B.length;H+=1)B[H]&&B[H].m(N,null);L(N,ee);for(let H=0;H<j.length;H+=1)j[H]&&j[H].m(N,null);L(b,Oe);for(let H=0;H<Q.length;H+=1)Q[H]&&Q[H].m(b,null);n[112](m),we=Nn(m,n[113].bind(m)),n[114](e),ne=!0,ze||(be=[tt(n[47].call(null,o)),tt(n[46].call(null,m)),Ae(m,"wheel",n[49]),Ae(e,"mousedown",Fn(n[45])),Ae(e,"click",Fn(n[45])),Ae(e,"dblclick",n[45]),Ae(e,"mouseover",n[45]),Ae(e,"mouseleave",n[45])],ze=!0)},p(g,h){if(h[0]&3674644|h[1]&1179648){G=te(g[4]);let I;for(I=0;I<G.length;I+=1){const Te=hs(g,G,I);S[I]?(S[I].p(Te,h),Y(S[I],1)):(S[I]=gs(Te),S[I].c(),Y(S[I],1),S[I].m(e,t))}for(Pe(),I=G.length;I<S.length;I+=1)V(I);We()}const H={};h[0]&2&&(H.headers=g[1]),h[0]&131072&&(H.ganttBodyColumns=g[17]),h[0]&1&&(H.ganttBodyUnit=g[0]),l.$set(H),h[0]&16777216&&(le=te(g[24]),Pe(),c=Wt(c,h,Be,1,g,le,d,r,Pt,ms,null,us),We()),(!ne||h[0]&2048)&&z(r,"width",g[11]+"px");const Le={};if(h[0]&131072&&(Le.columns=g[17]),h[0]&128&&(Le.columnStrokeColor=g[7]),h[0]&256&&(Le.columnStrokeWidth=g[8]),h[0]&64&&(Le.useCanvasColumns=g[6]),_.$set(Le),h[0]&512&&(De=te(g[9]),Pe(),y=Wt(y,h,Ye,1,g,De,R,C,Pt,ws,null,ds),We()),(!ne||h[0]&1048576)&&z(C,"transform","translateY("+g[20]+"px)"),(!ne||h[0]&524288)&&z(k,"height",g[19]+"px"),h[0]&16777216&&(Me=te(g[24]),Pe(),B=Wt(B,h,Ie,1,g,Me,J,N,Pt,bs,ee,fs),We()),h[0]&4194304&&(O=te(g[22]),Pe(),j=Wt(j,h,se,1,g,O,de,N,Pt,_s,null,cs),We()),h[0]&3146272|h[1]&1048576){q=te(g[5]);let I;for(I=0;I<q.length;I+=1){const Te=as(g,q,I);Q[I]?(Q[I].p(Te,h),Y(Q[I],1)):(Q[I]=ps(Te),Q[I].c(),Y(Q[I],1),Q[I].m(b,null))}for(Pe(),I=q.length;I<Q.length;I+=1)Ee(I);We()}(!ne||h[0]&2048)&&z(b,"width",g[11]+"px"),(!ne||h[0]&262144)&&U(m,"zooming",g[18]),(!ne||h[0]&8&&Re!==(Re="sg-gantt "+g[3]+" svelte-843l0i"))&&v(e,"class",Re),(!ne||h[0]&65544)&&U(e,"sg-disable-transition",!g[16])},i(g){if(!ne){for(let h=0;h<G.length;h+=1)Y(S[h]);Y(l.$$.fragment,g);for(let h=0;h<le.length;h+=1)Y(c[h]);Y(_.$$.fragment,g);for(let h=0;h<De.length;h+=1)Y(y[h]);for(let h=0;h<Me.length;h+=1)Y(B[h]);for(let h=0;h<O.length;h+=1)Y(j[h]);for(let h=0;h<q.length;h+=1)Y(Q[h]);ne=!0}},o(g){S=S.filter(Boolean);for(let h=0;h<S.length;h+=1)X(S[h]);X(l.$$.fragment,g);for(let h=0;h<c.length;h+=1)X(c[h]);X(_.$$.fragment,g);for(let h=0;h<y.length;h+=1)X(y[h]);for(let h=0;h<B.length;h+=1)X(B[h]);for(let h=0;h<j.length;h+=1)X(j[h]);Q=Q.filter(Boolean);for(let h=0;h<Q.length;h+=1)X(Q[h]);ne=!1},d(g){g&&D(e),nt(S,g),me(l);for(let h=0;h<c.length;h+=1)c[h].d();n[109](null),w(),me(_);for(let h=0;h<y.length;h+=1)y[h].d();n[111](null);for(let h=0;h<B.length;h+=1)B[h].d();for(let h=0;h<j.length;h+=1)j[h].d();nt(Q,g),n[112](null),we(),n[114](null),ze=!1,Ue(be)}}}function ks(n){for(const e in n)if(n[e]==null)throw new Error(`"${e}" is not set`)}function Kt(n){return n instanceof Date?n.valueOf():n}function sn(n){}function sl(n,e,t){const s=["rows","tasks","timeRanges","rowPadding","rowHeight","from","to","minWidth","fitWidth","classes","headers","zoomLevels","taskContent","tableWidth","resizeHandleWidth","onTaskButtonClick","dateAdapter","magnetUnit","magnetOffset","columnUnit","columnOffset","ganttTableModules","ganttBodyModules","reflectOnParentRows","reflectOnChildRows","useCanvasColumns","columnStrokeColor","columnStrokeWidth","highlightedDurations","highlightColor","taskElementHook","columnService","api","taskFactory","rowFactory","dndManager","timeRangeFactory","utils","refreshTimeRanges","refreshTasks","getRowContainer","selectTask","unselectTasks","scrollToRow","scrollToTask","updateTask","updateTasks","updateRow","updateRows","getRow","getTask","getTasks"];let i=Xn(e,s),o,r,l,a,c,d,w,p,m,b,_,u,k,C,y,R,x,N,B,J,ee,j,de,Oe=[],we=!1,{rows:Re}=e,{tasks:ne=[]}=e,{timeRanges:ze=[]}=e;ks({rows:Re});let{rowPadding:be=6}=e,{rowHeight:G=52}=e;const S=pe(G);A(n,S,f=>t(122,R=f));const V=pe(be);A(n,V,f=>t(108,_=f));let{from:le}=e,{to:Be}=e;ks({from:le,to:Be});const De=pe(Kt(le));A(n,De,f=>t(107,b=f));const Ye=pe(Kt(Be));A(n,Ye,f=>t(106,m=f));let{minWidth:Me=800}=e,{fitWidth:Ie=!1}=e;const O=pe(Me);A(n,O,f=>t(119,k=f));const se=pe(Ie);A(n,se,f=>t(118,u=f));let{classes:q=[]}=e,{headers:Q=[{unit:"day",format:"MMMM Do"},{unit:"hour",format:"H:mm"}]}=e,{zoomLevels:Ee=[{headers:[{unit:"day",format:"DD.MM.YYYY"},{unit:"hour",format:"HH"}],minWidth:800,fitWidth:!0},{headers:[{unit:"hour",format:"ddd D/M, H A"},{unit:"minute",format:"mm",offset:15}],minWidth:5e3,fitWidth:!1}]}=e,{taskContent:g=null}=e,{tableWidth:h=240}=e,{resizeHandleWidth:H=10}=e,{onTaskButtonClick:Le=null}=e,{dateAdapter:I=new $o}=e,{magnetUnit:Te="minute"}=e,{magnetOffset:lt=15}=e,ue;yt(Te,lt);function yt(f,T){f&&T&&t(96,ue=ho(f,T))}let{columnUnit:xe="minute"}=e,{columnOffset:qe=15}=e,{ganttTableModules:ae=[]}=e,{ganttBodyModules:Tt=[]}=e,{reflectOnParentRows:Fe=!0}=e,{reflectOnChildRows:Qe=!1}=e,{useCanvasColumns:dt=!0}=e,{columnStrokeColor:Ve="#efefef"}=e,{columnStrokeWidth:Tn=1}=e,{highlightedDurations:ln}=e,{highlightColor:rn="#6eb859"}=e,{taskElementHook:an=null}=e;const Ct=pe(null);A(n,Ct,f=>t(25,B=f));const Ut=pe(null);A(n,Ut,f=>t(10,a=f));const Xt=pe(null);A(n,Xt,f=>t(23,x=f));const cn=kn([Ct,O,se],([f,T,P])=>P&&f>T?f:T);A(n,cn,f=>t(11,p=f));const Cn=Ii();Ht("dataStore",Cn);const{rowStore:ut,taskStore:rt,timeRangeStore:Sn,allTasks:Rn,allRows:zn,allTimeRanges:Dn,rowTaskCache:Mn,draggingTaskCache:En}=Cn;A(n,ut,f=>t(105,d=f)),A(n,rt,f=>t(101,o=f)),A(n,Rn,f=>t(117,w=f)),A(n,zn,f=>t(104,c=f)),A(n,Dn,f=>t(24,N=f)),A(n,Mn,f=>t(103,l=f)),A(n,En,f=>t(102,r=f));const Ze={getColumnByDate(f){const T=Zo(Ft,f);return T[0]?T[0]:T[1]},getColumnByPosition(f){const T=Vo(Ft,f);return T[0]?T[0]:T[1]},getPositionByDate(f){if(!f)return null;const T=this.getColumnByDate(f),F=(f-T.from)/T.duration*T.width;return T.left+F},getDateByPosition(f){const T=this.getColumnByPosition(f);f=f-T.left;let P=T.duration/T.width*f;return T.from+P},roundTo(f){return Math.round(f/ue)*ue}};let St=!0;async function Gs(){t(16,St=!St),await un(),J.offsetHeight,t(16,St=!!St)}let Ft;function xs(f,T,P,F,Z){f instanceof Date&&(f=f.valueOf()),T instanceof Date&&(T=T.valueOf());let $=[];const He=Us(f.valueOf(),T.valueOf(),P,F,ln);let _e=0,mt=0;return He.forEach(function(je){_e=mt,mt=yn(je.to,b,m,p),$.push({width:mt-_e,from:je.from,to:je.to,left:_e,duration:je.duration,...je.isHighlighted&&{bgHighlightColor:rn}})}),$}Ht("dimensions",{from:De,to:Ye,width:cn,visibleWidth:Ct,visibleHeight:Ut,headerHeight:Xt}),Ht("options",{dateAdapter:I,taskElementHook:an,taskContent:g,rowPadding:V,rowHeight:S,resizeHandleWidth:H,reflectOnParentRows:Fe,reflectOnChildRows:Qe,onTaskButtonClick:Le});const Rt=pe(null);A(n,Rt,f=>t(120,C=f));const zt=pe(null);A(n,zt,f=>t(121,y=f));const Hn={scrollables:Oe,hoveredRow:Rt,selectedRow:zt};Ht("gantt",Hn),pn(()=>{Object.assign(Hn,{rowContainer:de,mainContainer:j,mainHeaderContainer:ee}),ce.registerEvent("tasks","move"),ce.registerEvent("tasks","select"),ce.registerEvent("tasks","switchRow"),ce.registerEvent("tasks","moveEnd"),ce.registerEvent("tasks","change"),ce.registerEvent("tasks","changed"),ce.registerEvent("gantt","viewChanged"),ce.registerEvent("gantt","dateSelected"),ce.registerEvent("tasks","dblclicked"),ce.registerEvent("timeranges","clicked"),ce.registerEvent("timeranges","resized"),t(95,we=!0)});const{onDelegatedEvent:Dt,offDelegatedEvent:Nt,onEvent:qs}=Ko();Dt("mousedown","data-task-id",(f,T,P)=>{const F=+T;Is(f)&&!P.classList.contains("sg-task-reflected")&&(f.ctrlKey?Je.toggleSelection(F,P):Je.selectSingle(F,P),Je.dispatchSelectionEvent(F,f)),ce.tasks.raise.select(o.entities[F])}),Dt("mouseover","data-row-id",(f,T,P)=>{fe(Rt,C=+T,C)}),Dt("click","data-row-id",(f,T,P)=>{if(Je.unSelectTasks(),y==+T){fe(zt,y=null,y);return}fe(zt,y=+T,y)}),Dt("dblclick","data-task-id",(f,T,P)=>{const F=+T;ce.tasks.raise.dblclicked(o.entities[F],f)}),Dt("mouseleave","empty",(f,T,P)=>{fe(Rt,C=null,C)}),Wi(()=>{Nt("click","data-task-id"),Nt("click","data-row-id"),Nt("mousedown","data-task-id"),Nt("dblclick","data-task-id"),Je.unSelectTasks()});let fn=0;function Qs(f){const T=P=>{const{scrollTop:F,scrollLeft:Z}=f;Oe.forEach($=>{$.orientation==="horizontal"?$.node.scrollLeft=Z:$.node.scrollTop=F}),t(97,fn=F)};return f.addEventListener("scroll",T),{destroy(){f.removeEventListener("scroll",T,!1)}}}function Vs(f){Oe.push({node:f,orientation:"horizontal"})}function Zs(f){t(2,h=f.detail.left)}let Ke=0,dn=!1;async function Ks(f){if(f.ctrlKey){f.preventDefault();const T=Ke;if(f.deltaY>0?Ke=Math.max(Ke-1,0):Ke=Math.min(Ke+1,Ee.length-1),T!=Ke&&Ee[Ke]){const P={columnUnit:xe,columnOffset:qe,minWidth:k,...Ee[Ke]},F=P.minWidth/p,Z=j,$=kt(Z,f),mt=(Z.scrollLeft+$.x)*F-$.x+Z.clientWidth/2;t(0,xe=P.columnUnit),t(52,qe=P.columnOffset),fe(O,k=P.minWidth,k),P.headers&&t(1,Q=P.headers),P.fitWidth&&fe(se,u=P.fitWidth,u),ce.gantt.raise.viewChanged(),t(18,dn=!0),await un(),Z.scrollLeft=mt,t(18,dn=!1)}}}function Js(f){fe(De,b=f.detail.from,b),fe(Ye,m=f.detail.to,m),ce.gantt.raise.dateSelected({from:b,to:m})}function $s(f){const T=ht.createRows(f);ut.addAll(T)}async function ei(f){await un();const T=[],P={rowPadding:_};f.forEach(F=>{const Z=$e.createTask(F),$=d.entities[Z.model.resourceId];Z.reflections=[],Qe&&$.allChildren&&$.allChildren.forEach(He=>{const _e=nn(Z,He,P);Z.reflections.push(_e.model.id),T.push(_e)}),Fe&&$.allParents.length>0&&$.allParents.forEach(He=>{const _e=nn(Z,He,P);Z.reflections.push(_e.model.id),T.push(_e)}),T.push(Z)}),rt.addAll(T)}function ti(f){const T=f.map(P=>Wn.create(P));Sn.addAll(T)}const ce=new Go,Je=new Qo(rt),$e=new ji(Ze),ht=new xo,Pn=new lo(ut),Wn=new qo(Ze),he=new yo;Ht("services",{utils:he,api:ce,dndManager:Pn,selectionManager:Je,columnService:Ze});function Bn(){Sn._update(({ids:f,entities:T})=>(f.forEach(P=>{const F=T[P],Z=Ze.getPositionByDate(F.model.from)|0,$=Ze.getPositionByDate(F.model.to)|0;F.left=Z,F.width=$-Z}),{ids:f,entities:T}))}function Ln(){w.forEach(f=>{const T=Ze.getPositionByDate(f.model.from)|0,P=Ze.getPositionByDate(f.model.to)|0;f.left=T,f.width=P-T}),rt.refresh()}function ni(){return de}function si(f){o.entities[f]&&Je.selectSingle(f,J.querySelector(`data-task-id='${f}'`))}function ii(){Je.unSelectTasks()}function oi(f,T="auto"){const{scrollTop:P,clientHeight:F}=j,Z=c.findIndex(He=>He.model.id==f);if(Z===-1)return;const $=Z*G;$<P&&j.scrollTo({top:$,behavior:T}),$>P+F&&j.scrollTo({top:$+G-F,behavior:T})}function li(f,T="auto"){const{scrollLeft:P,scrollTop:F,clientWidth:Z,clientHeight:$}=j,He=o.entities[f];if(!He)return;const _e=He.left,je=c.findIndex(ki=>ki.model.id==He.model.resourceId)*G,Et={top:void 0,left:void 0,behavior:T};_e<P&&(Et.left=_e),_e>P+Z&&(Et.left=_e+He.width-Z),je<F&&(Et.top=je),je>F+$&&(Et.top=je+G-$),j.scrollTo(Et)}function ri(f){const T=$e.createTask(f);rt.upsert(T)}function ai(f){const T=f.map(P=>$e.createTask(P));rt.upsertAll(T)}function ci(f){const T=ht.createRow(f,null);ut.upsert(T)}function fi(f){const T=f.map(P=>ht.createRow(P,null));ut.upsertAll(T)}function di(f){return d.entities[f]}function ui(f){return o.entities[f]}function hi(f){return l[f]?l[f].map(T=>o.entities[T]):null}let gt=[],An,Mt,Gt,On=0,Yn=0,xt=[],In;function gi(f){at[f?"unshift":"push"](()=>{ee=f,t(13,ee)})}function mi(){x=this.clientHeight,Xt.set(x)}function wi(f){at[f?"unshift":"push"](()=>{de=f,t(15,de)})}function bi(f){at[f?"unshift":"push"](()=>{j=f,t(14,j)})}function _i(){a=this.clientHeight,Ut.set(a),B=this.clientWidth,Ct.set(B)}function pi(f){at[f?"unshift":"push"](()=>{J=f,t(12,J)})}return n.$$set=f=>{e=Ge(Ge({},e),Mi(f)),t(51,i=Xn(e,s)),"rows"in f&&t(56,Re=f.rows),"tasks"in f&&t(57,ne=f.tasks),"timeRanges"in f&&t(58,ze=f.timeRanges),"rowPadding"in f&&t(59,be=f.rowPadding),"rowHeight"in f&&t(60,G=f.rowHeight),"from"in f&&t(61,le=f.from),"to"in f&&t(62,Be=f.to),"minWidth"in f&&t(63,Me=f.minWidth),"fitWidth"in f&&t(64,Ie=f.fitWidth),"classes"in f&&t(3,q=f.classes),"headers"in f&&t(1,Q=f.headers),"zoomLevels"in f&&t(65,Ee=f.zoomLevels),"taskContent"in f&&t(66,g=f.taskContent),"tableWidth"in f&&t(2,h=f.tableWidth),"resizeHandleWidth"in f&&t(67,H=f.resizeHandleWidth),"onTaskButtonClick"in f&&t(68,Le=f.onTaskButtonClick),"dateAdapter"in f&&t(69,I=f.dateAdapter),"magnetUnit"in f&&t(70,Te=f.magnetUnit),"magnetOffset"in f&&t(71,lt=f.magnetOffset),"columnUnit"in f&&t(0,xe=f.columnUnit),"columnOffset"in f&&t(52,qe=f.columnOffset),"ganttTableModules"in f&&t(4,ae=f.ganttTableModules),"ganttBodyModules"in f&&t(5,Tt=f.ganttBodyModules),"reflectOnParentRows"in f&&t(72,Fe=f.reflectOnParentRows),"reflectOnChildRows"in f&&t(73,Qe=f.reflectOnChildRows),"useCanvasColumns"in f&&t(6,dt=f.useCanvasColumns),"columnStrokeColor"in f&&t(7,Ve=f.columnStrokeColor),"columnStrokeWidth"in f&&t(8,Tn=f.columnStrokeWidth),"highlightedDurations"in f&&t(74,ln=f.highlightedDurations),"highlightColor"in f&&t(75,rn=f.highlightColor),"taskElementHook"in f&&t(76,an=f.taskElementHook)},n.$$.update=()=>{if(n.$$.dirty[1]&33554432|n.$$.dirty[3]&4&&we&&$s(Re),n.$$.dirty[1]&67108864|n.$$.dirty[3]&4&&we&&ei(ne),n.$$.dirty[1]&134217728|n.$$.dirty[3]&4&&we&&ti(ze),n.$$.dirty[1]&536870912&&fe(S,R=G,R),n.$$.dirty[1]&268435456&&fe(V,_=be,_),n.$$.dirty[1]&1073741824&&fe(De,b=Kt(le),b),n.$$.dirty[2]&1&&fe(Ye,m=Kt(Be),m),n.$$.dirty[2]&6&&(fe(O,k=Me,k),fe(se,u=Ie,u)),n.$$.dirty[2]&768&&yt(Te,lt),n.$$.dirty[0]&2049|n.$$.dirty[1]&2097152|n.$$.dirty[3]&24576&&(t(17,Ft=xs(b,m,xe,qe)),Gs(),Bn(),Ln()),n.$$.dirty[3]&36864&&(t(53,$e.rowPadding=_,$e),t(53,$e.rowEntities=d.entities,$e)),n.$$.dirty[1]&536870912&&t(54,ht.rowHeight=G,ht),n.$$.dirty[0]&2048|n.$$.dirty[2]&896|n.$$.dirty[3]&24584&&(t(55,he.from=b,he),t(55,he.to=m,he),t(55,he.width=p,he),t(55,he.magnetOffset=lt,he),t(55,he.magnetUnit=Te,he),t(55,he.magnetDuration=ue,he),t(55,he.dateAdapter=I,he)),n.$$.dirty[3]&2048&&t(98,gt=c.filter(f=>!f.hidden)),n.$$.dirty[1]&536870912|n.$$.dirty[3]&32&&t(19,An=gt.length*G),n.$$.dirty[1]&536870912|n.$$.dirty[3]&16&&t(99,Mt=Math.floor(fn/G)),n.$$.dirty[0]&1024|n.$$.dirty[1]&536870912|n.$$.dirty[3]&96&&t(100,Gt=Math.min(Mt+Math.ceil(a/G),gt.length-1)),n.$$.dirty[1]&536870912|n.$$.dirty[3]&64&&t(20,On=Mt*G),n.$$.dirty[1]&536870912|n.$$.dirty[3]&160&&t(21,Yn=(gt.length-Gt-1)*G),n.$$.dirty[3]&224&&t(9,xt=gt.slice(Mt,Gt+1)),n.$$.dirty[0]&512|n.$$.dirty[3]&1792){const f=[],T={};for(let P=0;P<xt.length;P++){const F=xt[P];if(l[F.model.id])for(let Z=0;Z<l[F.model.id].length;Z++){const $=l[F.model.id][Z];f.push(o.entities[$]),T[$]=!0}}for(const P in r)T[P]||(f.push(o.entities[P]),T[P]=!0);t(22,In=f)}},[xe,Q,h,q,ae,Tt,dt,Ve,Tn,xt,a,p,J,ee,j,de,St,Ft,dn,An,On,Yn,In,x,N,B,S,V,De,Ye,O,se,Ct,Ut,Xt,cn,ut,rt,Rn,zn,Dn,Mn,En,Rt,zt,qs,Qs,Vs,Zs,Ks,Js,i,qe,$e,ht,he,Re,ne,ze,be,G,le,Be,Me,Ie,Ee,g,H,Le,I,Te,lt,Fe,Qe,ln,rn,an,Ze,ce,Pn,Wn,Bn,Ln,ni,si,ii,oi,li,ri,ai,ci,fi,di,ui,hi,we,ue,fn,gt,Mt,Gt,o,r,l,c,d,m,b,_,gi,mi,wi,bi,_i,pi]}class il extends Se{constructor(e){super(),Ce(this,e,sl,nl,ve,{rows:56,tasks:57,timeRanges:58,rowPadding:59,rowHeight:60,from:61,to:62,minWidth:63,fitWidth:64,classes:3,headers:1,zoomLevels:65,taskContent:66,tableWidth:2,resizeHandleWidth:67,onTaskButtonClick:68,dateAdapter:69,magnetUnit:70,magnetOffset:71,columnUnit:0,columnOffset:52,ganttTableModules:4,ganttBodyModules:5,reflectOnParentRows:72,reflectOnChildRows:73,useCanvasColumns:6,columnStrokeColor:7,columnStrokeWidth:8,highlightedDurations:74,highlightColor:75,taskElementHook:76,columnService:77,api:78,taskFactory:53,rowFactory:54,dndManager:79,timeRangeFactory:80,utils:55,refreshTimeRanges:81,refreshTasks:82,getRowContainer:83,selectTask:84,unselectTasks:85,scrollToRow:86,scrollToTask:87,updateTask:88,updateTasks:89,updateRow:90,updateRows:91,getRow:92,getTask:93,getTasks:94},null,[-1,-1,-1,-1,-1])}get columnService(){return this.$$.ctx[77]}get api(){return this.$$.ctx[78]}get taskFactory(){return this.$$.ctx[53]}get rowFactory(){return this.$$.ctx[54]}get dndManager(){return this.$$.ctx[79]}get timeRangeFactory(){return this.$$.ctx[80]}get utils(){return this.$$.ctx[55]}get refreshTimeRanges(){return this.$$.ctx[81]}get refreshTasks(){return this.$$.ctx[82]}get getRowContainer(){return this.$$.ctx[83]}get selectTask(){return this.$$.ctx[84]}get unselectTasks(){return this.$$.ctx[85]}get scrollToRow(){return this.$$.ctx[86]}get scrollToTask(){return this.$$.ctx[87]}get updateTask(){return this.$$.ctx[88]}get updateTasks(){return this.$$.ctx[89]}get updateRow(){return this.$$.ctx[90]}get updateRows(){return this.$$.ctx[91]}get getRow(){return this.$$.ctx[92]}get getTask(){return this.$$.ctx[93]}get getTasks(){return this.$$.ctx[94]}}var ol=".sg-tree-expander.svelte-1tk4vqn{cursor:pointer;min-width:1.4em;display:flex;justify-content:center;align-items:center}.sg-cell-inner.svelte-1tk4vqn{display:flex}";ye(ol);function vs(n){let e,t,s;function i(l,a){return l[0].expanded?rl:ll}let o=i(n),r=o(n);return{c(){e=W("div"),r.c(),v(e,"class","sg-tree-expander svelte-1tk4vqn")},m(l,a){E(l,e,a),r.m(e,null),t||(s=Ae(e,"click",n[1]),t=!0)},p(l,a){o!==(o=i(l))&&(r.d(1),r=o(l),r&&(r.c(),r.m(e,null)))},d(l){l&&D(e),r.d(),t=!1,s()}}}function ll(n){let e;return{c(){e=W("i"),v(e,"class","fas fa-angle-right")},m(t,s){E(t,e,s)},d(t){t&&D(e)}}}function rl(n){let e;return{c(){e=W("i"),v(e,"class","fas fa-angle-down")},m(t,s){E(t,e,s)},d(t){t&&D(e)}}}function al(n){let e,t,s,i=n[0].children&&vs(n);const o=n[3].default,r=Si(o,n,n[2],null);return{c(){e=W("div"),i&&i.c(),t=ie(),r&&r.c(),v(e,"class","sg-cell-inner svelte-1tk4vqn"),z(e,"padding-left",n[0].childLevel*3+"em")},m(l,a){E(l,e,a),i&&i.m(e,null),L(e,t),r&&r.m(e,null),s=!0},p(l,[a]){l[0].children?i?i.p(l,a):(i=vs(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),r&&r.p&&(!s||a&4)&&zi(r,o,l,l[2],s?Ri(o,l[2],a,null):Di(l[2]),null),(!s||a&1)&&z(e,"padding-left",l[0].childLevel*3+"em")},i(l){s||(Y(r,l),s=!0)},o(l){X(r,l),s=!1},d(l){l&&D(e),i&&i.d(),r&&r.d(l)}}}function cl(n,e,t){let{$$slots:s={},$$scope:i}=e,{row:o}=e;const r=jt();function l(){o.expanded?r("rowCollapsed",{row:o}):r("rowExpanded",{row:o})}return n.$$set=a=>{"row"in a&&t(0,o=a.row),"$$scope"in a&&t(2,i=a.$$scope)},[o,l,i,s]}class fl extends Se{constructor(e){super(),Ce(this,e,cl,al,ve,{row:0})}}var dl=".sg-table-row.svelte-oze9vk{display:inline-flex;min-width:100%;align-items:stretch;position:relative;font-weight:400;font-size:14px}.sg-table-cell.svelte-oze9vk{border-left:1px solid #eee}.sg-table-body-cell.svelte-oze9vk{border-bottom:#efefef 1px solid;background-color:#fff;font-weight:bold}.sg-resource-image.svelte-oze9vk{width:2.4em;height:2.4em;border-radius:50%;margin-right:0.6em;background:#047c69}.sg-resource-info.svelte-oze9vk{flex:1;height:100%;display:flex;flex-direction:row;align-items:center}.sg-table-icon.svelte-oze9vk{margin-right:0.5em}";ye(dl);function ys(n,e,t){const s=n.slice();return s[12]=e[t],s}function ul(n){let e,t,s=n[1].model.iconClass&&Ts(n);function i(l,a){return l[1].model.headerHtml?bl:l[12].renderer?wl:l[12].type==="resourceInfo"?ml:gl}let o=i(n),r=o(n);return{c(){s&&s.c(),e=ie(),r.c(),t=re()},m(l,a){s&&s.m(l,a),E(l,e,a),r.m(l,a),E(l,t,a)},p(l,a){l[1].model.iconClass?s?s.p(l,a):(s=Ts(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),o===(o=i(l))&&r?r.p(l,a):(r.d(1),r=o(l),r&&(r.c(),r.m(t.parentNode,t)))},i:K,o:K,d(l){l&&(D(e),D(t)),s&&s.d(l),r.d(l)}}}function hl(n){let e,t;return e=new fl({props:{row:n[1],$$slots:{default:[vl]},$$scope:{ctx:n}}}),e.$on("rowCollapsed",n[8]),e.$on("rowExpanded",n[9]),{c(){ke(e.$$.fragment)},m(s,i){ge(e,s,i),t=!0},p(s,i){const o={};i&2&&(o.row=s[1]),i&32771&&(o.$$scope={dirty:i,ctx:s}),e.$set(o)},i(s){t||(Y(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){me(e,s)}}}function Ts(n){let e,t,s;return{c(){e=W("div"),t=W("i"),v(t,"class",s=en(n[1].model.iconClass)+" svelte-oze9vk"),v(e,"class","sg-table-icon svelte-oze9vk")},m(i,o){E(i,e,o),L(e,t)},p(i,o){o&2&&s!==(s=en(i[1].model.iconClass)+" svelte-oze9vk")&&v(t,"class",s)},d(i){i&&D(e)}}}function gl(n){let e=n[1].model[n[12].property]+"",t;return{c(){t=Xe(e)},m(s,i){E(s,t,i)},p(s,i){i&3&&e!==(e=s[1].model[s[12].property]+"")&&ot(t,e)},d(s){s&&D(t)}}}function ml(n){let e,t,s,i,o=n[1].model[n[12].property]+"",r;return{c(){e=W("img"),s=ie(),i=W("div"),r=Xe(o),v(e,"class","sg-resource-image svelte-oze9vk"),Un(e.src,t=n[1].model.imageSrc)||v(e,"src",t),v(e,"alt",""),v(i,"class","sg-resource-title")},m(l,a){E(l,e,a),E(l,s,a),E(l,i,a),L(i,r)},p(l,a){a&2&&!Un(e.src,t=l[1].model.imageSrc)&&v(e,"src",t),a&3&&o!==(o=l[1].model[l[12].property]+"")&&ot(r,o)},d(l){l&&(D(e),D(s),D(i))}}}function wl(n){let e,t=n[12].renderer(n[1])+"",s;return{c(){e=new ft(!1),s=re(),e.a=s},m(i,o){e.m(t,i,o),E(i,s,o)},p(i,o){o&3&&t!==(t=i[12].renderer(i[1])+"")&&e.p(t)},d(i){i&&(D(s),e.d())}}}function bl(n){let e,t=n[1].model.headerHtml+"",s;return{c(){e=new ft(!1),s=re(),e.a=s},m(i,o){e.m(t,i,o),E(i,s,o)},p(i,o){o&2&&t!==(t=i[1].model.headerHtml+"")&&e.p(t)},d(i){i&&(D(s),e.d())}}}function Cs(n){let e,t,s;return{c(){e=W("div"),t=W("i"),v(t,"class",s=en(n[1].model.iconClass)+" svelte-oze9vk"),v(e,"class","sg-table-icon svelte-oze9vk")},m(i,o){E(i,e,o),L(e,t)},p(i,o){o&2&&s!==(s=en(i[1].model.iconClass)+" svelte-oze9vk")&&v(t,"class",s)},d(i){i&&D(e)}}}function _l(n){let e=n[1].model[n[12].property]+"",t;return{c(){t=Xe(e)},m(s,i){E(s,t,i)},p(s,i){i&3&&e!==(e=s[1].model[s[12].property]+"")&&ot(t,e)},d(s){s&&D(t)}}}function pl(n){let e,t=n[12].renderer(n[1])+"",s;return{c(){e=new ft(!1),s=re(),e.a=s},m(i,o){e.m(t,i,o),E(i,s,o)},p(i,o){o&3&&t!==(t=i[12].renderer(i[1])+"")&&e.p(t)},d(i){i&&(D(s),e.d())}}}function kl(n){let e,t=n[1].model.headerHtml+"",s;return{c(){e=new ft(!1),s=re(),e.a=s},m(i,o){e.m(t,i,o),E(i,s,o)},p(i,o){o&2&&t!==(t=i[1].model.headerHtml+"")&&e.p(t)},d(i){i&&(D(s),e.d())}}}function vl(n){let e,t,s=n[1].model.iconClass&&Cs(n);function i(l,a){return l[1].model.headerHtml?kl:l[12].renderer?pl:_l}let o=i(n),r=o(n);return{c(){s&&s.c(),e=ie(),r.c(),t=re()},m(l,a){s&&s.m(l,a),E(l,e,a),r.m(l,a),E(l,t,a)},p(l,a){l[1].model.iconClass?s?s.p(l,a):(s=Cs(l),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),o===(o=i(l))&&r?r.p(l,a):(r.d(1),r=o(l),r&&(r.c(),r.m(t.parentNode,t)))},d(l){l&&(D(e),D(t)),s&&s.d(l),r.d(l)}}}function Ss(n){let e,t,s,i,o;const r=[hl,ul],l=[];function a(c,d){return c[12].type=="tree"?0:1}return t=a(n),s=l[t]=r[t](n),{c(){e=W("div"),s.c(),i=ie(),v(e,"class","sg-table-body-cell sg-table-cell svelte-oze9vk"),z(e,"width",n[12].width+"px")},m(c,d){E(c,e,d),l[t].m(e,null),L(e,i),o=!0},p(c,d){let w=t;t=a(c),t===w?l[t].p(c,d):(Pe(),X(l[w],1,1,()=>{l[w]=null}),We(),s=l[t],s?s.p(c,d):(s=l[t]=r[t](c),s.c()),Y(s,1),s.m(e,i)),(!o||d&1)&&z(e,"width",c[12].width+"px")},i(c){o||(Y(s),o=!0)},o(c){X(s),o=!1},d(c){c&&D(e),l[t].d()}}}function yl(n){let e,t,s,i,o=te(n[0]),r=[];for(let a=0;a<o.length;a+=1)r[a]=Ss(ys(n,o,a));const l=a=>X(r[a],1,1,()=>{r[a]=null});return{c(){e=W("div");for(let a=0;a<r.length;a+=1)r[a].c();v(e,"data-row-id",t=n[1].model.id),z(e,"height",n[2]+"px"),v(e,"class",s="sg-table-row "+(n[1].model.classes||"")+" svelte-oze9vk"),U(e,"sg-row-expanded",n[1].expanded),U(e,"sg-hover",n[3]==n[1].model.id),U(e,"sg-selected",n[4]==n[1].model.id)},m(a,c){E(a,e,c);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(e,null);i=!0},p(a,[c]){if(c&3){o=te(a[0]);let d;for(d=0;d<o.length;d+=1){const w=ys(a,o,d);r[d]?(r[d].p(w,c),Y(r[d],1)):(r[d]=Ss(w),r[d].c(),Y(r[d],1),r[d].m(e,null))}for(Pe(),d=o.length;d<r.length;d+=1)l(d);We()}(!i||c&2&&t!==(t=a[1].model.id))&&v(e,"data-row-id",t),(!i||c&4)&&z(e,"height",a[2]+"px"),(!i||c&2&&s!==(s="sg-table-row "+(a[1].model.classes||"")+" svelte-oze9vk"))&&v(e,"class",s),(!i||c&2)&&U(e,"sg-row-expanded",a[1].expanded),(!i||c&10)&&U(e,"sg-hover",a[3]==a[1].model.id),(!i||c&18)&&U(e,"sg-selected",a[4]==a[1].model.id)},i(a){if(!i){for(let c=0;c<o.length;c+=1)Y(r[c]);i=!0}},o(a){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)X(r[c]);i=!1},d(a){a&&D(e),nt(r,a)}}}function Tl(n,e,t){let s,i,o,{headers:r=null}=e,{row:l=null}=e;const{rowHeight:a}=oe("options");A(n,a,b=>t(2,s=b));const{hoveredRow:c,selectedRow:d}=oe("gantt");A(n,c,b=>t(3,i=b)),A(n,d,b=>t(4,o=b));const w=jt();pn(()=>{l.model.expanded==!1&&w("rowCollapsed",{row:l})});function p(b){wn.call(this,n,b)}function m(b){wn.call(this,n,b)}return n.$$set=b=>{"headers"in b&&t(0,r=b.headers),"row"in b&&t(1,l=b.row)},n.$$.update=()=>{n.$$.dirty&2&&l.parent&&l.childLevel*3},[r,l,s,i,o,a,c,d,p,m]}class Cl extends Se{constructor(e){super(),Ce(this,e,Tl,yl,ve,{headers:0,row:1})}}var Sl=".bottom-scrollbar-visible.svelte-afbyi7{padding-bottom:17px}.sg-table.svelte-afbyi7{overflow-x:auto;display:flex;flex-direction:column}.sg-table-scroller.svelte-afbyi7{width:100%;border-bottom:1px solid #efefef;overflow-y:hidden}.sg-table-header.svelte-afbyi7{display:flex;align-items:stretch;overflow:hidden;border-bottom:#efefef 1px solid;background-color:#fbfbfb}.sg-table-body.svelte-afbyi7{display:flex;flex:1 1 0;width:100%;overflow-y:hidden}.sg-table-header-cell.svelte-afbyi7{font-size:14px;font-weight:400}.sg-table-cell{white-space:nowrap;overflow:hidden;display:flex;align-items:center;flex-shrink:0;padding:0 0.5em;height:100%}.sg-table-cell:last-child{flex-grow:1}";ye(Sl);function Rs(n,e,t){const s=n.slice();return s[32]=e[t],s}function zs(n,e,t){const s=n.slice();return s[35]=e[t],s}function Ds(n){let e,t=n[35].title+"",s,i;return{c(){e=W("div"),s=Xe(t),i=ie(),v(e,"class","sg-table-header-cell sg-table-cell svelte-afbyi7"),z(e,"width",n[35].width+"px")},m(o,r){E(o,e,r),L(e,s),L(e,i)},p(o,r){r[0]&32&&t!==(t=o[35].title+"")&&ot(s,t),r[0]&32&&z(e,"width",o[35].width+"px")},d(o){o&&D(e)}}}function Ms(n){let e,t;return e=new Cl({props:{row:n[32],headers:n[5]}}),e.$on("rowExpanded",n[17]),e.$on("rowCollapsed",n[18]),{c(){ke(e.$$.fragment)},m(s,i){ge(e,s,i),t=!0},p(s,i){const o={};i[0]&16&&(o.row=s[32]),i[0]&32&&(o.headers=s[5]),e.$set(o)},i(s){t||(Y(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){me(e,s)}}}function Rl(n){let e,t,s,i,o,r,l,a,c,d=te(n[5]),w=[];for(let _=0;_<d.length;_+=1)w[_]=Ds(zs(n,d,_));let p=te(n[4]),m=[];for(let _=0;_<p.length;_+=1)m[_]=Ms(Rs(n,p,_));const b=_=>X(m[_],1,1,()=>{m[_]=null});return{c(){e=W("div"),t=W("div");for(let _=0;_<w.length;_+=1)w[_].c();s=ie(),i=W("div"),o=W("div"),r=W("div");for(let _=0;_<m.length;_+=1)m[_].c();v(t,"class","sg-table-header svelte-afbyi7"),z(t,"height",n[8]+"px"),v(r,"class","sg-table-rows svelte-afbyi7"),z(r,"padding-top",n[1]+"px"),z(r,"padding-bottom",n[2]+"px"),z(r,"height",n[3]+"px"),v(o,"class","sg-table-scroller svelte-afbyi7"),v(i,"class","sg-table-body svelte-afbyi7"),U(i,"bottom-scrollbar-visible",n[7]),v(e,"class","sg-table sg-view svelte-afbyi7"),z(e,"width",n[0]+"px")},m(_,u){E(_,e,u),L(e,t);for(let k=0;k<w.length;k+=1)w[k]&&w[k].m(t,null);n[22](t),L(e,s),L(e,i),L(i,o),L(o,r);for(let k=0;k<m.length;k+=1)m[k]&&m[k].m(r,null);l=!0,a||(c=tt(n[16].call(null,o)),a=!0)},p(_,u){if(u[0]&32){d=te(_[5]);let k;for(k=0;k<d.length;k+=1){const C=zs(_,d,k);w[k]?w[k].p(C,u):(w[k]=Ds(C),w[k].c(),w[k].m(t,null))}for(;k<w.length;k+=1)w[k].d(1);w.length=d.length}if((!l||u[0]&256)&&z(t,"height",_[8]+"px"),u[0]&393264){p=te(_[4]);let k;for(k=0;k<p.length;k+=1){const C=Rs(_,p,k);m[k]?(m[k].p(C,u),Y(m[k],1)):(m[k]=Ms(C),m[k].c(),Y(m[k],1),m[k].m(r,null))}for(Pe(),k=p.length;k<m.length;k+=1)b(k);We()}(!l||u[0]&2)&&z(r,"padding-top",_[1]+"px"),(!l||u[0]&4)&&z(r,"padding-bottom",_[2]+"px"),(!l||u[0]&8)&&z(r,"height",_[3]+"px"),(!l||u[0]&128)&&U(i,"bottom-scrollbar-visible",_[7]),(!l||u[0]&1)&&z(e,"width",_[0]+"px")},i(_){if(!l){for(let u=0;u<p.length;u+=1)Y(m[u]);l=!0}},o(_){m=m.filter(Boolean);for(let u=0;u<m.length;u+=1)X(m[u]);l=!1},d(_){_&&D(e),nt(w,_),n[22](null),nt(m,_),a=!1,c()}}}function Fs(n){n.forEach(e=>{e.children&&Fs(e.children),e.hidden=!0})}function Ns(n,e=!1){n.forEach(t=>{t.children&&Ns(t.children,!t.expanded),t.hidden=e})}function zl(n,e,t){let s,i,o,r,l,a,c;const d=jt();let{tableWidth:w}=e,{paddingTop:p}=e,{paddingBottom:m}=e,{rowContainerHeight:b}=e,{visibleRows:_}=e,{tableHeaders:u=[{title:"Name",property:"label",width:100}]}=e;const{from:k,to:C,width:y,visibleWidth:R,headerHeight:x}=oe("dimensions");A(n,y,S=>t(21,i=S)),A(n,R,S=>t(20,s=S)),A(n,x,S=>t(8,c=S));const{rowPadding:N,rowHeight:B}=oe("options");A(n,N,S=>t(23,o=S)),A(n,B,S=>t(26,a=S));const{rowStore:J,taskStore:ee}=oe("dataStore");A(n,J,S=>t(25,l=S)),A(n,ee,S=>t(24,r=S));const{scrollables:j}=oe("gantt");pn(()=>{d("init",{module:this})});let de;function Oe(S){j.push({node:S,orientation:"vertical"});function V(le){t(6,de.scrollLeft=S.scrollLeft,de)}return S.addEventListener("scroll",V),{destroy(){S.removeEventListener("scroll",V)}}}let we;function Re(S){const V=S.detail.row;V.expanded=!0,V.children&&Ns(V.children),ze()}function ne(S){const V=S.detail.row;V.expanded=!1,V.children&&Fs(V.children),ze()}function ze(){let S=0;l.ids.forEach(V=>{l.entities[V].hidden||(fe(J,l.entities[V].y=S,l),S+=a)}),r.ids.forEach(V=>{const le=r.entities[V],Be=l.entities[le.model.resourceId];fe(ee,r.entities[V].top=Be.y+o,r)})}let be;function G(S){at[S?"unshift":"push"](()=>{de=S,t(6,de)})}return n.$$set=S=>{"tableWidth"in S&&t(0,w=S.tableWidth),"paddingTop"in S&&t(1,p=S.paddingTop),"paddingBottom"in S&&t(2,m=S.paddingBottom),"rowContainerHeight"in S&&t(3,b=S.rowContainerHeight),"visibleRows"in S&&t(4,_=S.visibleRows),"tableHeaders"in S&&t(5,u=S.tableHeaders)},n.$$.update=()=>{if(n.$$.dirty[0]&32){let S=0;u.forEach(V=>{S+=V.width}),t(19,we=S)}n.$$.dirty[0]&3670017&&t(7,be=i>s&&we<=w)},[w,p,m,b,_,u,de,be,c,y,R,x,N,B,J,ee,Oe,Re,ne,we,s,i,G]}class Dl extends Se{constructor(e){super(),Ce(this,e,zl,Rl,ve,{tableWidth:0,paddingTop:1,paddingBottom:2,rowContainerHeight:3,visibleRows:4,tableHeaders:5},null,[-1,-1])}}var Ul=Dl,Ml=".sg-dependency.svelte-12syssu{position:absolute;width:100%;height:100%}.arrow.svelte-12syssu{position:absolute;left:0px;pointer-events:none}.select-area.svelte-12syssu{pointer-events:visible;position:absolute}";ye(Ml);function Es(n){let e,t,s,i;return{c(){e=W("div"),t=Jt("svg"),s=Jt("path"),i=Jt("path"),v(s,"class","select-area svelte-12syssu"),v(s,"d",n[6]),v(s,"stroke",n[1]),v(s,"stroke-width",n[2]),v(s,"fill","transparent"),v(i,"d",n[5]),v(i,"fill",n[1]),v(t,"class","arrow svelte-12syssu"),v(t,"xmlns","http://www.w3.org/2000/svg"),v(t,"shape-rendering","crispEdges"),v(t,"height","100%"),v(t,"width","100%"),v(e,"class","sg-dependency svelte-12syssu"),z(e,"left","0"),z(e,"top","0"),v(e,"data-dependency-id",n[0])},m(o,r){E(o,e,r),L(e,t),L(t,s),L(t,i)},p(o,r){r&64&&v(s,"d",o[6]),r&2&&v(s,"stroke",o[1]),r&4&&v(s,"stroke-width",o[2]),r&32&&v(i,"d",o[5]),r&2&&v(i,"fill",o[1]),r&1&&v(e,"data-dependency-id",o[0])},d(o){o&&D(e)}}}function El(n){let e,t=(!n[3]&&!n[4]||n[3]!==n[4])&&Es(n);return{c(){t&&t.c(),e=re()},m(s,i){t&&t.m(s,i),E(s,e,i)},p(s,[i]){!s[3]&&!s[4]||s[3]!==s[4]?t?t.p(s,i):(t=Es(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:K,o:K,d(s){s&&D(e),t&&t.d(s)}}}const Ne=12,et=5;function Hl(n,e,t){let s,i;const{rowStore:o,taskStore:r}=oe("dataStore");A(n,o,C=>t(13,s=C)),A(n,r,C=>t(14,i=C));let{id:l}=e,{fromId:a}=e,{toId:c}=e,{stroke:d="red"}=e,{strokeWidth:w=2}=e,p,m,b,_,u,k;return n.$$set=C=>{"id"in C&&t(0,l=C.id),"fromId"in C&&t(9,a=C.fromId),"toId"in C&&t(10,c=C.toId),"stroke"in C&&t(1,d=C.stroke),"strokeWidth"in C&&t(2,w=C.strokeWidth)},n.$$.update=()=>{if(n.$$.dirty&32344){t(11,b=i.entities[a]),t(3,_=s.entities[b.model.resourceId].hidden),t(12,u=i.entities[c]),t(4,k=s.entities[u.model.resourceId].hidden);let C=b.top+b.height/2,y=b.left+b.width,R=u.top+u.height/2,x=u.left,N=x-y,B=R-C;_?(t(6,m=`M${x} ${R}`),y+Ne>=x&&C!=R?t(6,m+=`L ${x+1.5-Ne} ${R}`):t(6,m+=`L ${x+1.5-N/2} ${R}`),t(6,m+="m -2 -2 a 2 2 0 1 1 0 4 a 2 2 0 1 1 0 -4"),t(5,p=`M${u.left-et}  ${u.top+u.height/2-et} 
                            L${u.left} ${u.top+u.height/2} 
                            L${u.left-et} ${u.top+u.height/2+et} Z`)):k?(t(6,m=`M${y} ${C}`),y+Ne>=x&&C!=R?t(6,m+=`L ${y+1.5+Ne} ${C}`):t(6,m+=`L ${y+1.5+N/2} ${C}`),t(6,m+="m -2 -2 a 2 2 0 1 1 0 4 a 2 2 0 1 1 0 -4"),t(5,p="")):!_&&!k&&(t(6,m=`M${y} ${C}`),y+Ne>=x&&C!=R?t(6,m+=`L ${y+Ne} ${C} 
                            L ${y+Ne} ${C+B/2}
                            L ${x-Ne} ${C+B/2}
                            L ${x-Ne} ${R}
                            L ${x-2} ${R}`):t(6,m+=`L ${y+N/2} ${C} 
                            L ${y+N/2} ${R}
                            L ${x-2} ${R}`),t(5,p=`M${u.left-et} ${u.top+u.height/2-et} 
                            L${u.left} ${u.top+u.height/2} 
                            L${u.left-et} ${u.top+u.height/2+et} Z`))}},[l,d,w,_,k,p,m,o,r,a,c,b,u,s,i]}class Pl extends Se{constructor(e){super(),Ce(this,e,Hl,El,ve,{id:0,fromId:9,toId:10,stroke:1,strokeWidth:2})}}var Wl=".dependency-container.svelte-epxabx{position:absolute;width:100%;height:100%;pointer-events:none;top:0;float:left;overflow:hidden;z-index:0}";ye(Wl);function Hs(n,e,t){const s=n.slice();return s[7]=e[t],s}function Ps(n,e){let t,s,i;const o=[e[7]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return s=new Pl({props:r}),{key:n,first:null,c(){t=re(),ke(s.$$.fragment),this.first=t},m(l,a){E(l,t,a),ge(s,l,a),i=!0},p(l,a){e=l;const c=a&1?st(o,[it(e[7])]):{};s.$set(c)},i(l){i||(Y(s.$$.fragment,l),i=!0)},o(l){X(s.$$.fragment,l),i=!1},d(l){l&&D(t),me(s,l)}}}function Bl(n){let e,t=[],s=new Map,i,o=te(n[0]);const r=l=>l[7].id;for(let l=0;l<o.length;l+=1){let a=Hs(n,o,l),c=r(a);s.set(c,t[l]=Ps(c,a))}return{c(){e=W("div");for(let l=0;l<t.length;l+=1)t[l].c();v(e,"class","dependency-container svelte-epxabx")},m(l,a){E(l,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);i=!0},p(l,[a]){a&1&&(o=te(l[0]),Pe(),t=Wt(t,a,r,1,l,o,s,e,Pt,Ps,null,Hs),We())},i(l){if(!i){for(let a=0;a<o.length;a+=1)Y(t[a]);i=!0}},o(l){for(let a=0;a<t.length;a+=1)X(t[a]);i=!1},d(l){l&&D(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Ll(n,e,t){let s,i;const{visibleHeight:o}=oe("dimensions");A(n,o,d=>t(5,s=d));const{taskStore:r}=oe("dataStore");A(n,r,d=>t(6,i=d));let{paddingTop:l}=e,{dependencies:a=[]}=e,c=[];return n.$$set=d=>{"paddingTop"in d&&t(3,l=d.paddingTop),"dependencies"in d&&t(4,a=d.dependencies)},n.$$.update=()=>{if(n.$$.dirty&120){const d=[];for(let w=0;w<a.length;w++){const p=a[w],m=i.entities,b=m[p.fromId],_=m[p.toId];b&&_&&Math.min(b.top,_.top)<=l+s&&Math.max(b.top,_.top)>=l&&d.push(p)}t(0,c=d)}},[c,o,r,l,a,s,i]}class Al extends Se{constructor(e){super(),Ce(this,e,Ll,Bl,ve,{paddingTop:3,dependencies:4})}}const Xl=Al,Ol={enabled:!0,elementContent:()=>{const n=document.createElement("div");return n.innerHTML="New Task",Object.assign(n.style,{position:"absolute",background:"#eee",padding:"0.5em 1em",fontSize:"12px",pointerEvents:"none"}),n}};class Fl{constructor(e,t){M(this,"draggable");M(this,"element");M(this,"options");this.options=Object.assign({},Ol,t),this.draggable=new on(e,{onDrag:this.onDrag.bind(this),dragAllowed:()=>this.options.enabled,resizeAllowed:!1,onDrop:this.onDrop.bind(this),container:document.body,getX:s=>s.pageX,getY:s=>s.pageY,getWidth:()=>0})}onDrag({x:e,y:t}){this.element||(this.element=this.options.elementContent(),document.body.appendChild(this.element),this.options.dragging=!0),this.element.style.top=t+"px",this.element.style.left=e+"px"}onDrop(e){var i,o,r,l;const t=this.options.gantt,s=t.dndManager.getTarget("row",e.mouseEvent);if(s){const a=kt(t.getRowContainer(),e.mouseEvent),c=t.utils.getDateByPosition(a.x);(o=(i=this.options).onsuccess)==null||o.call(i,s,c,t)}else(l=(r=this.options).onfail)==null||l.call(r);document.body.removeChild(this.element),this.options.dragging=!1,this.element=null}}class Nl{constructor(e){M(this,"moment");this.moment=e}format(e,t){return this.moment(e).format(t)}roundTo(e,t,s){const i=this.moment(e);return Yl(i,s,t),i.valueOf()}}const Ws={hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function Yl(n,e,t,s="round"){e===1&&t==="day"&&(e=24,t="hours"),Ws[t]&&(t=Ws[t]);const i={hours:24,minutes:60,seconds:60,milliseconds:1e3};i[t]||console.warn(`Rounding dates by ${t} is not supported`);let o=0,r=!1,l=1,a;for(const c in i)c===t?(o=n.get(t),a=i[c],r=!0):r&&(l*=i[c],o+=n.get(c)/l,n.set(c,0));return o=Math[s](o/e)*e,o=Math.min(o,a),n.set(t,o),n}const Gl=il;export{Nl as M,Ul as S,Gl as a,Xl as b,Fl as c,jl as g};

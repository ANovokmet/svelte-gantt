var Ts=Object.defineProperty;var Cs=(n,e,t)=>e in n?Ts(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var E=(n,e,t)=>(Cs(n,typeof e!="symbol"?e+"":e,t),t);const Gl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Z(){}function Ge(n,e){for(const t in e)n[t]=e[t];return n}function Li(n){return n()}function Fn(){return Object.create(null)}function Fe(n){n.forEach(Li)}function Ot(n){return typeof n=="function"}function pe(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let qt;function Xn(n,e){return n===e?!0:(qt||(qt=document.createElement("a")),qt.href=e,n===qt.href)}function Ss(n){return Object.keys(n).length===0}function kn(n,...e){if(n==null){for(const i of e)i(void 0);return Z}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Rs(n){let e;return kn(n,t=>e=t)(),e}function Y(n,e,t){n.$$.on_destroy.push(kn(e,t))}function zs(n,e,t,i){if(n){const s=Ai(n,e,t,i);return n[0](s)}}function Ai(n,e,t,i){return n[1]&&i?Ge(t.ctx.slice(),n[1](i(e))):t.ctx}function Ds(n,e,t,i){if(n[2]&&i){const s=n[2](i(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],r=Math.max(e.dirty.length,s.length);for(let l=0;l<r;l+=1)o[l]=e.dirty[l]|s[l];return o}return e.dirty|s}return e.dirty}function Ms(n,e,t,i,s,o){if(s){const r=Ai(e,t,i,o);n.p(r,s)}}function Es(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function Hs(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function Nn(n,e){const t={};e=new Set(e);for(const i in n)!e.has(i)&&i[0]!=="$"&&(t[i]=n[i]);return t}function en(n){return n??""}function fe(n,e,t){return n.set(t),e}function tt(n){return n&&Ot(n.destroy)?n.destroy:Z}function A(n,e){n.appendChild(e)}function H(n,e,t){n.insertBefore(e,t||null)}function D(n){n.parentNode&&n.parentNode.removeChild(n)}function nt(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function B(n){return document.createElement(n)}function Jt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Xe(n){return document.createTextNode(n)}function ne(){return Xe(" ")}function le(){return Xe("")}function Le(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function xn(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function k(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Ws(n){return Array.from(n.childNodes)}function ot(n,e){e=""+e,n.data!==e&&(n.data=e)}function z(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,i?"important":"")}let Qt;function Ps(){if(Qt===void 0){Qt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Qt=!0}}return Qt}function Gn(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const i=B("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=Ps();let o;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Le(window,"message",r=>{r.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=Le(i.contentWindow,"resize",e),e()}),A(n,i),()=>{(s||o&&i.contentWindow)&&o(),D(i)}}function F(n,e,t){n.classList.toggle(e,!!t)}function Bs(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}class ut{constructor(e=!1){E(this,"is_svg",!1);E(this,"e");E(this,"n");E(this,"t");E(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=Jt(t.nodeName):this.e=B(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)H(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(D)}}function tn(n,e){return new n(e)}let At;function Bt(n){At=n}function It(){if(!At)throw new Error("Function called outside component initialization");return At}function vn(n){It().$$.on_mount.push(n)}function Ls(n){It().$$.on_destroy.push(n)}function Ut(){const n=It();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const o=Bs(e,t,{cancelable:i});return s.slice().forEach(r=>{r.call(n,o)}),!o.defaultPrevented}return!0}}function Ht(n,e){return It().$$.context.set(n,e),e}function ie(n){return It().$$.context.get(n)}function pn(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const vt=[],ct=[];let Tt=[];const jn=[],Yi=Promise.resolve();let _n=!1;function Oi(){_n||(_n=!0,Yi.then(Ii))}function gn(){return Oi(),Yi}function Yt(n){Tt.push(n)}const mn=new Set;let pt=0;function Ii(){if(pt!==0)return;const n=At;do{try{for(;pt<vt.length;){const e=vt[pt];pt++,Bt(e),As(e.$$)}}catch(e){throw vt.length=0,pt=0,e}for(Bt(null),vt.length=0,pt=0;ct.length;)ct.pop()();for(let e=0;e<Tt.length;e+=1){const t=Tt[e];mn.has(t)||(mn.add(t),t())}Tt.length=0}while(vt.length);for(;jn.length;)jn.pop()();_n=!1,mn.clear(),Bt(n)}function As(n){if(n.fragment!==null){n.update(),Fe(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Yt)}}function Ys(n){const e=[],t=[];Tt.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),Tt=e}const $t=new Set;let ft;function He(){ft={r:0,c:[],p:ft}}function We(){ft.r||Fe(ft.c),ft=ft.p}function I(n,e){n&&n.i&&($t.delete(n),n.i(e))}function x(n,e,t,i){if(n&&n.o){if($t.has(n))return;$t.add(n),ft.c.push(()=>{$t.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function $(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Wt(n,e){x(n,1,1,()=>{e.delete(n.key)})}function Pt(n,e,t,i,s,o,r,l,a,c,u,b){let p=n.length,w=o.length,v=p;const _={};for(;v--;)_[n[v].key]=v;const g=[],m=new Map,S=new Map,y=[];for(v=w;v--;){const P=b(s,o,v),K=t(P);let ee=r.get(K);ee?i&&y.push(()=>ee.p(P,e)):(ee=c(K,P),ee.c()),m.set(K,g[v]=ee),K in _&&S.set(K,Math.abs(v-_[K]))}const R=new Set,G=new Set;function q(P){I(P,1),P.m(l,u),r.set(P.key,P),u=P.first,w--}for(;p&&w;){const P=g[w-1],K=n[p-1],ee=P.key,N=K.key;P===K?(u=P.first,p--,w--):m.has(N)?!r.has(ee)||R.has(ee)?q(P):G.has(N)?p--:S.get(ee)>S.get(N)?(G.add(ee),q(P)):(R.add(N),p--):(a(K,r),p--)}for(;p--;){const P=n[p];m.has(P.key)||a(P,r)}for(;w;)q(g[w-1]);return Fe(y),g}function it(n,e){const t={},i={},s={$$scope:1};let o=n.length;for(;o--;){const r=n[o],l=e[o];if(l){for(const a in r)a in l||(i[a]=1);for(const a in l)s[a]||(t[a]=l[a],s[a]=1);n[o]=l}else for(const a in r)s[a]=1}for(const r in i)r in t||(t[r]=void 0);return t}function st(n){return typeof n=="object"&&n!==null?n:{}}function be(n){n&&n.c()}function he(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),Yt(()=>{const o=n.$$.on_mount.map(Li).filter(Ot);n.$$.on_destroy?n.$$.on_destroy.push(...o):Fe(o),n.$$.on_mount=[]}),s.forEach(Yt)}function ge(n,e){const t=n.$$;t.fragment!==null&&(Ys(t.after_update),Fe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Os(n,e){n.$$.dirty[0]===-1&&(vt.push(n),Oi(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Se(n,e,t,i,s,o,r=null,l=[-1]){const a=At;Bt(n);const c=n.$$={fragment:null,ctx:[],props:o,update:Z,not_equal:s,bound:Fn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Fn(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=t?t(n,e.props||{},(b,p,...w)=>{const v=w.length?w[0]:p;return c.ctx&&s(c.ctx[b],c.ctx[b]=v)&&(!c.skip_bound&&c.bound[b]&&c.bound[b](v),u&&Os(n,b)),p}):[],c.update(),u=!0,Fe(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const b=Ws(e.target);c.fragment&&c.fragment.l(b),b.forEach(D)}else c.fragment&&c.fragment.c();e.intro&&I(n.$$.fragment),he(n,e.target,e.anchor),Ii()}Bt(a)}class Re{constructor(){E(this,"$$");E(this,"$$set")}$destroy(){ge(this,1),this.$destroy=Z}$on(e,t){if(!Ot(t))return Z;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!Ss(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Is="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Is);const _t=[];function Us(n,e){return{subscribe:we(n,e).subscribe}}function we(n,e=Z){let t;const i=new Set;function s(l){if(pe(n,l)&&(n=l,t)){const a=!_t.length;for(const c of i)c[1](),_t.push(c,n);if(a){for(let c=0;c<_t.length;c+=2)_t[c][0](_t[c+1]);_t.length=0}}}function o(l){s(l(n))}function r(l,a=Z){const c=[l,a];return i.add(c),i.size===1&&(t=e(s,o)||Z),l(n),()=>{i.delete(c),i.size===0&&t&&(t(),t=null)}}return{set:s,update:o,subscribe:r}}function yn(n,e,t){const i=!Array.isArray(n),s=i?[n]:n;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Us(t,(r,l)=>{let a=!1;const c=[];let u=0,b=Z;const p=()=>{if(u)return;b();const v=e(i?c[0]:c,r,l);o?r(v):b=Ot(v)?v:Z},w=s.map((v,_)=>kn(v,g=>{c[_]=g,u&=~(1<<_),a&&p()},()=>{u|=1<<_}));return a=!0,p(),function(){Fe(w),b(),a=!1}})}function wn(){const{subscribe:n,set:e,update:t}=we({ids:[],entities:{}});return{set:e,_update:t,subscribe:n,add:i=>t(({ids:s,entities:o})=>({ids:[...s,i.model.id],entities:{...o,[i.model.id]:i}})),delete:i=>t(s=>{const{[i]:o,...r}=s.entities;return{ids:s.ids.filter(l=>l!==i),entities:r}}),deleteAll:i=>t(s=>{const o={...s.entities},r=new Set(i);for(let l=0;l<s.ids.length;l++)r.has(s.ids[l])&&delete o[s.ids[l]];return{ids:s.ids.filter(l=>!r.has(l)),entities:o}}),update:i=>t(({ids:s,entities:o})=>({ids:s,entities:{...o,[i.model.id]:i}})),upsert:i=>t(({ids:s,entities:o})=>({ids:s.indexOf(i.model.id)!==-1?s:[...s,i.model.id],entities:{...o,[i.model.id]:i}})),upsertAll:i=>t(s=>{const o={...s.entities},r=[...s.ids];for(let l=0;l<i.length;l++)r.indexOf(i[l].model.id)===-1&&r.push(i[l].model.id),o[i[l].model.id]=i[l];return{ids:r,entities:o}}),addAll:i=>{const s=[],o={};for(let r=0;r<i.length;r++)s.push(i[r].model.id),o[i[r].model.id]=i[r];e({ids:s,entities:o})},refresh:()=>t(i=>({...i}))}}function bn(n){return yn(n,({ids:e,entities:t})=>{const i=[];for(let s=0;s<e.length;s++)i.push(t[e[s]]);return i})}function Fs(){const n=wn(),e=wn(),t=wn(),i=bn(n),s=bn(e),o=bn(t),r=yn(i,a=>{const c={};for(let u=0;u<a.length;u++){const b=a[u];c[b.model.resourceId]||(c[b.model.resourceId]=[]),c[b.model.resourceId].push(b.model.id)}return c}),l=we({});return{taskStore:n,rowStore:e,timeRangeStore:t,allTasks:i,allRows:s,allTimeRanges:o,rowTaskCache:r,draggingTaskCache:l}}class Xs{constructor(e){E(this,"columnService");E(this,"rowPadding");E(this,"rowEntities");this.columnService=e}createTask(e){e.amountDone=e.amountDone||0,e.classes=e.classes||"",e.from=e.from||null,e.to=e.to||null,e.label=e.label||void 0,e.html=e.html||void 0,e.showButton=e.showButton||!1,e.buttonClasses=e.buttonClasses||"",e.buttonHtml=e.buttonHtml||"",e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const t=this.columnService.getPositionByDate(e.from)|0,i=this.columnService.getPositionByDate(e.to)|0;return{model:e,left:t,width:i-t,height:this.getHeight(e),top:this.getPosY(e),reflections:[]}}createTasks(e){return e.map(t=>this.createTask(t))}row(e){return this.rowEntities[e]}getHeight(e){return this.row(e.resourceId).height-2*this.rowPadding}getPosY(e){return this.row(e.resourceId).y+this.rowPadding}}function nn(n,e,t){const i=`reflected-task-${n.model.id}-${e.model.id}`,s={...n.model,resourceId:e.model.id,id:i,enableDragging:!1};return{...n,model:s,top:e.y+t.rowPadding,reflected:!0,reflectedOnParent:!1,reflectedOnChild:!0,originalId:n.model.id}}function Ui(n){return n.which===1}function yt(n,e){const t=n.getBoundingClientRect(),i=e.clientX-t.left,s=e.clientY-t.top;return{x:i,y:s}}function Fi(n,e,t,i,s){n.addEventListener(e,function o(){n.removeEventListener(e,o,s),t.apply(this,arguments,i)})}function Lt(n,e=document.body){e.style.cursor=n}function Tn(n){return n?typeof n=="string"?n:Array.isArray(n)?n.join(" "):"":""}function Ns(n,e){let t=!1;return function(){t||(n.apply(null,arguments),t=!0,setTimeout(function(){t=!1},e))}}function _e(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(!n||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var xs=`.sg-label-bottom.svelte-1f5vvpk.svelte-1f5vvpk{position:absolute;top:calc(100% + 10px);color:#888}.debug.svelte-1f5vvpk.svelte-1f5vvpk{position:absolute;top:-10px;right:0;font-size:8px;color:black}.sg-task.svelte-1f5vvpk.svelte-1f5vvpk{position:absolute;border-radius:2px;white-space:nowrap;transition:background-color 0.2s,\r
            opacity 0.2s;pointer-events:all}.sg-task-background.svelte-1f5vvpk.svelte-1f5vvpk{position:absolute;height:100%;top:0}.sg-task-content.svelte-1f5vvpk.svelte-1f5vvpk{position:absolute;height:100%;top:0;padding-left:14px;font-size:14px;display:flex;align-items:center;justify-content:flex-start;user-select:none}.sg-task.svelte-1f5vvpk.svelte-1f5vvpk:not(.moving){transition:left 0.2s, top 0.2s,\r
            transform 0.2s,\r
            background-color 0.2s,\r
            width 0.2s, \r
            height 0.2s}.sg-task--sticky.svelte-1f5vvpk.svelte-1f5vvpk:not(.moving){transition:left 0.2s, top 0.2s,\r
            transform 0.2s,\r
            background-color 0.2s,\r
            width 0.2s, \r
            height 0.2s}.sg-task--sticky.svelte-1f5vvpk>.sg-task-content.svelte-1f5vvpk{position:sticky;left:0;max-width:100px}.sg-task.moving.svelte-1f5vvpk.svelte-1f5vvpk{z-index:10000;opacity:0.5}.sg-task.resize-enabled.svelte-1f5vvpk.svelte-1f5vvpk:hover::before{content:'';width:4px;height:50%;top:25%;position:absolute;border-style:solid;border-color:rgba(255, 255, 255, 0.5);cursor:ew-resize;margin-left:3px;left:0;border-width:0 1px;z-index:1}.sg-task.resize-enabled.svelte-1f5vvpk.svelte-1f5vvpk:hover::after{content:'';width:4px;height:50%;top:25%;position:absolute;border-style:solid;border-color:rgba(255, 255, 255, 0.5);cursor:ew-resize;margin-right:3px;right:0;border-width:0 1px;z-index:1}.sg-task-reflected.svelte-1f5vvpk.svelte-1f5vvpk{opacity:0.5}.sg-task-background.svelte-1f5vvpk.svelte-1f5vvpk{background:rgba(0, 0, 0, 0.2)}.sg-task{color:white;background:rgb(116, 191, 255)}.sg-task:hover{background:rgb(98, 161, 216)}.sg-task.selected{background:rgb(69, 112, 150)}.sg-milestone.svelte-1f5vvpk.svelte-1f5vvpk{width:20px !important;min-width:40px;margin-left:-20px}.sg-task.sg-milestone.svelte-1f5vvpk.svelte-1f5vvpk{background:transparent}.sg-milestone.svelte-1f5vvpk .sg-milestone__diamond.svelte-1f5vvpk{position:relative}.sg-milestone.svelte-1f5vvpk .sg-milestone__diamond.svelte-1f5vvpk:before{position:absolute;top:0;left:50%;content:' ';height:28px;width:28px;transform-origin:0 0;transform:rotate(45deg)}.sg-milestone__diamond:before{background:rgb(116, 191, 255)}`;_e(xs);function qn(n){let e;return{c(){e=B("div"),k(e,"class","sg-milestone__diamond svelte-1f5vvpk")},m(t,i){H(t,e,i)},d(t){t&&D(e)}}}function Qn(n){let e;return{c(){e=B("div"),k(e,"class","sg-task-background svelte-1f5vvpk"),z(e,"width",n[0].amountDone+"%")},m(t,i){H(t,e,i)},p(t,i){i[0]&1&&z(e,"width",t[0].amountDone+"%")},d(t){t&&D(e)}}}function Gs(n){let e=n[0].label+"",t;return{c(){t=Xe(e)},m(i,s){H(i,t,s)},p(i,s){s[0]&1&&e!==(e=i[0].label+"")&&ot(t,e)},d(i){i&&D(t)}}}function js(n){let e,t=n[12](n[0])+"",i;return{c(){e=new ut(!1),i=le(),e.a=i},m(s,o){e.m(t,s,o),H(s,i,o)},p(s,o){o[0]&1&&t!==(t=s[12](s[0])+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function qs(n){let e,t=n[0].html+"",i;return{c(){e=new ut(!1),i=le(),e.a=i},m(s,o){e.m(t,s,o),H(s,i,o)},p(s,o){o[0]&1&&t!==(t=s[0].html+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function Vn(n){let e,t=n[0].buttonHtml+"",i,s,o;return{c(){e=B("span"),k(e,"class",i="sg-task-button "+n[0].buttonClasses+" svelte-1f5vvpk"),k(e,"role","button"),k(e,"tabindex","0")},m(r,l){H(r,e,l),e.innerHTML=t,s||(o=Le(e,"click",n[17]),s=!0)},p(r,l){l[0]&1&&t!==(t=r[0].buttonHtml+"")&&(e.innerHTML=t),l[0]&1&&i!==(i="sg-task-button "+r[0].buttonClasses+" svelte-1f5vvpk")&&k(e,"class",i)},d(r){r&&D(e),s=!1,o()}}}function Zn(n){let e,t=n[0].labelBottom+"",i;return{c(){e=B("label"),i=Xe(t),k(e,"class","sg-label-bottom svelte-1f5vvpk")},m(s,o){H(s,e,o),A(e,i)},p(s,o){o[0]&1&&t!==(t=s[0].labelBottom+"")&&ot(i,t)},d(s){s&&D(e)}}}function Qs(n){let e,t,i,s,o,r,l,a,c,u,b,p=n[0].type==="milestone"&&qn(),w=n[0].amountDone&&Qn(n);function v(y,R){return y[0].html?qs:y[12]?js:Gs}let _=v(n),g=_(n),m=n[0].showButton&&Vn(n),S=n[0].labelBottom&&Zn(n);return{c(){e=B("div"),p&&p.c(),t=ne(),w&&w.c(),i=ne(),s=B("div"),g.c(),o=ne(),m&&m.c(),r=ne(),S&&S.c(),k(s,"class","sg-task-content svelte-1f5vvpk"),k(e,"data-task-id",l=n[0].id),k(e,"class",a="sg-task "+n[6]+" svelte-1f5vvpk"),z(e,"width",n[5].width+"px"),z(e,"height",n[1]+"px"),z(e,"left",n[5].x+"px"),z(e,"top",n[5].y+"px"),F(e,"sg-milestone",n[0].type==="milestone"),F(e,"moving",n[3]||n[4]),F(e,"animating",Kn),F(e,"sg-task-reflected",n[2]),F(e,"sg-task-selected",n[8][n[0].id]),F(e,"resize-enabled",n[7]),F(e,"sg-task--sticky",n[0].stickyLabel)},m(y,R){H(y,e,R),p&&p.m(e,null),A(e,t),w&&w.m(e,null),A(e,i),A(e,s),g.m(s,null),A(s,o),m&&m.m(s,null),A(e,r),S&&S.m(e,null),u||(b=[tt(n[15].call(null,e)),tt(c=n[16].call(null,e,n[0]))],u=!0)},p(y,R){y[0].type==="milestone"?p||(p=qn(),p.c(),p.m(e,t)):p&&(p.d(1),p=null),y[0].amountDone?w?w.p(y,R):(w=Qn(y),w.c(),w.m(e,i)):w&&(w.d(1),w=null),_===(_=v(y))&&g?g.p(y,R):(g.d(1),g=_(y),g&&(g.c(),g.m(s,o))),y[0].showButton?m?m.p(y,R):(m=Vn(y),m.c(),m.m(s,null)):m&&(m.d(1),m=null),y[0].labelBottom?S?S.p(y,R):(S=Zn(y),S.c(),S.m(e,null)):S&&(S.d(1),S=null),R[0]&1&&l!==(l=y[0].id)&&k(e,"data-task-id",l),R[0]&64&&a!==(a="sg-task "+y[6]+" svelte-1f5vvpk")&&k(e,"class",a),R[0]&32&&z(e,"width",y[5].width+"px"),R[0]&2&&z(e,"height",y[1]+"px"),R[0]&32&&z(e,"left",y[5].x+"px"),R[0]&32&&z(e,"top",y[5].y+"px"),c&&Ot(c.update)&&R[0]&1&&c.update.call(null,y[0]),R[0]&65&&F(e,"sg-milestone",y[0].type==="milestone"),R[0]&88&&F(e,"moving",y[3]||y[4]),R[0]&64&&F(e,"animating",Kn),R[0]&68&&F(e,"sg-task-reflected",y[2]),R[0]&321&&F(e,"sg-task-selected",y[8][y[0].id]),R[0]&192&&F(e,"resize-enabled",y[7]),R[0]&65&&F(e,"sg-task--sticky",y[0].stickyLabel)},i:Z,o:Z,d(y){y&&D(e),p&&p.d(),w&&w.d(),g.d(),m&&m.d(),S&&S.d(),u=!1,Fe(b)}}}let Kn=!0;const Vt=40,Zt=40;function Vs(n,e){return{left:n.clientX-e.left<0+Vt,top:n.clientY-e.top<0+Vt,right:n.clientX-e.left>e.width-Vt,bottom:n.clientY-e.top>e.height-Vt}}function Zs(n,e,t){let i,s,o,r,l,{model:a}=e,{height:c}=e,{left:u}=e,{top:b}=e,{topDelta:p=0}=e,{width:w}=e,{reflected:v=!1}=e,_=!1,g=!1,m={x:u,y:b+p,width:w};function S(O,te,L){!_&&!g&&(t(5,m.x=O,m),t(5,m.y=te,m),t(5,m.width=L,m))}const{taskStore:y,rowStore:R,draggingTaskCache:G}=ie("dataStore");Y(n,y,O=>t(26,r=O)),Y(n,R,O=>t(22,i=O)),Y(n,G,O=>t(24,s=O));const{rowContainer:q,mainContainer:P}=ie("gantt"),{taskContent:K,resizeHandleWidth:ee,rowPadding:N,onTaskButtonClick:re,reflectOnParentRows:Ae,reflectOnChildRows:ke,taskElementHook:ve}=ie("options");Y(n,N,O=>t(25,o=O));const{dndManager:se,api:ue,utils:ye,columnService:j,selectionManager:C}=ie("services");let Q=C.selectedTasks;Y(n,Q,O=>t(8,l=O));let oe;const ze=Ns(O=>{const te=Vs(O,oe);(te.left||te.right)&&P.scrollTo({left:P.scrollLeft+(te.left?-Zt:Zt),behavior:"smooth"}),(te.top||te.bottom)&&P.scrollTo({top:P.scrollTop+(te.top?-Zt:Zt),behavior:"smooth"})},250);function De(O){function te(L){let Ie=!0;const d=i.entities[a.resourceId];if(L.dragging){const M=se.getTarget("row",L.mouseEvent);M?(t(0,a.resourceId=M.model.id,a),ue.tasks.raise.switchRow(this,M,d)):Ie=!1}t(3,_=t(4,g=!1));const h=r.entities[a.id];if(delete s[a.id],Ie){const M=a.from,Be=a.to,U=t(0,a.from=ye.roundTo(j.getDateByPosition(L.x)),a),Ce=t(0,a.to=ye.roundTo(j.getDateByPosition(L.x+L.width)),a),je=j.getPositionByDate(U)|0,lt=j.getPositionByDate(Ce)|0,Me=i.entities[a.resourceId],qe=je,Qe=lt-je,Ct=o+Me.y;S(qe,Ct+p,Qe);const ae={...h,left:qe,width:Qe,top:Ct,model:a},rt=M!=U||Be!=Ce||d&&d.model.id!==Me.model.id;rt&&ue.tasks.raise.change({task:ae,sourceRow:d,targetRow:Me}),C.newTasksAndReflections.push(ae),rt&&ue.tasks.raise.changed({task:ae,sourceRow:d,targetRow:Me}),ae.reflections&&C.oldReflections.push(...ae.reflections);const Ne=[];if(ke&&Me.allChildren){ae.reflections||(ae.reflections=[]);const dt={rowPadding:o};Me.allChildren.forEach(ht=>{const Ve=nn(ae,ht,dt);ae.reflections.push(Ve.model.id),Ne.push(Ve)})}if(Ae&&Me.allParents.length>0){ae.reflections||(ae.reflections=[]);const dt={rowPadding:o};Me.allParents.forEach(ht=>{const Ve=nn(ae,ht,dt);ae.reflections.push(Ve.model.id),Ne.push(Ve)})}Ne.length>0&&C.newTasksAndReflections.push(...Ne),!(Me.allParents.length>0)&&!Me.allChildren&&(ae.reflections=null)}else t(5,m.x=h.left,m),t(5,m.width=h.width,m),t(5,m.y=h.top,m)}if(!v)return C.taskSettings.set(a.id.toString(),{onDown:L=>{oe=P.getBoundingClientRect(),L.dragging&&Lt("move"),L.resizing&&Lt("e-resize"),fe(G,s[a.id]=!0,s)},onMouseUp:()=>{Lt("default"),ue.tasks.raise.moveEnd(a)},onResize:L=>{t(5,m.x=L.x,m),t(5,m.width=L.width,m),t(4,g=!0),ze(L.event)},onDrag:L=>{t(5,m.x=L.x,m),t(5,m.y=L.y,m),t(3,_=!0),ue.tasks.raise.move(a),ze(L.event)},dragAllowed:()=>i.entities[a.resourceId].model.enableDragging&&a.enableDragging,resizeAllowed:()=>a.type!=="milestone"&&i.entities[a.resourceId].model.enableDragging&&a.enableDragging,onDrop:te,container:q,resizeHandleWidth:ee,getX:()=>m.x,getY:()=>m.y,getWidth:()=>m.width,modelId:a.id}),{destroy:()=>C.taskSettings.delete(a.id.toString())}}function Ye(O,te){if(ve)return ve(O,te)}function Pe(O){re&&re(a,O)}let Oe,Te;return n.$$set=O=>{"model"in O&&t(0,a=O.model),"height"in O&&t(1,c=O.height),"left"in O&&t(18,u=O.left),"top"in O&&t(19,b=O.top),"topDelta"in O&&t(20,p=O.topDelta),"width"in O&&t(21,w=O.width),"reflected"in O&&t(2,v=O.reflected)},n.$$.update=()=>{n.$$.dirty[0]&3932160&&S(u,b+p,w),n.$$.dirty[0]&1&&t(6,Oe=Tn(a.classes)),n.$$.dirty[0]&4194305&&t(7,Te=a.type!=="milestone"&&i.entities[a.resourceId].model.enableDragging&&a.enableDragging)},[a,c,v,_,g,m,Oe,Te,l,y,R,G,K,N,Q,De,Ye,Pe,u,b,p,w,i]}class Ks extends Re{constructor(e){super(),Se(this,e,Zs,Qs,pe,{model:0,height:1,left:18,top:19,topDelta:20,width:21,reflected:2},null,[-1,-1])}}var Js=".sg-row.svelte-7u5y5s{position:relative;width:100%;box-sizing:border-box}";_e(Js);function Jn(n){let e,t=n[0].model.contentHtml+"",i;return{c(){e=new ut(!1),i=le(),e.a=i},m(s,o){e.m(t,s,o),H(s,i,o)},p(s,o){o&1&&t!==(t=s[0].model.contentHtml+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function $s(n){let e,t,i,s=n[0].model.contentHtml&&Jn(n);return{c(){e=B("div"),s&&s.c(),k(e,"class",t="sg-row "+n[0].model.classes+" svelte-7u5y5s"),k(e,"data-row-id",i=n[0].model.id),z(e,"height",n[3]+"px"),F(e,"sg-hover",n[1]==n[0].model.id),F(e,"sg-selected",n[2]==n[0].model.id)},m(o,r){H(o,e,r),s&&s.m(e,null)},p(o,[r]){o[0].model.contentHtml?s?s.p(o,r):(s=Jn(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null),r&1&&t!==(t="sg-row "+o[0].model.classes+" svelte-7u5y5s")&&k(e,"class",t),r&1&&i!==(i=o[0].model.id)&&k(e,"data-row-id",i),r&8&&z(e,"height",o[3]+"px"),r&3&&F(e,"sg-hover",o[1]==o[0].model.id),r&5&&F(e,"sg-selected",o[2]==o[0].model.id)},i:Z,o:Z,d(o){o&&D(e),s&&s.d()}}}function eo(n,e,t){let i,s,o,{row:r}=e;const{rowHeight:l}=ie("options");Y(n,l,u=>t(3,o=u));const{hoveredRow:a,selectedRow:c}=ie("gantt");return Y(n,a,u=>t(1,i=u)),Y(n,c,u=>t(2,s=u)),n.$$set=u=>{"row"in u&&t(0,r=u.row)},[r,i,s,o,l,a,c]}class to extends Re{constructor(e){super(),Se(this,e,eo,$s,pe,{row:0})}}var no=`.sg-time-range.svelte-w7p5la{height:100%;position:absolute;display:flex;flex-direction:column;align-items:center;background-image:linear-gradient(\r
            -45deg,\r
            rgba(0, 0, 0, 0) 46%,\r
            #e03218 49%,\r
            #e03218 51%,\r
            rgba(0, 0, 0, 0) 55%\r
        );background-size:6px 6px !important;color:red;font-weight:400}.sg-time-range-label.svelte-w7p5la{margin-top:10px;background:#fff;white-space:nowrap;padding:4px;font-weight:400;font-size:10px}`;_e(no);function $n(n){let e,t=n[0].label+"",i;return{c(){e=B("div"),i=Xe(t),k(e,"class","sg-time-range-label svelte-w7p5la")},m(s,o){H(s,e,o),A(e,i)},p(s,o){o&1&&t!==(t=s[0].label+"")&&ot(i,t)},d(s){s&&D(e)}}}function io(n){let e,t,i=n[0].label&&$n(n);return{c(){e=B("div"),i&&i.c(),k(e,"class",t="sg-time-range "+n[3]+" svelte-w7p5la"),z(e,"width",n[2].width+"px"),z(e,"left",n[2].x+"px"),F(e,"moving",n[1])},m(s,o){H(s,e,o),i&&i.m(e,null)},p(s,[o]){s[0].label?i?i.p(s,o):(i=$n(s),i.c(),i.m(e,null)):i&&(i.d(1),i=null),o&8&&t!==(t="sg-time-range "+s[3]+" svelte-w7p5la")&&k(e,"class",t),o&4&&z(e,"width",s[2].width+"px"),o&4&&z(e,"left",s[2].x+"px"),o&10&&F(e,"moving",s[1])},i:Z,o:Z,d(s){s&&D(e),i&&i.d()}}}function so(n,e,t){let{model:i}=e,{left:s}=e,{width:o}=e,{resizing:r=!1}=e;const l={width:o,x:s};let a;return n.$$set=c=>{"model"in c&&t(0,i=c.model),"left"in c&&t(4,s=c.left),"width"in c&&t(5,o=c.width),"resizing"in c&&t(1,r=c.resizing)},n.$$.update=()=>{n.$$.dirty&48&&(t(2,l.x=s,l),t(2,l.width=o,l)),n.$$.dirty&1&&t(3,a=Tn(i.classes))},[i,r,l,a,s,o]}class oo extends Re{constructor(e){super(),Se(this,e,so,io,pe,{model:0,left:4,width:5,resizing:1})}}const lo=2,ro=2;class on{constructor(e,t,i){E(this,"mouseStartPosX");E(this,"mouseStartPosY");E(this,"mouseStartRight");E(this,"direction");E(this,"dragging",!1);E(this,"resizing",!1);E(this,"initialX");E(this,"initialY");E(this,"initialW");E(this,"resizeTriggered",!1);E(this,"settings");E(this,"node");E(this,"offsetPos",{x:null,y:null});E(this,"offsetWidth",null);E(this,"overRezisedOffset");E(this,"onmousedown",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!Ui(e)&&!this.settings.modelId)return;this.settings.modelId||(e.stopPropagation(),e.preventDefault());const i=this.dragAllowed,s=this.resizeAllowed;if(i||s){const o=this.settings.getX(),r=this.settings.getY(),l=this.settings.getWidth();this.initialX=t.clientX,this.initialY=t.clientY,this.mouseStartRight=o+l,this.mouseStartPosX=yt(this.settings.container,t).x-o,this.mouseStartPosY=yt(this.settings.container,t).y-r,s&&this.mouseStartPosX<=this.settings.resizeHandleWidth&&(this.direction="left",this.resizing=!0),s&&this.mouseStartPosX>=l-this.offsetWidth-this.settings.resizeHandleWidth&&(this.direction="right",this.resizing=!0),i&&!this.resizing&&(this.dragging=!0),(this.dragging||this.resizing)&&this.settings.onDown&&this.settings.onDown({mouseEvent:t,x:o,width:l,y:r,resizing:this.resizing,dragging:this.dragging}),this.settings.modelId||(window.addEventListener("mousemove",this.onmousemove,!1),Fi(window,"mouseup",this.onmouseup))}});E(this,"onmousemove",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!this.resizeTriggered)if(Math.abs(t.clientX-this.initialX)>lo||Math.abs(t.clientY-this.initialY)>ro)this.resizeTriggered=!0;else return;if(e.preventDefault(),this.resizing){const i=yt(this.settings.container,t),s=this.settings.getX(),o=this.settings.getWidth();let r,l;this.direction==="left"?(this.overRezisedOffset==="left"&&(i.x+=this.offsetWidth),this.mouseStartRight-i.x<=0?(this.direction="right",this.overRezisedOffset!=="left"?this.overRezisedOffset="right":this.overRezisedOffset=void 0,r=this.mouseStartRight,l=this.mouseStartRight-i.x,this.mouseStartRight=this.mouseStartRight+o):(r=i.x,l=this.mouseStartRight-i.x)):this.direction==="right"&&(this.overRezisedOffset==="right"&&(i.x-=this.offsetWidth),i.x-s+this.offsetWidth<=0?(this.direction="left",this.overRezisedOffset!=="right"?this.overRezisedOffset="left":this.overRezisedOffset=void 0,r=i.x+this.offsetWidth,l=i.x-s+this.offsetWidth,this.mouseStartRight=s):(r=s,l=i.x-s+this.offsetWidth)),this.settings.onResize&&this.settings.onResize({x:r,width:l,event:e})}if(this.dragging&&this.settings.onDrag){const i=yt(this.settings.container,t);this.settings.onDrag({x:i.x-this.mouseStartPosX,y:i.y-this.mouseStartPosY,event:e})}});E(this,"onmouseup",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY},i=this.settings.getX(),s=this.settings.getY(),o=this.settings.getWidth();this.settings.onMouseUp&&this.settings.onMouseUp(),this.resizeTriggered&&this.settings.onDrop&&this.settings.onDrop({mouseEvent:t,x:i,y:s,width:o,dragging:this.dragging,resizing:this.resizing}),this.mouseStartPosX=null,this.mouseStartPosY=null,this.mouseStartRight=null,this.dragging=!1,this.resizing=!1,this.initialX=null,this.initialY=null,this.initialW=null,this.resizeTriggered=!1,this.offsetPos={x:null,y:null},this.offsetWidth=null,this.overRezisedOffset=void 0,this.settings.modelId||window.removeEventListener("mousemove",this.onmousemove,!1)});this.settings=t,this.node=e,this.settings.modelId?(this.offsetPos=i.offsetPos,this.offsetWidth=i.offsetWidth):e.addEventListener("mousedown",this.onmousedown,{passive:!0})}get dragAllowed(){return typeof this.settings.dragAllowed=="function"?this.settings.dragAllowed():this.settings.dragAllowed}get resizeAllowed(){return typeof this.settings.resizeAllowed=="function"?this.settings.resizeAllowed():this.settings.resizeAllowed}destroy(){this.node.removeEventListener("mousedown",this.onmousedown,!1),this.node.removeEventListener("mousemove",this.onmousemove,!1),this.node.removeEventListener("mouseup",this.onmouseup,!1)}}class ao{constructor(e){E(this,"handlerMap",{});this.register("row",t=>{let s=document.elementsFromPoint(t.clientX,t.clientY).find(o=>!!o.getAttribute("data-row-id"));if(s!==void 0){const o=s.getAttribute("data-row-id"),{entities:r}=Rs(e),l=r[o];if(l.model.enableDragging)return l}return null})}register(e,t){this.handlerMap[e]=t}getTarget(e,t){var i=this.handlerMap[e];if(i)return i(t)}}var co=".sg-time-range-control.svelte-w4nglp{position:absolute}.sg-time-range-handle-left.svelte-w4nglp{position:absolute;left:0}.sg-time-range-handle-right.svelte-w4nglp{position:absolute;right:0}.sg-time-range-disabled.svelte-w4nglp{display:none}.sg-time-range-handle-left.svelte-w4nglp::before,.sg-time-range-handle-right.svelte-w4nglp::before{position:absolute;content:'';bottom:4px;border-radius:6px 6px 6px 0;border:2px solid #b0b0b7;width:9px;height:9px;transform:translateX(-50%) rotate(-45deg);background-color:#fff;border-color:#e03218;cursor:ew-resize}";_e(co);function fo(n){let e,t,i,s,o,r,l;return{c(){e=B("div"),t=B("div"),i=ne(),s=B("div"),k(t,"class","sg-time-range-handle-left svelte-w4nglp"),k(s,"class","sg-time-range-handle-right svelte-w4nglp"),k(e,"class",o="sg-time-range-control "+n[1]+" svelte-w4nglp"),z(e,"width",n[0].width+"px"),z(e,"left",n[0].x+"px"),F(e,"sg-time-range-disabled",!n[3]())},m(a,c){H(a,e,c),A(e,t),A(e,i),A(e,s),r||(l=[tt(n[2].call(null,t)),tt(n[2].call(null,s))],r=!0)},p(a,[c]){c&2&&o!==(o="sg-time-range-control "+a[1]+" svelte-w4nglp")&&k(e,"class",o),c&1&&z(e,"width",a[0].width+"px"),c&1&&z(e,"left",a[0].x+"px"),c&10&&F(e,"sg-time-range-disabled",!a[3]())},i:Z,o:Z,d(a){a&&D(e),r=!1,Fe(l)}}}function uo(n,e,t){const{rowContainer:i}=ie("gantt"),{api:s,utils:o,columnService:r}=ie("services"),{resizeHandleWidth:l}=ie("options"),{timeRangeStore:a}=ie("dataStore");let{model:c}=e,{width:u}=e,{left:b}=e;const p={width:u,x:b};function w(g){const m=R=>{const G=o.roundTo(r.getDateByPosition(R.x)),q=o.roundTo(r.getDateByPosition(R.x+R.width)),P=r.getPositionByDate(G),K=r.getPositionByDate(q);Object.assign(c,{from:G,to:q}),S({left:P,width:K-P,model:c,resizing:!1}),window.removeEventListener("mousemove",onmousemove,!1)};function S(R){a.update(R),t(0,p.x=R.left,p),t(0,p.width=R.width,p)}const y=new on(g,{onDown:R=>{s.timeranges.raise.clicked({model:c}),S({left:R.x,width:R.width,model:c,resizing:!0})},onResize:R=>{s.timeranges.raise.resized({model:c,left:R.x,width:R.width}),S({left:R.x,width:R.width,model:c,resizing:!0})},dragAllowed:!1,resizeAllowed:()=>v(),onDrop:m,container:i,resizeHandleWidth:l,getX:()=>p.x,getY:()=>0,getWidth:()=>p.width});return{destroy:()=>y.destroy()}}function v(){return c.resizable!==void 0?c.resizable:!0}let _;return n.$$set=g=>{"model"in g&&t(4,c=g.model),"width"in g&&t(5,u=g.width),"left"in g&&t(6,b=g.left)},n.$$.update=()=>{n.$$.dirty&96&&(t(0,p.x=b,p),t(0,p.width=u,p)),n.$$.dirty&16&&t(1,_=Tn(c.classes))},[p,_,w,v,c,u,b]}class ho extends Re{constructor(e){super(),Se(this,e,uo,fo,pe,{model:4,width:5,left:6})}}var go=".column.svelte-4fffin{position:absolute;height:100%;box-sizing:border-box}.column.svelte-4fffin{border-right:#efefef 1px solid}";_e(go);function mo(n,e=1){switch(n){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${n}`)}}function wo(n,e=1){return n.setSeconds(n.getSeconds()+e),n}function bo(n,e=1){return n.setMinutes(n.getMinutes()+e),n}function po(n,e=1){return n.setHours(n.getHours()+e),n}function _o(n,e=1){return n.setDate(n.getDate()+e),n.setHours(0,0,0),n}function ko(n,e=1){const t=n,i=t.getDay(),s=t.getDate()-i+(i==0?-6:1);return t.setDate(s),t.setHours(0,0,0),t.setDate(t.getDate()+7*e),t}function vo(n,e=1){return n.setMonth(n.getMonth()+e),n.setDate(1),n.setHours(0,0,0),n}function yo(n,e=1){return n.setFullYear(n.getFullYear()+e),n.setMonth(0),n.setDate(1),n.setHours(0,0,0),n}function ei(n,e,t){switch(e){case"y":case"year":return yo(n,t);case"month":return vo(n,t);case"week":return ko(n,t);case"d":case"day":return _o(n,t);case"h":case"hour":return po(n,t);case"m":case"minute":return bo(n,t);case"s":case"second":return wo(n,t)}}const To=["y","year","month","week","d","day","h","hour","m","minute","s","second"];function Xi(n,e,t,i=1,s){if(To.indexOf(t)!==-1){let o=0,r=0;const l=new Date(n),a=new Date(n);let c=ei(a,t,i),u=c.getTime();const b=c.getTime()-n,p=[{from:n,to:c.getTime(),duration:b,isHighlighted:s&&ti(l,s)}];if(u<e){for(;u<e;)o=u,c=ei(new Date(u),t,i),r=c.getTime()-u,p.push({from:u,to:c.getTime(),duration:r,isHighlighted:s&&ti(new Date(u),s)}),u=c.getTime();const w=e-o;p[p.length-1].to=e,p[p.length-1].duration=w}return p}throw new Error(`Unknown unit: ${t}`)}function ti(n,e){let t;switch(e.unit){case"m":case"minute":return t=n.getMinutes(),e.fractions.includes(t);case"h":case"hour":return t=n.getHours(),e.fractions.includes(t);case"d":case"day":return t=n.getDay(),e.fractions.includes(t);case"week":return e.fractions.includes(t);case"dayinMonth":return t=n.getDate(),e.fractions.includes(t);case"month":return t=n.getMonth(),e.fractions.includes(t);case"y":case"year":return t=n.getFullYear(),e.fractions.includes(t);default:throw new Error(`Invalid unit: ${e.unit}`)}}class Co{constructor(){E(this,"from");E(this,"to");E(this,"width");E(this,"magnetOffset");E(this,"magnetUnit");E(this,"magnetDuration");E(this,"dateAdapter")}getPositionByDate(e){return Cn(e,this.from,this.to,this.width)}getDateByPosition(e){return So(e,this.from,this.to,this.width)}roundTo(e){return this.dateAdapter?this.dateAdapter.roundTo(e,this.magnetUnit,this.magnetOffset):null}}function Cn(n,e,t,i){if(!n)return;const s=n-e,o=t-e;return s/o*i}function So(n,e,t,i){const s=n/i*(t-e);return e+s}function Ro(n,e,t,i){let s=-1,o=n.length;for(;o-s>1;){const r=Math.floor((s+o)/2);(i?t(n[r])<e:t(n[r])<=e)?s=r:o=r}return!i&&n[s]!==void 0&&t(n[s])===e&&(o=s),[s,o]}function Ni(n,e,t,i){const s=Ro(n,e,t,i);return[n[s[0]],n[s[1]]]}var zo=".column-header-row.svelte-vfarxf.svelte-vfarxf{position:relative;white-space:nowrap;height:32px}.column-header-cell.svelte-vfarxf.svelte-vfarxf{position:absolute;height:100%;box-sizing:border-box;text-overflow:clip;text-align:center;display:inline-flex;justify-content:center;align-items:center;font-size:1em;font-size:14px;font-weight:300;transition:background 0.2s;cursor:pointer;user-select:none;border-right:#efefef 1px solid;border-bottom:#efefef 1px solid}.column-header-cell.svelte-vfarxf.svelte-vfarxf:hover{background:#f9f9f9}.column-header-cell.sticky.svelte-vfarxf>.column-header-cell-label.svelte-vfarxf{position:sticky;left:1rem}";_e(zo);function ni(n,e,t){const i=n.slice();return i[13]=e[t],i}function ii(n){let e,t,i=(n[13].label||"N/A")+"",s,o,r,l;function a(){return n[10](n[13])}return{c(){e=B("div"),t=B("div"),s=Xe(i),o=ne(),k(t,"class","column-header-cell-label svelte-vfarxf"),k(e,"class","column-header-cell svelte-vfarxf"),k(e,"role","button"),k(e,"tabindex","0"),z(e,"left",n[13].left+"px"),z(e,"width",n[13].width+"px"),F(e,"sticky",n[0].sticky)},m(c,u){H(c,e,u),A(e,t),A(t,s),A(e,o),r||(l=Le(e,"click",a),r=!0)},p(c,u){n=c,u&1&&i!==(i=(n[13].label||"N/A")+"")&&ot(s,i),u&1&&z(e,"left",n[13].left+"px"),u&1&&z(e,"width",n[13].width+"px"),u&1&&F(e,"sticky",n[0].sticky)},d(c){c&&D(e),r=!1,l()}}}function Do(n){let e,t=$(n[0].columns),i=[];for(let s=0;s<t.length;s+=1)i[s]=ii(ni(n,t,s));return{c(){e=B("div");for(let s=0;s<i.length;s+=1)i[s].c();k(e,"class","column-header-row svelte-vfarxf")},m(s,o){H(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[o]){if(o&17){t=$(s[0].columns);let r;for(r=0;r<t.length;r+=1){const l=ni(s,t,r);i[r]?i[r].p(l,o):(i[r]=ii(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},i:Z,o:Z,d(s){s&&D(e),nt(i,s)}}}function Mo(n,e,t){let i,s,o;const r=Ut(),{from:l,to:a,width:c}=ie("dimensions");Y(n,l,g=>t(9,o=g)),Y(n,a,g=>t(8,s=g)),Y(n,c,g=>t(7,i=g));const{dateAdapter:u}=ie("options");let{header:b}=e,{ganttBodyColumns:p}=e,{ganttBodyUnit:w}=e;function v(g){r("dateSelected",{from:g.from,to:g.to,unit:b.unit})}const _=g=>v(g);return n.$$set=g=>{"header"in g&&t(0,b=g.header),"ganttBodyColumns"in g&&t(5,p=g.ganttBodyColumns),"ganttBodyUnit"in g&&t(6,w=g.ganttBodyUnit)},n.$$.update=()=>{if(n.$$.dirty&993)if(b.unit===w)t(0,b.columns=p.map(g=>({...g,label:u.format(g.from,b.format)})),b);else{const g=Xi(o.valueOf(),s.valueOf(),b.unit);let m=0,S=0;t(0,b.columns=g.map(y=>(S=m,m=Cn(y.to,o.valueOf(),s.valueOf(),i),{width:Math.min(m-S,i),label:u.format(y.from,b.format),from:y.from,to:y.to,left:S})),b)}},[b,l,a,c,v,p,w,i,s,o,_]}class Eo extends Re{constructor(e){super(),Se(this,e,Mo,Do,pe,{header:0,ganttBodyColumns:5,ganttBodyUnit:6})}}function si(n,e,t){const i=n.slice();return i[4]=e[t],i}function oi(n){let e,t;return e=new Eo({props:{header:n[4],ganttBodyColumns:n[1],ganttBodyUnit:n[2]}}),e.$on("dateSelected",n[3]),{c(){be(e.$$.fragment)},m(i,s){he(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.header=i[4]),s&2&&(o.ganttBodyColumns=i[1]),s&4&&(o.ganttBodyUnit=i[2]),e.$set(o)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){x(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Ho(n){let e,t,i=$(n[0]),s=[];for(let r=0;r<i.length;r+=1)s[r]=oi(si(n,i,r));const o=r=>x(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=le()},m(r,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,l);H(r,e,l),t=!0},p(r,[l]){if(l&7){i=$(r[0]);let a;for(a=0;a<i.length;a+=1){const c=si(r,i,a);s[a]?(s[a].p(c,l),I(s[a],1)):(s[a]=oi(c),s[a].c(),I(s[a],1),s[a].m(e.parentNode,e))}for(He(),a=i.length;a<s.length;a+=1)o(a);We()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)I(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)x(s[l]);t=!1},d(r){r&&D(e),nt(s,r)}}}function Wo(n,e,t){let{headers:i}=e,{ganttBodyColumns:s}=e,{ganttBodyUnit:o}=e;function r(l){pn.call(this,n,l)}return n.$$set=l=>{"headers"in l&&t(0,i=l.headers),"ganttBodyColumns"in l&&t(1,s=l.ganttBodyColumns),"ganttBodyUnit"in l&&t(2,o=l.ganttBodyUnit)},[i,s,o,r]}class Po extends Re{constructor(e){super(),Se(this,e,Wo,Ho,pe,{headers:0,ganttBodyColumns:1,ganttBodyUnit:2})}}function Bo(n,e){const t=document.createElement("canvas");t.width=(n.length-1)*n[0].width,t.height=20;const i=t.getContext("2d");return i.shadowColor="rgba(128,128,128,0.5)",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=.5,i.lineWidth=e.columnStrokeWidth,i.lineCap="square",i.strokeStyle=e.columnStrokeColor,i.translate(.5,.5),n.forEach(o=>{Lo(i,o.left)}),`url("${t.toDataURL()}")`}function Lo(n,e){n.beginPath(),n.moveTo(e,0),n.lineTo(e,20),n.stroke()}var Ao=".sg-columns.svelte-1uqfnup{position:absolute;height:100%;width:100%}.sg-columns--background.svelte-1uqfnup{overflow:hidden;background-repeat:repeat;background-position-x:-1px}.sg-column.svelte-1uqfnup{position:absolute;height:100%;width:100%;box-sizing:border-box}";_e(Ao);function li(n,e,t){const i=n.slice();return i[6]=e[t],i}function Yo(n){let e,t=$(n[0]),i=[];for(let s=0;s<t.length;s+=1)i[s]=ri(li(n,t,s));return{c(){e=B("div");for(let s=0;s<i.length;s+=1)i[s].c();k(e,"class","sg-columns svelte-1uqfnup")},m(s,o){H(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,o){if(o&29){t=$(s[0]);let r;for(r=0;r<t.length;r+=1){const l=li(s,t,r);i[r]?i[r].p(l,o):(i[r]=ri(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(s){s&&D(e),nt(i,s)}}}function Oo(n){let e;return{c(){e=B("div"),k(e,"class","sg-columns sg-columns--background svelte-1uqfnup"),z(e,"background-image",n[5])},m(t,i){H(t,e,i)},p(t,i){i&32&&z(e,"background-image",t[5])},d(t){t&&D(e)}}}function ri(n){let e;return{c(){e=B("div"),k(e,"class","sg-column svelte-1uqfnup"),z(e,"border-right",(n[6].bgHighlightColor?0:n[2])+"px solid "+(n[6].bgHighlightColor||n[3])),z(e,"left",n[6].left+"px"),z(e,"width",n[6].width+"px"),z(e,"background-color",n[6].bgHighlightColor||n[4])},m(t,i){H(t,e,i)},p(t,i){i&13&&z(e,"border-right",(t[6].bgHighlightColor?0:t[2])+"px solid "+(t[6].bgHighlightColor||t[3])),i&1&&z(e,"left",t[6].left+"px"),i&1&&z(e,"width",t[6].width+"px"),i&17&&z(e,"background-color",t[6].bgHighlightColor||t[4])},d(t){t&&D(e)}}}function Io(n){let e;function t(o,r){return o[1]?Oo:Yo}let i=t(n),s=i(n);return{c(){s.c(),e=le()},m(o,r){s.m(o,r),H(o,e,r)},p(o,[r]){i===(i=t(o))&&s?s.p(o,r):(s.d(1),s=i(o),s&&(s.c(),s.m(e.parentNode,e)))},i:Z,o:Z,d(o){o&&D(e),s.d(o)}}}function Uo(n,e,t){let{columns:i}=e,{useCanvasColumns:s=!0}=e,{columnStrokeWidth:o}=e,{columnStrokeColor:r}=e,{columnDefaultColor:l="#ffffff"}=e,a;return n.$$set=c=>{"columns"in c&&t(0,i=c.columns),"useCanvasColumns"in c&&t(1,s=c.useCanvasColumns),"columnStrokeWidth"in c&&t(2,o=c.columnStrokeWidth),"columnStrokeColor"in c&&t(3,r=c.columnStrokeColor),"columnDefaultColor"in c&&t(4,l=c.columnDefaultColor)},n.$$.update=()=>{n.$$.dirty&13&&t(5,a=Bo(i,{columnStrokeColor:r,columnStrokeWidth:o}))},[i,s,o,r,l,a]}class Fo extends Re{constructor(e){super(),Se(this,e,Uo,Io,pe,{columns:0,useCanvasColumns:1,columnStrokeWidth:2,columnStrokeColor:3,columnDefaultColor:4})}}var Xo=".sg-context-menu.svelte-1a9x2in{position:absolute;background:white;border:1px solid #ccc;padding:0.25em 0;font-size:10px;transition:opacity 0.4s ease 0s;opacity:1;box-shadow:rgba(0, 0, 0, 0.32) 1px 1px 3px 0px}.context-option.svelte-1a9x2in:hover{background:#eee}.context-option.svelte-1a9x2in{cursor:default;padding:0.2em 1em}";_e(Xo);var No=`.sg-resize.svelte-1vzamdy{z-index:2;background:#e9eaeb;width:5px;cursor:col-resize;position:absolute;height:100%;transition:width 0.2s,\r
            transform 0.2s}.sg-resize.svelte-1vzamdy:hover{transform:translateX(-2px);width:10px}`;_e(No);function xo(n){let e,t,i;return{c(){e=B("div"),k(e,"class","sg-resize svelte-1vzamdy"),z(e,"left",n[0]+"px")},m(s,o){H(s,e,o),t||(i=tt(n[1].call(null,e)),t=!0)},p(s,[o]){o&1&&z(e,"left",s[0]+"px")},i:Z,o:Z,d(s){s&&D(e),t=!1,i()}}}function Go(n,e,t){const i=Ut();let{x:s}=e,{container:o}=e;const r={onDrag:a=>{t(0,s=a.x),i("resize",{left:s}),Lt("col-resize")},onDrop:a=>{t(0,s=a.x),i("resize",{left:s}),Lt("default")},dragAllowed:!0,resizeAllowed:!1,container:o,getX:()=>s,getY:()=>0,getWidth:()=>0};function l(a){const c=new on(a,r,"resizer");return{destroy:()=>c.destroy()}}return n.$$set=a=>{"x"in a&&t(0,s=a.x),"container"in a&&t(2,o=a.container)},n.$$.update=()=>{n.$$.dirty&4&&(r.container=o)},[s,l,o]}class jo extends Re{constructor(e){super(),Se(this,e,Go,xo,pe,{x:0,container:2})}}class qo{constructor(){E(this,"listeners");E(this,"listenersMap");E(this,"tasks");E(this,"timeranges");this.listeners=[],this.listenersMap={}}registerEvent(e,t){this[e]||(this[e]={});const i=this[e];i.on||(i.on={},i.raise={});let s="on:"+e+":"+t;i.raise[t]=(...o)=>{this.listeners.forEach(r=>{r.eventId===s&&r.handler(o)})},i.on[t]=o=>{let r={handler:o,eventId:s};return this.listenersMap[s]=r,this.listeners.push(r),()=>{const a=this.listeners.indexOf(r);this.listeners.splice(a,1)}}}}class Qo{constructor(){E(this,"rowHeight")}createRow(e,t){e.classes=e.classes||"",e.contentHtml=e.contentHtml||void 0,e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const i=e.height||this.rowHeight;return{model:e,y:t,height:i,expanded:!0}}createRows(e){const t={y:0,result:[]};return this.createChildRows(e,t),t.result}createChildRows(e,t,i=null,s=0,o=[]){const r=[],l=[];return i&&(o=[...o,i]),e.forEach(a=>{const c=this.createRow(a,t.y);if(t.result.push(c),r.push(c),l.push(c),c.childLevel=s,c.parent=i,c.allParents=o,t.y+=c.height,a.children){const u=this.createChildRows(a.children,t,c,s+1,o);c.children=u.rows,c.allChildren=u.allRows,l.push(...u.allRows)}}),{rows:r,allRows:l}}}class Vo{constructor(e){E(this,"columnService");this.columnService=e}create(e){e.enableResizing=e.enableResizing===void 0?!0:e.enableResizing;const t=this.columnService.getPositionByDate(e.from),i=this.columnService.getPositionByDate(e.to);return{model:e,left:t,width:i-t,resizing:!1}}}class Zo{constructor(e){E(this,"taskStore");E(this,"oldReflections",[]);E(this,"newTasksAndReflections",[]);E(this,"taskSettings",new Map);E(this,"currentSelection",new Map);E(this,"selectedTasks",we({}));E(this,"dragOrResizeTriggered",e=>{for(const[t,i]of this.currentSelection.entries()){const s=new on(i.HTMLElement,this.taskSettings.get(t),i.offsetData);s.onmousedown(e),this.currentSelection.set(t,{...i,draggable:s})}window.addEventListener("mousemove",this.selectionDragOrResizing,!1),Fi(window,"mouseup",this.selectionDropped)});E(this,"selectionDragOrResizing",e=>{for(const[,t]of this.currentSelection.entries()){const{draggable:i}=t;i.onmousemove(e)}});E(this,"selectionDropped",e=>{window.removeEventListener("mousemove",this.selectionDragOrResizing,!1);for(const[,t]of this.currentSelection.entries()){const{draggable:i}=t;i.onmouseup(e)}this.oldReflections.length&&this.taskStore.deleteAll(this.oldReflections),this.newTasksAndReflections.length&&this.taskStore.upsertAll(this.newTasksAndReflections),this.newTasksAndReflections.splice(0),this.oldReflections.splice(0)});this.taskStore=e}selectSingle(e,t){this.currentSelection.has(e)||(this.unSelectTasks(),this.toggleSelection(e,t)),this.selectedTasks.set({[e]:!0})}toggleSelection(e,t){this.currentSelection.set(e,{HTMLElement:t,offsetData:void 0,draggable:void 0}),this.selectedTasks.update(i=>({...i,[e]:!i[e]}))}unSelectTasks(){this.selectedTasks.set({}),this.currentSelection.clear()}dispatchSelectionEvent(e,t){const i=this.taskSettings.get(e),s=i.getX(),o=i.getY(),r=i.getWidth();for(const[l,a]of this.currentSelection.entries())if(l!==e){const c=this.taskSettings.get(l);a.offsetData={offsetPos:{x:c.getX()-s,y:c.getY()-o},offsetWidth:c.getWidth()-r}}else a.offsetData={offsetPos:{x:null,y:null},offsetWidth:null};this.dragOrResizeTriggered(t)}}function Ko(n,e){return Ni(n,e,i=>i.left)}function Jo(n,e){return Ni(n,e,i=>i.from)}function $o(){const n={};return{onDelegatedEvent(e,t,i){n[e]||(n[e]={}),n[e][t]=i},offDelegatedEvent(e,t){delete n[e][t]},onEvent(e){const{type:t,target:i}=e,s=n[t];if(!s)return;let o,r=i;for(;r&&r!=e.currentTarget&&!(o=el(s,r));)r=r.parentElement;o&&s[o.attr]?s[o.attr](e,o.data,r):s.empty&&s.empty(e,null,r)}}}function el(n,e){let t;for(const i in n)if(t=e.getAttribute(i))return{attr:i,data:t}}class tl{format(e,t){const i=new Date(e);switch(t){case"H":return i.getHours()+"";case"HH":return kt(i.getHours());case"H:mm":return`${i.getHours()}:${kt(i.getMinutes())}`;case"hh:mm":return`${kt(i.getHours())}:${kt(i.getMinutes())}`;case"hh:mm:ss":return`${i.getHours()}:${kt(i.getMinutes())}:${kt(i.getSeconds())}`;case"dd/MM/yyyy":return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()}`;case"dd/MM/yyyy hh:mm":return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()} ${i.getHours()}:${i.getMinutes()}`;case"dd/MM/yyyy hh:mm:ss":return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()} ${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}`;case"YYYY":return`${i.getFullYear()}`;case"Q":return`${Math.floor(i.getMonth()/3+1)}`;case"[Q]Q":return`Q${Math.floor(i.getMonth()/3+1)}`;case"YYYY[Q]Q":return`${i.getFullYear()}Q${Math.floor(i.getMonth()/3+1)}`;case"MM":{let s=String(i.getMonth()+1);return s.length==1&&(s=`0${s}`),`${s}`}case"MMMM":{const s=i.toLocaleString("default",{month:"long"});return`${s.charAt(0).toUpperCase()}${s.substring(1)}`}case"MMMM - YYYY":{const s=i.toLocaleString("default",{month:"long"});return`${s.charAt(0).toUpperCase()}${s.substring(1)}-${i.getFullYear()}`}case"MMMM YYYY":{const s=i.toLocaleString("default",{month:"long"});return`${s.charAt(0).toUpperCase()}${s.substring(1)} ${i.getFullYear()}`}case"MMM":{const s=i.toLocaleString("default",{month:"short"});return`${s.charAt(0).toUpperCase()}${s.substring(1)}`}case"MMM - YYYY":{const s=i.toLocaleString("default",{month:"short"});return`${s.charAt(0).toUpperCase()}${s.substring(1)} - ${i.getFullYear()}`}case"MMM YYYY":{const s=i.toLocaleString("default",{month:"short"});return`${s.charAt(0).toUpperCase()}${s.substring(1)} ${i.getFullYear()}`}case"W":return`${ai(i)}`;case"WW":{const s=ai(i);return`${s.toString().length==1?"0":""}${s}`}default:return console.warn(`Date Format '${t}' is not supported, use another date adapter.`),`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()}`}}roundTo(e,t,i){const s=nl(t,i);return Math.round(e/s)*s}}function kt(n){let e=n.toString();for(let t=e.length;t<2;t++)e="0"+e;return e}function ai(n){n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())),n.setUTCDate(n.getUTCDate()+4-(n.getUTCDay()||7));const e=new Date(Date.UTC(n.getUTCFullYear(),0,1));return Math.ceil(((n.valueOf()-e.valueOf())/864e5+1)/7)}function nl(n,e){switch(n){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${n}`)}}function il(n,e){if(n.length){if(n.length===1){const t=n[0];t.yPos=0,t.intersectsWith=[],t.height=e.rowContentHeight,t.topDelta=t.yPos*t.height}n.sort(ol);for(const t of n){t.yPos=0,t.intersectsWith=[];for(const i of n)t!==i&&sl(t,i)&&t.intersectsWith.push(i)}for(const t of n){t.numYSlots=xi(t);for(let i=0;i<t.numYSlots;i++)if(!t.intersectsWith.some(s=>s.yPos===i)){t.yPos=i,t.height=e.rowContentHeight/t.numYSlots,t.topDelta=t.yPos*t.height;break}}}}function sl(n,e){return n.left+n.width>e.left&&n.left<e.left+e.width}function ol(n,e){return n.left-e.left||e.left+e.width-(n.left+n.width)}function xi(n,e=new Map){e.set(n,!0);let t=n.intersectsWith.length+1;for(const i of n.intersectsWith.filter(s=>!e.has(s))){const s=xi(i,e);s>t&&(t=s)}return t}var ll=`.sg-disable-transition.svelte-843l0i .sg-task,.sg-disable-transition.svelte-843l0i .sg-milestone{transition:transform 0s,\r
            background-color 0.2s,\r
            width 0s !important}.sg-view:not(:first-child){margin-left:5px}.sg-timeline.svelte-843l0i{flex:1 1 0%;display:flex;flex-direction:column;overflow-x:auto}.sg-gantt.svelte-843l0i{display:flex;width:100%;height:100%;position:relative}.sg-foreground.svelte-843l0i{box-sizing:border-box;overflow:hidden;top:0;left:0;position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}.sg-rows.svelte-843l0i{width:100%;box-sizing:border-box;overflow:hidden}.sg-timeline-body.svelte-843l0i{overflow:auto;flex:1 1 auto}.sg-header-scroller.svelte-843l0i{border-right:1px solid #efefef;overflow:hidden;position:relative}.content.svelte-843l0i{position:relative}*{box-sizing:border-box}`;_e(ll);function ci(n,e,t){const i=n.slice();return i[137]=e[t],i}function fi(n,e,t){const i=n.slice();return i[140]=e[t],i}function ui(n,e,t){const i=n.slice();return i[143]=e[t],i}function di(n,e,t){const i=n.slice();return i[146]=e[t],i}function hi(n,e,t){const i=n.slice();return i[143]=e[t],i}function gi(n,e,t){const i=n.slice();return i[137]=e[t],i}function mi(n){let e,t,i,s;const o=[{rowContainerHeight:n[19]},{paddingTop:n[20]},{paddingBottom:n[21]},{tableWidth:n[2]},n[51],{visibleRows:n[9]}];var r=n[137];function l(a,c){let u={};if(c!==void 0&&c[0]&3670532|c[1]&1048576)u=it(o,[c[0]&524288&&{rowContainerHeight:a[19]},c[0]&1048576&&{paddingTop:a[20]},c[0]&2097152&&{paddingBottom:a[21]},c[0]&4&&{tableWidth:a[2]},c[1]&1048576&&st(a[51]),c[0]&512&&{visibleRows:a[9]}]);else for(let b=0;b<o.length;b+=1)u=Ge(u,o[b]);return{props:u}}return r&&(e=tn(r,l(n)),e.$on("init",sn)),i=new jo({props:{x:n[2],container:n[12]}}),i.$on("resize",n[48]),{c(){e&&be(e.$$.fragment),t=ne(),be(i.$$.fragment)},m(a,c){e&&he(e,a,c),H(a,t,c),he(i,a,c),s=!0},p(a,c){if(c[0]&16&&r!==(r=a[137])){if(e){He();const b=e;x(b.$$.fragment,1,0,()=>{ge(b,1)}),We()}r?(e=tn(r,l(a,c)),e.$on("init",sn),be(e.$$.fragment),I(e.$$.fragment,1),he(e,t.parentNode,t)):e=null}else if(r){const b=c[0]&3670532|c[1]&1048576?it(o,[c[0]&524288&&{rowContainerHeight:a[19]},c[0]&1048576&&{paddingTop:a[20]},c[0]&2097152&&{paddingBottom:a[21]},c[0]&4&&{tableWidth:a[2]},c[1]&1048576&&st(a[51]),c[0]&512&&{visibleRows:a[9]}]):{};e.$set(b)}const u={};c[0]&4&&(u.x=a[2]),c[0]&4096&&(u.container=a[12]),i.$set(u)},i(a){s||(e&&I(e.$$.fragment,a),I(i.$$.fragment,a),s=!0)},o(a){e&&x(e.$$.fragment,a),x(i.$$.fragment,a),s=!1},d(a){a&&D(t),e&&ge(e,a),ge(i,a)}}}function wi(n,e){let t,i,s;const o=[e[143]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return i=new ho({props:r}),{key:n,first:null,c(){t=le(),be(i.$$.fragment),this.first=t},m(l,a){H(l,t,a),he(i,l,a),s=!0},p(l,a){e=l;const c=a[0]&16777216?it(o,[st(e[143])]):{};i.$set(c)},i(l){s||(I(i.$$.fragment,l),s=!0)},o(l){x(i.$$.fragment,l),s=!1},d(l){l&&D(t),ge(i,l)}}}function bi(n,e){let t,i,s;return i=new to({props:{row:e[146]}}),{key:n,first:null,c(){t=le(),be(i.$$.fragment),this.first=t},m(o,r){H(o,t,r),he(i,o,r),s=!0},p(o,r){e=o;const l={};r[0]&512&&(l.row=e[146]),i.$set(l)},i(o){s||(I(i.$$.fragment,o),s=!0)},o(o){x(i.$$.fragment,o),s=!1},d(o){o&&D(t),ge(i,o)}}}function pi(n,e){let t,i,s;const o=[e[143]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return i=new oo({props:r}),{key:n,first:null,c(){t=le(),be(i.$$.fragment),this.first=t},m(l,a){H(l,t,a),he(i,l,a),s=!0},p(l,a){e=l;const c=a[0]&16777216?it(o,[st(e[143])]):{};i.$set(c)},i(l){s||(I(i.$$.fragment,l),s=!0)},o(l){x(i.$$.fragment,l),s=!1},d(l){l&&D(t),ge(i,l)}}}function _i(n,e){let t,i,s;const o=[{model:e[140].model},{left:e[140].left},{width:e[140].width},{height:e[140].height},{top:e[140].top},e[140]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return i=new Ks({props:r}),{key:n,first:null,c(){t=le(),be(i.$$.fragment),this.first=t},m(l,a){H(l,t,a),he(i,l,a),s=!0},p(l,a){e=l;const c=a[0]&4194304?it(o,[{model:e[140].model},{left:e[140].left},{width:e[140].width},{height:e[140].height},{top:e[140].top},st(e[140])]):{};i.$set(c)},i(l){s||(I(i.$$.fragment,l),s=!0)},o(l){x(i.$$.fragment,l),s=!1},d(l){l&&D(t),ge(i,l)}}}function ki(n){let e,t,i;const s=[{paddingTop:n[20]},{paddingBottom:n[21]},{visibleRows:n[9]},n[51]];var o=n[137];function r(l,a){let c={};if(a!==void 0&&a[0]&3146240|a[1]&1048576)c=it(s,[a[0]&1048576&&{paddingTop:l[20]},a[0]&2097152&&{paddingBottom:l[21]},a[0]&512&&{visibleRows:l[9]},a[1]&1048576&&st(l[51])]);else for(let u=0;u<s.length;u+=1)c=Ge(c,s[u]);return{props:c}}return o&&(e=tn(o,r(n)),e.$on("init",sn)),{c(){e&&be(e.$$.fragment),t=le()},m(l,a){e&&he(e,l,a),H(l,t,a),i=!0},p(l,a){if(a[0]&32&&o!==(o=l[137])){if(e){He();const c=e;x(c.$$.fragment,1,0,()=>{ge(c,1)}),We()}o?(e=tn(o,r(l,a)),e.$on("init",sn),be(e.$$.fragment),I(e.$$.fragment,1),he(e,t.parentNode,t)):e=null}else if(o){const c=a[0]&3146240|a[1]&1048576?it(s,[a[0]&1048576&&{paddingTop:l[20]},a[0]&2097152&&{paddingBottom:l[21]},a[0]&512&&{visibleRows:l[9]},a[1]&1048576&&st(l[51])]):{};e.$set(c)}},i(l){i||(e&&I(e.$$.fragment,l),i=!0)},o(l){e&&x(e.$$.fragment,l),i=!1},d(l){l&&D(t),e&&ge(e,l)}}}function rl(n){let e,t,i,s,o,r,l,a,c=[],u=new Map,b,p,w,v,_,g,m,S,y=[],R=new Map,G,q,P=[],K=new Map,ee,N=[],re=new Map,Ae,ke,ve,se,ue,ye,j=$(n[4]),C=[];for(let d=0;d<j.length;d+=1)C[d]=mi(gi(n,j,d));const Q=d=>x(C[d],1,1,()=>{C[d]=null});l=new Po({props:{headers:n[1],ganttBodyColumns:n[17],ganttBodyUnit:n[0]}}),l.$on("dateSelected",n[50]);let oe=$(n[24]);const ze=d=>d[143].model.id;for(let d=0;d<oe.length;d+=1){let h=hi(n,oe,d),M=ze(h);u.set(M,c[d]=wi(M,h))}_=new Fo({props:{columns:n[17],columnStrokeColor:n[7],columnStrokeWidth:n[8],useCanvasColumns:n[6]}});let De=$(n[9]);const Ye=d=>d[146].model.id;for(let d=0;d<De.length;d+=1){let h=di(n,De,d),M=Ye(h);R.set(M,y[d]=bi(M,h))}let Pe=$(n[24]);const Oe=d=>d[143].model.id;for(let d=0;d<Pe.length;d+=1){let h=ui(n,Pe,d),M=Oe(h);K.set(M,P[d]=pi(M,h))}let Te=$(n[22]);const O=d=>d[140].model.id;for(let d=0;d<Te.length;d+=1){let h=fi(n,Te,d),M=O(h);re.set(M,N[d]=_i(M,h))}let te=$(n[5]),L=[];for(let d=0;d<te.length;d+=1)L[d]=ki(ci(n,te,d));const Ie=d=>x(L[d],1,1,()=>{L[d]=null});return{c(){e=B("div");for(let d=0;d<C.length;d+=1)C[d].c();t=ne(),i=B("div"),s=B("div"),o=B("div"),r=B("div"),be(l.$$.fragment),a=ne();for(let d=0;d<c.length;d+=1)c[d].c();p=ne(),w=B("div"),v=B("div"),be(_.$$.fragment),g=ne(),m=B("div"),S=B("div");for(let d=0;d<y.length;d+=1)y[d].c();G=ne(),q=B("div");for(let d=0;d<P.length;d+=1)P[d].c();ee=ne();for(let d=0;d<N.length;d+=1)N[d].c();Ae=ne();for(let d=0;d<L.length;d+=1)L[d].c();k(r,"class","header-container"),z(r,"width",n[11]+"px"),k(o,"class","sg-header-scroller svelte-843l0i"),k(s,"class","sg-header"),Yt(()=>n[111].call(s)),z(S,"transform","translateY("+n[20]+"px)"),k(m,"class","sg-rows svelte-843l0i"),z(m,"height",n[19]+"px"),k(q,"class","sg-foreground svelte-843l0i"),k(v,"class","content svelte-843l0i"),z(v,"width",n[11]+"px"),k(w,"class","sg-timeline-body svelte-843l0i"),Yt(()=>n[114].call(w)),F(w,"zooming",n[18]),k(i,"class","sg-timeline sg-view svelte-843l0i"),k(e,"class",ve="sg-gantt "+n[3]+" svelte-843l0i"),F(e,"sg-disable-transition",n[16])},m(d,h){H(d,e,h);for(let M=0;M<C.length;M+=1)C[M]&&C[M].m(e,null);A(e,t),A(e,i),A(i,s),A(s,o),A(o,r),he(l,r,null),A(r,a);for(let M=0;M<c.length;M+=1)c[M]&&c[M].m(r,null);n[110](s),b=Gn(s,n[111].bind(s)),A(i,p),A(i,w),A(w,v),he(_,v,null),A(v,g),A(v,m),A(m,S);for(let M=0;M<y.length;M+=1)y[M]&&y[M].m(S,null);n[112](m),A(v,G),A(v,q);for(let M=0;M<P.length;M+=1)P[M]&&P[M].m(q,null);A(q,ee);for(let M=0;M<N.length;M+=1)N[M]&&N[M].m(q,null);A(v,Ae);for(let M=0;M<L.length;M+=1)L[M]&&L[M].m(v,null);n[113](w),ke=Gn(w,n[114].bind(w)),n[115](e),se=!0,ue||(ye=[tt(n[47].call(null,o)),tt(n[46].call(null,w)),Le(w,"wheel",n[49]),Le(e,"mousedown",xn(n[45])),Le(e,"click",xn(n[45])),Le(e,"dblclick",n[45]),Le(e,"mouseover",n[45]),Le(e,"mouseleave",n[45])],ue=!0)},p(d,h){if(h[0]&3674644|h[1]&1179648){j=$(d[4]);let U;for(U=0;U<j.length;U+=1){const Ce=gi(d,j,U);C[U]?(C[U].p(Ce,h),I(C[U],1)):(C[U]=mi(Ce),C[U].c(),I(C[U],1),C[U].m(e,t))}for(He(),U=j.length;U<C.length;U+=1)Q(U);We()}const M={};h[0]&2&&(M.headers=d[1]),h[0]&131072&&(M.ganttBodyColumns=d[17]),h[0]&1&&(M.ganttBodyUnit=d[0]),l.$set(M),h[0]&16777216&&(oe=$(d[24]),He(),c=Pt(c,h,ze,1,d,oe,u,r,Wt,wi,null,hi),We()),(!se||h[0]&2048)&&z(r,"width",d[11]+"px");const Be={};if(h[0]&131072&&(Be.columns=d[17]),h[0]&128&&(Be.columnStrokeColor=d[7]),h[0]&256&&(Be.columnStrokeWidth=d[8]),h[0]&64&&(Be.useCanvasColumns=d[6]),_.$set(Be),h[0]&512&&(De=$(d[9]),He(),y=Pt(y,h,Ye,1,d,De,R,S,Wt,bi,null,di),We()),(!se||h[0]&1048576)&&z(S,"transform","translateY("+d[20]+"px)"),(!se||h[0]&524288)&&z(m,"height",d[19]+"px"),h[0]&16777216&&(Pe=$(d[24]),He(),P=Pt(P,h,Oe,1,d,Pe,K,q,Wt,pi,ee,ui),We()),h[0]&4194304&&(Te=$(d[22]),He(),N=Pt(N,h,O,1,d,Te,re,q,Wt,_i,null,fi),We()),h[0]&3146272|h[1]&1048576){te=$(d[5]);let U;for(U=0;U<te.length;U+=1){const Ce=ci(d,te,U);L[U]?(L[U].p(Ce,h),I(L[U],1)):(L[U]=ki(Ce),L[U].c(),I(L[U],1),L[U].m(v,null))}for(He(),U=te.length;U<L.length;U+=1)Ie(U);We()}(!se||h[0]&2048)&&z(v,"width",d[11]+"px"),(!se||h[0]&262144)&&F(w,"zooming",d[18]),(!se||h[0]&8&&ve!==(ve="sg-gantt "+d[3]+" svelte-843l0i"))&&k(e,"class",ve),(!se||h[0]&65544)&&F(e,"sg-disable-transition",d[16])},i(d){if(!se){for(let h=0;h<j.length;h+=1)I(C[h]);I(l.$$.fragment,d);for(let h=0;h<oe.length;h+=1)I(c[h]);I(_.$$.fragment,d);for(let h=0;h<De.length;h+=1)I(y[h]);for(let h=0;h<Pe.length;h+=1)I(P[h]);for(let h=0;h<Te.length;h+=1)I(N[h]);for(let h=0;h<te.length;h+=1)I(L[h]);se=!0}},o(d){C=C.filter(Boolean);for(let h=0;h<C.length;h+=1)x(C[h]);x(l.$$.fragment,d);for(let h=0;h<c.length;h+=1)x(c[h]);x(_.$$.fragment,d);for(let h=0;h<y.length;h+=1)x(y[h]);for(let h=0;h<P.length;h+=1)x(P[h]);for(let h=0;h<N.length;h+=1)x(N[h]);L=L.filter(Boolean);for(let h=0;h<L.length;h+=1)x(L[h]);se=!1},d(d){d&&D(e),nt(C,d),ge(l);for(let h=0;h<c.length;h+=1)c[h].d();n[110](null),b(),ge(_);for(let h=0;h<y.length;h+=1)y[h].d();n[112](null);for(let h=0;h<P.length;h+=1)P[h].d();for(let h=0;h<N.length;h+=1)N[h].d();nt(L,d),n[113](null),ke(),n[115](null),ue=!1,Fe(ye)}}}function vi(n){for(const e in n)if(n[e]==null)throw new Error(`"${e}" is not set`)}function Kt(n){return n instanceof Date?n.valueOf():n}function sn(n){}function al(n,e,t){const i=["rows","tasks","timeRanges","rowPadding","rowHeight","from","to","minWidth","fitWidth","classes","headers","zoomLevels","taskContent","tableWidth","resizeHandleWidth","onTaskButtonClick","dateAdapter","magnetUnit","magnetOffset","columnUnit","columnOffset","ganttTableModules","ganttBodyModules","reflectOnParentRows","reflectOnChildRows","useCanvasColumns","columnStrokeColor","columnStrokeWidth","highlightedDurations","highlightColor","taskElementHook","layout","columnService","api","taskFactory","rowFactory","dndManager","timeRangeFactory","utils","refreshTimeRanges","refreshTasks","getRowContainer","selectTask","unselectTasks","scrollToRow","scrollToTask","updateTask","updateTasks","updateRow","updateRows","getRow","getTask","getTasks"];let s=Nn(e,i),o,r,l,a,c,u,b,p,w,v,_,g,m,S,y,R,G,q,P,K,ee,N,re,Ae=[],ke=!1,{rows:ve}=e,{tasks:se=[]}=e,{timeRanges:ue=[]}=e;vi({rows:ve});let{rowPadding:ye=6}=e,{rowHeight:j=52}=e;const C=we(j);Y(n,C,f=>t(123,R=f));const Q=we(ye);Y(n,Q,f=>t(109,_=f));let{from:oe}=e,{to:ze}=e;vi({from:oe,to:ze});const De=we(Kt(oe));Y(n,De,f=>t(108,v=f));const Ye=we(Kt(ze));Y(n,Ye,f=>t(107,w=f));let{minWidth:Pe=800}=e,{fitWidth:Oe=!1}=e;const Te=we(Pe);Y(n,Te,f=>t(120,m=f));const O=we(Oe);Y(n,O,f=>t(119,g=f));let{classes:te=[]}=e,{headers:L=[{unit:"day",format:"MMMM Do"},{unit:"hour",format:"H:mm"}]}=e,{zoomLevels:Ie=[{headers:[{unit:"day",format:"DD.MM.YYYY"},{unit:"hour",format:"HH"}],minWidth:800,fitWidth:!0},{headers:[{unit:"hour",format:"ddd D/M, H A"},{unit:"minute",format:"mm",offset:15}],minWidth:5e3,fitWidth:!1}]}=e,{taskContent:d=null}=e,{tableWidth:h=240}=e,{resizeHandleWidth:M=10}=e,{onTaskButtonClick:Be=null}=e,{dateAdapter:U=new tl}=e,{magnetUnit:Ce="minute"}=e,{magnetOffset:je=15}=e,lt;Me(Ce,je);function Me(f,T){f&&T&&t(97,lt=mo(f,T))}let{columnUnit:qe="minute"}=e,{columnOffset:Qe=15}=e,{ganttTableModules:Ct=[]}=e,{ganttBodyModules:ae=[]}=e,{reflectOnParentRows:rt=!0}=e,{reflectOnChildRows:Ne=!1}=e,{useCanvasColumns:dt=!0}=e,{columnStrokeColor:ht="#efefef"}=e,{columnStrokeWidth:Ve=1}=e,{highlightedDurations:ln}=e,{highlightColor:rn="#6eb859"}=e,{taskElementHook:an=null}=e,{layout:cn="overlap"}=e;const St=we(null);Y(n,St,f=>t(25,P=f));const Ft=we(null);Y(n,Ft,f=>t(10,c=f));const Xt=we(null);Y(n,Xt,f=>t(23,G=f));const fn=yn([St,Te,O],([f,T,W])=>W&&f>T?f:T);Y(n,fn,f=>t(11,p=f));const Sn=Fs();Ht("dataStore",Sn);const{rowStore:gt,taskStore:at,timeRangeStore:Rn,allTasks:zn,allRows:Dn,allTimeRanges:Mn,rowTaskCache:En,draggingTaskCache:Hn}=Sn;Y(n,gt,f=>t(104,l=f)),Y(n,at,f=>t(102,o=f)),Y(n,zn,f=>t(118,b=f)),Y(n,Dn,f=>t(106,u=f)),Y(n,Mn,f=>t(24,q=f)),Y(n,En,f=>t(103,r=f)),Y(n,Hn,f=>t(105,a=f));const Ze={getColumnByDate(f){const T=Jo(Nt,f);return T[0]?T[0]:T[1]},getColumnByPosition(f){const T=Ko(Nt,f);return T[0]?T[0]:T[1]},getPositionByDate(f){if(!f)return null;const T=this.getColumnByDate(f),X=(f-T.from)/T.duration*T.width;return T.left+X},getDateByPosition(f){const T=this.getColumnByPosition(f);f=f-T.left;let W=T.duration/T.width*f;return T.from+W},roundTo(f){return Math.round(f/lt)*lt}};let un=!1;async function qi(){t(16,un=!0),await gn(),K.offsetHeight,t(16,un=!1)}let Nt;function Qi(f,T,W,X,V){f instanceof Date&&(f=f.valueOf()),T instanceof Date&&(T=T.valueOf());let J=[];const Ee=Xi(f.valueOf(),T.valueOf(),W,X,ln);let me=0,bt=0;return Ee.forEach(function(Ue){me=bt,bt=Cn(Ue.to,v,w,p),J.push({width:bt-me,from:Ue.from,to:Ue.to,left:me,duration:Ue.duration,...Ue.isHighlighted&&{bgHighlightColor:rn}})}),J}Ht("dimensions",{from:De,to:Ye,width:fn,visibleWidth:St,visibleHeight:Ft,headerHeight:Xt}),Ht("options",{dateAdapter:U,taskElementHook:an,taskContent:d,rowPadding:Q,rowHeight:C,resizeHandleWidth:M,reflectOnParentRows:rt,reflectOnChildRows:Ne,onTaskButtonClick:Be});const Rt=we(null);Y(n,Rt,f=>t(121,S=f));const zt=we(null);Y(n,zt,f=>t(122,y=f));const Wn={scrollables:Ae,hoveredRow:Rt,selectedRow:zt};Ht("gantt",Wn),vn(()=>{Object.assign(Wn,{rowContainer:re,mainContainer:N,mainHeaderContainer:ee}),ce.registerEvent("tasks","move"),ce.registerEvent("tasks","select"),ce.registerEvent("tasks","switchRow"),ce.registerEvent("tasks","moveEnd"),ce.registerEvent("tasks","change"),ce.registerEvent("tasks","changed"),ce.registerEvent("gantt","viewChanged"),ce.registerEvent("gantt","dateSelected"),ce.registerEvent("tasks","dblclicked"),ce.registerEvent("timeranges","clicked"),ce.registerEvent("timeranges","resized"),t(96,ke=!0)});const{onDelegatedEvent:Dt,offDelegatedEvent:xt,onEvent:Vi}=$o();Dt("mousedown","data-task-id",(f,T,W)=>{const X=T;Ui(f)&&!W.classList.contains("sg-task-reflected")&&(f.ctrlKey?Je.toggleSelection(X,W):Je.selectSingle(X,W),Je.dispatchSelectionEvent(X,f)),ce.tasks.raise.select(o.entities[X])}),Dt("mouseover","data-row-id",(f,T,W)=>{fe(Rt,S=T,S)}),Dt("click","data-row-id",(f,T,W)=>{if(Je.unSelectTasks(),y==T){fe(zt,y=null,y);return}fe(zt,y=T,y)}),Dt("dblclick","data-task-id",(f,T,W)=>{const X=T;ce.tasks.raise.dblclicked(o.entities[X],f)}),Dt("mouseleave","empty",(f,T,W)=>{fe(Rt,S=null,S)}),Ls(()=>{xt("click","data-task-id"),xt("click","data-row-id"),xt("mousedown","data-task-id"),xt("dblclick","data-task-id"),Je.unSelectTasks()});let dn=0;function Zi(f){const T=W=>{const{scrollTop:X,scrollLeft:V}=f;Ae.forEach(J=>{J.orientation==="horizontal"?J.node.scrollLeft=V:J.node.scrollTop=X}),t(98,dn=X)};return f.addEventListener("scroll",T),{destroy(){f.removeEventListener("scroll",T,!1)}}}function Ki(f){Ae.push({node:f,orientation:"horizontal"})}function Ji(f){t(2,h=f.detail.left)}let Ke=0,hn=!1;async function $i(f){if(f.ctrlKey){f.preventDefault();const T=Ke;if(f.deltaY>0?Ke=Math.max(Ke-1,0):Ke=Math.min(Ke+1,Ie.length-1),T!=Ke&&Ie[Ke]){const W={columnUnit:qe,columnOffset:Qe,minWidth:m,...Ie[Ke]},X=W.minWidth/p,V=N,J=yt(V,f),bt=(V.scrollLeft+J.x)*X-J.x+V.clientWidth/2;t(0,qe=W.columnUnit),t(52,Qe=W.columnOffset),fe(Te,m=W.minWidth,m),W.headers&&t(1,L=W.headers),W.fitWidth&&fe(O,g=W.fitWidth,g),ce.gantt.raise.viewChanged(),t(18,hn=!0),await gn(),V.scrollLeft=bt,t(18,hn=!1)}}}function es(f){fe(De,v=f.detail.from,v),fe(Ye,w=f.detail.to,w),ce.gantt.raise.dateSelected({from:v,to:w})}function ts(f){const T=mt.createRows(f);gt.addAll(T)}async function ns(f){await gn();const T=[],W={rowPadding:_};f.forEach(X=>{const V=$e.createTask(X),J=l.entities[V.model.resourceId];V.reflections=[],Ne&&J.allChildren&&J.allChildren.forEach(Ee=>{const me=nn(V,Ee,W);V.reflections.push(me.model.id),T.push(me)}),rt&&J.allParents.length>0&&J.allParents.forEach(Ee=>{const me=nn(V,Ee,W);V.reflections.push(me.model.id),T.push(me)}),T.push(V)}),at.addAll(T)}function is(f){const T=f.map(W=>Bn.create(W));Rn.addAll(T)}const ce=new qo,Je=new Zo(at),$e=new Xs(Ze),mt=new Qo,Pn=new ao(gt),Bn=new Vo(Ze),de=new Co;Ht("services",{utils:de,api:ce,dndManager:Pn,selectionManager:Je,columnService:Ze});function Ln(){Rn._update(({ids:f,entities:T})=>(f.forEach(W=>{const X=T[W],V=Ze.getPositionByDate(X.model.from)|0,J=Ze.getPositionByDate(X.model.to)|0;X.left=V,X.width=J-V}),{ids:f,entities:T}))}function An(){b.forEach(f=>{const T=Ze.getPositionByDate(f.model.from)|0,W=Ze.getPositionByDate(f.model.to)|0;f.left=T,f.width=W-T}),at.refresh()}function ss(){return re}function os(f){o.entities[f]&&Je.selectSingle(f,K.querySelector(`data-task-id='${f}'`))}function ls(){Je.unSelectTasks()}function rs(f,T="auto"){const{scrollTop:W,clientHeight:X}=N,V=u.findIndex(Ee=>Ee.model.id==f);if(V===-1)return;const J=V*j;J<W&&N.scrollTo({top:J,behavior:T}),J>W+X&&N.scrollTo({top:J+j-X,behavior:T})}function as(f,T="auto"){const{scrollLeft:W,scrollTop:X,clientWidth:V,clientHeight:J}=N,Ee=o.entities[f];if(!Ee)return;const me=Ee.left,Ue=u.findIndex(ys=>ys.model.id==Ee.model.resourceId)*j,Et={top:void 0,left:void 0,behavior:T};me<W&&(Et.left=me),me>W+V&&(Et.left=me+Ee.width-V),Ue<X&&(Et.top=Ue),Ue>X+J&&(Et.top=Ue+j-J),N.scrollTo(Et)}function cs(f){const T=$e.createTask(f);at.upsert(T)}function fs(f){const T=f.map(W=>$e.createTask(W));at.upsertAll(T)}function us(f){const T=mt.createRow(f,null);gt.upsert(T)}function ds(f){const T=f.map(W=>mt.createRow(W,null));gt.upsertAll(T)}function hs(f){return l.entities[f]}function gs(f){return o.entities[f]}function ms(f){return r[f]?r[f].map(T=>o.entities[T]):null}let wt=[],Yn,Mt,Gt,On=0,In=0,jt=[],Un;function ws(f){ct[f?"unshift":"push"](()=>{ee=f,t(13,ee)})}function bs(){G=this.clientHeight,Xt.set(G)}function ps(f){ct[f?"unshift":"push"](()=>{re=f,t(15,re)})}function _s(f){ct[f?"unshift":"push"](()=>{N=f,t(14,N)})}function ks(){c=this.clientHeight,Ft.set(c),P=this.clientWidth,St.set(P)}function vs(f){ct[f?"unshift":"push"](()=>{K=f,t(12,K)})}return n.$$set=f=>{e=Ge(Ge({},e),Hs(f)),t(51,s=Nn(e,i)),"rows"in f&&t(56,ve=f.rows),"tasks"in f&&t(57,se=f.tasks),"timeRanges"in f&&t(58,ue=f.timeRanges),"rowPadding"in f&&t(59,ye=f.rowPadding),"rowHeight"in f&&t(60,j=f.rowHeight),"from"in f&&t(61,oe=f.from),"to"in f&&t(62,ze=f.to),"minWidth"in f&&t(63,Pe=f.minWidth),"fitWidth"in f&&t(64,Oe=f.fitWidth),"classes"in f&&t(3,te=f.classes),"headers"in f&&t(1,L=f.headers),"zoomLevels"in f&&t(65,Ie=f.zoomLevels),"taskContent"in f&&t(66,d=f.taskContent),"tableWidth"in f&&t(2,h=f.tableWidth),"resizeHandleWidth"in f&&t(67,M=f.resizeHandleWidth),"onTaskButtonClick"in f&&t(68,Be=f.onTaskButtonClick),"dateAdapter"in f&&t(69,U=f.dateAdapter),"magnetUnit"in f&&t(70,Ce=f.magnetUnit),"magnetOffset"in f&&t(71,je=f.magnetOffset),"columnUnit"in f&&t(0,qe=f.columnUnit),"columnOffset"in f&&t(52,Qe=f.columnOffset),"ganttTableModules"in f&&t(4,Ct=f.ganttTableModules),"ganttBodyModules"in f&&t(5,ae=f.ganttBodyModules),"reflectOnParentRows"in f&&t(72,rt=f.reflectOnParentRows),"reflectOnChildRows"in f&&t(73,Ne=f.reflectOnChildRows),"useCanvasColumns"in f&&t(6,dt=f.useCanvasColumns),"columnStrokeColor"in f&&t(7,ht=f.columnStrokeColor),"columnStrokeWidth"in f&&t(8,Ve=f.columnStrokeWidth),"highlightedDurations"in f&&t(74,ln=f.highlightedDurations),"highlightColor"in f&&t(75,rn=f.highlightColor),"taskElementHook"in f&&t(76,an=f.taskElementHook),"layout"in f&&t(77,cn=f.layout)},n.$$.update=()=>{if(n.$$.dirty[1]&33554432|n.$$.dirty[3]&8&&ke&&ts(ve),n.$$.dirty[1]&67108864|n.$$.dirty[3]&8&&ke&&ns(se),n.$$.dirty[1]&134217728|n.$$.dirty[3]&8&&ke&&is(ue),n.$$.dirty[1]&536870912&&fe(C,R=j,R),n.$$.dirty[1]&268435456&&fe(Q,_=ye,_),n.$$.dirty[1]&1073741824&&fe(De,v=Kt(oe),v),n.$$.dirty[2]&1&&fe(Ye,w=Kt(ze),w),n.$$.dirty[2]&6&&(fe(Te,m=Pe,m),fe(O,g=Oe,g)),n.$$.dirty[2]&768&&Me(Ce,je),n.$$.dirty[0]&2049|n.$$.dirty[1]&2097152|n.$$.dirty[3]&49152&&(t(17,Nt=Qi(v,w,qe,Qe)),qi(),Ln(),An()),n.$$.dirty[3]&67584&&(t(53,$e.rowPadding=_,$e),t(53,$e.rowEntities=l.entities,$e)),n.$$.dirty[1]&536870912&&t(54,mt.rowHeight=j,mt),n.$$.dirty[0]&2048|n.$$.dirty[2]&896|n.$$.dirty[3]&49168&&(t(55,de.from=v,de),t(55,de.to=w,de),t(55,de.width=p,de),t(55,de.magnetOffset=je,de),t(55,de.magnetUnit=Ce,de),t(55,de.magnetDuration=lt,de),t(55,de.dateAdapter=U,de)),n.$$.dirty[3]&8192&&t(99,wt=u.filter(f=>!f.hidden)),n.$$.dirty[1]&536870912|n.$$.dirty[3]&64&&t(19,Yn=wt.length*j),n.$$.dirty[1]&536870912|n.$$.dirty[3]&32&&t(100,Mt=Math.floor(dn/j)),n.$$.dirty[0]&1024|n.$$.dirty[1]&536870912|n.$$.dirty[3]&192&&t(101,Gt=Math.min(Mt+Math.ceil(c/j),wt.length-1)),n.$$.dirty[1]&536870912|n.$$.dirty[3]&128&&t(20,On=Mt*j),n.$$.dirty[1]&536870912|n.$$.dirty[3]&320&&t(21,In=(wt.length-Gt-1)*j),n.$$.dirty[3]&448&&t(9,jt=wt.slice(Mt,Gt+1)),n.$$.dirty[0]&512|n.$$.dirty[3]&5632){const f=[],T={};for(let W=0;W<jt.length;W++){const X=jt[W];if(r[X.model.id])for(let V=0;V<r[X.model.id].length;V++){const J=r[X.model.id][V];f.push(o.entities[J]),T[J]=!0}}for(const W in a)T[W]||(f.push(o.entities[W]),T[W]=!0);t(22,Un=f)}if(n.$$.dirty[1]&805306368|n.$$.dirty[2]&32768|n.$$.dirty[3]&3584&&cn==="pack")for(const f of l.ids){const T=r[f];if(T){const W=T.map(X=>o.entities[X]);il(W,{rowContentHeight:j-ye*2})}}},[qe,L,h,te,Ct,ae,dt,ht,Ve,jt,c,p,K,ee,N,re,un,Nt,hn,Yn,On,In,Un,G,q,P,C,Q,De,Ye,Te,O,St,Ft,Xt,fn,gt,at,zn,Dn,Mn,En,Hn,Rt,zt,Vi,Zi,Ki,Ji,$i,es,s,Qe,$e,mt,de,ve,se,ue,ye,j,oe,ze,Pe,Oe,Ie,d,M,Be,U,Ce,je,rt,Ne,ln,rn,an,cn,Ze,ce,Pn,Bn,Ln,An,ss,os,ls,rs,as,cs,fs,us,ds,hs,gs,ms,ke,lt,dn,wt,Mt,Gt,o,r,l,a,u,w,v,_,ws,bs,ps,_s,ks,vs]}class cl extends Re{constructor(e){super(),Se(this,e,al,rl,pe,{rows:56,tasks:57,timeRanges:58,rowPadding:59,rowHeight:60,from:61,to:62,minWidth:63,fitWidth:64,classes:3,headers:1,zoomLevels:65,taskContent:66,tableWidth:2,resizeHandleWidth:67,onTaskButtonClick:68,dateAdapter:69,magnetUnit:70,magnetOffset:71,columnUnit:0,columnOffset:52,ganttTableModules:4,ganttBodyModules:5,reflectOnParentRows:72,reflectOnChildRows:73,useCanvasColumns:6,columnStrokeColor:7,columnStrokeWidth:8,highlightedDurations:74,highlightColor:75,taskElementHook:76,layout:77,columnService:78,api:79,taskFactory:53,rowFactory:54,dndManager:80,timeRangeFactory:81,utils:55,refreshTimeRanges:82,refreshTasks:83,getRowContainer:84,selectTask:85,unselectTasks:86,scrollToRow:87,scrollToTask:88,updateTask:89,updateTasks:90,updateRow:91,updateRows:92,getRow:93,getTask:94,getTasks:95},null,[-1,-1,-1,-1,-1])}get columnService(){return this.$$.ctx[78]}get api(){return this.$$.ctx[79]}get taskFactory(){return this.$$.ctx[53]}get rowFactory(){return this.$$.ctx[54]}get dndManager(){return this.$$.ctx[80]}get timeRangeFactory(){return this.$$.ctx[81]}get utils(){return this.$$.ctx[55]}get refreshTimeRanges(){return this.$$.ctx[82]}get refreshTasks(){return this.$$.ctx[83]}get getRowContainer(){return this.$$.ctx[84]}get selectTask(){return this.$$.ctx[85]}get unselectTasks(){return this.$$.ctx[86]}get scrollToRow(){return this.$$.ctx[87]}get scrollToTask(){return this.$$.ctx[88]}get updateTask(){return this.$$.ctx[89]}get updateTasks(){return this.$$.ctx[90]}get updateRow(){return this.$$.ctx[91]}get updateRows(){return this.$$.ctx[92]}get getRow(){return this.$$.ctx[93]}get getTask(){return this.$$.ctx[94]}get getTasks(){return this.$$.ctx[95]}}var fl=".sg-tree-expander.svelte-1tk4vqn{cursor:pointer;min-width:1.4em;display:flex;justify-content:center;align-items:center}.sg-cell-inner.svelte-1tk4vqn{display:flex}";_e(fl);function yi(n){let e,t,i;function s(l,a){return l[0].expanded?dl:ul}let o=s(n),r=o(n);return{c(){e=B("div"),r.c(),k(e,"class","sg-tree-expander svelte-1tk4vqn")},m(l,a){H(l,e,a),r.m(e,null),t||(i=Le(e,"click",n[1]),t=!0)},p(l,a){o!==(o=s(l))&&(r.d(1),r=o(l),r&&(r.c(),r.m(e,null)))},d(l){l&&D(e),r.d(),t=!1,i()}}}function ul(n){let e;return{c(){e=B("i"),k(e,"class","fas fa-angle-right")},m(t,i){H(t,e,i)},d(t){t&&D(e)}}}function dl(n){let e;return{c(){e=B("i"),k(e,"class","fas fa-angle-down")},m(t,i){H(t,e,i)},d(t){t&&D(e)}}}function hl(n){let e,t,i,s=n[0].children&&yi(n);const o=n[3].default,r=zs(o,n,n[2],null);return{c(){e=B("div"),s&&s.c(),t=ne(),r&&r.c(),k(e,"class","sg-cell-inner svelte-1tk4vqn"),z(e,"padding-left",n[0].childLevel*3+"em")},m(l,a){H(l,e,a),s&&s.m(e,null),A(e,t),r&&r.m(e,null),i=!0},p(l,[a]){l[0].children?s?s.p(l,a):(s=yi(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),r&&r.p&&(!i||a&4)&&Ms(r,o,l,l[2],i?Ds(o,l[2],a,null):Es(l[2]),null),(!i||a&1)&&z(e,"padding-left",l[0].childLevel*3+"em")},i(l){i||(I(r,l),i=!0)},o(l){x(r,l),i=!1},d(l){l&&D(e),s&&s.d(),r&&r.d(l)}}}function gl(n,e,t){let{$$slots:i={},$$scope:s}=e,{row:o}=e;const r=Ut();function l(){o.expanded?r("rowCollapsed",{row:o}):r("rowExpanded",{row:o})}return n.$$set=a=>{"row"in a&&t(0,o=a.row),"$$scope"in a&&t(2,s=a.$$scope)},[o,l,s,i]}class ml extends Re{constructor(e){super(),Se(this,e,gl,hl,pe,{row:0})}}var wl=".sg-table-row.svelte-oze9vk{display:inline-flex;min-width:100%;align-items:stretch;position:relative;font-weight:400;font-size:14px}.sg-table-cell.svelte-oze9vk{border-left:1px solid #eee}.sg-table-body-cell.svelte-oze9vk{border-bottom:#efefef 1px solid;background-color:#fff;font-weight:bold}.sg-resource-image.svelte-oze9vk{width:2.4em;height:2.4em;border-radius:50%;margin-right:0.6em;background:#047c69}.sg-resource-info.svelte-oze9vk{flex:1;height:100%;display:flex;flex-direction:row;align-items:center}.sg-table-icon.svelte-oze9vk{margin-right:0.5em}";_e(wl);function Ti(n,e,t){const i=n.slice();return i[12]=e[t],i}function bl(n){let e,t,i=n[1].model.iconClass&&Ci(n);function s(l,a){return l[1].model.headerHtml?yl:l[12].renderer?vl:l[12].type==="resourceInfo"?kl:_l}let o=s(n),r=o(n);return{c(){i&&i.c(),e=ne(),r.c(),t=le()},m(l,a){i&&i.m(l,a),H(l,e,a),r.m(l,a),H(l,t,a)},p(l,a){l[1].model.iconClass?i?i.p(l,a):(i=Ci(l),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),o===(o=s(l))&&r?r.p(l,a):(r.d(1),r=o(l),r&&(r.c(),r.m(t.parentNode,t)))},i:Z,o:Z,d(l){l&&(D(e),D(t)),i&&i.d(l),r.d(l)}}}function pl(n){let e,t;return e=new ml({props:{row:n[1],$$slots:{default:[Rl]},$$scope:{ctx:n}}}),e.$on("rowCollapsed",n[8]),e.$on("rowExpanded",n[9]),{c(){be(e.$$.fragment)},m(i,s){he(e,i,s),t=!0},p(i,s){const o={};s&2&&(o.row=i[1]),s&32771&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){x(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Ci(n){let e,t,i;return{c(){e=B("div"),t=B("i"),k(t,"class",i=en(n[1].model.iconClass)+" svelte-oze9vk"),k(e,"class","sg-table-icon svelte-oze9vk")},m(s,o){H(s,e,o),A(e,t)},p(s,o){o&2&&i!==(i=en(s[1].model.iconClass)+" svelte-oze9vk")&&k(t,"class",i)},d(s){s&&D(e)}}}function _l(n){let e=n[1].model[n[12].property]+"",t;return{c(){t=Xe(e)},m(i,s){H(i,t,s)},p(i,s){s&3&&e!==(e=i[1].model[i[12].property]+"")&&ot(t,e)},d(i){i&&D(t)}}}function kl(n){let e,t,i,s,o=n[1].model[n[12].property]+"",r;return{c(){e=B("img"),i=ne(),s=B("div"),r=Xe(o),k(e,"class","sg-resource-image svelte-oze9vk"),Xn(e.src,t=n[1].model.imageSrc)||k(e,"src",t),k(e,"alt",""),k(s,"class","sg-resource-title")},m(l,a){H(l,e,a),H(l,i,a),H(l,s,a),A(s,r)},p(l,a){a&2&&!Xn(e.src,t=l[1].model.imageSrc)&&k(e,"src",t),a&3&&o!==(o=l[1].model[l[12].property]+"")&&ot(r,o)},d(l){l&&(D(e),D(i),D(s))}}}function vl(n){let e,t=n[12].renderer(n[1])+"",i;return{c(){e=new ut(!1),i=le(),e.a=i},m(s,o){e.m(t,s,o),H(s,i,o)},p(s,o){o&3&&t!==(t=s[12].renderer(s[1])+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function yl(n){let e,t=n[1].model.headerHtml+"",i;return{c(){e=new ut(!1),i=le(),e.a=i},m(s,o){e.m(t,s,o),H(s,i,o)},p(s,o){o&2&&t!==(t=s[1].model.headerHtml+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function Si(n){let e,t,i;return{c(){e=B("div"),t=B("i"),k(t,"class",i=en(n[1].model.iconClass)+" svelte-oze9vk"),k(e,"class","sg-table-icon svelte-oze9vk")},m(s,o){H(s,e,o),A(e,t)},p(s,o){o&2&&i!==(i=en(s[1].model.iconClass)+" svelte-oze9vk")&&k(t,"class",i)},d(s){s&&D(e)}}}function Tl(n){let e=n[1].model[n[12].property]+"",t;return{c(){t=Xe(e)},m(i,s){H(i,t,s)},p(i,s){s&3&&e!==(e=i[1].model[i[12].property]+"")&&ot(t,e)},d(i){i&&D(t)}}}function Cl(n){let e,t=n[12].renderer(n[1])+"",i;return{c(){e=new ut(!1),i=le(),e.a=i},m(s,o){e.m(t,s,o),H(s,i,o)},p(s,o){o&3&&t!==(t=s[12].renderer(s[1])+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function Sl(n){let e,t=n[1].model.headerHtml+"",i;return{c(){e=new ut(!1),i=le(),e.a=i},m(s,o){e.m(t,s,o),H(s,i,o)},p(s,o){o&2&&t!==(t=s[1].model.headerHtml+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function Rl(n){let e,t,i=n[1].model.iconClass&&Si(n);function s(l,a){return l[1].model.headerHtml?Sl:l[12].renderer?Cl:Tl}let o=s(n),r=o(n);return{c(){i&&i.c(),e=ne(),r.c(),t=le()},m(l,a){i&&i.m(l,a),H(l,e,a),r.m(l,a),H(l,t,a)},p(l,a){l[1].model.iconClass?i?i.p(l,a):(i=Si(l),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),o===(o=s(l))&&r?r.p(l,a):(r.d(1),r=o(l),r&&(r.c(),r.m(t.parentNode,t)))},d(l){l&&(D(e),D(t)),i&&i.d(l),r.d(l)}}}function Ri(n){let e,t,i,s,o;const r=[pl,bl],l=[];function a(c,u){return c[12].type=="tree"?0:1}return t=a(n),i=l[t]=r[t](n),{c(){e=B("div"),i.c(),s=ne(),k(e,"class","sg-table-body-cell sg-table-cell svelte-oze9vk"),z(e,"width",n[12].width+"px")},m(c,u){H(c,e,u),l[t].m(e,null),A(e,s),o=!0},p(c,u){let b=t;t=a(c),t===b?l[t].p(c,u):(He(),x(l[b],1,1,()=>{l[b]=null}),We(),i=l[t],i?i.p(c,u):(i=l[t]=r[t](c),i.c()),I(i,1),i.m(e,s)),(!o||u&1)&&z(e,"width",c[12].width+"px")},i(c){o||(I(i),o=!0)},o(c){x(i),o=!1},d(c){c&&D(e),l[t].d()}}}function zl(n){let e,t,i,s,o=$(n[0]),r=[];for(let a=0;a<o.length;a+=1)r[a]=Ri(Ti(n,o,a));const l=a=>x(r[a],1,1,()=>{r[a]=null});return{c(){e=B("div");for(let a=0;a<r.length;a+=1)r[a].c();k(e,"data-row-id",t=n[1].model.id),z(e,"height",n[2]+"px"),k(e,"class",i="sg-table-row "+(n[1].model.classes||"")+" svelte-oze9vk"),F(e,"sg-row-expanded",n[1].expanded),F(e,"sg-hover",n[3]==n[1].model.id),F(e,"sg-selected",n[4]==n[1].model.id)},m(a,c){H(a,e,c);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);s=!0},p(a,[c]){if(c&3){o=$(a[0]);let u;for(u=0;u<o.length;u+=1){const b=Ti(a,o,u);r[u]?(r[u].p(b,c),I(r[u],1)):(r[u]=Ri(b),r[u].c(),I(r[u],1),r[u].m(e,null))}for(He(),u=o.length;u<r.length;u+=1)l(u);We()}(!s||c&2&&t!==(t=a[1].model.id))&&k(e,"data-row-id",t),(!s||c&4)&&z(e,"height",a[2]+"px"),(!s||c&2&&i!==(i="sg-table-row "+(a[1].model.classes||"")+" svelte-oze9vk"))&&k(e,"class",i),(!s||c&2)&&F(e,"sg-row-expanded",a[1].expanded),(!s||c&10)&&F(e,"sg-hover",a[3]==a[1].model.id),(!s||c&18)&&F(e,"sg-selected",a[4]==a[1].model.id)},i(a){if(!s){for(let c=0;c<o.length;c+=1)I(r[c]);s=!0}},o(a){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)x(r[c]);s=!1},d(a){a&&D(e),nt(r,a)}}}function Dl(n,e,t){let i,s,o,{headers:r=null}=e,{row:l=null}=e;const{rowHeight:a}=ie("options");Y(n,a,v=>t(2,i=v));const{hoveredRow:c,selectedRow:u}=ie("gantt");Y(n,c,v=>t(3,s=v)),Y(n,u,v=>t(4,o=v));const b=Ut();vn(()=>{l.model.expanded==!1&&b("rowCollapsed",{row:l})});function p(v){pn.call(this,n,v)}function w(v){pn.call(this,n,v)}return n.$$set=v=>{"headers"in v&&t(0,r=v.headers),"row"in v&&t(1,l=v.row)},n.$$.update=()=>{n.$$.dirty&2&&l.parent&&l.childLevel*3},[r,l,i,s,o,a,c,u,p,w]}class Ml extends Re{constructor(e){super(),Se(this,e,Dl,zl,pe,{headers:0,row:1})}}var El=".bottom-scrollbar-visible.svelte-afbyi7{padding-bottom:17px}.sg-table.svelte-afbyi7{overflow-x:auto;display:flex;flex-direction:column}.sg-table-scroller.svelte-afbyi7{width:100%;border-bottom:1px solid #efefef;overflow-y:hidden}.sg-table-header.svelte-afbyi7{display:flex;align-items:stretch;overflow:hidden;border-bottom:#efefef 1px solid;background-color:#fbfbfb}.sg-table-body.svelte-afbyi7{display:flex;flex:1 1 0;width:100%;overflow-y:hidden}.sg-table-header-cell.svelte-afbyi7{font-size:14px;font-weight:400}.sg-table-cell{white-space:nowrap;overflow:hidden;display:flex;align-items:center;flex-shrink:0;padding:0 0.5em;height:100%}.sg-table-cell:last-child{flex-grow:1}";_e(El);function zi(n,e,t){const i=n.slice();return i[32]=e[t],i}function Di(n,e,t){const i=n.slice();return i[35]=e[t],i}function Mi(n){let e,t=n[35].title+"",i,s;return{c(){e=B("div"),i=Xe(t),s=ne(),k(e,"class","sg-table-header-cell sg-table-cell svelte-afbyi7"),z(e,"width",n[35].width+"px")},m(o,r){H(o,e,r),A(e,i),A(e,s)},p(o,r){r[0]&32&&t!==(t=o[35].title+"")&&ot(i,t),r[0]&32&&z(e,"width",o[35].width+"px")},d(o){o&&D(e)}}}function Ei(n){let e,t;return e=new Ml({props:{row:n[32],headers:n[5]}}),e.$on("rowExpanded",n[17]),e.$on("rowCollapsed",n[18]),{c(){be(e.$$.fragment)},m(i,s){he(e,i,s),t=!0},p(i,s){const o={};s[0]&16&&(o.row=i[32]),s[0]&32&&(o.headers=i[5]),e.$set(o)},i(i){t||(I(e.$$.fragment,i),t=!0)},o(i){x(e.$$.fragment,i),t=!1},d(i){ge(e,i)}}}function Hl(n){let e,t,i,s,o,r,l,a,c,u=$(n[5]),b=[];for(let _=0;_<u.length;_+=1)b[_]=Mi(Di(n,u,_));let p=$(n[4]),w=[];for(let _=0;_<p.length;_+=1)w[_]=Ei(zi(n,p,_));const v=_=>x(w[_],1,1,()=>{w[_]=null});return{c(){e=B("div"),t=B("div");for(let _=0;_<b.length;_+=1)b[_].c();i=ne(),s=B("div"),o=B("div"),r=B("div");for(let _=0;_<w.length;_+=1)w[_].c();k(t,"class","sg-table-header svelte-afbyi7"),z(t,"height",n[8]+"px"),k(r,"class","sg-table-rows svelte-afbyi7"),z(r,"padding-top",n[1]+"px"),z(r,"padding-bottom",n[2]+"px"),z(r,"height",n[3]+"px"),k(o,"class","sg-table-scroller svelte-afbyi7"),k(s,"class","sg-table-body svelte-afbyi7"),F(s,"bottom-scrollbar-visible",n[7]),k(e,"class","sg-table sg-view svelte-afbyi7"),z(e,"width",n[0]+"px")},m(_,g){H(_,e,g),A(e,t);for(let m=0;m<b.length;m+=1)b[m]&&b[m].m(t,null);n[22](t),A(e,i),A(e,s),A(s,o),A(o,r);for(let m=0;m<w.length;m+=1)w[m]&&w[m].m(r,null);l=!0,a||(c=tt(n[16].call(null,o)),a=!0)},p(_,g){if(g[0]&32){u=$(_[5]);let m;for(m=0;m<u.length;m+=1){const S=Di(_,u,m);b[m]?b[m].p(S,g):(b[m]=Mi(S),b[m].c(),b[m].m(t,null))}for(;m<b.length;m+=1)b[m].d(1);b.length=u.length}if((!l||g[0]&256)&&z(t,"height",_[8]+"px"),g[0]&393264){p=$(_[4]);let m;for(m=0;m<p.length;m+=1){const S=zi(_,p,m);w[m]?(w[m].p(S,g),I(w[m],1)):(w[m]=Ei(S),w[m].c(),I(w[m],1),w[m].m(r,null))}for(He(),m=p.length;m<w.length;m+=1)v(m);We()}(!l||g[0]&2)&&z(r,"padding-top",_[1]+"px"),(!l||g[0]&4)&&z(r,"padding-bottom",_[2]+"px"),(!l||g[0]&8)&&z(r,"height",_[3]+"px"),(!l||g[0]&128)&&F(s,"bottom-scrollbar-visible",_[7]),(!l||g[0]&1)&&z(e,"width",_[0]+"px")},i(_){if(!l){for(let g=0;g<p.length;g+=1)I(w[g]);l=!0}},o(_){w=w.filter(Boolean);for(let g=0;g<w.length;g+=1)x(w[g]);l=!1},d(_){_&&D(e),nt(b,_),n[22](null),nt(w,_),a=!1,c()}}}function Gi(n){n.forEach(e=>{e.children&&Gi(e.children),e.hidden=!0})}function ji(n,e=!1){n.forEach(t=>{t.children&&ji(t.children,!t.expanded),t.hidden=e})}function Wl(n,e,t){let i,s,o,r,l,a,c;const u=Ut();let{tableWidth:b}=e,{paddingTop:p}=e,{paddingBottom:w}=e,{rowContainerHeight:v}=e,{visibleRows:_}=e,{tableHeaders:g=[{title:"Name",property:"label",width:100}]}=e;const{from:m,to:S,width:y,visibleWidth:R,headerHeight:G}=ie("dimensions");Y(n,y,C=>t(21,s=C)),Y(n,R,C=>t(20,i=C)),Y(n,G,C=>t(8,c=C));const{rowPadding:q,rowHeight:P}=ie("options");Y(n,q,C=>t(23,o=C)),Y(n,P,C=>t(26,a=C));const{rowStore:K,taskStore:ee}=ie("dataStore");Y(n,K,C=>t(25,l=C)),Y(n,ee,C=>t(24,r=C));const{scrollables:N}=ie("gantt");vn(()=>{u("init",{module:this})});let re;function Ae(C){N.push({node:C,orientation:"vertical"});function Q(oe){t(6,re.scrollLeft=C.scrollLeft,re)}return C.addEventListener("scroll",Q),{destroy(){C.removeEventListener("scroll",Q)}}}let ke;function ve(C){const Q=C.detail.row;Q.expanded=!0,Q.children&&ji(Q.children),ue()}function se(C){const Q=C.detail.row;Q.expanded=!1,Q.children&&Gi(Q.children),ue()}function ue(){let C=0;l.ids.forEach(Q=>{l.entities[Q].hidden||(fe(K,l.entities[Q].y=C,l),C+=a)}),r.ids.forEach(Q=>{const oe=r.entities[Q],ze=l.entities[oe.model.resourceId];fe(ee,r.entities[Q].top=ze.y+o,r)})}let ye;function j(C){ct[C?"unshift":"push"](()=>{re=C,t(6,re)})}return n.$$set=C=>{"tableWidth"in C&&t(0,b=C.tableWidth),"paddingTop"in C&&t(1,p=C.paddingTop),"paddingBottom"in C&&t(2,w=C.paddingBottom),"rowContainerHeight"in C&&t(3,v=C.rowContainerHeight),"visibleRows"in C&&t(4,_=C.visibleRows),"tableHeaders"in C&&t(5,g=C.tableHeaders)},n.$$.update=()=>{if(n.$$.dirty[0]&32){let C=0;g.forEach(Q=>{C+=Q.width}),t(19,ke=C)}n.$$.dirty[0]&3670017&&t(7,ye=s>i&&ke<=b)},[b,p,w,v,_,g,re,ye,c,y,R,G,q,P,K,ee,Ae,ve,se,ke,i,s,j]}class Pl extends Re{constructor(e){super(),Se(this,e,Wl,Hl,pe,{tableWidth:0,paddingTop:1,paddingBottom:2,rowContainerHeight:3,visibleRows:4,tableHeaders:5},null,[-1,-1])}}var jl=Pl,Bl=".sg-dependency.svelte-12syssu{position:absolute;width:100%;height:100%}.arrow.svelte-12syssu{position:absolute;left:0px;pointer-events:none}.select-area.svelte-12syssu{pointer-events:visible;position:absolute}";_e(Bl);function Hi(n){let e,t,i,s;return{c(){e=B("div"),t=Jt("svg"),i=Jt("path"),s=Jt("path"),k(i,"class","select-area svelte-12syssu"),k(i,"d",n[6]),k(i,"stroke",n[1]),k(i,"stroke-width",n[2]),k(i,"fill","transparent"),k(s,"d",n[5]),k(s,"fill",n[1]),k(t,"class","arrow svelte-12syssu"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"shape-rendering","crispEdges"),k(t,"height","100%"),k(t,"width","100%"),k(e,"class","sg-dependency svelte-12syssu"),z(e,"left","0"),z(e,"top","0"),k(e,"data-dependency-id",n[0])},m(o,r){H(o,e,r),A(e,t),A(t,i),A(t,s)},p(o,r){r&64&&k(i,"d",o[6]),r&2&&k(i,"stroke",o[1]),r&4&&k(i,"stroke-width",o[2]),r&32&&k(s,"d",o[5]),r&2&&k(s,"fill",o[1]),r&1&&k(e,"data-dependency-id",o[0])},d(o){o&&D(e)}}}function Ll(n){let e,t=(!n[3]&&!n[4]||n[3]!==n[4])&&Hi(n);return{c(){t&&t.c(),e=le()},m(i,s){t&&t.m(i,s),H(i,e,s)},p(i,[s]){!i[3]&&!i[4]||i[3]!==i[4]?t?t.p(i,s):(t=Hi(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Z,o:Z,d(i){i&&D(e),t&&t.d(i)}}}const xe=12,et=5;function Al(n,e,t){let i,s;const{rowStore:o,taskStore:r}=ie("dataStore");Y(n,o,S=>t(13,i=S)),Y(n,r,S=>t(14,s=S));let{id:l}=e,{fromId:a}=e,{toId:c}=e,{stroke:u="red"}=e,{strokeWidth:b=2}=e,p,w,v,_,g,m;return n.$$set=S=>{"id"in S&&t(0,l=S.id),"fromId"in S&&t(9,a=S.fromId),"toId"in S&&t(10,c=S.toId),"stroke"in S&&t(1,u=S.stroke),"strokeWidth"in S&&t(2,b=S.strokeWidth)},n.$$.update=()=>{if(n.$$.dirty&32344){t(11,v=s.entities[a]),t(3,_=i.entities[v.model.resourceId].hidden),t(12,g=s.entities[c]),t(4,m=i.entities[g.model.resourceId].hidden);let S=v.top+v.height/2,y=v.left+v.width,R=g.top+g.height/2,G=g.left,q=G-y,P=R-S;_?(t(6,w=`M${G} ${R}`),y+xe>=G&&S!=R?t(6,w+=`L ${G+1.5-xe} ${R}`):t(6,w+=`L ${G+1.5-q/2} ${R}`),t(6,w+="m -2 -2 a 2 2 0 1 1 0 4 a 2 2 0 1 1 0 -4"),t(5,p=`M${g.left-et}  ${g.top+g.height/2-et} 
                            L${g.left} ${g.top+g.height/2} 
                            L${g.left-et} ${g.top+g.height/2+et} Z`)):m?(t(6,w=`M${y} ${S}`),y+xe>=G&&S!=R?t(6,w+=`L ${y+1.5+xe} ${S}`):t(6,w+=`L ${y+1.5+q/2} ${S}`),t(6,w+="m -2 -2 a 2 2 0 1 1 0 4 a 2 2 0 1 1 0 -4"),t(5,p="")):!_&&!m&&(t(6,w=`M${y} ${S}`),y+xe>=G&&S!=R?t(6,w+=`L ${y+xe} ${S} 
                            L ${y+xe} ${S+P/2}
                            L ${G-xe} ${S+P/2}
                            L ${G-xe} ${R}
                            L ${G-2} ${R}`):t(6,w+=`L ${y+q/2} ${S} 
                            L ${y+q/2} ${R}
                            L ${G-2} ${R}`),t(5,p=`M${g.left-et} ${g.top+g.height/2-et} 
                            L${g.left} ${g.top+g.height/2} 
                            L${g.left-et} ${g.top+g.height/2+et} Z`))}},[l,u,b,_,m,p,w,o,r,a,c,v,g,i,s]}class Yl extends Re{constructor(e){super(),Se(this,e,Al,Ll,pe,{id:0,fromId:9,toId:10,stroke:1,strokeWidth:2})}}var Ol=".dependency-container.svelte-epxabx{position:absolute;width:100%;height:100%;pointer-events:none;top:0;float:left;overflow:hidden;z-index:0}";_e(Ol);function Wi(n,e,t){const i=n.slice();return i[7]=e[t],i}function Pi(n,e){let t,i,s;const o=[e[7]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return i=new Yl({props:r}),{key:n,first:null,c(){t=le(),be(i.$$.fragment),this.first=t},m(l,a){H(l,t,a),he(i,l,a),s=!0},p(l,a){e=l;const c=a&1?it(o,[st(e[7])]):{};i.$set(c)},i(l){s||(I(i.$$.fragment,l),s=!0)},o(l){x(i.$$.fragment,l),s=!1},d(l){l&&D(t),ge(i,l)}}}function Il(n){let e,t=[],i=new Map,s,o=$(n[0]);const r=l=>l[7].id;for(let l=0;l<o.length;l+=1){let a=Wi(n,o,l),c=r(a);i.set(c,t[l]=Pi(c,a))}return{c(){e=B("div");for(let l=0;l<t.length;l+=1)t[l].c();k(e,"class","dependency-container svelte-epxabx")},m(l,a){H(l,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);s=!0},p(l,[a]){a&1&&(o=$(l[0]),He(),t=Pt(t,a,r,1,l,o,i,e,Wt,Pi,null,Wi),We())},i(l){if(!s){for(let a=0;a<o.length;a+=1)I(t[a]);s=!0}},o(l){for(let a=0;a<t.length;a+=1)x(t[a]);s=!1},d(l){l&&D(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Ul(n,e,t){let i,s;const{visibleHeight:o}=ie("dimensions");Y(n,o,u=>t(5,i=u));const{taskStore:r}=ie("dataStore");Y(n,r,u=>t(6,s=u));let{paddingTop:l}=e,{dependencies:a=[]}=e,c=[];return n.$$set=u=>{"paddingTop"in u&&t(3,l=u.paddingTop),"dependencies"in u&&t(4,a=u.dependencies)},n.$$.update=()=>{if(n.$$.dirty&120){const u=[];for(let b=0;b<a.length;b++){const p=a[b],w=s.entities,v=w[p.fromId],_=w[p.toId];v&&_&&Math.min(v.top,_.top)<=l+i&&Math.max(v.top,_.top)>=l&&u.push(p)}t(0,c=u)}},[c,o,r,l,a,i,s]}class Fl extends Re{constructor(e){super(),Se(this,e,Ul,Il,pe,{paddingTop:3,dependencies:4})}}const ql=Fl,Xl={enabled:!0,elementContent:()=>{const n=document.createElement("div");return n.innerHTML="New Task",Object.assign(n.style,{position:"absolute",background:"#eee",padding:"0.5em 1em",fontSize:"12px",pointerEvents:"none"}),n}};class Ql{constructor(e,t){E(this,"draggable");E(this,"element");E(this,"options");this.options=Object.assign({},Xl,t),this.draggable=new on(e,{onDrag:this.onDrag.bind(this),dragAllowed:()=>this.options.enabled,resizeAllowed:!1,onDrop:this.onDrop.bind(this),container:document.body,getX:i=>i.pageX,getY:i=>i.pageY,getWidth:()=>0})}onDrag({x:e,y:t}){this.element||(this.element=this.options.elementContent(),document.body.appendChild(this.element),this.options.dragging=!0),this.element.style.top=t+"px",this.element.style.left=e+"px"}onDrop(e){var s,o,r,l;const t=this.options.gantt,i=t.dndManager.getTarget("row",e.mouseEvent);if(i){const a=yt(t.getRowContainer(),e.mouseEvent),c=t.utils.getDateByPosition(a.x);(o=(s=this.options).onsuccess)==null||o.call(s,i,c,t)}else(l=(r=this.options).onfail)==null||l.call(r);document.body.removeChild(this.element),this.options.dragging=!1,this.element=null}}class Vl{constructor(e){E(this,"moment");this.moment=e}format(e,t){return this.moment(e).format(t)}roundTo(e,t,i){const s=this.moment(e);return Nl(s,i,t),s.valueOf()}}const Bi={hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function Nl(n,e,t,i="round"){e===1&&t==="day"&&(e=24,t="hours"),Bi[t]&&(t=Bi[t]);const s={hours:24,minutes:60,seconds:60,milliseconds:1e3};s[t]||console.warn(`Rounding dates by ${t} is not supported`);let o=0,r=!1,l=1,a;for(const c in s)c===t?(o=n.get(t),a=s[c],r=!0):r&&(l*=s[c],o+=n.get(c)/l,n.set(c,0));return o=Math[i](o/e)*e,o=Math.min(o,a),n.set(t,o),n}const Zl=cl;export{Vl as M,jl as S,Zl as a,ql as b,Ql as c,Gl as g};

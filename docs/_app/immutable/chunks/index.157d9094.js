var vs=Object.defineProperty;var ys=(n,e,t)=>e in n?vs(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var M=(n,e,t)=>(ys(n,typeof e!="symbol"?e+"":e,t),t);const Ul=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function K(){}function Ge(n,e){for(const t in e)n[t]=e[t];return n}function Bi(n){return n()}function Un(){return Object.create(null)}function Xe(n){n.forEach(Bi)}function Yt(n){return typeof n=="function"}function ve(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let qt;function Xn(n,e){return n===e?!0:(qt||(qt=document.createElement("a")),qt.href=e,n===qt.href)}function Ts(n){return Object.keys(n).length===0}function pn(n,...e){if(n==null){for(const i of e)i(void 0);return K}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Cs(n){let e;return pn(n,t=>e=t)(),e}function A(n,e,t){n.$$.on_destroy.push(pn(e,t))}function Ss(n,e,t,i){if(n){const s=Li(n,e,t,i);return n[0](s)}}function Li(n,e,t,i){return n[1]&&i?Ge(t.ctx.slice(),n[1](i(e))):t.ctx}function Rs(n,e,t,i){if(n[2]&&i){const s=n[2](i(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],r=Math.max(e.dirty.length,s.length);for(let l=0;l<r;l+=1)o[l]=e.dirty[l]|s[l];return o}return e.dirty|s}return e.dirty}function zs(n,e,t,i,s,o){if(s){const r=Li(e,t,i,o);n.p(r,s)}}function Ds(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function Ms(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function Fn(n,e){const t={};e=new Set(e);for(const i in n)!e.has(i)&&i[0]!=="$"&&(t[i]=n[i]);return t}function en(n){return n??""}function ue(n,e,t){return n.set(t),e}function tt(n){return n&&Yt(n.destroy)?n.destroy:K}function L(n,e){n.appendChild(e)}function E(n,e,t){n.insertBefore(e,t||null)}function D(n){n.parentNode&&n.parentNode.removeChild(n)}function nt(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function W(n){return document.createElement(n)}function Jt(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Fe(n){return document.createTextNode(n)}function se(){return Fe(" ")}function re(){return Fe("")}function Ae(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function Nn(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function _(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Es(n){return Array.from(n.childNodes)}function ot(n,e){e=""+e,n.data!==e&&(n.data=e)}function z(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,i?"important":"")}let Qt;function Hs(){if(Qt===void 0){Qt=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Qt=!0}}return Qt}function xn(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const i=W("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=Hs();let o;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Ae(window,"message",r=>{r.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{o=Ae(i.contentWindow,"resize",e),e()}),L(n,i),()=>{(s||o&&i.contentWindow)&&o(),D(i)}}function U(n,e,t){n.classList.toggle(e,!!t)}function Ps(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}class ut{constructor(e=!1){M(this,"is_svg",!1);M(this,"e");M(this,"n");M(this,"t");M(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,i=null){this.e||(this.is_svg?this.e=Jt(t.nodeName):this.e=W(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)E(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(D)}}function tn(n,e){return new n(e)}let At;function Bt(n){At=n}function It(){if(!At)throw new Error("Function called outside component initialization");return At}function _n(n){It().$$.on_mount.push(n)}function Ws(n){It().$$.on_destroy.push(n)}function Ut(){const n=It();return(e,t,{cancelable:i=!1}={})=>{const s=n.$$.callbacks[e];if(s){const o=Ps(e,t,{cancelable:i});return s.slice().forEach(r=>{r.call(n,o)}),!o.defaultPrevented}return!0}}function Ht(n,e){return It().$$.context.set(n,e),e}function oe(n){return It().$$.context.get(n)}function wn(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const _t=[],at=[];let vt=[];const Gn=[],Ai=Promise.resolve();let bn=!1;function Oi(){bn||(bn=!0,Ai.then(Yi))}function dn(){return Oi(),Ai}function Ot(n){vt.push(n)}const hn=new Set;let wt=0;function Yi(){if(wt!==0)return;const n=At;do{try{for(;wt<_t.length;){const e=_t[wt];wt++,Bt(e),Bs(e.$$)}}catch(e){throw _t.length=0,wt=0,e}for(Bt(null),_t.length=0,wt=0;at.length;)at.pop()();for(let e=0;e<vt.length;e+=1){const t=vt[e];hn.has(t)||(hn.add(t),t())}vt.length=0}while(_t.length);for(;Gn.length;)Gn.pop()();bn=!1,hn.clear(),Bt(n)}function Bs(n){if(n.fragment!==null){n.update(),Xe(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ot)}}function Ls(n){const e=[],t=[];vt.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),vt=e}const $t=new Set;let ct;function Pe(){ct={r:0,c:[],p:ct}}function We(){ct.r||Xe(ct.c),ct=ct.p}function Y(n,e){n&&n.i&&($t.delete(n),n.i(e))}function F(n,e,t,i){if(n&&n.o){if($t.has(n))return;$t.add(n),ct.c.push(()=>{$t.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function te(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Pt(n,e){F(n,1,1,()=>{e.delete(n.key)})}function Wt(n,e,t,i,s,o,r,l,a,c,f,w){let k=n.length,m=o.length,b=k;const p={};for(;b--;)p[n[b].key]=b;const d=[],v=new Map,C=new Map,y=[];for(b=m;b--;){const B=w(s,o,b),J=t(B);let ee=r.get(J);ee?i&&y.push(()=>ee.p(B,e)):(ee=c(J,B),ee.c()),v.set(J,d[b]=ee),J in p&&C.set(J,Math.abs(b-p[J]))}const R=new Set,j=new Set;function x(B){Y(B,1),B.m(l,f),r.set(B.key,B),f=B.first,m--}for(;k&&m;){const B=d[m-1],J=n[k-1],ee=B.key,X=J.key;B===J?(f=B.first,k--,m--):v.has(X)?!r.has(ee)||R.has(ee)?x(B):j.has(X)?k--:C.get(ee)>C.get(X)?(j.add(ee),x(B)):(R.add(X),k--):(a(J,r),k--)}for(;k--;){const B=n[k];v.has(B.key)||a(B,r)}for(;m;)x(d[m-1]);return Xe(y),d}function it(n,e){const t={},i={},s={$$scope:1};let o=n.length;for(;o--;){const r=n[o],l=e[o];if(l){for(const a in r)a in l||(i[a]=1);for(const a in l)s[a]||(t[a]=l[a],s[a]=1);n[o]=l}else for(const a in r)s[a]=1}for(const r in i)r in t||(t[r]=void 0);return t}function st(n){return typeof n=="object"&&n!==null?n:{}}function ke(n){n&&n.c()}function ge(n,e,t){const{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),Ot(()=>{const o=n.$$.on_mount.map(Bi).filter(Yt);n.$$.on_destroy?n.$$.on_destroy.push(...o):Xe(o),n.$$.on_mount=[]}),s.forEach(Ot)}function me(n,e){const t=n.$$;t.fragment!==null&&(Ls(t.after_update),Xe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function As(n,e){n.$$.dirty[0]===-1&&(_t.push(n),Oi(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Ce(n,e,t,i,s,o,r=null,l=[-1]){const a=At;Bt(n);const c=n.$$={fragment:null,ctx:[],props:o,update:K,not_equal:s,bound:Un(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Un(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let f=!1;if(c.ctx=t?t(n,e.props||{},(w,k,...m)=>{const b=m.length?m[0]:k;return c.ctx&&s(c.ctx[w],c.ctx[w]=b)&&(!c.skip_bound&&c.bound[w]&&c.bound[w](b),f&&As(n,w)),k}):[],c.update(),f=!0,Xe(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const w=Es(e.target);c.fragment&&c.fragment.l(w),w.forEach(D)}else c.fragment&&c.fragment.c();e.intro&&Y(n.$$.fragment),ge(n,e.target,e.anchor),Yi()}Bt(a)}class Se{constructor(){M(this,"$$");M(this,"$$set")}$destroy(){me(this,1),this.$destroy=K}$on(e,t){if(!Yt(t))return K;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!Ts(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Os="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Os);const bt=[];function Ys(n,e){return{subscribe:_e(n,e).subscribe}}function _e(n,e=K){let t;const i=new Set;function s(l){if(ve(n,l)&&(n=l,t)){const a=!bt.length;for(const c of i)c[1](),bt.push(c,n);if(a){for(let c=0;c<bt.length;c+=2)bt[c][0](bt[c+1]);bt.length=0}}}function o(l){s(l(n))}function r(l,a=K){const c=[l,a];return i.add(c),i.size===1&&(t=e(s,o)||K),l(n),()=>{i.delete(c),i.size===0&&t&&(t(),t=null)}}return{set:s,update:o,subscribe:r}}function kn(n,e,t){const i=!Array.isArray(n),s=i?[n]:n;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Ys(t,(r,l)=>{let a=!1;const c=[];let f=0,w=K;const k=()=>{if(f)return;w();const b=e(i?c[0]:c,r,l);o?r(b):w=Yt(b)?b:K},m=s.map((b,p)=>pn(b,d=>{c[p]=d,f&=~(1<<p),a&&k()},()=>{f|=1<<p}));return a=!0,k(),function(){Xe(m),w(),a=!1}})}function gn(){const{subscribe:n,set:e,update:t}=_e({ids:[],entities:{}});return{set:e,_update:t,subscribe:n,add:i=>t(({ids:s,entities:o})=>({ids:[...s,i.model.id],entities:{...o,[i.model.id]:i}})),delete:i=>t(s=>{const{[i]:o,...r}=s.entities;return{ids:s.ids.filter(l=>l!==i),entities:r}}),deleteAll:i=>t(s=>{const o={...s.entities},r=new Set(i);for(let l=0;l<s.ids.length;l++)r.has(s.ids[l])&&delete o[s.ids[l]];return{ids:s.ids.filter(l=>!r.has(l)),entities:o}}),update:i=>t(({ids:s,entities:o})=>({ids:s,entities:{...o,[i.model.id]:i}})),upsert:i=>t(({ids:s,entities:o})=>({ids:s.indexOf(i.model.id)!==-1?s:[...s,i.model.id],entities:{...o,[i.model.id]:i}})),upsertAll:i=>t(s=>{const o={...s.entities},r=[...s.ids];for(let l=0;l<i.length;l++)r.indexOf(i[l].model.id)===-1&&r.push(i[l].model.id),o[i[l].model.id]=i[l];return{ids:r,entities:o}}),addAll:i=>{const s=[],o={};for(let r=0;r<i.length;r++)s.push(i[r].model.id),o[i[r].model.id]=i[r];e({ids:s,entities:o})},refresh:()=>t(i=>({...i}))}}function mn(n){return kn(n,({ids:e,entities:t})=>{const i=[];for(let s=0;s<e.length;s++)i.push(t[e[s]]);return i})}function Is(){const n=gn(),e=gn(),t=gn(),i=mn(n),s=mn(e),o=mn(t),r=kn(i,a=>{const c={};for(let f=0;f<a.length;f++){const w=a[f];c[w.model.resourceId]||(c[w.model.resourceId]=[]),c[w.model.resourceId].push(w.model.id)}return c}),l=_e({});return{taskStore:n,rowStore:e,timeRangeStore:t,allTasks:i,allRows:s,allTimeRanges:o,rowTaskCache:r,draggingTaskCache:l}}class Us{constructor(e){M(this,"columnService");M(this,"rowPadding");M(this,"rowEntities");this.columnService=e}createTask(e){e.amountDone=e.amountDone||0,e.classes=e.classes||"",e.from=e.from||null,e.to=e.to||null,e.label=e.label||void 0,e.html=e.html||void 0,e.showButton=e.showButton||!1,e.buttonClasses=e.buttonClasses||"",e.buttonHtml=e.buttonHtml||"",e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const t=this.columnService.getPositionByDate(e.from)|0,i=this.columnService.getPositionByDate(e.to)|0;return{model:e,left:t,width:i-t,height:this.getHeight(e),top:this.getPosY(e),reflections:[]}}createTasks(e){return e.map(t=>this.createTask(t))}row(e){return this.rowEntities[e]}getHeight(e){return this.row(e.resourceId).height-2*this.rowPadding}getPosY(e){return this.row(e.resourceId).y+this.rowPadding}}function nn(n,e,t){const i=`reflected-task-${n.model.id}-${e.model.id}`,s={...n.model,resourceId:e.model.id,id:i,enableDragging:!1};return{...n,model:s,top:e.y+t.rowPadding,reflected:!0,reflectedOnParent:!1,reflectedOnChild:!0,originalId:n.model.id}}function Ii(n){return n.which===1}function kt(n,e){const t=n.getBoundingClientRect(),i=e.clientX-t.left,s=e.clientY-t.top;return{x:i,y:s}}function Ui(n,e,t,i,s){n.addEventListener(e,function o(){n.removeEventListener(e,o,s),t.apply(this,arguments,i)})}function Lt(n,e=document.body){e.style.cursor=n}function vn(n){return n?typeof n=="string"?n:Array.isArray(n)?n.join(" "):"":""}function Xs(n,e){let t=!1;return function(){t||(n.apply(null,arguments),t=!0,setTimeout(function(){t=!1},e))}}function ye(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(!n||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var Fs=`.sg-label-bottom.svelte-17pnuv4.svelte-17pnuv4{position:absolute;top:calc(100% + 10px);color:#888}.debug.svelte-17pnuv4.svelte-17pnuv4{position:absolute;top:-10px;right:0;font-size:8px;color:black}.sg-task.svelte-17pnuv4.svelte-17pnuv4{position:absolute;border-radius:2px;white-space:nowrap;transition:background-color 0.2s,
            opacity 0.2s;pointer-events:all}.sg-task-background.svelte-17pnuv4.svelte-17pnuv4{position:absolute;height:100%;top:0}.sg-task-content.svelte-17pnuv4.svelte-17pnuv4{position:absolute;height:100%;top:0;padding-left:14px;font-size:14px;display:flex;align-items:center;justify-content:flex-start;user-select:none}.sg-task.svelte-17pnuv4.svelte-17pnuv4:not(.moving){transition:left 0.2s, top 0.2s,
            transform 0.2s,
            background-color 0.2s,
            width 0.2s}.sg-task--sticky.svelte-17pnuv4.svelte-17pnuv4:not(.moving){transition:left 0.2s, top 0.2s,
            transform 0.2s,
            background-color 0.2s,
            width 0.2s}.sg-task--sticky.svelte-17pnuv4>.sg-task-content.svelte-17pnuv4{position:sticky;left:0;max-width:100px}.sg-task.moving.svelte-17pnuv4.svelte-17pnuv4{z-index:10000;opacity:0.5}.sg-task.resize-enabled.svelte-17pnuv4.svelte-17pnuv4:hover::before{content:'';width:4px;height:50%;top:25%;position:absolute;border-style:solid;border-color:rgba(255, 255, 255, 0.5);cursor:ew-resize;margin-left:3px;left:0;border-width:0 1px;z-index:1}.sg-task.resize-enabled.svelte-17pnuv4.svelte-17pnuv4:hover::after{content:'';width:4px;height:50%;top:25%;position:absolute;border-style:solid;border-color:rgba(255, 255, 255, 0.5);cursor:ew-resize;margin-right:3px;right:0;border-width:0 1px;z-index:1}.sg-task-reflected.svelte-17pnuv4.svelte-17pnuv4{opacity:0.5}.sg-task-background.svelte-17pnuv4.svelte-17pnuv4{background:rgba(0, 0, 0, 0.2)}.sg-task{color:white;background:rgb(116, 191, 255)}.sg-task:hover{background:rgb(98, 161, 216)}.sg-task.selected{background:rgb(69, 112, 150)}.sg-milestone.svelte-17pnuv4.svelte-17pnuv4{width:20px !important;min-width:40px;margin-left:-20px}.sg-task.sg-milestone.svelte-17pnuv4.svelte-17pnuv4{background:transparent}.sg-milestone.svelte-17pnuv4 .sg-milestone__diamond.svelte-17pnuv4{position:relative}.sg-milestone.svelte-17pnuv4 .sg-milestone__diamond.svelte-17pnuv4:before{position:absolute;top:0;left:50%;content:' ';height:28px;width:28px;transform-origin:0 0;transform:rotate(45deg)}.sg-milestone__diamond:before{background:rgb(116, 191, 255)}`;ye(Fs);function jn(n){let e;return{c(){e=W("div"),_(e,"class","sg-milestone__diamond svelte-17pnuv4")},m(t,i){E(t,e,i)},d(t){t&&D(e)}}}function qn(n){let e;return{c(){e=W("div"),_(e,"class","sg-task-background svelte-17pnuv4"),z(e,"width",n[0].amountDone+"%")},m(t,i){E(t,e,i)},p(t,i){i[0]&1&&z(e,"width",t[0].amountDone+"%")},d(t){t&&D(e)}}}function Ns(n){let e=n[0].label+"",t;return{c(){t=Fe(e)},m(i,s){E(i,t,s)},p(i,s){s[0]&1&&e!==(e=i[0].label+"")&&ot(t,e)},d(i){i&&D(t)}}}function xs(n){let e,t=n[12](n[0])+"",i;return{c(){e=new ut(!1),i=re(),e.a=i},m(s,o){e.m(t,s,o),E(s,i,o)},p(s,o){o[0]&1&&t!==(t=s[12](s[0])+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function Gs(n){let e,t=n[0].html+"",i;return{c(){e=new ut(!1),i=re(),e.a=i},m(s,o){e.m(t,s,o),E(s,i,o)},p(s,o){o[0]&1&&t!==(t=s[0].html+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function Qn(n){let e,t=n[0].buttonHtml+"",i,s,o;return{c(){e=W("span"),_(e,"class",i="sg-task-button "+n[0].buttonClasses+" svelte-17pnuv4"),_(e,"role","button"),_(e,"tabindex","0")},m(r,l){E(r,e,l),e.innerHTML=t,s||(o=Ae(e,"click",n[17]),s=!0)},p(r,l){l[0]&1&&t!==(t=r[0].buttonHtml+"")&&(e.innerHTML=t),l[0]&1&&i!==(i="sg-task-button "+r[0].buttonClasses+" svelte-17pnuv4")&&_(e,"class",i)},d(r){r&&D(e),s=!1,o()}}}function Vn(n){let e,t=n[0].labelBottom+"",i;return{c(){e=W("label"),i=Fe(t),_(e,"class","sg-label-bottom svelte-17pnuv4")},m(s,o){E(s,e,o),L(e,i)},p(s,o){o[0]&1&&t!==(t=s[0].labelBottom+"")&&ot(i,t)},d(s){s&&D(e)}}}function js(n){let e,t,i,s,o,r,l,a,c,f,w,k=n[0].type==="milestone"&&jn(),m=n[0].amountDone&&qn(n);function b(y,R){return y[0].html?Gs:y[12]?xs:Ns}let p=b(n),d=p(n),v=n[0].showButton&&Qn(n),C=n[0].labelBottom&&Vn(n);return{c(){e=W("div"),k&&k.c(),t=se(),m&&m.c(),i=se(),s=W("div"),d.c(),o=se(),v&&v.c(),r=se(),C&&C.c(),_(s,"class","sg-task-content svelte-17pnuv4"),_(e,"data-task-id",l=n[0].id),_(e,"class",a="sg-task "+n[6]+" svelte-17pnuv4"),z(e,"width",n[5].width+"px"),z(e,"height",n[1]+"px"),z(e,"left",n[5].x+"px"),z(e,"top",n[5].y+"px"),U(e,"sg-milestone",n[0].type==="milestone"),U(e,"moving",n[3]||n[4]),U(e,"animating",Zn),U(e,"sg-task-reflected",n[2]),U(e,"sg-task-selected",n[8][n[0].id]),U(e,"resize-enabled",n[7]),U(e,"sg-task--sticky",n[0].stickyLabel)},m(y,R){E(y,e,R),k&&k.m(e,null),L(e,t),m&&m.m(e,null),L(e,i),L(e,s),d.m(s,null),L(s,o),v&&v.m(s,null),L(e,r),C&&C.m(e,null),f||(w=[tt(n[15].call(null,e)),tt(c=n[16].call(null,e,n[0]))],f=!0)},p(y,R){y[0].type==="milestone"?k||(k=jn(),k.c(),k.m(e,t)):k&&(k.d(1),k=null),y[0].amountDone?m?m.p(y,R):(m=qn(y),m.c(),m.m(e,i)):m&&(m.d(1),m=null),p===(p=b(y))&&d?d.p(y,R):(d.d(1),d=p(y),d&&(d.c(),d.m(s,o))),y[0].showButton?v?v.p(y,R):(v=Qn(y),v.c(),v.m(s,null)):v&&(v.d(1),v=null),y[0].labelBottom?C?C.p(y,R):(C=Vn(y),C.c(),C.m(e,null)):C&&(C.d(1),C=null),R[0]&1&&l!==(l=y[0].id)&&_(e,"data-task-id",l),R[0]&64&&a!==(a="sg-task "+y[6]+" svelte-17pnuv4")&&_(e,"class",a),R[0]&32&&z(e,"width",y[5].width+"px"),R[0]&2&&z(e,"height",y[1]+"px"),R[0]&32&&z(e,"left",y[5].x+"px"),R[0]&32&&z(e,"top",y[5].y+"px"),c&&Yt(c.update)&&R[0]&1&&c.update.call(null,y[0]),R[0]&65&&U(e,"sg-milestone",y[0].type==="milestone"),R[0]&88&&U(e,"moving",y[3]||y[4]),R[0]&64&&U(e,"animating",Zn),R[0]&68&&U(e,"sg-task-reflected",y[2]),R[0]&321&&U(e,"sg-task-selected",y[8][y[0].id]),R[0]&192&&U(e,"resize-enabled",y[7]),R[0]&65&&U(e,"sg-task--sticky",y[0].stickyLabel)},i:K,o:K,d(y){y&&D(e),k&&k.d(),m&&m.d(),d.d(),v&&v.d(),C&&C.d(),f=!1,Xe(w)}}}let Zn=!0;const Vt=40,Zt=40;function qs(n,e){return{left:n.clientX-e.left<0+Vt,top:n.clientY-e.top<0+Vt,right:n.clientX-e.left>e.width-Vt,bottom:n.clientY-e.top>e.height-Vt}}function Qs(n,e,t){let i,s,o,r,l,{model:a}=e,{height:c}=e,{left:f}=e,{top:w}=e,{width:k}=e,{reflected:m=!1}=e,b=!1,p=!1,d={x:f,y:w,width:k};function v(O,ie,q){!b&&!p&&(t(5,d.x=O,d),t(5,d.y=ie,d),t(5,d.width=q,d))}const{taskStore:C,rowStore:y,draggingTaskCache:R}=oe("dataStore");A(n,C,O=>t(25,r=O)),A(n,y,O=>t(21,i=O)),A(n,R,O=>t(23,s=O));const{rowContainer:j,mainContainer:x}=oe("gantt"),{taskContent:B,resizeHandleWidth:J,rowPadding:ee,onTaskButtonClick:X,reflectOnParentRows:fe,reflectOnChildRows:Oe,taskElementHook:we}=oe("options");A(n,ee,O=>t(24,o=O));const{dndManager:Re,api:ne,utils:ze,columnService:be,selectionManager:G}=oe("services");let S=G.selectedTasks;A(n,S,O=>t(8,l=O));let V;const le=Xs(O=>{const ie=qs(O,V);(ie.left||ie.right)&&x.scrollTo({left:x.scrollLeft+(ie.left?-Zt:Zt),behavior:"smooth"}),(ie.top||ie.bottom)&&x.scrollTo({top:x.scrollTop+(ie.top?-Zt:Zt),behavior:"smooth"})},250);function Be(O){function ie(q){let Q=!0;const Ee=i.entities[a.resourceId];if(q.dragging){const h=Re.getTarget("row",q.mouseEvent);h?(t(0,a.resourceId=h.model.id,a),ne.tasks.raise.switchRow(this,h,Ee)):Q=!1}t(3,b=t(4,p=!1));const g=r.entities[a.id];if(delete s[a.id],Q){const h=a.from,H=a.to,Le=t(0,a.from=ze.roundTo(be.getDateByPosition(q.x)),a),I=t(0,a.to=ze.roundTo(be.getDateByPosition(q.x+q.width)),a),Te=be.getPositionByDate(Le)|0,lt=be.getPositionByDate(I)|0,de=i.entities[a.resourceId],yt=Te,je=lt-Te,qe=o+de.y;v(yt,qe,je);const ae={...g,left:yt,width:je,top:qe,model:a},Tt=h!=Le||H!=I||Ee&&Ee.model.id!==de.model.id;Tt&&ne.tasks.raise.change({task:ae,sourceRow:Ee,targetRow:de}),G.newTasksAndReflections.push(ae),Tt&&ne.tasks.raise.changed({task:ae,sourceRow:Ee,targetRow:de}),ae.reflections&&G.oldReflections.push(...ae.reflections);const Ne=[];if(Oe&&de.allChildren){ae.reflections||(ae.reflections=[]);const Qe={rowPadding:o};de.allChildren.forEach(ft=>{const Ve=nn(ae,ft,Qe);ae.reflections.push(Ve.model.id),Ne.push(Ve)})}if(fe&&de.allParents.length>0){ae.reflections||(ae.reflections=[]);const Qe={rowPadding:o};de.allParents.forEach(ft=>{const Ve=nn(ae,ft,Qe);ae.reflections.push(Ve.model.id),Ne.push(Ve)})}Ne.length>0&&G.newTasksAndReflections.push(...Ne),!(de.allParents.length>0)&&!de.allChildren&&(ae.reflections=null)}else t(5,d.x=g.left,d),t(5,d.width=g.width,d),t(5,d.y=g.top,d)}if(!m)return G.taskSettings.set(a.id,{onDown:q=>{V=x.getBoundingClientRect(),q.dragging&&Lt("move"),q.resizing&&Lt("e-resize"),ue(R,s[a.id]=!0,s)},onMouseUp:()=>{Lt("default"),ne.tasks.raise.moveEnd(a)},onResize:q=>{t(5,d.x=q.x,d),t(5,d.width=q.width,d),t(4,p=!0),le(q.event)},onDrag:q=>{t(5,d.x=q.x,d),t(5,d.y=q.y,d),t(3,b=!0),ne.tasks.raise.move(a),le(q.event)},dragAllowed:()=>i.entities[a.resourceId].model.enableDragging&&a.enableDragging,resizeAllowed:()=>a.type!=="milestone"&&i.entities[a.resourceId].model.enableDragging&&a.enableDragging,onDrop:ie,container:j,resizeHandleWidth:J,getX:()=>d.x,getY:()=>d.y,getWidth:()=>d.width,modelId:a.id}),{destroy:()=>G.taskSettings.delete(a.id)}}function De(O,ie){if(we)return we(O,ie)}function Ye(O){X&&X(a,O)}let Me,Ie;return n.$$set=O=>{"model"in O&&t(0,a=O.model),"height"in O&&t(1,c=O.height),"left"in O&&t(18,f=O.left),"top"in O&&t(19,w=O.top),"width"in O&&t(20,k=O.width),"reflected"in O&&t(2,m=O.reflected)},n.$$.update=()=>{n.$$.dirty[0]&1835008&&v(f,w,k),n.$$.dirty[0]&1&&t(6,Me=vn(a.classes)),n.$$.dirty[0]&2097153&&t(7,Ie=a.type!=="milestone"&&i.entities[a.resourceId].model.enableDragging&&a.enableDragging)},[a,c,m,b,p,d,Me,Ie,l,C,y,R,B,ee,S,Be,De,Ye,f,w,k,i]}class Vs extends Se{constructor(e){super(),Ce(this,e,Qs,js,ve,{model:0,height:1,left:18,top:19,width:20,reflected:2},null,[-1,-1])}}var Zs=".sg-row.svelte-7u5y5s{position:relative;width:100%;box-sizing:border-box}";ye(Zs);function Kn(n){let e,t=n[0].model.contentHtml+"",i;return{c(){e=new ut(!1),i=re(),e.a=i},m(s,o){e.m(t,s,o),E(s,i,o)},p(s,o){o&1&&t!==(t=s[0].model.contentHtml+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function Ks(n){let e,t,i,s=n[0].model.contentHtml&&Kn(n);return{c(){e=W("div"),s&&s.c(),_(e,"class",t="sg-row "+n[0].model.classes+" svelte-7u5y5s"),_(e,"data-row-id",i=n[0].model.id),z(e,"height",n[3]+"px"),U(e,"sg-hover",n[1]==n[0].model.id),U(e,"sg-selected",n[2]==n[0].model.id)},m(o,r){E(o,e,r),s&&s.m(e,null)},p(o,[r]){o[0].model.contentHtml?s?s.p(o,r):(s=Kn(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null),r&1&&t!==(t="sg-row "+o[0].model.classes+" svelte-7u5y5s")&&_(e,"class",t),r&1&&i!==(i=o[0].model.id)&&_(e,"data-row-id",i),r&8&&z(e,"height",o[3]+"px"),r&3&&U(e,"sg-hover",o[1]==o[0].model.id),r&5&&U(e,"sg-selected",o[2]==o[0].model.id)},i:K,o:K,d(o){o&&D(e),s&&s.d()}}}function Js(n,e,t){let i,s,o,{row:r}=e;const{rowHeight:l}=oe("options");A(n,l,f=>t(3,o=f));const{hoveredRow:a,selectedRow:c}=oe("gantt");return A(n,a,f=>t(1,i=f)),A(n,c,f=>t(2,s=f)),n.$$set=f=>{"row"in f&&t(0,r=f.row)},[r,i,s,o,l,a,c]}class $s extends Se{constructor(e){super(),Ce(this,e,Js,Ks,ve,{row:0})}}var eo=`.sg-time-range.svelte-w7p5la{height:100%;position:absolute;display:flex;flex-direction:column;align-items:center;background-image:linear-gradient(
            -45deg,
            rgba(0, 0, 0, 0) 46%,
            #e03218 49%,
            #e03218 51%,
            rgba(0, 0, 0, 0) 55%
        );background-size:6px 6px !important;color:red;font-weight:400}.sg-time-range-label.svelte-w7p5la{margin-top:10px;background:#fff;white-space:nowrap;padding:4px;font-weight:400;font-size:10px}`;ye(eo);function Jn(n){let e,t=n[0].label+"",i;return{c(){e=W("div"),i=Fe(t),_(e,"class","sg-time-range-label svelte-w7p5la")},m(s,o){E(s,e,o),L(e,i)},p(s,o){o&1&&t!==(t=s[0].label+"")&&ot(i,t)},d(s){s&&D(e)}}}function to(n){let e,t,i=n[0].label&&Jn(n);return{c(){e=W("div"),i&&i.c(),_(e,"class",t="sg-time-range "+n[3]+" svelte-w7p5la"),z(e,"width",n[2].width+"px"),z(e,"left",n[2].x+"px"),U(e,"moving",n[1])},m(s,o){E(s,e,o),i&&i.m(e,null)},p(s,[o]){s[0].label?i?i.p(s,o):(i=Jn(s),i.c(),i.m(e,null)):i&&(i.d(1),i=null),o&8&&t!==(t="sg-time-range "+s[3]+" svelte-w7p5la")&&_(e,"class",t),o&4&&z(e,"width",s[2].width+"px"),o&4&&z(e,"left",s[2].x+"px"),o&10&&U(e,"moving",s[1])},i:K,o:K,d(s){s&&D(e),i&&i.d()}}}function no(n,e,t){let{model:i}=e,{left:s}=e,{width:o}=e,{resizing:r=!1}=e;const l={width:o,x:s};let a;return n.$$set=c=>{"model"in c&&t(0,i=c.model),"left"in c&&t(4,s=c.left),"width"in c&&t(5,o=c.width),"resizing"in c&&t(1,r=c.resizing)},n.$$.update=()=>{n.$$.dirty&48&&(t(2,l.x=s,l),t(2,l.width=o,l)),n.$$.dirty&1&&t(3,a=vn(i.classes))},[i,r,l,a,s,o]}class io extends Se{constructor(e){super(),Ce(this,e,no,to,ve,{model:0,left:4,width:5,resizing:1})}}const so=2,oo=2;class on{constructor(e,t,i){M(this,"mouseStartPosX");M(this,"mouseStartPosY");M(this,"mouseStartRight");M(this,"direction");M(this,"dragging",!1);M(this,"resizing",!1);M(this,"initialX");M(this,"initialY");M(this,"initialW");M(this,"resizeTriggered",!1);M(this,"settings");M(this,"node");M(this,"offsetPos",{x:null,y:null});M(this,"offsetWidth",null);M(this,"overRezisedOffset");M(this,"onmousedown",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!Ii(e)&&!this.settings.modelId)return;this.settings.modelId||(e.stopPropagation(),e.preventDefault());const i=this.dragAllowed,s=this.resizeAllowed;if(i||s){const o=this.settings.getX(),r=this.settings.getY(),l=this.settings.getWidth();this.initialX=t.clientX,this.initialY=t.clientY,this.mouseStartRight=o+l,this.mouseStartPosX=kt(this.settings.container,t).x-o,this.mouseStartPosY=kt(this.settings.container,t).y-r,s&&this.mouseStartPosX<=this.settings.resizeHandleWidth&&(this.direction="left",this.resizing=!0),s&&this.mouseStartPosX>=l-this.offsetWidth-this.settings.resizeHandleWidth&&(this.direction="right",this.resizing=!0),i&&!this.resizing&&(this.dragging=!0),(this.dragging||this.resizing)&&this.settings.onDown&&this.settings.onDown({mouseEvent:t,x:o,width:l,y:r,resizing:this.resizing,dragging:this.dragging}),this.settings.modelId||(window.addEventListener("mousemove",this.onmousemove,!1),Ui(window,"mouseup",this.onmouseup))}});M(this,"onmousemove",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY};if(!this.resizeTriggered)if(Math.abs(t.clientX-this.initialX)>so||Math.abs(t.clientY-this.initialY)>oo)this.resizeTriggered=!0;else return;if(e.preventDefault(),this.resizing){const i=kt(this.settings.container,t),s=this.settings.getX(),o=this.settings.getWidth();let r,l;this.direction==="left"?(this.overRezisedOffset==="left"&&(i.x+=this.offsetWidth),this.mouseStartRight-i.x<=0?(this.direction="right",this.overRezisedOffset!=="left"?this.overRezisedOffset="right":this.overRezisedOffset=void 0,r=this.mouseStartRight,l=this.mouseStartRight-i.x,this.mouseStartRight=this.mouseStartRight+o):(r=i.x,l=this.mouseStartRight-i.x)):this.direction==="right"&&(this.overRezisedOffset==="right"&&(i.x-=this.offsetWidth),i.x-s+this.offsetWidth<=0?(this.direction="left",this.overRezisedOffset!=="right"?this.overRezisedOffset="left":this.overRezisedOffset=void 0,r=i.x+this.offsetWidth,l=i.x-s+this.offsetWidth,this.mouseStartRight=s):(r=s,l=i.x-s+this.offsetWidth)),this.settings.onResize&&this.settings.onResize({x:r,width:l,event:e})}if(this.dragging&&this.settings.onDrag){const i=kt(this.settings.container,t);this.settings.onDrag({x:i.x-this.mouseStartPosX,y:i.y-this.mouseStartPosY,event:e})}});M(this,"onmouseup",e=>{const t={clientX:this.offsetPos.x+e.clientX,clientY:this.offsetPos.y+e.clientY},i=this.settings.getX(),s=this.settings.getY(),o=this.settings.getWidth();this.settings.onMouseUp&&this.settings.onMouseUp(),this.resizeTriggered&&this.settings.onDrop&&this.settings.onDrop({mouseEvent:t,x:i,y:s,width:o,dragging:this.dragging,resizing:this.resizing}),this.mouseStartPosX=null,this.mouseStartPosY=null,this.mouseStartRight=null,this.dragging=!1,this.resizing=!1,this.initialX=null,this.initialY=null,this.initialW=null,this.resizeTriggered=!1,this.offsetPos={x:null,y:null},this.offsetWidth=null,this.overRezisedOffset=void 0,this.settings.modelId||window.removeEventListener("mousemove",this.onmousemove,!1)});this.settings=t,this.node=e,this.settings.modelId?(this.offsetPos=i.offsetPos,this.offsetWidth=i.offsetWidth):e.addEventListener("mousedown",this.onmousedown,{passive:!0})}get dragAllowed(){return typeof this.settings.dragAllowed=="function"?this.settings.dragAllowed():this.settings.dragAllowed}get resizeAllowed(){return typeof this.settings.resizeAllowed=="function"?this.settings.resizeAllowed():this.settings.resizeAllowed}destroy(){this.node.removeEventListener("mousedown",this.onmousedown,!1),this.node.removeEventListener("mousemove",this.onmousemove,!1),this.node.removeEventListener("mouseup",this.onmouseup,!1)}}class lo{constructor(e){M(this,"handlerMap",{});this.register("row",t=>{let s=document.elementsFromPoint(t.clientX,t.clientY).find(o=>!!o.getAttribute("data-row-id"));if(s!==void 0){const o=s.getAttribute("data-row-id"),{entities:r}=Cs(e),l=r[o];if(l.model.enableDragging)return l}return null})}register(e,t){this.handlerMap[e]=t}getTarget(e,t){var i=this.handlerMap[e];if(i)return i(t)}}var ro=".sg-time-range-control.svelte-w4nglp{position:absolute}.sg-time-range-handle-left.svelte-w4nglp{position:absolute;left:0}.sg-time-range-handle-right.svelte-w4nglp{position:absolute;right:0}.sg-time-range-disabled.svelte-w4nglp{display:none}.sg-time-range-handle-left.svelte-w4nglp::before,.sg-time-range-handle-right.svelte-w4nglp::before{position:absolute;content:'';bottom:4px;border-radius:6px 6px 6px 0;border:2px solid #b0b0b7;width:9px;height:9px;transform:translateX(-50%) rotate(-45deg);background-color:#fff;border-color:#e03218;cursor:ew-resize}";ye(ro);function ao(n){let e,t,i,s,o,r,l;return{c(){e=W("div"),t=W("div"),i=se(),s=W("div"),_(t,"class","sg-time-range-handle-left svelte-w4nglp"),_(s,"class","sg-time-range-handle-right svelte-w4nglp"),_(e,"class",o="sg-time-range-control "+n[1]+" svelte-w4nglp"),z(e,"width",n[0].width+"px"),z(e,"left",n[0].x+"px"),U(e,"sg-time-range-disabled",!n[3]())},m(a,c){E(a,e,c),L(e,t),L(e,i),L(e,s),r||(l=[tt(n[2].call(null,t)),tt(n[2].call(null,s))],r=!0)},p(a,[c]){c&2&&o!==(o="sg-time-range-control "+a[1]+" svelte-w4nglp")&&_(e,"class",o),c&1&&z(e,"width",a[0].width+"px"),c&1&&z(e,"left",a[0].x+"px"),c&10&&U(e,"sg-time-range-disabled",!a[3]())},i:K,o:K,d(a){a&&D(e),r=!1,Xe(l)}}}function co(n,e,t){const{rowContainer:i}=oe("gantt"),{api:s,utils:o,columnService:r}=oe("services"),{resizeHandleWidth:l}=oe("options"),{timeRangeStore:a}=oe("dataStore");let{model:c}=e,{width:f}=e,{left:w}=e;const k={width:f,x:w};function m(d){const v=R=>{const j=o.roundTo(r.getDateByPosition(R.x)),x=o.roundTo(r.getDateByPosition(R.x+R.width)),B=r.getPositionByDate(j),J=r.getPositionByDate(x);Object.assign(c,{from:j,to:x}),C({left:B,width:J-B,model:c,resizing:!1}),window.removeEventListener("mousemove",onmousemove,!1)};function C(R){a.update(R),t(0,k.x=R.left,k),t(0,k.width=R.width,k)}const y=new on(d,{onDown:R=>{s.timeranges.raise.clicked({model:c}),C({left:R.x,width:R.width,model:c,resizing:!0})},onResize:R=>{s.timeranges.raise.resized({model:c,left:R.x,width:R.width}),C({left:R.x,width:R.width,model:c,resizing:!0})},dragAllowed:!1,resizeAllowed:()=>b(),onDrop:v,container:i,resizeHandleWidth:l,getX:()=>k.x,getY:()=>0,getWidth:()=>k.width});return{destroy:()=>y.destroy()}}function b(){return c.resizable!==void 0?c.resizable:!0}let p;return n.$$set=d=>{"model"in d&&t(4,c=d.model),"width"in d&&t(5,f=d.width),"left"in d&&t(6,w=d.left)},n.$$.update=()=>{n.$$.dirty&96&&(t(0,k.x=w,k),t(0,k.width=f,k)),n.$$.dirty&16&&t(1,p=vn(c.classes))},[k,p,m,b,c,f,w]}class uo extends Se{constructor(e){super(),Ce(this,e,co,ao,ve,{model:4,width:5,left:6})}}var fo=".column.svelte-4fffin{position:absolute;height:100%;box-sizing:border-box}.column.svelte-4fffin{border-right:#efefef 1px solid}";ye(fo);function ho(n,e=1){switch(n){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${n}`)}}function go(n,e=1){return n.setSeconds(n.getSeconds()+e),n}function mo(n,e=1){return n.setMinutes(n.getMinutes()+e),n}function wo(n,e=1){return n.setHours(n.getHours()+e),n}function bo(n,e=1){return n.setDate(n.getDate()+e),n.setHours(0,0,0),n}function po(n,e=1){const t=n,i=t.getDay(),s=t.getDate()-i+(i==0?-6:1);return t.setDate(s),t.setHours(0,0,0),t.setDate(t.getDate()+7*e),t}function _o(n,e=1){return n.setMonth(n.getMonth()+e),n.setDate(1),n.setHours(0,0,0),n}function ko(n,e=1){return n.setFullYear(n.getFullYear()+e),n.setMonth(0),n.setDate(1),n.setHours(0,0,0),n}function $n(n,e,t){switch(e){case"y":case"year":return ko(n,t);case"month":return _o(n,t);case"week":return po(n,t);case"d":case"day":return bo(n,t);case"h":case"hour":return wo(n,t);case"m":case"minute":return mo(n,t);case"s":case"second":return go(n,t)}}const vo=["y","year","month","week","d","day","h","hour","m","minute","s","second"];function Xi(n,e,t,i=1,s){if(vo.indexOf(t)!==-1){let o=0,r=0;const l=new Date(n),a=new Date(n);let c=$n(a,t,i),f=c.getTime();const w=c.getTime()-n,k=[{from:n,to:c.getTime(),duration:w,isHighlighted:s&&ei(l,s)}];if(f<e){for(;f<e;)o=f,c=$n(new Date(f),t,i),r=c.getTime()-f,k.push({from:f,to:c.getTime(),duration:r,isHighlighted:s&&ei(new Date(f),s)}),f=c.getTime();const m=e-o;k[k.length-1].to=e,k[k.length-1].duration=m}return k}throw new Error(`Unknown unit: ${t}`)}function ei(n,e){let t;switch(e.unit){case"m":case"minute":return t=n.getMinutes(),e.fractions.includes(t);case"h":case"hour":return t=n.getHours(),e.fractions.includes(t);case"d":case"day":return t=n.getDay(),e.fractions.includes(t);case"week":return e.fractions.includes(t);case"dayinMonth":return t=n.getDate(),e.fractions.includes(t);case"month":return t=n.getMonth(),e.fractions.includes(t);case"y":case"year":return t=n.getFullYear(),e.fractions.includes(t);default:throw new Error(`Invalid unit: ${e.unit}`)}}class yo{constructor(){M(this,"from");M(this,"to");M(this,"width");M(this,"magnetOffset");M(this,"magnetUnit");M(this,"magnetDuration");M(this,"dateAdapter")}getPositionByDate(e){return yn(e,this.from,this.to,this.width)}getDateByPosition(e){return To(e,this.from,this.to,this.width)}roundTo(e){return this.dateAdapter?this.dateAdapter.roundTo(e,this.magnetUnit,this.magnetOffset):null}}function yn(n,e,t,i){if(!n)return;const s=n-e,o=t-e;return s/o*i}function To(n,e,t,i){const s=n/i*(t-e);return e+s}function Co(n,e,t,i){let s=-1,o=n.length;for(;o-s>1;){const r=Math.floor((s+o)/2);(i?t(n[r])<e:t(n[r])<=e)?s=r:o=r}return!i&&n[s]!==void 0&&t(n[s])===e&&(o=s),[s,o]}function Fi(n,e,t,i){const s=Co(n,e,t,i);return[n[s[0]],n[s[1]]]}var So=".column-header-row.svelte-vfarxf.svelte-vfarxf{position:relative;white-space:nowrap;height:32px}.column-header-cell.svelte-vfarxf.svelte-vfarxf{position:absolute;height:100%;box-sizing:border-box;text-overflow:clip;text-align:center;display:inline-flex;justify-content:center;align-items:center;font-size:1em;font-size:14px;font-weight:300;transition:background 0.2s;cursor:pointer;user-select:none;border-right:#efefef 1px solid;border-bottom:#efefef 1px solid}.column-header-cell.svelte-vfarxf.svelte-vfarxf:hover{background:#f9f9f9}.column-header-cell.sticky.svelte-vfarxf>.column-header-cell-label.svelte-vfarxf{position:sticky;left:1rem}";ye(So);function ti(n,e,t){const i=n.slice();return i[13]=e[t],i}function ni(n){let e,t,i=(n[13].label||"N/A")+"",s,o,r,l;function a(){return n[10](n[13])}return{c(){e=W("div"),t=W("div"),s=Fe(i),o=se(),_(t,"class","column-header-cell-label svelte-vfarxf"),_(e,"class","column-header-cell svelte-vfarxf"),_(e,"role","button"),_(e,"tabindex","0"),z(e,"left",n[13].left+"px"),z(e,"width",n[13].width+"px"),U(e,"sticky",n[0].sticky)},m(c,f){E(c,e,f),L(e,t),L(t,s),L(e,o),r||(l=Ae(e,"click",a),r=!0)},p(c,f){n=c,f&1&&i!==(i=(n[13].label||"N/A")+"")&&ot(s,i),f&1&&z(e,"left",n[13].left+"px"),f&1&&z(e,"width",n[13].width+"px"),f&1&&U(e,"sticky",n[0].sticky)},d(c){c&&D(e),r=!1,l()}}}function Ro(n){let e,t=te(n[0].columns),i=[];for(let s=0;s<t.length;s+=1)i[s]=ni(ti(n,t,s));return{c(){e=W("div");for(let s=0;s<i.length;s+=1)i[s].c();_(e,"class","column-header-row svelte-vfarxf")},m(s,o){E(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,[o]){if(o&17){t=te(s[0].columns);let r;for(r=0;r<t.length;r+=1){const l=ti(s,t,r);i[r]?i[r].p(l,o):(i[r]=ni(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},i:K,o:K,d(s){s&&D(e),nt(i,s)}}}function zo(n,e,t){let i,s,o;const r=Ut(),{from:l,to:a,width:c}=oe("dimensions");A(n,l,d=>t(9,o=d)),A(n,a,d=>t(8,s=d)),A(n,c,d=>t(7,i=d));const{dateAdapter:f}=oe("options");let{header:w}=e,{ganttBodyColumns:k}=e,{ganttBodyUnit:m}=e;function b(d){r("dateSelected",{from:d.from,to:d.to,unit:w.unit})}const p=d=>b(d);return n.$$set=d=>{"header"in d&&t(0,w=d.header),"ganttBodyColumns"in d&&t(5,k=d.ganttBodyColumns),"ganttBodyUnit"in d&&t(6,m=d.ganttBodyUnit)},n.$$.update=()=>{if(n.$$.dirty&993)if(w.unit===m)t(0,w.columns=k.map(d=>({...d,label:f.format(d.from,w.format)})),w);else{const d=Xi(o.valueOf(),s.valueOf(),w.unit);let v=0,C=0;t(0,w.columns=d.map(y=>(C=v,v=yn(y.to,o.valueOf(),s.valueOf(),i),{width:Math.min(v-C,i),label:f.format(y.from,w.format),from:y.from,to:y.to,left:C})),w)}},[w,l,a,c,b,k,m,i,s,o,p]}class Do extends Se{constructor(e){super(),Ce(this,e,zo,Ro,ve,{header:0,ganttBodyColumns:5,ganttBodyUnit:6})}}function ii(n,e,t){const i=n.slice();return i[4]=e[t],i}function si(n){let e,t;return e=new Do({props:{header:n[4],ganttBodyColumns:n[1],ganttBodyUnit:n[2]}}),e.$on("dateSelected",n[3]),{c(){ke(e.$$.fragment)},m(i,s){ge(e,i,s),t=!0},p(i,s){const o={};s&1&&(o.header=i[4]),s&2&&(o.ganttBodyColumns=i[1]),s&4&&(o.ganttBodyUnit=i[2]),e.$set(o)},i(i){t||(Y(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function Mo(n){let e,t,i=te(n[0]),s=[];for(let r=0;r<i.length;r+=1)s[r]=si(ii(n,i,r));const o=r=>F(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=re()},m(r,l){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,l);E(r,e,l),t=!0},p(r,[l]){if(l&7){i=te(r[0]);let a;for(a=0;a<i.length;a+=1){const c=ii(r,i,a);s[a]?(s[a].p(c,l),Y(s[a],1)):(s[a]=si(c),s[a].c(),Y(s[a],1),s[a].m(e.parentNode,e))}for(Pe(),a=i.length;a<s.length;a+=1)o(a);We()}},i(r){if(!t){for(let l=0;l<i.length;l+=1)Y(s[l]);t=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)F(s[l]);t=!1},d(r){r&&D(e),nt(s,r)}}}function Eo(n,e,t){let{headers:i}=e,{ganttBodyColumns:s}=e,{ganttBodyUnit:o}=e;function r(l){wn.call(this,n,l)}return n.$$set=l=>{"headers"in l&&t(0,i=l.headers),"ganttBodyColumns"in l&&t(1,s=l.ganttBodyColumns),"ganttBodyUnit"in l&&t(2,o=l.ganttBodyUnit)},[i,s,o,r]}class Ho extends Se{constructor(e){super(),Ce(this,e,Eo,Mo,ve,{headers:0,ganttBodyColumns:1,ganttBodyUnit:2})}}function Po(n,e){const t=document.createElement("canvas");t.width=(n.length-1)*n[0].width,t.height=20;const i=t.getContext("2d");return i.shadowColor="rgba(128,128,128,0.5)",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=.5,i.lineWidth=e.columnStrokeWidth,i.lineCap="square",i.strokeStyle=e.columnStrokeColor,i.translate(.5,.5),n.forEach(o=>{Wo(i,o.left)}),`url("${t.toDataURL()}")`}function Wo(n,e){n.beginPath(),n.moveTo(e,0),n.lineTo(e,20),n.stroke()}var Bo=".sg-columns.svelte-1uqfnup{position:absolute;height:100%;width:100%}.sg-columns--background.svelte-1uqfnup{overflow:hidden;background-repeat:repeat;background-position-x:-1px}.sg-column.svelte-1uqfnup{position:absolute;height:100%;width:100%;box-sizing:border-box}";ye(Bo);function oi(n,e,t){const i=n.slice();return i[6]=e[t],i}function Lo(n){let e,t=te(n[0]),i=[];for(let s=0;s<t.length;s+=1)i[s]=li(oi(n,t,s));return{c(){e=W("div");for(let s=0;s<i.length;s+=1)i[s].c();_(e,"class","sg-columns svelte-1uqfnup")},m(s,o){E(s,e,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(s,o){if(o&29){t=te(s[0]);let r;for(r=0;r<t.length;r+=1){const l=oi(s,t,r);i[r]?i[r].p(l,o):(i[r]=li(l),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(s){s&&D(e),nt(i,s)}}}function Ao(n){let e;return{c(){e=W("div"),_(e,"class","sg-columns sg-columns--background svelte-1uqfnup"),z(e,"background-image",n[5])},m(t,i){E(t,e,i)},p(t,i){i&32&&z(e,"background-image",t[5])},d(t){t&&D(e)}}}function li(n){let e;return{c(){e=W("div"),_(e,"class","sg-column svelte-1uqfnup"),z(e,"border-right",(n[6].bgHighlightColor?0:n[2])+"px solid "+(n[6].bgHighlightColor||n[3])),z(e,"left",n[6].left+"px"),z(e,"width",n[6].width+"px"),z(e,"background-color",n[6].bgHighlightColor||n[4])},m(t,i){E(t,e,i)},p(t,i){i&13&&z(e,"border-right",(t[6].bgHighlightColor?0:t[2])+"px solid "+(t[6].bgHighlightColor||t[3])),i&1&&z(e,"left",t[6].left+"px"),i&1&&z(e,"width",t[6].width+"px"),i&17&&z(e,"background-color",t[6].bgHighlightColor||t[4])},d(t){t&&D(e)}}}function Oo(n){let e;function t(o,r){return o[1]?Ao:Lo}let i=t(n),s=i(n);return{c(){s.c(),e=re()},m(o,r){s.m(o,r),E(o,e,r)},p(o,[r]){i===(i=t(o))&&s?s.p(o,r):(s.d(1),s=i(o),s&&(s.c(),s.m(e.parentNode,e)))},i:K,o:K,d(o){o&&D(e),s.d(o)}}}function Yo(n,e,t){let{columns:i}=e,{useCanvasColumns:s=!0}=e,{columnStrokeWidth:o}=e,{columnStrokeColor:r}=e,{columnDefaultColor:l="#ffffff"}=e,a;return n.$$set=c=>{"columns"in c&&t(0,i=c.columns),"useCanvasColumns"in c&&t(1,s=c.useCanvasColumns),"columnStrokeWidth"in c&&t(2,o=c.columnStrokeWidth),"columnStrokeColor"in c&&t(3,r=c.columnStrokeColor),"columnDefaultColor"in c&&t(4,l=c.columnDefaultColor)},n.$$.update=()=>{n.$$.dirty&13&&t(5,a=Po(i,{columnStrokeColor:r,columnStrokeWidth:o}))},[i,s,o,r,l,a]}class Io extends Se{constructor(e){super(),Ce(this,e,Yo,Oo,ve,{columns:0,useCanvasColumns:1,columnStrokeWidth:2,columnStrokeColor:3,columnDefaultColor:4})}}var Uo=".sg-context-menu.svelte-1a9x2in{position:absolute;background:white;border:1px solid #ccc;padding:0.25em 0;font-size:10px;transition:opacity 0.4s ease 0s;opacity:1;box-shadow:rgba(0, 0, 0, 0.32) 1px 1px 3px 0px}.context-option.svelte-1a9x2in:hover{background:#eee}.context-option.svelte-1a9x2in{cursor:default;padding:0.2em 1em}";ye(Uo);var Xo=`.sg-resize.svelte-1vzamdy{z-index:2;background:#e9eaeb;width:5px;cursor:col-resize;position:absolute;height:100%;transition:width 0.2s,
            transform 0.2s}.sg-resize.svelte-1vzamdy:hover{transform:translateX(-2px);width:10px}`;ye(Xo);function Fo(n){let e,t,i;return{c(){e=W("div"),_(e,"class","sg-resize svelte-1vzamdy"),z(e,"left",n[0]+"px")},m(s,o){E(s,e,o),t||(i=tt(n[1].call(null,e)),t=!0)},p(s,[o]){o&1&&z(e,"left",s[0]+"px")},i:K,o:K,d(s){s&&D(e),t=!1,i()}}}function No(n,e,t){const i=Ut();let{x:s}=e,{container:o}=e;const r={onDrag:a=>{t(0,s=a.x),i("resize",{left:s}),Lt("col-resize")},onDrop:a=>{t(0,s=a.x),i("resize",{left:s}),Lt("default")},dragAllowed:!0,resizeAllowed:!1,container:o,getX:()=>s,getY:()=>0,getWidth:()=>0};function l(a){const c=new on(a,r,"resizer");return{destroy:()=>c.destroy()}}return n.$$set=a=>{"x"in a&&t(0,s=a.x),"container"in a&&t(2,o=a.container)},n.$$.update=()=>{n.$$.dirty&4&&(r.container=o)},[s,l,o]}class xo extends Se{constructor(e){super(),Ce(this,e,No,Fo,ve,{x:0,container:2})}}class Go{constructor(){M(this,"listeners");M(this,"listenersMap");M(this,"tasks");M(this,"timeranges");this.listeners=[],this.listenersMap={}}registerEvent(e,t){this[e]||(this[e]={});const i=this[e];i.on||(i.on={},i.raise={});let s="on:"+e+":"+t;i.raise[t]=(...o)=>{this.listeners.forEach(r=>{r.eventId===s&&r.handler(o)})},i.on[t]=o=>{let r={handler:o,eventId:s};return this.listenersMap[s]=r,this.listeners.push(r),()=>{const a=this.listeners.indexOf(r);this.listeners.splice(a,1)}}}}class jo{constructor(){M(this,"rowHeight")}createRow(e,t){e.classes=e.classes||"",e.contentHtml=e.contentHtml||void 0,e.enableDragging=e.enableDragging===void 0?!0:e.enableDragging;const i=e.height||this.rowHeight;return{model:e,y:t,height:i,expanded:!0}}createRows(e){const t={y:0,result:[]};return this.createChildRows(e,t),t.result}createChildRows(e,t,i=null,s=0,o=[]){const r=[],l=[];return i&&(o=[...o,i]),e.forEach(a=>{const c=this.createRow(a,t.y);if(t.result.push(c),r.push(c),l.push(c),c.childLevel=s,c.parent=i,c.allParents=o,t.y+=c.height,a.children){const f=this.createChildRows(a.children,t,c,s+1,o);c.children=f.rows,c.allChildren=f.allRows,l.push(...f.allRows)}}),{rows:r,allRows:l}}}class qo{constructor(e){M(this,"columnService");this.columnService=e}create(e){e.enableResizing=e.enableResizing===void 0?!0:e.enableResizing;const t=this.columnService.getPositionByDate(e.from),i=this.columnService.getPositionByDate(e.to);return{model:e,left:t,width:i-t,resizing:!1}}}class Qo{constructor(e){M(this,"taskStore");M(this,"oldReflections",[]);M(this,"newTasksAndReflections",[]);M(this,"taskSettings",new Map);M(this,"currentSelection",new Map);M(this,"selectedTasks",_e({}));M(this,"dragOrResizeTriggered",e=>{for(let[t,i]of this.currentSelection.entries()){const s=new on(i.HTMLElement,this.taskSettings.get(t),i.offsetData);s.onmousedown(e),this.currentSelection.set(t,{...i,draggable:s})}window.addEventListener("mousemove",this.selectionDragOrResizing,!1),Ui(window,"mouseup",this.selectionDropped)});M(this,"selectionDragOrResizing",e=>{for(let[,t]of this.currentSelection.entries()){const{draggable:i}=t;i.onmousemove(e)}});M(this,"selectionDropped",e=>{window.removeEventListener("mousemove",this.selectionDragOrResizing,!1);for(const[,t]of this.currentSelection.entries()){const{draggable:i}=t;i.onmouseup(e)}this.oldReflections.length&&this.taskStore.deleteAll(this.oldReflections),this.newTasksAndReflections.length&&this.taskStore.upsertAll(this.newTasksAndReflections),this.newTasksAndReflections.splice(0),this.oldReflections.splice(0)});this.taskStore=e}selectSingle(e,t){this.currentSelection.has(e)||(this.unSelectTasks(),this.toggleSelection(e,t)),this.selectedTasks.set({[e]:!0})}toggleSelection(e,t){this.currentSelection.set(e,{HTMLElement:t,offsetData:void 0,draggable:void 0}),this.selectedTasks.update(i=>({...i,[e]:!i[e]}))}unSelectTasks(){this.selectedTasks.set({}),this.currentSelection.clear()}dispatchSelectionEvent(e,t){const i=this.taskSettings.get(e),s=i.getX(),o=i.getY(),r=i.getWidth();for(const[l,a]of this.currentSelection.entries())if(l!==e){const c=this.taskSettings.get(l);a.offsetData={offsetPos:{x:c.getX()-s,y:c.getY()-o},offsetWidth:c.getWidth()-r}}else a.offsetData={offsetPos:{x:null,y:null},offsetWidth:null};this.dragOrResizeTriggered(t)}}function Vo(n,e){return Fi(n,e,i=>i.left)}function Zo(n,e){return Fi(n,e,i=>i.from)}function Ko(){const n={};return{onDelegatedEvent(e,t,i){n[e]||(n[e]={}),n[e][t]=i},offDelegatedEvent(e,t){delete n[e][t]},onEvent(e){const{type:t,target:i}=e,s=n[t];if(!s)return;let o,r=i;for(;r&&r!=e.currentTarget&&!(o=Jo(s,r));)r=r.parentElement;o&&s[o.attr]?s[o.attr](e,o.data,r):s.empty&&s.empty(e,null,r)}}}function Jo(n,e){let t;for(const i in n)if(t=e.getAttribute(i))return{attr:i,data:t}}class $o{format(e,t){const i=new Date(e);switch(t){case"H":return i.getHours()+"";case"HH":return pt(i.getHours());case"H:mm":return`${i.getHours()}:${pt(i.getMinutes())}`;case"hh:mm":return`${pt(i.getHours())}:${pt(i.getMinutes())}`;case"hh:mm:ss":return`${i.getHours()}:${pt(i.getMinutes())}:${pt(i.getSeconds())}`;case"dd/MM/yyyy":return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()}`;case"dd/MM/yyyy hh:mm":return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()} ${i.getHours()}:${i.getMinutes()}`;case"dd/MM/yyyy hh:mm:ss":return`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()} ${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}`;case"YYYY":return`${i.getFullYear()}`;case"Q":return`${Math.floor(i.getMonth()/3+1)}`;case"[Q]Q":return`Q${Math.floor(i.getMonth()/3+1)}`;case"YYYY[Q]Q":return`${i.getFullYear()}Q${Math.floor(i.getMonth()/3+1)}`;case"MM":{let s=String(i.getMonth()+1);return s.length==1&&(s=`0${s}`),`${s}`}case"MMMM":{const s=i.toLocaleString("default",{month:"long"});return`${s.charAt(0).toUpperCase()}${s.substring(1)}`}case"MMMM - YYYY":{const s=i.toLocaleString("default",{month:"long"});return`${s.charAt(0).toUpperCase()}${s.substring(1)}-${i.getFullYear()}`}case"MMMM YYYY":{const s=i.toLocaleString("default",{month:"long"});return`${s.charAt(0).toUpperCase()}${s.substring(1)} ${i.getFullYear()}`}case"MMM":{const s=i.toLocaleString("default",{month:"short"});return`${s.charAt(0).toUpperCase()}${s.substring(1)}`}case"MMM - YYYY":{const s=i.toLocaleString("default",{month:"short"});return`${s.charAt(0).toUpperCase()}${s.substring(1)} - ${i.getFullYear()}`}case"MMM YYYY":{const s=i.toLocaleString("default",{month:"short"});return`${s.charAt(0).toUpperCase()}${s.substring(1)} ${i.getFullYear()}`}case"W":return`${ri(i)}`;case"WW":{const s=ri(i);return`${s.toString().length==1?"0":""}${s}`}default:return console.warn(`Date Format '${t}' is not supported, use another date adapter.`),`${i.getDate()}/${i.getMonth()+1}/${i.getFullYear()}`}}roundTo(e,t,i){const s=el(t,i);return Math.round(e/s)*s}}function pt(n){let e=n.toString();for(let t=e.length;t<2;t++)e="0"+e;return e}function ri(n){n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())),n.setUTCDate(n.getUTCDate()+4-(n.getUTCDay()||7));const e=new Date(Date.UTC(n.getUTCFullYear(),0,1));return Math.ceil(((n.valueOf()-e.valueOf())/864e5+1)/7)}function el(n,e){switch(n){case"y":case"year":return e*31536e6;case"month":return e*30*24*60*60*1e3;case"week":return e*7*24*60*60*1e3;case"d":case"day":return e*24*60*60*1e3;case"h":case"hour":return e*60*60*1e3;case"m":case"minute":return e*60*1e3;case"s":case"second":return e*1e3;default:throw new Error(`Unknown unit: ${n}`)}}var tl=`.sg-disable-transition.svelte-843l0i .sg-task,.sg-disable-transition.svelte-843l0i .sg-milestone{transition:transform 0s,
            background-color 0.2s,
            width 0s !important}.sg-view:not(:first-child){margin-left:5px}.sg-timeline.svelte-843l0i{flex:1 1 0%;display:flex;flex-direction:column;overflow-x:auto}.sg-gantt.svelte-843l0i{display:flex;width:100%;height:100%;position:relative}.sg-foreground.svelte-843l0i{box-sizing:border-box;overflow:hidden;top:0;left:0;position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}.sg-rows.svelte-843l0i{width:100%;box-sizing:border-box;overflow:hidden}.sg-timeline-body.svelte-843l0i{overflow:auto;flex:1 1 auto}.sg-header-scroller.svelte-843l0i{border-right:1px solid #efefef;overflow:hidden;position:relative}.content.svelte-843l0i{position:relative}*{box-sizing:border-box}`;ye(tl);function ai(n,e,t){const i=n.slice();return i[136]=e[t],i}function ci(n,e,t){const i=n.slice();return i[139]=e[t],i}function ui(n,e,t){const i=n.slice();return i[142]=e[t],i}function fi(n,e,t){const i=n.slice();return i[145]=e[t],i}function di(n,e,t){const i=n.slice();return i[142]=e[t],i}function hi(n,e,t){const i=n.slice();return i[136]=e[t],i}function gi(n){let e,t,i,s;const o=[{rowContainerHeight:n[19]},{paddingTop:n[20]},{paddingBottom:n[21]},{tableWidth:n[2]},n[51],{visibleRows:n[9]}];var r=n[136];function l(a,c){let f={};if(c!==void 0&&c[0]&3670532|c[1]&1048576)f=it(o,[c[0]&524288&&{rowContainerHeight:a[19]},c[0]&1048576&&{paddingTop:a[20]},c[0]&2097152&&{paddingBottom:a[21]},c[0]&4&&{tableWidth:a[2]},c[1]&1048576&&st(a[51]),c[0]&512&&{visibleRows:a[9]}]);else for(let w=0;w<o.length;w+=1)f=Ge(f,o[w]);return{props:f}}return r&&(e=tn(r,l(n)),e.$on("init",sn)),i=new xo({props:{x:n[2],container:n[12]}}),i.$on("resize",n[48]),{c(){e&&ke(e.$$.fragment),t=se(),ke(i.$$.fragment)},m(a,c){e&&ge(e,a,c),E(a,t,c),ge(i,a,c),s=!0},p(a,c){if(c[0]&16&&r!==(r=a[136])){if(e){Pe();const w=e;F(w.$$.fragment,1,0,()=>{me(w,1)}),We()}r?(e=tn(r,l(a,c)),e.$on("init",sn),ke(e.$$.fragment),Y(e.$$.fragment,1),ge(e,t.parentNode,t)):e=null}else if(r){const w=c[0]&3670532|c[1]&1048576?it(o,[c[0]&524288&&{rowContainerHeight:a[19]},c[0]&1048576&&{paddingTop:a[20]},c[0]&2097152&&{paddingBottom:a[21]},c[0]&4&&{tableWidth:a[2]},c[1]&1048576&&st(a[51]),c[0]&512&&{visibleRows:a[9]}]):{};e.$set(w)}const f={};c[0]&4&&(f.x=a[2]),c[0]&4096&&(f.container=a[12]),i.$set(f)},i(a){s||(e&&Y(e.$$.fragment,a),Y(i.$$.fragment,a),s=!0)},o(a){e&&F(e.$$.fragment,a),F(i.$$.fragment,a),s=!1},d(a){a&&D(t),e&&me(e,a),me(i,a)}}}function mi(n,e){let t,i,s;const o=[e[142]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return i=new uo({props:r}),{key:n,first:null,c(){t=re(),ke(i.$$.fragment),this.first=t},m(l,a){E(l,t,a),ge(i,l,a),s=!0},p(l,a){e=l;const c=a[0]&16777216?it(o,[st(e[142])]):{};i.$set(c)},i(l){s||(Y(i.$$.fragment,l),s=!0)},o(l){F(i.$$.fragment,l),s=!1},d(l){l&&D(t),me(i,l)}}}function wi(n,e){let t,i,s;return i=new $s({props:{row:e[145]}}),{key:n,first:null,c(){t=re(),ke(i.$$.fragment),this.first=t},m(o,r){E(o,t,r),ge(i,o,r),s=!0},p(o,r){e=o;const l={};r[0]&512&&(l.row=e[145]),i.$set(l)},i(o){s||(Y(i.$$.fragment,o),s=!0)},o(o){F(i.$$.fragment,o),s=!1},d(o){o&&D(t),me(i,o)}}}function bi(n,e){let t,i,s;const o=[e[142]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return i=new io({props:r}),{key:n,first:null,c(){t=re(),ke(i.$$.fragment),this.first=t},m(l,a){E(l,t,a),ge(i,l,a),s=!0},p(l,a){e=l;const c=a[0]&16777216?it(o,[st(e[142])]):{};i.$set(c)},i(l){s||(Y(i.$$.fragment,l),s=!0)},o(l){F(i.$$.fragment,l),s=!1},d(l){l&&D(t),me(i,l)}}}function pi(n,e){let t,i,s;const o=[{model:e[139].model},{left:e[139].left},{width:e[139].width},{height:e[139].height},{top:e[139].top},e[139]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return i=new Vs({props:r}),{key:n,first:null,c(){t=re(),ke(i.$$.fragment),this.first=t},m(l,a){E(l,t,a),ge(i,l,a),s=!0},p(l,a){e=l;const c=a[0]&4194304?it(o,[{model:e[139].model},{left:e[139].left},{width:e[139].width},{height:e[139].height},{top:e[139].top},st(e[139])]):{};i.$set(c)},i(l){s||(Y(i.$$.fragment,l),s=!0)},o(l){F(i.$$.fragment,l),s=!1},d(l){l&&D(t),me(i,l)}}}function _i(n){let e,t,i;const s=[{paddingTop:n[20]},{paddingBottom:n[21]},{visibleRows:n[9]},n[51]];var o=n[136];function r(l,a){let c={};if(a!==void 0&&a[0]&3146240|a[1]&1048576)c=it(s,[a[0]&1048576&&{paddingTop:l[20]},a[0]&2097152&&{paddingBottom:l[21]},a[0]&512&&{visibleRows:l[9]},a[1]&1048576&&st(l[51])]);else for(let f=0;f<s.length;f+=1)c=Ge(c,s[f]);return{props:c}}return o&&(e=tn(o,r(n)),e.$on("init",sn)),{c(){e&&ke(e.$$.fragment),t=re()},m(l,a){e&&ge(e,l,a),E(l,t,a),i=!0},p(l,a){if(a[0]&32&&o!==(o=l[136])){if(e){Pe();const c=e;F(c.$$.fragment,1,0,()=>{me(c,1)}),We()}o?(e=tn(o,r(l,a)),e.$on("init",sn),ke(e.$$.fragment),Y(e.$$.fragment,1),ge(e,t.parentNode,t)):e=null}else if(o){const c=a[0]&3146240|a[1]&1048576?it(s,[a[0]&1048576&&{paddingTop:l[20]},a[0]&2097152&&{paddingBottom:l[21]},a[0]&512&&{visibleRows:l[9]},a[1]&1048576&&st(l[51])]):{};e.$set(c)}},i(l){i||(e&&Y(e.$$.fragment,l),i=!0)},o(l){e&&F(e.$$.fragment,l),i=!1},d(l){l&&D(t),e&&me(e,l)}}}function nl(n){let e,t,i,s,o,r,l,a,c=[],f=new Map,w,k,m,b,p,d,v,C,y=[],R=new Map,j,x,B=[],J=new Map,ee,X=[],fe=new Map,Oe,we,Re,ne,ze,be,G=te(n[4]),S=[];for(let g=0;g<G.length;g+=1)S[g]=gi(hi(n,G,g));const V=g=>F(S[g],1,1,()=>{S[g]=null});l=new Ho({props:{headers:n[1],ganttBodyColumns:n[17],ganttBodyUnit:n[0]}}),l.$on("dateSelected",n[50]);let le=te(n[24]);const Be=g=>g[142].model.id;for(let g=0;g<le.length;g+=1){let h=di(n,le,g),H=Be(h);f.set(H,c[g]=mi(H,h))}p=new Io({props:{columns:n[17],columnStrokeColor:n[7],columnStrokeWidth:n[8],useCanvasColumns:n[6]}});let De=te(n[9]);const Ye=g=>g[145].model.id;for(let g=0;g<De.length;g+=1){let h=fi(n,De,g),H=Ye(h);R.set(H,y[g]=wi(H,h))}let Me=te(n[24]);const Ie=g=>g[142].model.id;for(let g=0;g<Me.length;g+=1){let h=ui(n,Me,g),H=Ie(h);J.set(H,B[g]=bi(H,h))}let O=te(n[22]);const ie=g=>g[139].model.id;for(let g=0;g<O.length;g+=1){let h=ci(n,O,g),H=ie(h);fe.set(H,X[g]=pi(H,h))}let q=te(n[5]),Q=[];for(let g=0;g<q.length;g+=1)Q[g]=_i(ai(n,q,g));const Ee=g=>F(Q[g],1,1,()=>{Q[g]=null});return{c(){e=W("div");for(let g=0;g<S.length;g+=1)S[g].c();t=se(),i=W("div"),s=W("div"),o=W("div"),r=W("div"),ke(l.$$.fragment),a=se();for(let g=0;g<c.length;g+=1)c[g].c();k=se(),m=W("div"),b=W("div"),ke(p.$$.fragment),d=se(),v=W("div"),C=W("div");for(let g=0;g<y.length;g+=1)y[g].c();j=se(),x=W("div");for(let g=0;g<B.length;g+=1)B[g].c();ee=se();for(let g=0;g<X.length;g+=1)X[g].c();Oe=se();for(let g=0;g<Q.length;g+=1)Q[g].c();_(r,"class","header-container"),z(r,"width",n[11]+"px"),_(o,"class","sg-header-scroller svelte-843l0i"),_(s,"class","sg-header"),Ot(()=>n[110].call(s)),z(C,"transform","translateY("+n[20]+"px)"),_(v,"class","sg-rows svelte-843l0i"),z(v,"height",n[19]+"px"),_(x,"class","sg-foreground svelte-843l0i"),_(b,"class","content svelte-843l0i"),z(b,"width",n[11]+"px"),_(m,"class","sg-timeline-body svelte-843l0i"),Ot(()=>n[113].call(m)),U(m,"zooming",n[18]),_(i,"class","sg-timeline sg-view svelte-843l0i"),_(e,"class",Re="sg-gantt "+n[3]+" svelte-843l0i"),U(e,"sg-disable-transition",!n[16])},m(g,h){E(g,e,h);for(let H=0;H<S.length;H+=1)S[H]&&S[H].m(e,null);L(e,t),L(e,i),L(i,s),L(s,o),L(o,r),ge(l,r,null),L(r,a);for(let H=0;H<c.length;H+=1)c[H]&&c[H].m(r,null);n[109](s),w=xn(s,n[110].bind(s)),L(i,k),L(i,m),L(m,b),ge(p,b,null),L(b,d),L(b,v),L(v,C);for(let H=0;H<y.length;H+=1)y[H]&&y[H].m(C,null);n[111](v),L(b,j),L(b,x);for(let H=0;H<B.length;H+=1)B[H]&&B[H].m(x,null);L(x,ee);for(let H=0;H<X.length;H+=1)X[H]&&X[H].m(x,null);L(b,Oe);for(let H=0;H<Q.length;H+=1)Q[H]&&Q[H].m(b,null);n[112](m),we=xn(m,n[113].bind(m)),n[114](e),ne=!0,ze||(be=[tt(n[47].call(null,o)),tt(n[46].call(null,m)),Ae(m,"wheel",n[49]),Ae(e,"mousedown",Nn(n[45])),Ae(e,"click",Nn(n[45])),Ae(e,"dblclick",n[45]),Ae(e,"mouseover",n[45]),Ae(e,"mouseleave",n[45])],ze=!0)},p(g,h){if(h[0]&3674644|h[1]&1179648){G=te(g[4]);let I;for(I=0;I<G.length;I+=1){const Te=hi(g,G,I);S[I]?(S[I].p(Te,h),Y(S[I],1)):(S[I]=gi(Te),S[I].c(),Y(S[I],1),S[I].m(e,t))}for(Pe(),I=G.length;I<S.length;I+=1)V(I);We()}const H={};h[0]&2&&(H.headers=g[1]),h[0]&131072&&(H.ganttBodyColumns=g[17]),h[0]&1&&(H.ganttBodyUnit=g[0]),l.$set(H),h[0]&16777216&&(le=te(g[24]),Pe(),c=Wt(c,h,Be,1,g,le,f,r,Pt,mi,null,di),We()),(!ne||h[0]&2048)&&z(r,"width",g[11]+"px");const Le={};if(h[0]&131072&&(Le.columns=g[17]),h[0]&128&&(Le.columnStrokeColor=g[7]),h[0]&256&&(Le.columnStrokeWidth=g[8]),h[0]&64&&(Le.useCanvasColumns=g[6]),p.$set(Le),h[0]&512&&(De=te(g[9]),Pe(),y=Wt(y,h,Ye,1,g,De,R,C,Pt,wi,null,fi),We()),(!ne||h[0]&1048576)&&z(C,"transform","translateY("+g[20]+"px)"),(!ne||h[0]&524288)&&z(v,"height",g[19]+"px"),h[0]&16777216&&(Me=te(g[24]),Pe(),B=Wt(B,h,Ie,1,g,Me,J,x,Pt,bi,ee,ui),We()),h[0]&4194304&&(O=te(g[22]),Pe(),X=Wt(X,h,ie,1,g,O,fe,x,Pt,pi,null,ci),We()),h[0]&3146272|h[1]&1048576){q=te(g[5]);let I;for(I=0;I<q.length;I+=1){const Te=ai(g,q,I);Q[I]?(Q[I].p(Te,h),Y(Q[I],1)):(Q[I]=_i(Te),Q[I].c(),Y(Q[I],1),Q[I].m(b,null))}for(Pe(),I=q.length;I<Q.length;I+=1)Ee(I);We()}(!ne||h[0]&2048)&&z(b,"width",g[11]+"px"),(!ne||h[0]&262144)&&U(m,"zooming",g[18]),(!ne||h[0]&8&&Re!==(Re="sg-gantt "+g[3]+" svelte-843l0i"))&&_(e,"class",Re),(!ne||h[0]&65544)&&U(e,"sg-disable-transition",!g[16])},i(g){if(!ne){for(let h=0;h<G.length;h+=1)Y(S[h]);Y(l.$$.fragment,g);for(let h=0;h<le.length;h+=1)Y(c[h]);Y(p.$$.fragment,g);for(let h=0;h<De.length;h+=1)Y(y[h]);for(let h=0;h<Me.length;h+=1)Y(B[h]);for(let h=0;h<O.length;h+=1)Y(X[h]);for(let h=0;h<q.length;h+=1)Y(Q[h]);ne=!0}},o(g){S=S.filter(Boolean);for(let h=0;h<S.length;h+=1)F(S[h]);F(l.$$.fragment,g);for(let h=0;h<c.length;h+=1)F(c[h]);F(p.$$.fragment,g);for(let h=0;h<y.length;h+=1)F(y[h]);for(let h=0;h<B.length;h+=1)F(B[h]);for(let h=0;h<X.length;h+=1)F(X[h]);Q=Q.filter(Boolean);for(let h=0;h<Q.length;h+=1)F(Q[h]);ne=!1},d(g){g&&D(e),nt(S,g),me(l);for(let h=0;h<c.length;h+=1)c[h].d();n[109](null),w(),me(p);for(let h=0;h<y.length;h+=1)y[h].d();n[111](null);for(let h=0;h<B.length;h+=1)B[h].d();for(let h=0;h<X.length;h+=1)X[h].d();nt(Q,g),n[112](null),we(),n[114](null),ze=!1,Xe(be)}}}function ki(n){for(const e in n)if(n[e]==null)throw new Error(`"${e}" is not set`)}function Kt(n){return n instanceof Date?n.valueOf():n}function sn(n){}function il(n,e,t){const i=["rows","tasks","timeRanges","rowPadding","rowHeight","from","to","minWidth","fitWidth","classes","headers","zoomLevels","taskContent","tableWidth","resizeHandleWidth","onTaskButtonClick","dateAdapter","magnetUnit","magnetOffset","columnUnit","columnOffset","ganttTableModules","ganttBodyModules","reflectOnParentRows","reflectOnChildRows","useCanvasColumns","columnStrokeColor","columnStrokeWidth","highlightedDurations","highlightColor","taskElementHook","columnService","api","taskFactory","rowFactory","dndManager","timeRangeFactory","utils","refreshTimeRanges","refreshTasks","getRowContainer","selectTask","unselectTasks","scrollToRow","scrollToTask","updateTask","updateTasks","updateRow","updateRows","getRow","getTask","getTasks"];let s=Fn(e,i),o,r,l,a,c,f,w,k,m,b,p,d,v,C,y,R,j,x,B,J,ee,X,fe,Oe=[],we=!1,{rows:Re}=e,{tasks:ne=[]}=e,{timeRanges:ze=[]}=e;ki({rows:Re});let{rowPadding:be=6}=e,{rowHeight:G=52}=e;const S=_e(G);A(n,S,u=>t(122,R=u));const V=_e(be);A(n,V,u=>t(108,p=u));let{from:le}=e,{to:Be}=e;ki({from:le,to:Be});const De=_e(Kt(le));A(n,De,u=>t(107,b=u));const Ye=_e(Kt(Be));A(n,Ye,u=>t(106,m=u));let{minWidth:Me=800}=e,{fitWidth:Ie=!1}=e;const O=_e(Me);A(n,O,u=>t(119,v=u));const ie=_e(Ie);A(n,ie,u=>t(118,d=u));let{classes:q=[]}=e,{headers:Q=[{unit:"day",format:"MMMM Do"},{unit:"hour",format:"H:mm"}]}=e,{zoomLevels:Ee=[{headers:[{unit:"day",format:"DD.MM.YYYY"},{unit:"hour",format:"HH"}],minWidth:800,fitWidth:!0},{headers:[{unit:"hour",format:"ddd D/M, H A"},{unit:"minute",format:"mm",offset:15}],minWidth:5e3,fitWidth:!1}]}=e,{taskContent:g=null}=e,{tableWidth:h=240}=e,{resizeHandleWidth:H=10}=e,{onTaskButtonClick:Le=null}=e,{dateAdapter:I=new $o}=e,{magnetUnit:Te="minute"}=e,{magnetOffset:lt=15}=e,de;yt(Te,lt);function yt(u,T){u&&T&&t(96,de=ho(u,T))}let{columnUnit:je="minute"}=e,{columnOffset:qe=15}=e,{ganttTableModules:ae=[]}=e,{ganttBodyModules:Tt=[]}=e,{reflectOnParentRows:Ne=!0}=e,{reflectOnChildRows:Qe=!1}=e,{useCanvasColumns:ft=!0}=e,{columnStrokeColor:Ve="#efefef"}=e,{columnStrokeWidth:Tn=1}=e,{highlightedDurations:ln}=e,{highlightColor:rn="#6eb859"}=e,{taskElementHook:an=null}=e;const Ct=_e(null);A(n,Ct,u=>t(25,B=u));const Xt=_e(null);A(n,Xt,u=>t(10,a=u));const Ft=_e(null);A(n,Ft,u=>t(23,j=u));const cn=kn([Ct,O,ie],([u,T,P])=>P&&u>T?u:T);A(n,cn,u=>t(11,k=u));const Cn=Is();Ht("dataStore",Cn);const{rowStore:dt,taskStore:rt,timeRangeStore:Sn,allTasks:Rn,allRows:zn,allTimeRanges:Dn,rowTaskCache:Mn,draggingTaskCache:En}=Cn;A(n,dt,u=>t(105,f=u)),A(n,rt,u=>t(101,o=u)),A(n,Rn,u=>t(117,w=u)),A(n,zn,u=>t(104,c=u)),A(n,Dn,u=>t(24,x=u)),A(n,Mn,u=>t(103,l=u)),A(n,En,u=>t(102,r=u));const Ze={getColumnByDate(u){const T=Zo(Nt,u);return T[0]?T[0]:T[1]},getColumnByPosition(u){const T=Vo(Nt,u);return T[0]?T[0]:T[1]},getPositionByDate(u){if(!u)return null;const T=this.getColumnByDate(u),N=(u-T.from)/T.duration*T.width;return T.left+N},getDateByPosition(u){const T=this.getColumnByPosition(u);u=u-T.left;let P=T.duration/T.width*u;return T.from+P},roundTo(u){return Math.round(u/de)*de}};let St=!0;async function Gi(){t(16,St=!St),await dn(),J.offsetHeight,t(16,St=!!St)}let Nt;function ji(u,T,P,N,Z){u instanceof Date&&(u=u.valueOf()),T instanceof Date&&(T=T.valueOf());let $=[];const He=Xi(u.valueOf(),T.valueOf(),P,N,ln);let pe=0,mt=0;return He.forEach(function(Ue){pe=mt,mt=yn(Ue.to,b,m,k),$.push({width:mt-pe,from:Ue.from,to:Ue.to,left:pe,duration:Ue.duration,...Ue.isHighlighted&&{bgHighlightColor:rn}})}),$}Ht("dimensions",{from:De,to:Ye,width:cn,visibleWidth:Ct,visibleHeight:Xt,headerHeight:Ft}),Ht("options",{dateAdapter:I,taskElementHook:an,taskContent:g,rowPadding:V,rowHeight:S,resizeHandleWidth:H,reflectOnParentRows:Ne,reflectOnChildRows:Qe,onTaskButtonClick:Le});const Rt=_e(null);A(n,Rt,u=>t(120,C=u));const zt=_e(null);A(n,zt,u=>t(121,y=u));const Hn={scrollables:Oe,hoveredRow:Rt,selectedRow:zt};Ht("gantt",Hn),_n(()=>{Object.assign(Hn,{rowContainer:fe,mainContainer:X,mainHeaderContainer:ee}),ce.registerEvent("tasks","move"),ce.registerEvent("tasks","select"),ce.registerEvent("tasks","switchRow"),ce.registerEvent("tasks","moveEnd"),ce.registerEvent("tasks","change"),ce.registerEvent("tasks","changed"),ce.registerEvent("gantt","viewChanged"),ce.registerEvent("gantt","dateSelected"),ce.registerEvent("tasks","dblclicked"),ce.registerEvent("timeranges","clicked"),ce.registerEvent("timeranges","resized"),t(95,we=!0)});const{onDelegatedEvent:Dt,offDelegatedEvent:xt,onEvent:qi}=Ko();Dt("mousedown","data-task-id",(u,T,P)=>{const N=+T;Ii(u)&&!P.classList.contains("sg-task-reflected")&&(u.ctrlKey?Je.toggleSelection(N,P):Je.selectSingle(N,P),Je.dispatchSelectionEvent(N,u)),ce.tasks.raise.select(o.entities[N])}),Dt("mouseover","data-row-id",(u,T,P)=>{ue(Rt,C=+T,C)}),Dt("click","data-row-id",(u,T,P)=>{if(Je.unSelectTasks(),y==+T){ue(zt,y=null,y);return}ue(zt,y=+T,y)}),Dt("dblclick","data-task-id",(u,T,P)=>{const N=+T;ce.tasks.raise.dblclicked(o.entities[N],u)}),Dt("mouseleave","empty",(u,T,P)=>{ue(Rt,C=null,C)}),Ws(()=>{xt("click","data-task-id"),xt("click","data-row-id"),xt("mousedown","data-task-id"),xt("dblclick","data-task-id"),Je.unSelectTasks()});let un=0;function Qi(u){const T=P=>{const{scrollTop:N,scrollLeft:Z}=u;Oe.forEach($=>{$.orientation==="horizontal"?$.node.scrollLeft=Z:$.node.scrollTop=N}),t(97,un=N)};return u.addEventListener("scroll",T),{destroy(){u.removeEventListener("scroll",T,!1)}}}function Vi(u){Oe.push({node:u,orientation:"horizontal"})}function Zi(u){t(2,h=u.detail.left)}let Ke=0,fn=!1;async function Ki(u){if(u.ctrlKey){u.preventDefault();const T=Ke;if(u.deltaY>0?Ke=Math.max(Ke-1,0):Ke=Math.min(Ke+1,Ee.length-1),T!=Ke&&Ee[Ke]){const P={columnUnit:je,columnOffset:qe,minWidth:v,...Ee[Ke]},N=P.minWidth/k,Z=X,$=kt(Z,u),mt=(Z.scrollLeft+$.x)*N-$.x+Z.clientWidth/2;t(0,je=P.columnUnit),t(52,qe=P.columnOffset),ue(O,v=P.minWidth,v),P.headers&&t(1,Q=P.headers),P.fitWidth&&ue(ie,d=P.fitWidth,d),ce.gantt.raise.viewChanged(),t(18,fn=!0),await dn(),Z.scrollLeft=mt,t(18,fn=!1)}}}function Ji(u){ue(De,b=u.detail.from,b),ue(Ye,m=u.detail.to,m),ce.gantt.raise.dateSelected({from:b,to:m})}function $i(u){const T=ht.createRows(u);dt.addAll(T)}async function es(u){await dn();const T=[],P={rowPadding:p};u.forEach(N=>{const Z=$e.createTask(N),$=f.entities[Z.model.resourceId];Z.reflections=[],Qe&&$.allChildren&&$.allChildren.forEach(He=>{const pe=nn(Z,He,P);Z.reflections.push(pe.model.id),T.push(pe)}),Ne&&$.allParents.length>0&&$.allParents.forEach(He=>{const pe=nn(Z,He,P);Z.reflections.push(pe.model.id),T.push(pe)}),T.push(Z)}),rt.addAll(T)}function ts(u){const T=u.map(P=>Wn.create(P));Sn.addAll(T)}const ce=new Go,Je=new Qo(rt),$e=new Us(Ze),ht=new jo,Pn=new lo(dt),Wn=new qo(Ze),he=new yo;Ht("services",{utils:he,api:ce,dndManager:Pn,selectionManager:Je,columnService:Ze});function Bn(){Sn._update(({ids:u,entities:T})=>(u.forEach(P=>{const N=T[P],Z=Ze.getPositionByDate(N.model.from)|0,$=Ze.getPositionByDate(N.model.to)|0;N.left=Z,N.width=$-Z}),{ids:u,entities:T}))}function Ln(){w.forEach(u=>{const T=Ze.getPositionByDate(u.model.from)|0,P=Ze.getPositionByDate(u.model.to)|0;u.left=T,u.width=P-T}),rt.refresh()}function ns(){return fe}function is(u){o.entities[u]&&Je.selectSingle(u,J.querySelector(`data-task-id='${u}'`))}function ss(){Je.unSelectTasks()}function os(u,T="auto"){const{scrollTop:P,clientHeight:N}=X,Z=c.findIndex(He=>He.model.id==u);if(Z===-1)return;const $=Z*G;$<P&&X.scrollTo({top:$,behavior:T}),$>P+N&&X.scrollTo({top:$+G-N,behavior:T})}function ls(u,T="auto"){const{scrollLeft:P,scrollTop:N,clientWidth:Z,clientHeight:$}=X,He=o.entities[u];if(!He)return;const pe=He.left,Ue=c.findIndex(ks=>ks.model.id==He.model.resourceId)*G,Et={top:void 0,left:void 0,behavior:T};pe<P&&(Et.left=pe),pe>P+Z&&(Et.left=pe+He.width-Z),Ue<N&&(Et.top=Ue),Ue>N+$&&(Et.top=Ue+G-$),X.scrollTo(Et)}function rs(u){const T=$e.createTask(u);rt.upsert(T)}function as(u){const T=u.map(P=>$e.createTask(P));rt.upsertAll(T)}function cs(u){const T=ht.createRow(u,null);dt.upsert(T)}function us(u){const T=u.map(P=>ht.createRow(P,null));dt.upsertAll(T)}function fs(u){return f.entities[u]}function ds(u){return o.entities[u]}function hs(u){return l[u]?l[u].map(T=>o.entities[T]):null}let gt=[],An,Mt,Gt,On=0,Yn=0,jt=[],In;function gs(u){at[u?"unshift":"push"](()=>{ee=u,t(13,ee)})}function ms(){j=this.clientHeight,Ft.set(j)}function ws(u){at[u?"unshift":"push"](()=>{fe=u,t(15,fe)})}function bs(u){at[u?"unshift":"push"](()=>{X=u,t(14,X)})}function ps(){a=this.clientHeight,Xt.set(a),B=this.clientWidth,Ct.set(B)}function _s(u){at[u?"unshift":"push"](()=>{J=u,t(12,J)})}return n.$$set=u=>{e=Ge(Ge({},e),Ms(u)),t(51,s=Fn(e,i)),"rows"in u&&t(56,Re=u.rows),"tasks"in u&&t(57,ne=u.tasks),"timeRanges"in u&&t(58,ze=u.timeRanges),"rowPadding"in u&&t(59,be=u.rowPadding),"rowHeight"in u&&t(60,G=u.rowHeight),"from"in u&&t(61,le=u.from),"to"in u&&t(62,Be=u.to),"minWidth"in u&&t(63,Me=u.minWidth),"fitWidth"in u&&t(64,Ie=u.fitWidth),"classes"in u&&t(3,q=u.classes),"headers"in u&&t(1,Q=u.headers),"zoomLevels"in u&&t(65,Ee=u.zoomLevels),"taskContent"in u&&t(66,g=u.taskContent),"tableWidth"in u&&t(2,h=u.tableWidth),"resizeHandleWidth"in u&&t(67,H=u.resizeHandleWidth),"onTaskButtonClick"in u&&t(68,Le=u.onTaskButtonClick),"dateAdapter"in u&&t(69,I=u.dateAdapter),"magnetUnit"in u&&t(70,Te=u.magnetUnit),"magnetOffset"in u&&t(71,lt=u.magnetOffset),"columnUnit"in u&&t(0,je=u.columnUnit),"columnOffset"in u&&t(52,qe=u.columnOffset),"ganttTableModules"in u&&t(4,ae=u.ganttTableModules),"ganttBodyModules"in u&&t(5,Tt=u.ganttBodyModules),"reflectOnParentRows"in u&&t(72,Ne=u.reflectOnParentRows),"reflectOnChildRows"in u&&t(73,Qe=u.reflectOnChildRows),"useCanvasColumns"in u&&t(6,ft=u.useCanvasColumns),"columnStrokeColor"in u&&t(7,Ve=u.columnStrokeColor),"columnStrokeWidth"in u&&t(8,Tn=u.columnStrokeWidth),"highlightedDurations"in u&&t(74,ln=u.highlightedDurations),"highlightColor"in u&&t(75,rn=u.highlightColor),"taskElementHook"in u&&t(76,an=u.taskElementHook)},n.$$.update=()=>{if(n.$$.dirty[1]&33554432|n.$$.dirty[3]&4&&we&&$i(Re),n.$$.dirty[1]&67108864|n.$$.dirty[3]&4&&we&&es(ne),n.$$.dirty[1]&134217728|n.$$.dirty[3]&4&&we&&ts(ze),n.$$.dirty[1]&536870912&&ue(S,R=G,R),n.$$.dirty[1]&268435456&&ue(V,p=be,p),n.$$.dirty[1]&1073741824&&ue(De,b=Kt(le),b),n.$$.dirty[2]&1&&ue(Ye,m=Kt(Be),m),n.$$.dirty[2]&6&&(ue(O,v=Me,v),ue(ie,d=Ie,d)),n.$$.dirty[2]&768&&yt(Te,lt),n.$$.dirty[0]&2049|n.$$.dirty[1]&2097152|n.$$.dirty[3]&24576&&(t(17,Nt=ji(b,m,je,qe)),Gi(),Bn(),Ln()),n.$$.dirty[3]&36864&&(t(53,$e.rowPadding=p,$e),t(53,$e.rowEntities=f.entities,$e)),n.$$.dirty[1]&536870912&&t(54,ht.rowHeight=G,ht),n.$$.dirty[0]&2048|n.$$.dirty[2]&896|n.$$.dirty[3]&24584&&(t(55,he.from=b,he),t(55,he.to=m,he),t(55,he.width=k,he),t(55,he.magnetOffset=lt,he),t(55,he.magnetUnit=Te,he),t(55,he.magnetDuration=de,he),t(55,he.dateAdapter=I,he)),n.$$.dirty[3]&2048&&t(98,gt=c.filter(u=>!u.hidden)),n.$$.dirty[1]&536870912|n.$$.dirty[3]&32&&t(19,An=gt.length*G),n.$$.dirty[1]&536870912|n.$$.dirty[3]&16&&t(99,Mt=Math.floor(un/G)),n.$$.dirty[0]&1024|n.$$.dirty[1]&536870912|n.$$.dirty[3]&96&&t(100,Gt=Math.min(Mt+Math.ceil(a/G),gt.length-1)),n.$$.dirty[1]&536870912|n.$$.dirty[3]&64&&t(20,On=Mt*G),n.$$.dirty[1]&536870912|n.$$.dirty[3]&160&&t(21,Yn=(gt.length-Gt-1)*G),n.$$.dirty[3]&224&&t(9,jt=gt.slice(Mt,Gt+1)),n.$$.dirty[0]&512|n.$$.dirty[3]&1792){const u=[],T={};for(let P=0;P<jt.length;P++){const N=jt[P];if(l[N.model.id])for(let Z=0;Z<l[N.model.id].length;Z++){const $=l[N.model.id][Z];u.push(o.entities[$]),T[$]=!0}}for(const P in r)T[P]||(u.push(o.entities[P]),T[P]=!0);t(22,In=u)}},[je,Q,h,q,ae,Tt,ft,Ve,Tn,jt,a,k,J,ee,X,fe,St,Nt,fn,An,On,Yn,In,j,x,B,S,V,De,Ye,O,ie,Ct,Xt,Ft,cn,dt,rt,Rn,zn,Dn,Mn,En,Rt,zt,qi,Qi,Vi,Zi,Ki,Ji,s,qe,$e,ht,he,Re,ne,ze,be,G,le,Be,Me,Ie,Ee,g,H,Le,I,Te,lt,Ne,Qe,ln,rn,an,Ze,ce,Pn,Wn,Bn,Ln,ns,is,ss,os,ls,rs,as,cs,us,fs,ds,hs,we,de,un,gt,Mt,Gt,o,r,l,c,f,m,b,p,gs,ms,ws,bs,ps,_s]}class sl extends Se{constructor(e){super(),Ce(this,e,il,nl,ve,{rows:56,tasks:57,timeRanges:58,rowPadding:59,rowHeight:60,from:61,to:62,minWidth:63,fitWidth:64,classes:3,headers:1,zoomLevels:65,taskContent:66,tableWidth:2,resizeHandleWidth:67,onTaskButtonClick:68,dateAdapter:69,magnetUnit:70,magnetOffset:71,columnUnit:0,columnOffset:52,ganttTableModules:4,ganttBodyModules:5,reflectOnParentRows:72,reflectOnChildRows:73,useCanvasColumns:6,columnStrokeColor:7,columnStrokeWidth:8,highlightedDurations:74,highlightColor:75,taskElementHook:76,columnService:77,api:78,taskFactory:53,rowFactory:54,dndManager:79,timeRangeFactory:80,utils:55,refreshTimeRanges:81,refreshTasks:82,getRowContainer:83,selectTask:84,unselectTasks:85,scrollToRow:86,scrollToTask:87,updateTask:88,updateTasks:89,updateRow:90,updateRows:91,getRow:92,getTask:93,getTasks:94},null,[-1,-1,-1,-1,-1])}get columnService(){return this.$$.ctx[77]}get api(){return this.$$.ctx[78]}get taskFactory(){return this.$$.ctx[53]}get rowFactory(){return this.$$.ctx[54]}get dndManager(){return this.$$.ctx[79]}get timeRangeFactory(){return this.$$.ctx[80]}get utils(){return this.$$.ctx[55]}get refreshTimeRanges(){return this.$$.ctx[81]}get refreshTasks(){return this.$$.ctx[82]}get getRowContainer(){return this.$$.ctx[83]}get selectTask(){return this.$$.ctx[84]}get unselectTasks(){return this.$$.ctx[85]}get scrollToRow(){return this.$$.ctx[86]}get scrollToTask(){return this.$$.ctx[87]}get updateTask(){return this.$$.ctx[88]}get updateTasks(){return this.$$.ctx[89]}get updateRow(){return this.$$.ctx[90]}get updateRows(){return this.$$.ctx[91]}get getRow(){return this.$$.ctx[92]}get getTask(){return this.$$.ctx[93]}get getTasks(){return this.$$.ctx[94]}}var ol=".sg-tree-expander.svelte-1tk4vqn{cursor:pointer;min-width:1.4em;display:flex;justify-content:center;align-items:center}.sg-cell-inner.svelte-1tk4vqn{display:flex}";ye(ol);function vi(n){let e,t,i;function s(l,a){return l[0].expanded?rl:ll}let o=s(n),r=o(n);return{c(){e=W("div"),r.c(),_(e,"class","sg-tree-expander svelte-1tk4vqn")},m(l,a){E(l,e,a),r.m(e,null),t||(i=Ae(e,"click",n[1]),t=!0)},p(l,a){o!==(o=s(l))&&(r.d(1),r=o(l),r&&(r.c(),r.m(e,null)))},d(l){l&&D(e),r.d(),t=!1,i()}}}function ll(n){let e;return{c(){e=W("i"),_(e,"class","fas fa-angle-right")},m(t,i){E(t,e,i)},d(t){t&&D(e)}}}function rl(n){let e;return{c(){e=W("i"),_(e,"class","fas fa-angle-down")},m(t,i){E(t,e,i)},d(t){t&&D(e)}}}function al(n){let e,t,i,s=n[0].children&&vi(n);const o=n[3].default,r=Ss(o,n,n[2],null);return{c(){e=W("div"),s&&s.c(),t=se(),r&&r.c(),_(e,"class","sg-cell-inner svelte-1tk4vqn"),z(e,"padding-left",n[0].childLevel*3+"em")},m(l,a){E(l,e,a),s&&s.m(e,null),L(e,t),r&&r.m(e,null),i=!0},p(l,[a]){l[0].children?s?s.p(l,a):(s=vi(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),r&&r.p&&(!i||a&4)&&zs(r,o,l,l[2],i?Rs(o,l[2],a,null):Ds(l[2]),null),(!i||a&1)&&z(e,"padding-left",l[0].childLevel*3+"em")},i(l){i||(Y(r,l),i=!0)},o(l){F(r,l),i=!1},d(l){l&&D(e),s&&s.d(),r&&r.d(l)}}}function cl(n,e,t){let{$$slots:i={},$$scope:s}=e,{row:o}=e;const r=Ut();function l(){o.expanded?r("rowCollapsed",{row:o}):r("rowExpanded",{row:o})}return n.$$set=a=>{"row"in a&&t(0,o=a.row),"$$scope"in a&&t(2,s=a.$$scope)},[o,l,s,i]}class ul extends Se{constructor(e){super(),Ce(this,e,cl,al,ve,{row:0})}}var fl=".sg-table-row.svelte-oze9vk{display:inline-flex;min-width:100%;align-items:stretch;position:relative;font-weight:400;font-size:14px}.sg-table-cell.svelte-oze9vk{border-left:1px solid #eee}.sg-table-body-cell.svelte-oze9vk{border-bottom:#efefef 1px solid;background-color:#fff;font-weight:bold}.sg-resource-image.svelte-oze9vk{width:2.4em;height:2.4em;border-radius:50%;margin-right:0.6em;background:#047c69}.sg-resource-info.svelte-oze9vk{flex:1;height:100%;display:flex;flex-direction:row;align-items:center}.sg-table-icon.svelte-oze9vk{margin-right:0.5em}";ye(fl);function yi(n,e,t){const i=n.slice();return i[12]=e[t],i}function dl(n){let e,t,i=n[1].model.iconClass&&Ti(n);function s(l,a){return l[1].model.headerHtml?bl:l[12].renderer?wl:l[12].type==="resourceInfo"?ml:gl}let o=s(n),r=o(n);return{c(){i&&i.c(),e=se(),r.c(),t=re()},m(l,a){i&&i.m(l,a),E(l,e,a),r.m(l,a),E(l,t,a)},p(l,a){l[1].model.iconClass?i?i.p(l,a):(i=Ti(l),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),o===(o=s(l))&&r?r.p(l,a):(r.d(1),r=o(l),r&&(r.c(),r.m(t.parentNode,t)))},i:K,o:K,d(l){l&&(D(e),D(t)),i&&i.d(l),r.d(l)}}}function hl(n){let e,t;return e=new ul({props:{row:n[1],$$slots:{default:[vl]},$$scope:{ctx:n}}}),e.$on("rowCollapsed",n[8]),e.$on("rowExpanded",n[9]),{c(){ke(e.$$.fragment)},m(i,s){ge(e,i,s),t=!0},p(i,s){const o={};s&2&&(o.row=i[1]),s&32771&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(i){t||(Y(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function Ti(n){let e,t,i;return{c(){e=W("div"),t=W("i"),_(t,"class",i=en(n[1].model.iconClass)+" svelte-oze9vk"),_(e,"class","sg-table-icon svelte-oze9vk")},m(s,o){E(s,e,o),L(e,t)},p(s,o){o&2&&i!==(i=en(s[1].model.iconClass)+" svelte-oze9vk")&&_(t,"class",i)},d(s){s&&D(e)}}}function gl(n){let e=n[1].model[n[12].property]+"",t;return{c(){t=Fe(e)},m(i,s){E(i,t,s)},p(i,s){s&3&&e!==(e=i[1].model[i[12].property]+"")&&ot(t,e)},d(i){i&&D(t)}}}function ml(n){let e,t,i,s,o=n[1].model[n[12].property]+"",r;return{c(){e=W("img"),i=se(),s=W("div"),r=Fe(o),_(e,"class","sg-resource-image svelte-oze9vk"),Xn(e.src,t=n[1].model.imageSrc)||_(e,"src",t),_(e,"alt",""),_(s,"class","sg-resource-title")},m(l,a){E(l,e,a),E(l,i,a),E(l,s,a),L(s,r)},p(l,a){a&2&&!Xn(e.src,t=l[1].model.imageSrc)&&_(e,"src",t),a&3&&o!==(o=l[1].model[l[12].property]+"")&&ot(r,o)},d(l){l&&(D(e),D(i),D(s))}}}function wl(n){let e,t=n[12].renderer(n[1])+"",i;return{c(){e=new ut(!1),i=re(),e.a=i},m(s,o){e.m(t,s,o),E(s,i,o)},p(s,o){o&3&&t!==(t=s[12].renderer(s[1])+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function bl(n){let e,t=n[1].model.headerHtml+"",i;return{c(){e=new ut(!1),i=re(),e.a=i},m(s,o){e.m(t,s,o),E(s,i,o)},p(s,o){o&2&&t!==(t=s[1].model.headerHtml+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function Ci(n){let e,t,i;return{c(){e=W("div"),t=W("i"),_(t,"class",i=en(n[1].model.iconClass)+" svelte-oze9vk"),_(e,"class","sg-table-icon svelte-oze9vk")},m(s,o){E(s,e,o),L(e,t)},p(s,o){o&2&&i!==(i=en(s[1].model.iconClass)+" svelte-oze9vk")&&_(t,"class",i)},d(s){s&&D(e)}}}function pl(n){let e=n[1].model[n[12].property]+"",t;return{c(){t=Fe(e)},m(i,s){E(i,t,s)},p(i,s){s&3&&e!==(e=i[1].model[i[12].property]+"")&&ot(t,e)},d(i){i&&D(t)}}}function _l(n){let e,t=n[12].renderer(n[1])+"",i;return{c(){e=new ut(!1),i=re(),e.a=i},m(s,o){e.m(t,s,o),E(s,i,o)},p(s,o){o&3&&t!==(t=s[12].renderer(s[1])+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function kl(n){let e,t=n[1].model.headerHtml+"",i;return{c(){e=new ut(!1),i=re(),e.a=i},m(s,o){e.m(t,s,o),E(s,i,o)},p(s,o){o&2&&t!==(t=s[1].model.headerHtml+"")&&e.p(t)},d(s){s&&(D(i),e.d())}}}function vl(n){let e,t,i=n[1].model.iconClass&&Ci(n);function s(l,a){return l[1].model.headerHtml?kl:l[12].renderer?_l:pl}let o=s(n),r=o(n);return{c(){i&&i.c(),e=se(),r.c(),t=re()},m(l,a){i&&i.m(l,a),E(l,e,a),r.m(l,a),E(l,t,a)},p(l,a){l[1].model.iconClass?i?i.p(l,a):(i=Ci(l),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),o===(o=s(l))&&r?r.p(l,a):(r.d(1),r=o(l),r&&(r.c(),r.m(t.parentNode,t)))},d(l){l&&(D(e),D(t)),i&&i.d(l),r.d(l)}}}function Si(n){let e,t,i,s,o;const r=[hl,dl],l=[];function a(c,f){return c[12].type=="tree"?0:1}return t=a(n),i=l[t]=r[t](n),{c(){e=W("div"),i.c(),s=se(),_(e,"class","sg-table-body-cell sg-table-cell svelte-oze9vk"),z(e,"width",n[12].width+"px")},m(c,f){E(c,e,f),l[t].m(e,null),L(e,s),o=!0},p(c,f){let w=t;t=a(c),t===w?l[t].p(c,f):(Pe(),F(l[w],1,1,()=>{l[w]=null}),We(),i=l[t],i?i.p(c,f):(i=l[t]=r[t](c),i.c()),Y(i,1),i.m(e,s)),(!o||f&1)&&z(e,"width",c[12].width+"px")},i(c){o||(Y(i),o=!0)},o(c){F(i),o=!1},d(c){c&&D(e),l[t].d()}}}function yl(n){let e,t,i,s,o=te(n[0]),r=[];for(let a=0;a<o.length;a+=1)r[a]=Si(yi(n,o,a));const l=a=>F(r[a],1,1,()=>{r[a]=null});return{c(){e=W("div");for(let a=0;a<r.length;a+=1)r[a].c();_(e,"data-row-id",t=n[1].model.id),z(e,"height",n[2]+"px"),_(e,"class",i="sg-table-row "+(n[1].model.classes||"")+" svelte-oze9vk"),U(e,"sg-row-expanded",n[1].expanded),U(e,"sg-hover",n[3]==n[1].model.id),U(e,"sg-selected",n[4]==n[1].model.id)},m(a,c){E(a,e,c);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);s=!0},p(a,[c]){if(c&3){o=te(a[0]);let f;for(f=0;f<o.length;f+=1){const w=yi(a,o,f);r[f]?(r[f].p(w,c),Y(r[f],1)):(r[f]=Si(w),r[f].c(),Y(r[f],1),r[f].m(e,null))}for(Pe(),f=o.length;f<r.length;f+=1)l(f);We()}(!s||c&2&&t!==(t=a[1].model.id))&&_(e,"data-row-id",t),(!s||c&4)&&z(e,"height",a[2]+"px"),(!s||c&2&&i!==(i="sg-table-row "+(a[1].model.classes||"")+" svelte-oze9vk"))&&_(e,"class",i),(!s||c&2)&&U(e,"sg-row-expanded",a[1].expanded),(!s||c&10)&&U(e,"sg-hover",a[3]==a[1].model.id),(!s||c&18)&&U(e,"sg-selected",a[4]==a[1].model.id)},i(a){if(!s){for(let c=0;c<o.length;c+=1)Y(r[c]);s=!0}},o(a){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)F(r[c]);s=!1},d(a){a&&D(e),nt(r,a)}}}function Tl(n,e,t){let i,s,o,{headers:r=null}=e,{row:l=null}=e;const{rowHeight:a}=oe("options");A(n,a,b=>t(2,i=b));const{hoveredRow:c,selectedRow:f}=oe("gantt");A(n,c,b=>t(3,s=b)),A(n,f,b=>t(4,o=b));const w=Ut();_n(()=>{l.model.expanded==!1&&w("rowCollapsed",{row:l})});function k(b){wn.call(this,n,b)}function m(b){wn.call(this,n,b)}return n.$$set=b=>{"headers"in b&&t(0,r=b.headers),"row"in b&&t(1,l=b.row)},n.$$.update=()=>{n.$$.dirty&2&&l.parent&&l.childLevel*3},[r,l,i,s,o,a,c,f,k,m]}class Cl extends Se{constructor(e){super(),Ce(this,e,Tl,yl,ve,{headers:0,row:1})}}var Sl=".bottom-scrollbar-visible.svelte-afbyi7{padding-bottom:17px}.sg-table.svelte-afbyi7{overflow-x:auto;display:flex;flex-direction:column}.sg-table-scroller.svelte-afbyi7{width:100%;border-bottom:1px solid #efefef;overflow-y:hidden}.sg-table-header.svelte-afbyi7{display:flex;align-items:stretch;overflow:hidden;border-bottom:#efefef 1px solid;background-color:#fbfbfb}.sg-table-body.svelte-afbyi7{display:flex;flex:1 1 0;width:100%;overflow-y:hidden}.sg-table-header-cell.svelte-afbyi7{font-size:14px;font-weight:400}.sg-table-cell{white-space:nowrap;overflow:hidden;display:flex;align-items:center;flex-shrink:0;padding:0 0.5em;height:100%}.sg-table-cell:last-child{flex-grow:1}";ye(Sl);function Ri(n,e,t){const i=n.slice();return i[32]=e[t],i}function zi(n,e,t){const i=n.slice();return i[35]=e[t],i}function Di(n){let e,t=n[35].title+"",i,s;return{c(){e=W("div"),i=Fe(t),s=se(),_(e,"class","sg-table-header-cell sg-table-cell svelte-afbyi7"),z(e,"width",n[35].width+"px")},m(o,r){E(o,e,r),L(e,i),L(e,s)},p(o,r){r[0]&32&&t!==(t=o[35].title+"")&&ot(i,t),r[0]&32&&z(e,"width",o[35].width+"px")},d(o){o&&D(e)}}}function Mi(n){let e,t;return e=new Cl({props:{row:n[32],headers:n[5]}}),e.$on("rowExpanded",n[17]),e.$on("rowCollapsed",n[18]),{c(){ke(e.$$.fragment)},m(i,s){ge(e,i,s),t=!0},p(i,s){const o={};s[0]&16&&(o.row=i[32]),s[0]&32&&(o.headers=i[5]),e.$set(o)},i(i){t||(Y(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function Rl(n){let e,t,i,s,o,r,l,a,c,f=te(n[5]),w=[];for(let p=0;p<f.length;p+=1)w[p]=Di(zi(n,f,p));let k=te(n[4]),m=[];for(let p=0;p<k.length;p+=1)m[p]=Mi(Ri(n,k,p));const b=p=>F(m[p],1,1,()=>{m[p]=null});return{c(){e=W("div"),t=W("div");for(let p=0;p<w.length;p+=1)w[p].c();i=se(),s=W("div"),o=W("div"),r=W("div");for(let p=0;p<m.length;p+=1)m[p].c();_(t,"class","sg-table-header svelte-afbyi7"),z(t,"height",n[8]+"px"),_(r,"class","sg-table-rows svelte-afbyi7"),z(r,"padding-top",n[1]+"px"),z(r,"padding-bottom",n[2]+"px"),z(r,"height",n[3]+"px"),_(o,"class","sg-table-scroller svelte-afbyi7"),_(s,"class","sg-table-body svelte-afbyi7"),U(s,"bottom-scrollbar-visible",n[7]),_(e,"class","sg-table sg-view svelte-afbyi7"),z(e,"width",n[0]+"px")},m(p,d){E(p,e,d),L(e,t);for(let v=0;v<w.length;v+=1)w[v]&&w[v].m(t,null);n[22](t),L(e,i),L(e,s),L(s,o),L(o,r);for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(r,null);l=!0,a||(c=tt(n[16].call(null,o)),a=!0)},p(p,d){if(d[0]&32){f=te(p[5]);let v;for(v=0;v<f.length;v+=1){const C=zi(p,f,v);w[v]?w[v].p(C,d):(w[v]=Di(C),w[v].c(),w[v].m(t,null))}for(;v<w.length;v+=1)w[v].d(1);w.length=f.length}if((!l||d[0]&256)&&z(t,"height",p[8]+"px"),d[0]&393264){k=te(p[4]);let v;for(v=0;v<k.length;v+=1){const C=Ri(p,k,v);m[v]?(m[v].p(C,d),Y(m[v],1)):(m[v]=Mi(C),m[v].c(),Y(m[v],1),m[v].m(r,null))}for(Pe(),v=k.length;v<m.length;v+=1)b(v);We()}(!l||d[0]&2)&&z(r,"padding-top",p[1]+"px"),(!l||d[0]&4)&&z(r,"padding-bottom",p[2]+"px"),(!l||d[0]&8)&&z(r,"height",p[3]+"px"),(!l||d[0]&128)&&U(s,"bottom-scrollbar-visible",p[7]),(!l||d[0]&1)&&z(e,"width",p[0]+"px")},i(p){if(!l){for(let d=0;d<k.length;d+=1)Y(m[d]);l=!0}},o(p){m=m.filter(Boolean);for(let d=0;d<m.length;d+=1)F(m[d]);l=!1},d(p){p&&D(e),nt(w,p),n[22](null),nt(m,p),a=!1,c()}}}function Ni(n){n.forEach(e=>{e.children&&Ni(e.children),e.hidden=!0})}function xi(n,e=!1){n.forEach(t=>{t.children&&xi(t.children,!t.expanded),t.hidden=e})}function zl(n,e,t){let i,s,o,r,l,a,c;const f=Ut();let{tableWidth:w}=e,{paddingTop:k}=e,{paddingBottom:m}=e,{rowContainerHeight:b}=e,{visibleRows:p}=e,{tableHeaders:d=[{title:"Name",property:"label",width:100}]}=e;const{from:v,to:C,width:y,visibleWidth:R,headerHeight:j}=oe("dimensions");A(n,y,S=>t(21,s=S)),A(n,R,S=>t(20,i=S)),A(n,j,S=>t(8,c=S));const{rowPadding:x,rowHeight:B}=oe("options");A(n,x,S=>t(23,o=S)),A(n,B,S=>t(26,a=S));const{rowStore:J,taskStore:ee}=oe("dataStore");A(n,J,S=>t(25,l=S)),A(n,ee,S=>t(24,r=S));const{scrollables:X}=oe("gantt");_n(()=>{f("init",{module:this})});let fe;function Oe(S){X.push({node:S,orientation:"vertical"});function V(le){t(6,fe.scrollLeft=S.scrollLeft,fe)}return S.addEventListener("scroll",V),{destroy(){S.removeEventListener("scroll",V)}}}let we;function Re(S){const V=S.detail.row;V.expanded=!0,V.children&&xi(V.children),ze()}function ne(S){const V=S.detail.row;V.expanded=!1,V.children&&Ni(V.children),ze()}function ze(){let S=0;l.ids.forEach(V=>{l.entities[V].hidden||(ue(J,l.entities[V].y=S,l),S+=a)}),r.ids.forEach(V=>{const le=r.entities[V],Be=l.entities[le.model.resourceId];ue(ee,r.entities[V].top=Be.y+o,r)})}let be;function G(S){at[S?"unshift":"push"](()=>{fe=S,t(6,fe)})}return n.$$set=S=>{"tableWidth"in S&&t(0,w=S.tableWidth),"paddingTop"in S&&t(1,k=S.paddingTop),"paddingBottom"in S&&t(2,m=S.paddingBottom),"rowContainerHeight"in S&&t(3,b=S.rowContainerHeight),"visibleRows"in S&&t(4,p=S.visibleRows),"tableHeaders"in S&&t(5,d=S.tableHeaders)},n.$$.update=()=>{if(n.$$.dirty[0]&32){let S=0;d.forEach(V=>{S+=V.width}),t(19,we=S)}n.$$.dirty[0]&3670017&&t(7,be=s>i&&we<=w)},[w,k,m,b,p,d,fe,be,c,y,R,j,x,B,J,ee,Oe,Re,ne,we,i,s,G]}class Dl extends Se{constructor(e){super(),Ce(this,e,zl,Rl,ve,{tableWidth:0,paddingTop:1,paddingBottom:2,rowContainerHeight:3,visibleRows:4,tableHeaders:5},null,[-1,-1])}}var Xl=Dl,Ml=".sg-dependency.svelte-12syssu{position:absolute;width:100%;height:100%}.arrow.svelte-12syssu{position:absolute;left:0px;pointer-events:none}.select-area.svelte-12syssu{pointer-events:visible;position:absolute}";ye(Ml);function Ei(n){let e,t,i,s;return{c(){e=W("div"),t=Jt("svg"),i=Jt("path"),s=Jt("path"),_(i,"class","select-area svelte-12syssu"),_(i,"d",n[6]),_(i,"stroke",n[1]),_(i,"stroke-width",n[2]),_(i,"fill","transparent"),_(s,"d",n[5]),_(s,"fill",n[1]),_(t,"class","arrow svelte-12syssu"),_(t,"xmlns","http://www.w3.org/2000/svg"),_(t,"shape-rendering","crispEdges"),_(t,"height","100%"),_(t,"width","100%"),_(e,"class","sg-dependency svelte-12syssu"),z(e,"left","0"),z(e,"top","0"),_(e,"data-dependency-id",n[0])},m(o,r){E(o,e,r),L(e,t),L(t,i),L(t,s)},p(o,r){r&64&&_(i,"d",o[6]),r&2&&_(i,"stroke",o[1]),r&4&&_(i,"stroke-width",o[2]),r&32&&_(s,"d",o[5]),r&2&&_(s,"fill",o[1]),r&1&&_(e,"data-dependency-id",o[0])},d(o){o&&D(e)}}}function El(n){let e,t=(!n[3]&&!n[4]||n[3]!==n[4])&&Ei(n);return{c(){t&&t.c(),e=re()},m(i,s){t&&t.m(i,s),E(i,e,s)},p(i,[s]){!i[3]&&!i[4]||i[3]!==i[4]?t?t.p(i,s):(t=Ei(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:K,o:K,d(i){i&&D(e),t&&t.d(i)}}}const xe=12,et=5;function Hl(n,e,t){let i,s;const{rowStore:o,taskStore:r}=oe("dataStore");A(n,o,C=>t(13,i=C)),A(n,r,C=>t(14,s=C));let{id:l}=e,{fromId:a}=e,{toId:c}=e,{stroke:f="red"}=e,{strokeWidth:w=2}=e,k,m,b,p,d,v;return n.$$set=C=>{"id"in C&&t(0,l=C.id),"fromId"in C&&t(9,a=C.fromId),"toId"in C&&t(10,c=C.toId),"stroke"in C&&t(1,f=C.stroke),"strokeWidth"in C&&t(2,w=C.strokeWidth)},n.$$.update=()=>{if(n.$$.dirty&32344){t(11,b=s.entities[a]),t(3,p=i.entities[b.model.resourceId].hidden),t(12,d=s.entities[c]),t(4,v=i.entities[d.model.resourceId].hidden);let C=b.top+b.height/2,y=b.left+b.width,R=d.top+d.height/2,j=d.left,x=j-y,B=R-C;p?(t(6,m=`M${j} ${R}`),y+xe>=j&&C!=R?t(6,m+=`L ${j+1.5-xe} ${R}`):t(6,m+=`L ${j+1.5-x/2} ${R}`),t(6,m+="m -2 -2 a 2 2 0 1 1 0 4 a 2 2 0 1 1 0 -4"),t(5,k=`M${d.left-et}  ${d.top+d.height/2-et} 
                            L${d.left} ${d.top+d.height/2} 
                            L${d.left-et} ${d.top+d.height/2+et} Z`)):v?(t(6,m=`M${y} ${C}`),y+xe>=j&&C!=R?t(6,m+=`L ${y+1.5+xe} ${C}`):t(6,m+=`L ${y+1.5+x/2} ${C}`),t(6,m+="m -2 -2 a 2 2 0 1 1 0 4 a 2 2 0 1 1 0 -4"),t(5,k="")):!p&&!v&&(t(6,m=`M${y} ${C}`),y+xe>=j&&C!=R?t(6,m+=`L ${y+xe} ${C} 
                            L ${y+xe} ${C+B/2}
                            L ${j-xe} ${C+B/2}
                            L ${j-xe} ${R}
                            L ${j-2} ${R}`):t(6,m+=`L ${y+x/2} ${C} 
                            L ${y+x/2} ${R}
                            L ${j-2} ${R}`),t(5,k=`M${d.left-et} ${d.top+d.height/2-et} 
                            L${d.left} ${d.top+d.height/2} 
                            L${d.left-et} ${d.top+d.height/2+et} Z`))}},[l,f,w,p,v,k,m,o,r,a,c,b,d,i,s]}class Pl extends Se{constructor(e){super(),Ce(this,e,Hl,El,ve,{id:0,fromId:9,toId:10,stroke:1,strokeWidth:2})}}var Wl=".dependency-container.svelte-epxabx{position:absolute;width:100%;height:100%;pointer-events:none;top:0;float:left;overflow:hidden;z-index:0}";ye(Wl);function Hi(n,e,t){const i=n.slice();return i[7]=e[t],i}function Pi(n,e){let t,i,s;const o=[e[7]];let r={};for(let l=0;l<o.length;l+=1)r=Ge(r,o[l]);return i=new Pl({props:r}),{key:n,first:null,c(){t=re(),ke(i.$$.fragment),this.first=t},m(l,a){E(l,t,a),ge(i,l,a),s=!0},p(l,a){e=l;const c=a&1?it(o,[st(e[7])]):{};i.$set(c)},i(l){s||(Y(i.$$.fragment,l),s=!0)},o(l){F(i.$$.fragment,l),s=!1},d(l){l&&D(t),me(i,l)}}}function Bl(n){let e,t=[],i=new Map,s,o=te(n[0]);const r=l=>l[7].id;for(let l=0;l<o.length;l+=1){let a=Hi(n,o,l),c=r(a);i.set(c,t[l]=Pi(c,a))}return{c(){e=W("div");for(let l=0;l<t.length;l+=1)t[l].c();_(e,"class","dependency-container svelte-epxabx")},m(l,a){E(l,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);s=!0},p(l,[a]){a&1&&(o=te(l[0]),Pe(),t=Wt(t,a,r,1,l,o,i,e,Pt,Pi,null,Hi),We())},i(l){if(!s){for(let a=0;a<o.length;a+=1)Y(t[a]);s=!0}},o(l){for(let a=0;a<t.length;a+=1)F(t[a]);s=!1},d(l){l&&D(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Ll(n,e,t){let i,s;const{visibleHeight:o}=oe("dimensions");A(n,o,f=>t(5,i=f));const{taskStore:r}=oe("dataStore");A(n,r,f=>t(6,s=f));let{paddingTop:l}=e,{dependencies:a=[]}=e,c=[];return n.$$set=f=>{"paddingTop"in f&&t(3,l=f.paddingTop),"dependencies"in f&&t(4,a=f.dependencies)},n.$$.update=()=>{if(n.$$.dirty&120){const f=[];for(let w=0;w<a.length;w++){const k=a[w],m=s.entities,b=m[k.fromId],p=m[k.toId];b&&p&&Math.min(b.top,p.top)<=l+i&&Math.max(b.top,p.top)>=l&&f.push(k)}t(0,c=f)}},[c,o,r,l,a,i,s]}class Al extends Se{constructor(e){super(),Ce(this,e,Ll,Bl,ve,{paddingTop:3,dependencies:4})}}const Fl=Al,Ol={enabled:!0,elementContent:()=>{const n=document.createElement("div");return n.innerHTML="New Task",Object.assign(n.style,{position:"absolute",background:"#eee",padding:"0.5em 1em",fontSize:"12px",pointerEvents:"none"}),n}};class Nl{constructor(e,t){M(this,"draggable");M(this,"element");M(this,"options");this.options=Object.assign({},Ol,t),this.draggable=new on(e,{onDrag:this.onDrag.bind(this),dragAllowed:()=>this.options.enabled,resizeAllowed:!1,onDrop:this.onDrop.bind(this),container:document.body,getX:i=>i.pageX,getY:i=>i.pageY,getWidth:()=>0})}onDrag({x:e,y:t}){this.element||(this.element=this.options.elementContent(),document.body.appendChild(this.element),this.options.dragging=!0),this.element.style.top=t+"px",this.element.style.left=e+"px"}onDrop(e){var s,o,r,l;const t=this.options.gantt,i=t.dndManager.getTarget("row",e.mouseEvent);if(i){const a=kt(t.getRowContainer(),e.mouseEvent),c=t.utils.getDateByPosition(a.x);(o=(s=this.options).onsuccess)==null||o.call(s,i,c,t)}else(l=(r=this.options).onfail)==null||l.call(r);document.body.removeChild(this.element),this.options.dragging=!1,this.element=null}}class xl{constructor(e){M(this,"moment");this.moment=e}format(e,t){return this.moment(e).format(t)}roundTo(e,t,i){const s=this.moment(e);return Yl(s,i,t),s.valueOf()}}const Wi={hour:"hours",minute:"minutes",second:"seconds",millisecond:"milliseconds"};function Yl(n,e,t,i="round"){e===1&&t==="day"&&(e=24,t="hours"),Wi[t]&&(t=Wi[t]);const s={hours:24,minutes:60,seconds:60,milliseconds:1e3};s[t]||console.warn(`Rounding dates by ${t} is not supported`);let o=0,r=!1,l=1,a;for(const c in s)c===t?(o=n.get(t),a=s[c],r=!0):r&&(l*=s[c],o+=n.get(c)/l,n.set(c,0));return o=Math[i](o/e)*e,o=Math.min(o,a),n.set(t,o),n}const Gl=sl;export{xl as M,Xl as S,Gl as a,Fl as b,Nl as c,Ul as g};

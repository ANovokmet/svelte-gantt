{"version":3,"file":"svelteGanttExternal.js","sources":["../../src/utils/domUtils.ts","../../src/core/constants.ts","../../src/core/drag/draggable.ts","../../src/modules/external/External.ts"],"sourcesContent":["export function isLeftClick(event) {\r\n    return event.which === 1;\r\n}\r\n\r\n/**\r\n * Gets mouse position within an element\r\n * @param node \r\n * @param event \r\n */\r\nexport function getRelativePos(node: HTMLElement, event: MouseEvent) {\r\n    const rect = node.getBoundingClientRect();\r\n    const x = event.clientX - rect.left; //x position within the element.\r\n    const y = event.clientY - rect.top;  //y position within the element.\r\n    return {\r\n        x: x,\r\n        y: y\r\n    }\r\n}\r\n\r\n/**\r\n * Adds an event listener that triggers once.\r\n * @param target \r\n * @param type \r\n * @param listener \r\n * @param addOptions \r\n * @param removeOptions \r\n */\r\nexport function addEventListenerOnce(target: HTMLElement | Window, type: string, listener, addOptions?, removeOptions?) {\r\n    target.addEventListener(type, function fn(event) {\r\n        target.removeEventListener(type, fn, removeOptions);\r\n        listener.apply(this, arguments, addOptions);\r\n    });\r\n}\r\n\r\n/**\r\n * Sets the cursor on an element. Globally by default.\r\n * @param cursor \r\n * @param node \r\n */\r\nexport function setCursor(cursor: string, node: HTMLElement = document.body) {\r\n    node.style.cursor = cursor;\r\n}\r\n\r\nexport function sortFn(prop: (element: any) => any) {\r\n    return function (a, b) {\r\n        if (prop(a) < prop(b)) {\r\n            return -1;\r\n        } else if (prop(a) > prop(b)) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n}\r\n\r\nexport function debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function () {\r\n        var context = this, args = arguments;\r\n        var later = function () {\r\n            timeout = null;\r\n            if (!immediate) func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) func.apply(context, args);\r\n    };\r\n};\r\n\r\nexport function throttle(func, limit) {\r\n    var wait = false;\r\n    return function () {\r\n        if (!wait) {\r\n\r\n            func.apply(null, arguments);\r\n            wait = true;\r\n            setTimeout(function () {\r\n                wait = false;\r\n            }, limit);\r\n        }\r\n    }\r\n}","export const V_SCROLLBAR_WIDTH = 17;\r\nexport const H_SCROLLBAR_WIDTH = 17;\r\nexport const MIN_DRAG_X = 2;\r\nexport const MIN_DRAG_Y = 2;","import { isLeftClick, addEventListenerOnce, getRelativePos } from \"src/utils/domUtils\";\r\nimport { PositionProvider, DraggableSettings } from \"./interfaces\";\r\nimport { SvelteGantt } from \"../gantt\";\r\nimport { SvelteRow } from \"../row\";\r\nimport { MIN_DRAG_Y, MIN_DRAG_X } from \"../constants\";\r\n\r\nexport function draggable(node, settings: DraggableSettings, provider: PositionProvider) {\r\n\r\n    const { onDown, onResize, onDrag, onDrop, dragAllowed, resizeAllowed } = settings;\r\n\r\n    let mouseStartPosX, mouseStartPosY;\r\n    let mouseStartRight;\r\n    let direction;\r\n    let dragging = false, resizing = false;\r\n    \r\n    let initialX, initialY, initialW;\r\n    let resizeTriggered = false;\r\n\r\n    const onmousedown = (event: MouseEvent) => {\r\n        if(!isLeftClick(event)){\r\n            return;\r\n        }\r\n\r\n        const { posX, posY } = provider.getPos(event);\r\n        const widthT = provider.getWidth(event);\r\n\r\n\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        \r\n        const canDrag = typeof(dragAllowed) === 'function' ? dragAllowed() : dragAllowed\r\n        const canResize = typeof(resizeAllowed) === 'function' ? resizeAllowed() : resizeAllowed\r\n        if(canDrag || canResize){\r\n\r\n            initialX = event.clientX;\r\n            initialY = event.clientY;\r\n\r\n\r\n            mouseStartPosX = getRelativePos(settings.container, event).x - posX;\r\n            mouseStartPosY = getRelativePos(settings.container, event).y - posY;\r\n            mouseStartRight = posX + widthT;\r\n\r\n            if(canResize && mouseStartPosX < settings.resizeHandleWidth) {\r\n                direction = 'left';\r\n                resizing = true;\r\n                onDown({\r\n                    posX,\r\n                    widthT,\r\n                    posY,\r\n                    resizing: true\r\n                });\r\n            }\r\n            else if(canResize && mouseStartPosX > widthT - settings.resizeHandleWidth) {\r\n                direction = 'right';\r\n                resizing = true;\r\n                onDown({\r\n                    posX,\r\n                    widthT,\r\n                    posY,\r\n                    resizing: true\r\n                });\r\n            }\r\n            else if(canDrag) {\r\n                dragging = true;\r\n                onDown({\r\n                    posX,\r\n                    widthT,\r\n                    posY,\r\n                    dragging: true\r\n                });\r\n            }\r\n\r\n            window.addEventListener('mousemove', onmousemove, false);\r\n            addEventListenerOnce(window, 'mouseup', onmouseup);\r\n        }\r\n    }\r\n    \r\n    const onmousemove = (event: MouseEvent) => {\r\n\r\n        if(!resizeTriggered){\r\n            if(Math.abs(event.clientX - initialX) > MIN_DRAG_X || Math.abs(event.clientY - initialY) > MIN_DRAG_Y){\r\n                console.log('trigger resize')\r\n                resizeTriggered = true;\r\n            }else{\r\n                return;\r\n            }\r\n        }\r\n\r\n        event.preventDefault();\r\n        if(resizing) {\r\n            const mousePos = getRelativePos(settings.container, event);\r\n            const { posX } = provider.getPos(event);\r\n            const widthT = provider.getWidth(event);\r\n\r\n            if(direction === 'left') { //resize ulijevo\r\n                if(mousePos.x > posX + widthT) {\r\n                    direction = 'right';\r\n                    onResize({\r\n                        posX: mouseStartRight,\r\n                        widthT: mouseStartRight - mousePos.x\r\n                    });\r\n                    mouseStartRight = mouseStartRight + widthT;\r\n                }\r\n                else{\r\n                    onResize({\r\n                        posX: mousePos.x,\r\n                        widthT: mouseStartRight - mousePos.x\r\n                    });\r\n                }\r\n            }\r\n            else if(direction === 'right') {//resize desno\r\n                if(mousePos.x <= posX) {\r\n                    direction = 'left';\r\n                    onResize({\r\n                        posX: mousePos.x,\r\n                        widthT: posX - mousePos.x\r\n                    });\r\n                    mouseStartRight = posX;\r\n                }\r\n                else {\r\n                    onResize({\r\n                        posX,\r\n                        widthT: mousePos.x - posX\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        // mouseup\r\n        if(dragging) {\r\n            const mousePos = getRelativePos(settings.container, event);\r\n            onDrag({\r\n                posX: mousePos.x - mouseStartPosX,\r\n                posY: mousePos.y - mouseStartPosY\r\n            });\r\n        }\r\n    }\r\n\r\n    const onmouseup = (event: MouseEvent) => {\r\n        const { posX, posY } = provider.getPos(event);\r\n        const widthT = provider.getWidth(event);\r\n        \r\n        if(resizeTriggered){\r\n            onDrop({\r\n                posX, \r\n                posY,\r\n                widthT,\r\n                event,\r\n                dragging,\r\n                resizing\r\n            });\r\n        }\r\n\r\n        dragging = false;\r\n        resizing = false;\r\n        direction = null;\r\n        resizeTriggered = false;\r\n\r\n        window.removeEventListener('mousemove', onmousemove, false);\r\n    }\r\n\r\n    node.addEventListener('mousedown', onmousedown, false);\r\n\r\n    return {\r\n        destroy() {\r\n            node.removeEventListener('mousedown', onmousedown, false);\r\n            node.removeEventListener('mousemove', onmousemove, false);\r\n            node.removeEventListener('mouseup', onmouseup, false);\r\n        }\r\n    }\r\n}\r\n\r\nexport type DropHandler = (event: MouseEvent) => any;\r\n\r\nexport class DragDropManager\r\n{\r\n    gantt: SvelteGantt;\r\n    handlerMap: {[key:string]: DropHandler} = {};\r\n\r\n    constructor(gantt) {\r\n        this.gantt = gantt;\r\n        \r\n        this.register('row', (event) => {\r\n            let elements = document.elementsFromPoint(event.clientX, event.clientY);\r\n            let rowElement = elements.find((element) => !!element.getAttribute(\"data-row-id\"));\r\n            if(rowElement !== undefined) {\r\n                const rowId = parseInt(rowElement.getAttribute(\"data-row-id\"));\r\n                const { rowMap } = this.gantt.store.get();\r\n                const targetRow = rowMap[rowId];\r\n\r\n                if(targetRow.model.enableDragging){\r\n                    return targetRow;\r\n                }\r\n            }\r\n            return null;\r\n        });\r\n    }\r\n\r\n    register(target: string, handler: DropHandler) {\r\n        this.handlerMap[target] = handler;\r\n    }\r\n\r\n    getTarget(target: string, event: MouseEvent): SvelteRow {\r\n        //const rowCenterX = this.root.refs.mainContainer.getBoundingClientRect().left + this.root.refs.mainContainer.getBoundingClientRect().width / 2;\r\n        var handler = this.handlerMap[target];\r\n        if(handler){\r\n            return handler(event);\r\n        }\r\n    }\r\n}","import { addEventListenerOnce, getRelativePos } from \"src/utils/domUtils\";\r\nimport { draggable } from \"src/core/drag\";\r\nimport { SvelteGantt } from \"src/core/gantt\";\r\nimport { SvelteRow } from \"src/core/row\";\r\n\r\nlet SvelteGanttExternal;\r\n\r\ninterface DragOptions {\r\n    gantt: SvelteGantt;\r\n    elementContent(): any;\r\n    dragging: boolean;\r\n    enabled: boolean;\r\n    onsuccess(target: SvelteRow, date, gantt: SvelteGantt): void;\r\n    onfail(): void;\r\n}\r\n\r\nfunction drag(node, data: DragOptions) {\r\n    const { gantt } = data;\r\n    const windowElement = window;\r\n\r\n\r\n    const { rowContainerElement } = gantt.store.get();\r\n\r\n    let element = null;\r\n\r\n    return draggable(node, {\r\n        onDown: ({ posX, posY }) => {\r\n        },\r\n        onDrag: ({ posX, posY }) => {\r\n\r\n            if(!element) {\r\n                element = data.elementContent();\r\n                document.body.appendChild(element);\r\n                data.dragging = true;\r\n            }\r\n\r\n            Object.assign(element.style, {\r\n                top: posY + 'px',\r\n                left: posX + 'px'\r\n            });\r\n        },\r\n        dragAllowed: () => data.enabled,\r\n        resizeAllowed: false,\r\n        onDrop: ({ posX, posY, event }) => {\r\n            console.log('SUCC')\r\n            console.log(posX, posY)\r\n\r\n            const targetRow = gantt.dndManager.getTarget('row', event);\r\n            if (targetRow) {\r\n\r\n                const mousePos = getRelativePos(rowContainerElement, event);\r\n                const date = gantt.utils.getDateByPosition(mousePos.x);\r\n\r\n                data.onsuccess(targetRow, date, gantt);\r\n            }\r\n            else {\r\n                data.onfail();\r\n            }\r\n\r\n            document.body.removeChild(element);\r\n            data.dragging = false;\r\n            element = null;\r\n        },\r\n        container: document.body,\r\n    },\r\n        {\r\n            getPos: (event: MouseEvent) => {\r\n                console.log(event.clientX, event.clientY)\r\n                return {\r\n                    posX: event.pageX,\r\n                    posY: event.pageY\r\n                };\r\n            },\r\n            getWidth: () => 0\r\n        }\r\n    );\r\n}\r\n\r\nSvelteGanttExternal = {};\r\n\r\nSvelteGanttExternal.defaults = {\r\n    // if enabled\r\n    enabled: true,\r\n    // called when dragged over a row \r\n    onsuccess: (targetRow, dropDate, gantt) => { },\r\n    // called when dragged outside main gantt area\r\n    onfail: () => { },\r\n    // factory function, creates HTMLElement \r\n    elementContent: () => {\r\n        const element = document.createElement('div');\r\n        element.innerHTML = 'New Task';\r\n        Object.assign(element.style, {\r\n            position: 'absolute',\r\n            background: '#eee',\r\n            padding: '0.5em 1em',\r\n            fontSize: '12px',\r\n            pointerEvents: 'none',\r\n        });\r\n        return element;\r\n    },\r\n    // gantt to bind this draggable to\r\n    gantt: null\r\n}\r\n\r\nSvelteGanttExternal.create = function (element: HTMLElement, options) {\r\n    const data = Object.assign({}, SvelteGanttExternal.defaults, options);\r\n\r\n    drag(element, data);\r\n    /*return new SvelteGanttExternal({\r\n        target: element,\r\n    });*/\r\n    return data;\r\n}\r\n\r\nexport default SvelteGanttExternal;"],"names":[],"mappings":"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"}
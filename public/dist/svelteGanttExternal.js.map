{"version":3,"file":"svelteGanttExternal.js","sources":["../../src/utils/domUtils.ts","../../src/core/constants.ts","../../src/core/drag/draggable.ts","../../src/modules/external/External.ts"],"sourcesContent":["export function isLeftClick(event) {\r\n    return event.which === 1;\r\n}\r\n\r\n/**\r\n * Gets mouse position within an element\r\n * @param node \r\n * @param event \r\n */\r\nexport function getRelativePos(node: HTMLElement, event: MouseEvent) {\r\n    const rect = node.getBoundingClientRect();\r\n    const x = event.clientX - rect.left; //x position within the element.\r\n    const y = event.clientY - rect.top;  //y position within the element.\r\n    return {\r\n        x: x,\r\n        y: y\r\n    }\r\n}\r\n\r\n/**\r\n * Adds an event listener that triggers once.\r\n * @param target \r\n * @param type \r\n * @param listener \r\n * @param addOptions \r\n * @param removeOptions \r\n */\r\nexport function addEventListenerOnce(target: HTMLElement | Window, type: string, listener, addOptions?, removeOptions?) {\r\n    target.addEventListener(type, function fn(event) {\r\n        target.removeEventListener(type, fn, removeOptions);\r\n        listener.apply(this, arguments, addOptions);\r\n    });\r\n}\r\n\r\n/**\r\n * Sets the cursor on an element. Globally by default.\r\n * @param cursor \r\n * @param node \r\n */\r\nexport function setCursor(cursor: string, node: HTMLElement = document.body) {\r\n    node.style.cursor = cursor;\r\n}\r\n\r\nexport function sortFn(prop: (element: any) => any) {\r\n    return function (a, b) {\r\n        if (prop(a) < prop(b)) {\r\n            return -1;\r\n        } else if (prop(a) > prop(b)) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n}\r\n\r\nexport function debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function () {\r\n        var context = this, args = arguments;\r\n        var later = function () {\r\n            timeout = null;\r\n            if (!immediate) func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) func.apply(context, args);\r\n    };\r\n};\r\n\r\nexport function throttle(func, limit) {\r\n    var wait = false;\r\n    return function () {\r\n        if (!wait) {\r\n\r\n            func.apply(null, arguments);\r\n            wait = true;\r\n            setTimeout(function () {\r\n                wait = false;\r\n            }, limit);\r\n        }\r\n    }\r\n}","export const V_SCROLLBAR_WIDTH = 17;\r\nexport const H_SCROLLBAR_WIDTH = 17;\r\nexport const MIN_DRAG_X = 2;\r\nexport const MIN_DRAG_Y = 2;","import { isLeftClick, addEventListenerOnce, getRelativePos } from \"src/utils/domUtils\";\r\nimport { PositionProvider, DraggableSettings } from \"./interfaces\";\r\nimport { SvelteGantt } from \"src/core/gantt\";\r\nimport { SvelteRow } from \"src/core/row\";\r\nimport { MIN_DRAG_Y, MIN_DRAG_X } from \"src/core/constants\";\r\n\r\n/**\r\n * Applies dragging interaction to gantt elements\r\n */\r\nexport class Draggable {\r\n    mouseStartPosX: number;\r\n    mouseStartPosY: number;\r\n    mouseStartRight: number;\r\n    direction: 'left' | 'right';\r\n    dragging = false;\r\n    resizing = false;\r\n    \r\n    initialX: number;\r\n    initialY: number;\r\n    initialW: number;\r\n    resizeTriggered = false;\r\n\r\n    settings: DraggableSettings;\r\n    provider: PositionProvider;\r\n    node: HTMLElement;\r\n    \r\n    constructor(node: HTMLElement, settings: DraggableSettings, provider: PositionProvider) {\r\n        this.settings = settings;\r\n        this.provider = provider;\r\n        this.node = node;\r\n\r\n        node.addEventListener('mousedown', this.onmousedown, false);\r\n    }\r\n\r\n    get dragAllowed() {\r\n        if(typeof(this.settings.dragAllowed) === 'function') {\r\n            return this.settings.dragAllowed();\r\n        } else {\r\n            return this.settings.dragAllowed;\r\n        }\r\n    }\r\n\r\n    get resizeAllowed() {\r\n        if(typeof(this.settings.resizeAllowed) === 'function') {\r\n            return this.settings.resizeAllowed();\r\n        } else {\r\n            return this.settings.resizeAllowed;\r\n        }\r\n    }\r\n\r\n    onmousedown = (event: MouseEvent) => {\r\n        if(!isLeftClick(event)){\r\n            return;\r\n        }\r\n\r\n        const { x, y } = this.provider.getPos(event);\r\n        const currWidth = this.provider.getWidth(event);\r\n\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n        \r\n        const canDrag = this.dragAllowed;\r\n        const canResize = this.resizeAllowed;\r\n        if(canDrag || canResize){\r\n\r\n            this.initialX = event.clientX;\r\n            this.initialY = event.clientY;\r\n\r\n\r\n            this.mouseStartPosX = getRelativePos(this.settings.container, event).x - x;\r\n            this.mouseStartPosY = getRelativePos(this.settings.container, event).y - y;\r\n            this.mouseStartRight = x + currWidth;\r\n\r\n            if(canResize && this.mouseStartPosX < this.settings.resizeHandleWidth) {\r\n                this.direction = 'left';\r\n                this.resizing = true;\r\n                this.settings.onDown({\r\n                    x,\r\n                    currWidth,\r\n                    y,\r\n                    resizing: true\r\n                });\r\n            }\r\n            else if(canResize && this.mouseStartPosX > currWidth - this.settings.resizeHandleWidth) {\r\n                this.direction = 'right';\r\n                this.resizing = true;\r\n                this.settings.onDown({\r\n                    x,\r\n                    currWidth,\r\n                    y,\r\n                    resizing: true\r\n                });\r\n            }\r\n            else if(canDrag) {\r\n                this.dragging = true;\r\n                this.settings.onDown({\r\n                    x,\r\n                    currWidth,\r\n                    y,\r\n                    dragging: true\r\n                });\r\n            }\r\n\r\n            window.addEventListener('mousemove', this.onmousemove, false);\r\n            addEventListenerOnce(window, 'mouseup', this.onmouseup);\r\n        }\r\n    }\r\n    \r\n    onmousemove = (event: MouseEvent) => {\r\n        if(!this.resizeTriggered){\r\n            if(Math.abs(event.clientX - this.initialX) > MIN_DRAG_X || Math.abs(event.clientY - this.initialY) > MIN_DRAG_Y){\r\n                this.resizeTriggered = true;\r\n            }else{\r\n                return;\r\n            }\r\n        }\r\n\r\n        event.preventDefault();\r\n        if(this.resizing) {\r\n            const mousePos = getRelativePos(this.settings.container, event);\r\n            const { x } = this.provider.getPos(event);\r\n            const currWidth = this.provider.getWidth(event);\r\n\r\n            if(this.direction === 'left') { //resize ulijevo\r\n                if(mousePos.x > x + currWidth) {\r\n                    this.direction = 'right';\r\n                    this.settings.onResize({\r\n                        x: this.mouseStartRight,\r\n                        currWidth: this.mouseStartRight - mousePos.x\r\n                    });\r\n                    this.mouseStartRight = this.mouseStartRight + currWidth;\r\n                }\r\n                else{\r\n                    this.settings.onResize({\r\n                        x: mousePos.x,\r\n                        currWidth: this.mouseStartRight - mousePos.x\r\n                    });\r\n                }\r\n            }\r\n            else if(this.direction === 'right') {//resize desno\r\n                if(mousePos.x <= x) {\r\n                    this.direction = 'left';\r\n                    this.settings.onResize({\r\n                        x: mousePos.x,\r\n                        currWidth: x - mousePos.x\r\n                    });\r\n                    this.mouseStartRight = x;\r\n                }\r\n                else {\r\n                    this.settings.onResize({\r\n                        x,\r\n                        currWidth: mousePos.x - x\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        // mouseup\r\n        if(this.dragging) {\r\n            const mousePos = getRelativePos(this.settings.container, event);\r\n            this.settings.onDrag({\r\n                x: mousePos.x - this.mouseStartPosX,\r\n                y: mousePos.y - this.mouseStartPosY\r\n            });\r\n        }\r\n    }\r\n\r\n    onmouseup = (event: MouseEvent) => {\r\n        const { x, y } = this.provider.getPos(event);\r\n        const currWidth = this.provider.getWidth(event);\r\n        \r\n        if(this.resizeTriggered){\r\n            this.settings.onDrop({\r\n                x, \r\n                y,\r\n                currWidth,\r\n                event,\r\n                dragging: this.dragging,\r\n                resizing: this.resizing\r\n            });\r\n        }\r\n\r\n        this.dragging = false;\r\n        this.resizing = false;\r\n        this.direction = null;\r\n        this.resizeTriggered = false;\r\n\r\n        window.removeEventListener('mousemove', this.onmousemove, false);\r\n    }\r\n    \r\n    destroy() {\r\n        this.node.removeEventListener('mousedown', this.onmousedown, false);\r\n        this.node.removeEventListener('mousemove', this.onmousemove, false);\r\n        this.node.removeEventListener('mouseup', this.onmouseup, false);\r\n    }\r\n}","import { getRelativePos } from \"src/utils/domUtils\";\r\nimport { Draggable } from \"src/core/drag\";\r\nimport { SvelteGantt } from \"src/core/gantt\";\r\nimport { SvelteRow } from \"src/core/row\";\r\n\r\nlet SvelteGanttExternal;\r\n\r\ninterface DragOptions {\r\n    gantt: SvelteGantt;\r\n    elementContent(): any;\r\n    dragging: boolean;\r\n    enabled: boolean;\r\n    onsuccess(target: SvelteRow, date, gantt: SvelteGantt): void;\r\n    onfail(): void;\r\n}\r\n\r\nfunction drag(node, data: DragOptions) {\r\n    const { gantt } = data;\r\n    const { rowContainerElement } = gantt.store.get();\r\n\r\n    let element = null;\r\n\r\n    return new Draggable(node, {\r\n        onDown: ({ x, y }) => {\r\n        },\r\n        onDrag: ({ x, y }) => {\r\n\r\n            if(!element) {\r\n                element = data.elementContent();\r\n                document.body.appendChild(element);\r\n                data.dragging = true;\r\n            }\r\n\r\n            Object.assign(element.style, {\r\n                top: y + 'px',\r\n                left: x + 'px'\r\n            });\r\n        },\r\n        dragAllowed: () => data.enabled,\r\n        resizeAllowed: false,\r\n        onDrop: ({ x, y, event }) => {\r\n            const targetRow = gantt.dndManager.getTarget('row', event);\r\n            if (targetRow) {\r\n\r\n                const mousePos = getRelativePos(rowContainerElement, event);\r\n                const date = gantt.utils.getDateByPosition(mousePos.x);\r\n\r\n                data.onsuccess(targetRow, date, gantt);\r\n            }\r\n            else {\r\n                data.onfail();\r\n            }\r\n\r\n            document.body.removeChild(element);\r\n            data.dragging = false;\r\n            element = null;\r\n        },\r\n        container: document.body,\r\n    },\r\n        {\r\n            getPos: (event: MouseEvent) => {\r\n                console.log(event.clientX, event.clientY)\r\n                return {\r\n                    x: event.pageX,\r\n                    y: event.pageY\r\n                };\r\n            },\r\n            getWidth: () => 0\r\n        }\r\n    );\r\n}\r\n\r\nSvelteGanttExternal = {};\r\n\r\nSvelteGanttExternal.defaults = {\r\n    // if enabled\r\n    enabled: true,\r\n    // called when dragged over a row \r\n    onsuccess: (targetRow, dropDate, gantt) => { },\r\n    // called when dragged outside main gantt area\r\n    onfail: () => { },\r\n    // factory function, creates HTMLElement \r\n    elementContent: () => {\r\n        const element = document.createElement('div');\r\n        element.innerHTML = 'New Task';\r\n        Object.assign(element.style, {\r\n            position: 'absolute',\r\n            background: '#eee',\r\n            padding: '0.5em 1em',\r\n            fontSize: '12px',\r\n            pointerEvents: 'none',\r\n        });\r\n        return element;\r\n    },\r\n    // gantt to bind this draggable to\r\n    gantt: null\r\n}\r\n\r\nSvelteGanttExternal.create = function (element: HTMLElement, options) {\r\n    const data = Object.assign({}, SvelteGanttExternal.defaults, options);\r\n\r\n    drag(element, data);\r\n    return data;\r\n}\r\n\r\nexport default SvelteGanttExternal;"],"names":[],"mappings":"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"}